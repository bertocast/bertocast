(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+W7E":function(t,e,n){"use strict";var r=n("Q1FS"),o=n("mbIT"),i=n("pshJ"),a=n("q3Kh");e.fromEventPattern=function t(e,n,s){return s?t(e,n).pipe(a.map(function(t){return o.isArray(t)?s.apply(void 0,t):s(t)})):new r.Observable(function(t){var r,o=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.next(1===e.length?e[0]:e)};try{r=e(o)}catch(e){return void t.error(e)}if(i.isFunction(n))return function(){return n(o,r)}})}},"+Zhm":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("ds6q"),i=n("xHZb"),a=n("zB/H"),s=n("AFwO"),u=n("Mxlh"),l=n("FiyT");e.ReplaySubject=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var o=t.call(this)||this;return o.scheduler=r,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=e<1?1:e,o._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return r(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new c(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,i=r.length;if(this.closed)throw new u.ObjectUnsubscribedError;if(this.isStopped||this.hasError?e=a.Subscription.EMPTY:(this.observers.push(t),e=new l.SubjectSubscription(this,t)),o&&t.add(t=new s.ObserveOnSubscriber(t,o)),n)for(var c=0;c<i&&!t.closed;c++)t.next(r[c]);else for(c=0;c<i&&!t.closed;c++)t.next(r[c].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||i.queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,o=r.length,i=0;i<o&&!(t-r[i].time<n);)i++;return o>e&&(i=Math.max(i,o-e)),i>0&&r.splice(0,i),r},e}(o.Subject);var c=function(t,e){this.time=t,this.value=e}},"0alx":function(t,e,n){"use strict";var r=n("VKeD");e.isIterable=function(t){return t&&"function"==typeof t[r.iterator]}},"0z0v":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}r.prototype=Object.create(Error.prototype),e.EmptyError=r},"1pIY":function(t,e,n){"use strict";var r=n("2tF/");e.async=new(n("NTcF").AsyncScheduler)(r.AsyncAction)},"24jU":function(t,e,n){"use strict";e.errorObject={e:{}}},"2E8i":function(t,e,n){"use strict";e.NEVER=new(n("Q1FS").Observable)(n("w5QO").noop),e.never=function(){return e.NEVER}},"2tF/":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();e.AsyncAction=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(n("Dz+M").Action)},3:function(t,e,n){t.exports=n("zUnb")},"3U0i":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}n.r(e),n.d(e,"TimeoutError",function(){return o}),r.prototype=Object.create(Error.prototype);var o=r},"4mvG":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("FWf1");e.refCount=function(){return function(t){return t.lift(new i(t))}};var i=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new a(t,n),o=e.subscribe(r);return r.closed||(r.connection=n.connect()),o},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(o.Subscriber)},"5Qfn":function(t,e,n){"use strict";var r=n("b/k1"),o=n("aJGj");e.iif=function(t,e,n){return void 0===e&&(e=o.EMPTY),void 0===n&&(n=o.EMPTY),r.defer(function(){return t()?e:n})}},"60iU":function(t,e,n){"use strict";n.r(e),n.d(e,"Notification",function(){return a});var r=n(null),o=n(null),i=n("XlPw"),a=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return Object(i.throwError)(this.error);case"C":return Object(r.a)()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},"6eB1":function(t,e,n){"use strict";var r=n("Q1FS"),o=n("nzqU"),i=n("QtHX"),a=n("zzsZ");e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,s=null,u=t[t.length-1];return o.isScheduler(u)?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof u&&(n=t.pop()),null===s&&1===t.length&&t[0]instanceof r.Observable?t[0]:i.mergeAll(n)(a.fromArray(t,s))}},"6qA3":function(t,e,n){"use strict";var r=n("Q1FS"),o=n("OAkW"),i=n("Z5tI"),a=n("poJ0"),s=n("ozli"),u=n("yRPT"),l=n("90cg"),c=n("GMZp"),p=n("VKeD"),h=n("zfKp");e.subscribeTo=function(t){if(t instanceof r.Observable)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[h.observable])return s.subscribeToObservable(t);if(u.isArrayLike(t))return o.subscribeToArray(t);if(l.isPromise(t))return i.subscribeToPromise(t);if(t&&"function"==typeof t[p.iterator])return a.subscribeToIterable(t);var e=c.isObject(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},"7Qw6":function(t,e,n){"use strict";n.r(e),n.d(e,"using",function(){return a});var r=n(null),o=n(null),i=n(null);function a(t,e){return new r.a(function(n){var r,a;try{r=t()}catch(t){return void n.error(t)}try{a=e(r)}catch(t){return void n.error(t)}var s=(a?Object(o.a)(a):i[!1]).subscribe(n);return function(){s.unsubscribe(),r&&r.unsubscribe()}})}},"7RJT":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("ds6q"),i=n("Mxlh");e.BehaviorSubject=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(o.Subject)},"909l":function(t,e,n){"use strict";n.r(e),n.d(e,"zip",function(){return c}),n.d(e,"ZipOperator",function(){return p}),n.d(e,"ZipSubscriber",function(){return h});var r=n(null),o=n(null),i=n(null),a=n(null),s=n(null),u=n(null),l=n(null);function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),Object(o.a)(t,void 0).lift(new p(n))}var p=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.resultSelector))},t}(),h=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var o=t.call(this,e)||this;return o.iterators=[],o.active=0,o.resultSelector="function"==typeof n?n:null,o.values=r,o}return r.c(e,t),e.prototype._next=function(t){var e=this.iterators;Object(i.a)(t)?e.push(new d(t)):e.push("function"==typeof t[l.a]?new f(t[l.a]()):new m(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++)if("function"==typeof(a=t[r]).hasValue&&!a.hasValue())return;var o=!1,i=[];for(r=0;r<e;r++){var a,s=(a=t[r]).next();if(a.hasCompleted()&&(o=!0),s.done)return void n.complete();i.push(s.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),o&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(a.a),f=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),d=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[l.a]=function(){return this},t.prototype.next=function(t){var e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),m=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.parent=n,o.observable=r,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return r.c(e,t),e.prototype[l.a]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,o){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return Object(u.a)(this,this.observable,this,e)},e}(s.a)},"90cg":function(t,e,n){"use strict";e.isPromise=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},"9AGB":function(t,e,n){"use strict";var r=n("w5QO");function o(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:r.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(t)},e.pipeFromArray=o},AFwO:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("FWf1"),i=n("xKqS");e.observeOn=function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new a(t,e))}};var a=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.scheduler,this.delay))},t}();e.ObserveOnOperator=a;var s=function(t){function e(e,n,r){void 0===r&&(r=0);var o=t.call(this,e)||this;return o.scheduler=n,o.delay=r,o}return r(e,t),e.dispatch=function(t){t.notification.observe(t.destination),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new u(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(i.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(i.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(i.Notification.createComplete())},e}(o.Subscriber);e.ObserveOnSubscriber=s;var u=function(t,e){this.notification=t,this.destination=e};e.ObserveOnMessage=u},AmbE:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("zzsZ"),i=n("mbIT"),a=n("FWf1"),s=n("Y4kR"),u=n("cSoz"),l=n("VKeD");e.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),o.fromArray(t,void 0).lift(new c(n))};var c=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new p(t,this.resultSelector))},t}();e.ZipOperator=c;var p=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var o=t.call(this,e)||this;return o.iterators=[],o.active=0,o.resultSelector="function"==typeof n?n:null,o.values=r,o}return r(e,t),e.prototype._next=function(t){var e=this.iterators;i.isArray(t)?e.push(new f(t)):e.push("function"==typeof t[l.iterator]?new h(t[l.iterator]()):new d(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++)if("function"==typeof(a=t[r]).hasValue&&!a.hasValue())return;var o=!1,i=[];for(r=0;r<e;r++){var a,s=(a=t[r]).next();if(a.hasCompleted()&&(o=!0),s.done)return void n.complete();i.push(s.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),o&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(a.Subscriber);e.ZipSubscriber=p;var h=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),f=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[l.iterator]=function(){return this},t.prototype.next=function(t){var e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),d=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.parent=n,o.observable=r,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return r(e,t),e.prototype[l.iterator]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,o){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return u.subscribeToResult(this,this.observable,this,e)},e}(s.OuterSubscriber)},CIkO:function(t,e,n){"use strict";var r=n("Q1FS"),o=n("1pIY"),i=n("p0+S");function a(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}e.interval=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=o.async),(!i.isNumeric(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=o.async),new r.Observable(function(n){return n.add(e.schedule(a,t,{subscriber:n,counter:0,period:t})),n})}},Ceu0:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("ds6q"),i=n("Q1FS"),a=n("zB/H"),s=n("4mvG"),u=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.Subscription).add(this.source.subscribe(new c(this.getSubject(),this))),t.closed?(this._connection=null,t=a.Subscription.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return s.refCount()(this)},e}(i.Observable);e.ConnectableObservable=u;var l=u.prototype;e.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:l._subscribe},_isComplete:{value:l._isComplete,writable:!0},getSubject:{value:l.getSubject},connect:{value:l.connect},refCount:{value:l.refCount}};var c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(o.SubjectSubscriber)},"Dz+M":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();e.Action=function(t){function e(e,n){return t.call(this)||this}return r(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n("zB/H").Subscription)},ELzr:function(t,e,n){"use strict";n.r(e),n.d(e,"onErrorResumeNext",function(){return s});var r=n(null),o=n(null),i=n(null),a=n(null);function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return a[!1];var n=t[0],u=t.slice(1);return 1===t.length&&Object(i.a)(n)?s.apply(void 0,n):new r.a(function(t){var e=function(){return t.add(s.apply(void 0,u).subscribe(t))};return Object(o.a)(n).subscribe({next:function(e){t.next(e)},error:e,complete:e})})}},EWOM:function(t,e,n){"use strict";n.r(e),n.d(e,"pairs",function(){return i}),n.d(e,"dispatch",function(){return a});var r=n(null),o=n(null);function i(t,e){return new r.a(e?function(n){var r=Object.keys(t),i=new o.a;return i.add(e.schedule(a,0,{keys:r,index:0,subscriber:n,subscription:i,obj:t})),i}:function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var o=n[r];t.hasOwnProperty(o)&&e.next([o,t[o]])}e.complete()})}function a(t){var e=t.keys,n=t.index,r=t.subscriber,o=t.subscription,i=t.obj;if(!r.closed)if(n<e.length){var a=e[n];r.next([a,i[a]]),o.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:o,obj:i}))}else r.complete()}},FCKb:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("nzqU"),i=n("mbIT"),a=n("Y4kR"),s=n("cSoz"),u=n("zzsZ"),l={};e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return o.isScheduler(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&i.isArray(t[0])&&(t=t[0]),u.fromArray(t,r).lift(new c(n))};var c=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new p(t,this.resultSelector))},t}();e.CombineLatestOperator=c;var p=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r(e,t),e.prototype._next=function(t){this.values.push(l),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(s.subscribeToResult(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,o){var i=this.values,a=this.toRespond?i[n]===l?--this.toRespond:this.toRespond:0;i[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(a.OuterSubscriber);e.CombineLatestSubscriber=p},FHQ3:function(t,e,n){"use strict";var r=n("Q1FS"),o=n("gTqA"),i=n("aJGj");e.using=function(t,e){return new r.Observable(function(n){var r,a;try{r=t()}catch(t){return void n.error(t)}try{a=e(r)}catch(t){return void n.error(t)}var s=(a?o.from(a):i.EMPTY).subscribe(n);return function(){s.unsubscribe(),r&&r.unsubscribe()}})}},FWf1:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("pshJ"),i=n("GiSu"),a=n("zB/H"),s=n("p//D"),u=n("n3uD"),l=n("MkmW"),c=function(t){function e(e,n,r){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,o._parentSubscription=null,arguments.length){case 0:o.destination=i.empty;break;case 1:if(!e){o.destination=i.empty;break}if("object"==typeof e){if(h(e)){var a=e[s.rxSubscriber]();o.syncErrorThrowable=a.syncErrorThrowable,o.destination=a,a._addParentTeardownLogic(o)}else o.syncErrorThrowable=!0,o.destination=new p(o,e);break}default:o.syncErrorThrowable=!0,o.destination=new p(o,e,n,r)}return o}return r(e,t),e.prototype[s.rxSubscriber]=function(){return this},e.create=function(t,n,r){var o=new e(t,n,r);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t),this._unsubscribeParentSubscription())},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete(),this._unsubscribeParentSubscription())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._addParentTeardownLogic=function(t){t!==this&&(this._parentSubscription=this.add(t))},e.prototype._unsubscribeParentSubscription=function(){null!==this._parentSubscription&&this._parentSubscription.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this._parentSubscription=null,this},e}(a.Subscription);e.Subscriber=c;var p=function(t){function e(e,n,r,a){var s,u=t.call(this)||this;u._parentSubscriber=e;var l=u;return o.isFunction(n)?s=n:n&&(s=n.next,r=n.error,a=n.complete,n!==i.empty&&(l=Object.create(n),o.isFunction(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(u))),u._context=l,u._next=s,u._error=r,u._complete=a,u}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;u.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=u.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):l.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;l.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};u.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),u.config.useDeprecatedSynchronousErrorHandling)throw t;l.hostReportError(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!u.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return u.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(l.hostReportError(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(c);function h(t){return t instanceof c||"_addParentTeardownLogic"in t&&t[s.rxSubscriber]}e.SafeSubscriber=p},FiyT:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();e.SubjectSubscription=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return r(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(n("zB/H").Subscription)},"GAJ/":function(t,e,n){"use strict";var r=n("Q1FS"),o=n("gTqA"),i=n("mbIT"),a=n("aJGj");e.onErrorResumeNext=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)return a.EMPTY;var s=e[0],u=e.slice(1);return 1===e.length&&i.isArray(s)?t.apply(void 0,s):new r.Observable(function(e){var n=function(){return e.add(t.apply(void 0,u).subscribe(e))};return o.from(s).subscribe({next:function(t){e.next(t)},error:n,complete:n})})}},GDxn:function(t,e,n){"use strict";n.r(e),n.d(e,"NEVER",function(){return i}),n.d(e,"never",function(){return a});var r=n(null),o=n(null),i=new r.a(o.a);function a(){return i}},GFlT:function(t,e,n){"use strict";n.r(e),n.d(e,"generate",function(){return a});var r=n(null),o=n(null),i=n(null);function a(t,e,n,a,u){var l,c;return 1==arguments.length?(c=t.initialState,e=t.condition,n=t.iterate,l=t.resultSelector||o.a,u=t.scheduler):void 0===a||Object(i.a)(a)?(c=t,l=o.a,u=a):(c=t,l=a),new r.a(function(t){var r=c;if(u)return u.schedule(s,0,{subscriber:t,iterate:n,condition:e,resultSelector:l,state:r});for(;;){if(e){var o=void 0;try{o=e(r)}catch(e){return void t.error(e)}if(!o){t.complete();break}}var i=void 0;try{i=l(r)}catch(e){return void t.error(e)}if(t.next(i),t.closed)break;try{r=n(r)}catch(e){return void t.error(e)}}})}function s(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(t){return void e.error(t)}if(!r)return void e.complete();if(e.closed)return}var o;try{o=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(o),!e.closed))return this.schedule(t)}}},GMZp:function(t,e,n){"use strict";e.isObject=function(t){return null!=t&&"object"==typeof t}},GiSu:function(t,e,n){"use strict";var r=n("n3uD"),o=n("MkmW");e.empty={closed:!0,next:function(t){},error:function(t){if(r.config.useDeprecatedSynchronousErrorHandling)throw t;o.hostReportError(t)},complete:function(){}}},H0e8:function(t,e,n){"use strict";var r=n("O+eH");e.animationFrame=new(n("QY7M").AnimationFrameScheduler)(r.AnimationFrameAction)},H2PQ:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();e.QueueScheduler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(n("NTcF").AsyncScheduler)},HZF8:function(t,e,n){"use strict";var r=n("zfKp");e.isInteropObservable=function(t){return t&&"function"==typeof t[r.observable]}},I65S:function(t,e,n){"use strict";var r=n("nzqU"),o=n("zzsZ"),i=n("aJGj"),a=n("yFcd");e.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(r.isScheduler(n)?t.pop():n=void 0,t.length){case 0:return i.empty(n);case 1:return n?o.fromArray(t,n):a.scalar(t[0]);default:return o.fromArray(t,n)}}},ICFB:function(t,e,n){"use strict";var r=n("Q1FS"),o=n("eYLY"),i=n("q3Kh"),a=n("mbIT"),s=n("nzqU");function u(t){var e=this,n=t.args,r=t.subscriber,i=t.params,a=i.callbackFunc,s=i.context,u=i.scheduler,c=i.subject;if(!c){c=i.subject=new o.AsyncSubject;try{a.apply(s,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.add(u.schedule(l,0,{value:t.length<=1?t[0]:t,subject:c}))}]))}catch(t){c.error(t)}}this.add(c.subscribe(r))}function l(t){var e=t.subject;e.next(t.value),e.complete()}e.bindCallback=function t(e,n,l){if(n){if(!s.isScheduler(n))return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return t(e,l).apply(void 0,r).pipe(i.map(function(t){return a.isArray(t)?n.apply(void 0,t):n(t)}))};l=n}return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i,a=this,s={context:a,subject:i,callbackFunc:e,scheduler:l};return new r.Observable(function(n){if(l)return l.schedule(u,0,{args:t,subscriber:n,params:s});if(!i){i=new o.AsyncSubject;try{e.apply(a,t.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.next(t.length<=1?t[0]:t),i.complete()}]))}catch(t){i.error(t)}}return i.subscribe(n)})}}},IEvo:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();e.QueueAction=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(n("2tF/").AsyncAction)},IKMM:function(t,e,n){"use strict";var r=n("nzqU"),o=n("I65S"),i=n("gTqA"),a=n("c4Wt");e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&r.isScheduler(t[1])?i.from(t[0]):a.concatAll()(o.of.apply(void 0,t))}},IKal:function(t,e,n){"use strict";function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}r.prototype=Object.create(Error.prototype),e.ArgumentOutOfRangeError=r},IxPp:function(t,e,n){"use strict";n.r(e),n.d(e,"groupBy",function(){return u}),n.d(e,"GroupedObservable",function(){return h});var r=n(null),o=n(null),i=n(null),a=n(null),s=n(null);function u(t,e,n,r){return function(o){return o.lift(new l(t,e,n,r))}}var l=function(){function t(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),c=function(t){function e(e,n,r,o,i){var a=t.call(this,e)||this;return a.keySelector=n,a.elementSelector=r,a.durationSelector=o,a.subjectSelector=i,a.groups=null,a.attemptedToUnsubscribe=!1,a.count=0,a}return r.c(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups=new Map);var r,o=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(t){this.error(t)}else r=t;if(!o){o=this.subjectSelector?this.subjectSelector():new s.a,n.set(e,o);var i=new h(e,o,this);if(this.destination.next(i),this.durationSelector){var a=void 0;try{a=this.durationSelector(new h(e,o))}catch(t){return void this.error(t)}this.add(a.subscribe(new p(e,o,this)))}}o.closed||o.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(o.a),p=function(t){function e(e,n,r){var o=t.call(this,n)||this;return o.key=e,o.group=n,o.parent=r,o}return r.c(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(o.a),h=function(t){function e(e,n,r){var o=t.call(this)||this;return o.key=e,o.groupSubject=n,o.refCountSubscription=r,o}return r.c(e,t),e.prototype._subscribe=function(t){var e=new i.a,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new f(n)),e.add(r.subscribe(t)),e},e}(a.a),f=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return r.c(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(i.a)},Iy3P:function(t,e,n){"use strict";var r=n("Q1FS");function o(t){var e=t.start,n=t.index,r=t.subscriber;n>=t.count?r.complete():(r.next(e),r.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}e.range=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),new r.Observable(function(r){var i=0,a=t;if(n)return n.schedule(o,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(a++),r.closed)break}})},e.dispatch=o},KQya:function(t,e,n){"use strict";var r=n(null),o=1,i={},a=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.c(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=(a=e.flush.bind(e,null),s=o++,i[s]=a,Promise.resolve().then(function(){return function(t){var e=i[t];e&&e()}(s)}),s)));var a,s},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(delete i[n],e.scheduled=void 0)},e}(function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.c(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.c(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(null).a))),s=n("siIJ"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.c(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,o=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<o&&(t=n.shift()));if(this.active=!1,e){for(;++r<o&&(t=n.shift());)t.unsubscribe();throw e}},e}(function(t){function e(n,r){void 0===r&&(r=s.Scheduler.now);var o=t.call(this,n,function(){return e.delegate&&e.delegate!==o?e.delegate.now():r()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.c(e,t),e.prototype.schedule=function(n,r,o){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,o):t.prototype.schedule.call(this,n,r,o)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(s.Scheduler));n.d(e,"asap",function(){return l});var l=new u(a)},LBXl:function(t,e,n){"use strict";function r(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}r.prototype=Object.create(Error.prototype),e.UnsubscriptionError=r},Ljqs:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("Q1FS"),i=n("mbIT"),a=n("aJGj"),s=n("cSoz"),u=n("Y4kR"),l=n("q3Kh");e.forkJoin=function t(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&i.isArray(n[0])&&(n=n[0]),0===n.length?a.EMPTY:e?t(n).pipe(l.map(function(t){return e.apply(void 0,t)})):new o.Observable(function(t){return new c(t,n)})};var c=function(t){function e(e,n){var r=t.call(this,e)||this;r.sources=n,r.completed=0,r.haveValues=0;var o=n.length;r.values=new Array(o);for(var i=0;i<o;i++){var a=s.subscribeToResult(r,n[i],null,i);a&&r.add(a)}return r}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,o){this.values[n]=e,o._hasValue||(o._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,n=this.haveValues,r=this.values,o=r.length;t._hasValue?(this.completed++,this.completed===o&&(n===o&&e.next(r),e.complete())):e.complete()},e}(u.OuterSubscriber)},MC6w:function(t,e,n){"use strict";var r,o=n("24jU");function i(){try{return r.apply(this,arguments)}catch(t){return o.errorObject.e=t,o.errorObject}}e.tryCatch=function(t){return r=t,i}},MjHj:function(t,e,n){"use strict";var r=n("Q1FS");e.isObservable=function(t){return!!t&&(t instanceof r.Observable||"function"==typeof t.lift&&"function"==typeof t.subscribe)}},MkmW:function(t,e,n){"use strict";e.hostReportError=function(t){setTimeout(function(){throw t})}},Mxlh:function(t,e,n){"use strict";function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}r.prototype=Object.create(Error.prototype),e.ObjectUnsubscribedError=r},NTcF:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("ffpz");e.AsyncScheduler=function(t){function e(n,r){void 0===r&&(r=o.Scheduler.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return r(e,t),e.prototype.schedule=function(n,r,o){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,o):t.prototype.schedule.call(this,n,r,o)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(o.Scheduler)},"O+eH":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();e.AnimationFrameAction=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(n("2tF/").AsyncAction)},OAkW:function(t,e,n){"use strict";e.subscribeToArray=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}}},Q1FS:function(t,e,n){"use strict";var r=n("Xwq/"),o=n("zfKp"),i=n("9AGB"),a=n("n3uD");function s(t){if(t||(t=a.config.Promise||Promise),!t)throw new Error("no Promise impl found");return t}e.Observable=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var o=this.operator,i=r.toSubscriber(t,e,n);if(o?o.call(i,this.source):i._addParentTeardownLogic(this.source||a.config.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.config.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){a.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=s(e))(function(e,r){var o;o=n.subscribe(function(e){try{t(e)}catch(t){r(t),o&&o.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[o.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:i.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=s(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}()},QY7M:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();e.AnimationFrameScheduler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,o=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<o&&(t=n.shift()));if(this.active=!1,e){for(;++r<o&&(t=n.shift());)t.unsubscribe();throw e}},e}(n("NTcF").AsyncScheduler)},QtHX:function(t,e,n){"use strict";var r=n("UNqx"),o=n("yoF8");e.mergeAll=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),r.mergeMap(o.identity,t)}},"Re/O":function(t,e,n){"use strict";n.d(e,"zc",function(){return Zs}),n.d(e,"Va",function(){return Js}),n.d(e,"Ca",function(){return tu}),n.d(e,"Cb",function(){return eu}),n.d(e,"wd",function(){return Ls}),n.d(e,"Pb",function(){return nu}),n.d(e,"Ia",function(){return gt}),n.d(e,"db",function(){return Ns}),n.d(e,"yc",function(){return Rs}),n.d(e,"hd",function(){return js}),n.d(e,"rd",function(){return V}),n.d(e,"xd",function(){return zs}),n.d(e,"a",function(){return Ws}),n.d(e,"b",function(){return qs}),n.d(e,"c",function(){return Hs}),n.d(e,"d",function(){return Gs}),n.d(e,"g",function(){return Ks}),n.d(e,"h",function(){return Bs}),n.d(e,"i",function(){return Qs}),n.d(e,"l",function(){return $s}),n.d(e,"m",function(){return X}),n.d(e,"n",function(){return G}),n.d(e,"ud",function(){return Z}),n.d(e,"o",function(){return Y}),n.d(e,"j",function(){return ar}),n.d(e,"k",function(){return Do}),n.d(e,"e",function(){return mt}),n.d(e,"f",function(){return dt}),n.d(e,"Fa",function(){return l}),n.d(e,"cb",function(){return si}),n.d(e,"kb",function(){return ri}),n.d(e,"vb",function(){return Zo}),n.d(e,"Wb",function(){return Ct}),n.d(e,"G",function(){return yn}),n.d(e,"H",function(){return bn}),n.d(e,"I",function(){return wn}),n.d(e,"F",function(){return _n}),n.d(e,"O",function(){return kt}),n.d(e,"P",function(){return Nt}),n.d(e,"Q",function(){return Pt}),n.d(e,"R",function(){return Tt}),n.d(e,"S",function(){return Rt}),n.d(e,"T",function(){return Nn}),n.d(e,"U",function(){return Pn}),n.d(e,"Aa",function(){return Tn}),n.d(e,"xc",function(){return Rn}),n.d(e,"V",function(){return Mn}),n.d(e,"wb",function(){return jn}),n.d(e,"Ga",function(){return Ln}),n.d(e,"Xb",function(){return zn}),n.d(e,"oc",function(){return Fn}),n.d(e,"pc",function(){return Vn}),n.d(e,"qc",function(){return Un}),n.d(e,"rc",function(){return Wn}),n.d(e,"sc",function(){return qn}),n.d(e,"yb",function(){return Gn}),n.d(e,"D",function(){return $n}),n.d(e,"Fc",function(){return Zn}),n.d(e,"Gc",function(){return Jn}),n.d(e,"Hc",function(){return tr}),n.d(e,"Ic",function(){return er}),n.d(e,"Jc",function(){return nr}),n.d(e,"p",function(){return Le}),n.d(e,"q",function(){return ze}),n.d(e,"r",function(){return Be}),n.d(e,"y",function(){return Fe}),n.d(e,"z",function(){return Ve}),n.d(e,"A",function(){return Ue}),n.d(e,"C",function(){return We}),n.d(e,"L",function(){return qe}),n.d(e,"M",function(){return He}),n.d(e,"W",function(){return Ge}),n.d(e,"X",function(){return $e}),n.d(e,"La",function(){return Ke}),n.d(e,"Ma",function(){return Qe}),n.d(e,"Oa",function(){return Xe}),n.d(e,"Ra",function(){return Ye}),n.d(e,"nb",function(){return Ze}),n.d(e,"ob",function(){return Je}),n.d(e,"pb",function(){return tn}),n.d(e,"Ob",function(){return en}),n.d(e,"lc",function(){return nn}),n.d(e,"tc",function(){return rn}),n.d(e,"uc",function(){return on}),n.d(e,"Ac",function(){return an}),n.d(e,"Cc",function(){return sn}),n.d(e,"Dc",function(){return un}),n.d(e,"Ec",function(){return ln}),n.d(e,"Lc",function(){return cn}),n.d(e,"Nc",function(){return pn}),n.d(e,"Oc",function(){return hn}),n.d(e,"Tc",function(){return fn}),n.d(e,"Yc",function(){return dn}),n.d(e,"Zc",function(){return mn}),n.d(e,"u",function(){return _r}),n.d(e,"v",function(){return xr}),n.d(e,"w",function(){return Or}),n.d(e,"x",function(){return Er}),n.d(e,"qb",function(){return Sr}),n.d(e,"xb",function(){return Cr}),n.d(e,"Bb",function(){return Ir}),n.d(e,"Db",function(){return Ar}),n.d(e,"Ib",function(){return kr}),n.d(e,"Xc",function(){return Nr}),n.d(e,"Ja",function(){return Tr}),n.d(e,"Ka",function(){return Rr}),n.d(e,"Ya",function(){return Mr}),n.d(e,"Za",function(){return Dr}),n.d(e,"ab",function(){return jr}),n.d(e,"bb",function(){return Lr}),n.d(e,"gb",function(){return zr}),n.d(e,"hb",function(){return Br}),n.d(e,"ib",function(){return Fr}),n.d(e,"jb",function(){return Vr}),n.d(e,"Rb",function(){return Ur}),n.d(e,"Sb",function(){return Wr}),n.d(e,"s",function(){return Kr}),n.d(e,"t",function(){return Qr}),n.d(e,"B",function(){return Xr}),n.d(e,"Da",function(){return Yr}),n.d(e,"Ea",function(){return Zr}),n.d(e,"Sa",function(){return Jr}),n.d(e,"zb",function(){return to}),n.d(e,"Ab",function(){return eo}),n.d(e,"Eb",function(){return no}),n.d(e,"Fb",function(){return ro}),n.d(e,"Gb",function(){return oo}),n.d(e,"Hb",function(){return io}),n.d(e,"Kb",function(){return ao}),n.d(e,"Lb",function(){return so}),n.d(e,"dc",function(){return uo}),n.d(e,"ec",function(){return lo}),n.d(e,"Pc",function(){return co}),n.d(e,"Qc",function(){return po}),n.d(e,"Vc",function(){return ho}),n.d(e,"Wc",function(){return fo}),n.d(e,"Bc",function(){return mo}),n.d(e,"Ha",function(){return Oo}),n.d(e,"fb",function(){return Eo}),n.d(e,"fc",function(){return So}),n.d(e,"mc",function(){return Co}),n.d(e,"wc",function(){return Io}),n.d(e,"rb",function(){return vo}),n.d(e,"sb",function(){return yo}),n.d(e,"tb",function(){return bo}),n.d(e,"ub",function(){return wo}),n.d(e,"yd",function(){return _o}),n.d(e,"J",function(){return se}),n.d(e,"ld",function(){return ue}),n.d(e,"K",function(){return le}),n.d(e,"N",function(){return ce}),n.d(e,"Y",function(){return pe}),n.d(e,"Na",function(){return he}),n.d(e,"Pa",function(){return fe}),n.d(e,"Ta",function(){return de}),n.d(e,"Nb",function(){return me}),n.d(e,"Tb",function(){return ge}),n.d(e,"Yb",function(){return ve}),n.d(e,"Zb",function(){return ye}),n.d(e,"ac",function(){return be}),n.d(e,"bc",function(){return we}),n.d(e,"cc",function(){return _e}),n.d(e,"gc",function(){return xe}),n.d(e,"hc",function(){return Oe}),n.d(e,"ic",function(){return Ee}),n.d(e,"jc",function(){return Se}),n.d(e,"nc",function(){return Ce}),n.d(e,"Mc",function(){return Ie}),n.d(e,"Rc",function(){return Ae}),n.d(e,"Sc",function(){return ke}),n.d(e,"jd",function(){return Ne}),n.d(e,"od",function(){return Pe}),n.d(e,"qd",function(){return Te}),n.d(e,"Qa",function(){return Ht}),n.d(e,"lb",function(){return Gt}),n.d(e,"Ub",function(){return $t}),n.d(e,"kc",function(){return Kt}),n.d(e,"vc",function(){return Qt}),n.d(e,"ad",function(){return Xt}),n.d(e,"bd",function(){return Yt}),n.d(e,"cd",function(){return Zt}),n.d(e,"dd",function(){return Jt}),n.d(e,"ed",function(){return te}),n.d(e,"fd",function(){return ee}),n.d(e,"gd",function(){return ne}),n.d(e,"zd",function(){return re}),n.d(e,"Vb",function(){return oe}),n.d(e,"Ad",function(){return ie}),n.d(e,"nd",function(){return Ao}),n.d(e,"Kc",function(){return ko}),n.d(e,"mb",function(){return No}),n.d(e,"Qb",function(){return Po}),n.d(e,"Ua",function(){return jo}),n.d(e,"pd",function(){return Lo}),n.d(e,"E",function(){return Bo}),n.d(e,"Mb",function(){return Fo}),n.d(e,"Jb",function(){return Vo}),n.d(e,"Uc",function(){return Uo}),n.d(e,"md",function(){return Ys}),n.d(e,"id",function(){return cr}),n.d(e,"eb",function(){return pr}),n.d(e,"Ba",function(){return hr}),n.d(e,"kd",function(){return fr}),n.d(e,"Wa",function(){return dr}),n.d(e,"sd",function(){return mr}),n.d(e,"Xa",function(){return gr}),n.d(e,"td",function(){return vr}),n.d(e,"vd",function(){return yr}),n.d(e,"Z",function(){return br});var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function o(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function a(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function s(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function u(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function l(t){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}}function c(t){for(var e=t.length,n=0,r=0;e>0;)r=Math.random()*e|0,n=t[--e],t[e]=t[r],t[r]=n}function p(t,e,n){return Math.max(t,Math.min(e,n))}function h(t,e){return Math.random()*(e-t)+t}function f(t,e){if(!t)throw new Error("string"==typeof e?e:e())}function d(t,e,n){void 0===n&&(n=""),f(b(t,e),n+" Shapes "+t+" and "+e+" must match")}function m(t){f(null!=t,"The input to the tensor constructor must be a non-null value.")}function g(t,e){if(void 0===e&&(e=[]),Array.isArray(t))for(var n=0;n<t.length;++n)g(t[n],e);else e.push(t);return e}function v(t){var e=t;if(T(t))return[t.length];if(!Array.isArray(t))return[];for(var n=[];e instanceof Array;)n.push(e.length),e=e[0];return t instanceof Array&&function t(e,n,r){if(r=r||[],e instanceof Array){f(n.length>0,function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+e.length+" elements"}),f(e.length===n[0],function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+e.length+" elements"});for(var o=n.slice(1),i=0;i<e.length;++i)t(e[i],o,r.concat(i))}else f(0===n.length,function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array of "+n[0]+" elements"})}(t,n,[]),n}function y(t){if(0===t.length)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function b(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function w(t){return t%1==0}function _(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function x(t){for(var e=Math.floor(Math.sqrt(t));e>1;--e)if(t%e==0)return[e,t/e];return[1,t]}function O(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function E(t,e,n){return void 0===e&&(e=function(t){return 0}),new Promise(function(r,o){var i=0,a=function(){if(t())r();else{var s=e(++i);null!=n&&i>=n?o():setTimeout(a,s)}};a()})}function S(t){var e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}(e,n[0],n[1]),n.join("=")}),e}function C(t,e){for(var n=1,r=-1,o=0;o<t.length;++o)if(t[o]>0)n*=t[o];else if(-1===t[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found - 1 at dim "+r+" and dim "+o);r=o}else if(t[o]<=0)throw Error("Shapes can not be <= 0. Found "+t[o]+" at dim "+o);if(-1===r){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var i=t.slice();return i[r]=e/n,i}function I(t,e){for(var n=[],r=[],o=0,i=0;i<t.length;++i){if(null!=e){if(e[o]===i&&t[i]>1)throw new Error("Can't squeeze axis "+i+" since its dim '"+t[i]+"' is not 1");(null==e[o]||e[o]>i)&&1===t[i]&&(n.push(t[i]),r.push(i)),e[o]<=i&&o++}t[i]>1&&(n.push(t[i]),r.push(i))}return{newShape:n,keptDims:r}}function A(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function k(t,e,n){if("float32"===e)for(var r=0;r<t.length;r++)if(isNaN(t[r]))throw Error("The result of the '"+n+"' has NaNs.")}function N(t,e){return!("float32"===e||"int32"===e&&"float32"!==t||"bool"===e&&"bool"===t)}function P(t,e){if(null==e||"float32"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){for(var n=new Uint8Array(t.length),r=0;r<n.length;++r)0!==Math.round(t[r])&&(n[r]=1);return n}throw new Error("Unknown data type "+e)}function T(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function R(t){if("float32"===t||"int32"===t)return 4;if("bool"===t)return 1;throw new Error("Unknown dtype "+t)}function M(t){return!!(t&&t.constructor&&t.call&&t.apply)}function D(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function j(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function L(t,e){return function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e)?t:(Array.isArray(t)&&(t=g(t)),P(t,e))}function z(t,e){for(var n=B(t,e),r=0;r<n.length;r++)n[r]=1;return n}function B(t,e){if(null==e||"float32"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type "+e)}function F(){if("undefined"!=typeof performance)return performance.now();if("undefined"!=typeof process){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}throw new Error("Can not measure time in this environment. You should run tf.js in the browser or in Node.js")}var V=Object.freeze({shuffle:c,clamp:p,randUniform:h,distSquared:function(t,e){for(var n=0,r=0;r<t.length;r++){var o=Number(t[r])-Number(e[r]);n+=o*o}return n},assert:f,assertShapesMatch:d,assertNonNull:m,flatten:g,inferShape:v,sizeFromShape:y,isScalarShape:function(t){return 0===t.length},arraysEqual:b,isInt:w,tanh:_,sizeToSquarishShape:x,createShuffledIndices:function(t){for(var e=new Uint32Array(t),n=0;n<t;++n)e[n]=n;return c(e),e},rightPad:O,repeatedTry:E,getQueryParams:S,inferFromImplicitShape:C,squeezeShape:I,getTypedArrayFromDType:A,checkForNaN:k,hasEncodingLoss:N,copyTypedArray:P,isTypedArray:T,bytesPerElement:R,isFunction:M,nearestDivisor:D,computeStrides:j,toTypedArray:L,makeOnesTypedArray:z,makeZerosTypedArray:B,now:F}),U=function(){function t(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new W)}return t.prototype.profileKernel=function(t,e){var n,r=this,o=this.backendTimer.time(function(){n=e()}),i=n.dataSync();return k(i,n.dtype,t),o.then(function(e){r.logger.logKernelProfile(t,n,i,e.kernelMs)}),n},t}(),W=function(){function t(){}return t.prototype.logKernelProfile=function(t,e,n,r){var o=O(r+"ms",9),i=O(t,25),a=e.rank,s=e.size,u=O(e.shape.toString(),14);console.log("%c"+i+"\t%c"+o+"\t%c"+a+"D "+u+"\t%c"+s,"font-weight:bold","color:red","color:blue","color: orange")},t}(),q=7;function H(t,e){return O(parseFloat(t.toFixed(q)).toString(),e)}var G=function(){function t(t,e,n){if(this.dtype=e,null!=n){var r=n.length,o=y(t);f(r===o,"Length of values '"+r+"' does not match the size inferred by the shape '"+o+"'")}this.shape=t.slice(),this.values=n||A(e,y(t)),this.strides=j(t),this.size=y(t)}return t.prototype.set=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];0===e.length&&(e=[0]),f(e.length===this.rank,"The number of provided coordinates ("+e.length+") must match the rank ("+this.rank+")");var r=this.locToIndex(e);this.values[r]=t},t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0===t.length&&(t=[0]);for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return this.values[n]},t.prototype.locToIndex=function(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];for(var e=t[t.length-1],n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e},t.prototype.indexToLoc=function(t){if(0===this.rank)return[];if(1===this.rank)return[t];for(var e=new Array(this.shape.length),n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return X.make(this.shape,{values:this.values},this.dtype)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"set",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"get",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"toTensor",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t)}(),$=null,K=null;function Q(t){$=t}var X=function(){function t(t,n,r,o){this.isDisposedInternal=!1,this.size=y(t),null!=r&&f(this.size===r.length,"Constructing tensor of shape ("+this.size+") should match the length of values ("+r.length+")"),this.shape=t.slice(),this.dtype=n||"float32",this.strides=j(t),this.dataId=null!=o?o:{},this.id=e.nextId++,this.rankType=this.rank<5?this.rank.toString():"higher",$().registerTensor(this),null!=r&&$().write(this.dataId,r)}var e;return e=t,t.make=function(t,n,r){return new e(t,r,n.values,n.dataId)},t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),f(1===this.size,"The array must have only 1 element."),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(t,e){return this.throwIfDisposed(),this.reshape([t,e])},t.prototype.as3D=function(t,e,n){return this.throwIfDisposed(),this.reshape([t,e,n])},t.prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),this.reshape([t,e,n,r])},t.prototype.asType=function(t){return this.throwIfDisposed(),K.cast(this,t)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];f(t.length===this.rank,"Number of coordinates in get() must match the rank of the tensor"),this.throwIfDisposed(),0===t.length&&(t=[0]);for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return this.dataSync()[n]},t.prototype.buffer=function(){return K.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.data=function(){return s(this,void 0,void 0,function(){return u(this,function(t){return this.throwIfDisposed(),[2,$().read(this.dataId)]})})},t.prototype.dataSync=function(){return this.throwIfDisposed(),$().readSync(this.dataId)},t.prototype.dispose=function(){this.isDisposed||($().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(t){return void 0===t&&(t=!1),K.print(this,t)},t.prototype.reshape=function(t){return this.throwIfDisposed(),K.reshape(this,t)},t.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},t.prototype.expandDims=function(t){return void 0===t&&(t=0),K.expandDims(this,t)},t.prototype.cumsum=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=!1),void 0===n&&(n=!1),K.cumsum(this,t,e,n)},t.prototype.squeeze=function(t){return this.throwIfDisposed(),K.squeeze(this,t)},t.prototype.clone=function(){return this.throwIfDisposed(),K.clone(this)},t.prototype.toString=function(t){return void 0===t&&(t=!1),function(t,e,n,r){var o=j(e),i=function(t,e,n){var r=y(e),o=n[n.length-1],i=new Array(o).fill(0);if(e.length>1)for(var a=0;a<r/o;a++)for(var s=a*o,u=0;u<o;u++)i[u]=Math.max(i[u],H(t[s+u],0).length);return i}(t,e,o),a=e.length,s=function t(e,n,r,o,i){void 0===i&&(i=!0);var a=n[0],s=n.length;if(0===s)return[e[0].toString()];if(1===s){if(a>20){var u=Array.from(e.subarray(0,3)),l=Array.from(e.subarray(a-3,a));return["["+u.map(function(t,e){return H(t,o[e])}).join(", ")+", ..., "+l.map(function(t,e){return H(t,o[a-3+e])}).join(", ")+"]"]}return["["+Array.from(e).map(function(t,e){return H(t,o[e])}).join(", ")+"]"]}var c=n.slice(1),p=r.slice(1),h=r[0],f=[];if(a>20){for(var d=0;d<3;d++){var m=(g=d*h)+h;f.push.apply(f,t(e.subarray(g,m),c,p,o,!1))}for(f.push("..."),d=a-3;d<a;d++)m=(g=d*h)+h,f.push.apply(f,t(e.subarray(g,m),c,p,o,d===a-1))}else for(d=0;d<a;d++){var g;m=(g=d*h)+h,f.push.apply(f,t(e.subarray(g,m),c,p,o,d===a-1))}var v=2===s?",":"";for(f[0]="["+f[0]+v,d=1;d<f.length-1;d++)f[d]=" "+f[d]+v;var y=",\n";for(d=2;d<s;d++)y+="\n";return f[f.length-1]=" "+f[f.length-1]+"]"+(i?"":y),f}(t,e,o,i),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+a),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map(function(t){return"    "+t}).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,t)},t.prototype.tile=function(t){return this.throwIfDisposed(),K.tile(this,t)},t.prototype.gather=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),K.gather(this,t,e)},t.prototype.matMul=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),this.throwIfDisposed(),K.matMul(this,t,e,n)},t.prototype.dot=function(t){return this.throwIfDisposed(),K.dot(this,t)},t.prototype.norm=function(t,e,n){return void 0===t&&(t="euclidean"),void 0===e&&(e=null),void 0===n&&(n=!1),this.throwIfDisposed(),K.norm(this,t,e,n)},t.prototype.slice=function(t,e){return this.throwIfDisposed(),K.slice(this,t,e)},t.prototype.reverse=function(t){return this.throwIfDisposed(),K.reverse(this,t)},t.prototype.concat=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),K.concat([this,t],e)},t.prototype.stack=function(t,e){return void 0===e&&(e=0),K.stack([this,t],e)},t.prototype.unstack=function(t,e){return void 0===e&&(e=0),K.unstack(this,e)},t.prototype.pad=function(t,e){return void 0===e&&(e=0),K.pad(this,t,e)},t.prototype.batchNormalization=function(t,e,n,r,o){return void 0===n&&(n=.001),this.throwIfDisposed(),K.batchNormalization(this,t,e,n,r,o)},t.prototype.all=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),K.all(this,t,e)},t.prototype.any=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),K.any(this,t,e)},t.prototype.logSumExp=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),K.logSumExp(this,t,e)},t.prototype.sum=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),K.sum(this,t,e)},t.prototype.mean=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),K.mean(this,t,e)},t.prototype.min=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),K.min(this,t,e)},t.prototype.max=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),K.max(this,t,e)},t.prototype.argMin=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),K.argMin(this,t)},t.prototype.argMax=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),K.argMax(this,t)},t.prototype.cast=function(t){return this.throwIfDisposed(),K.cast(this,t)},t.prototype.add=function(t){return this.throwIfDisposed(),K.add(this,t)},t.prototype.addStrict=function(t){return this.throwIfDisposed(),K.addStrict(this,t)},t.prototype.sub=function(t){return this.throwIfDisposed(),K.sub(this,t)},t.prototype.subStrict=function(t){return this.throwIfDisposed(),K.subStrict(this,t)},t.prototype.pow=function(t){return this.throwIfDisposed(),K.pow(this,t)},t.prototype.powStrict=function(t){return this.throwIfDisposed(),K.powStrict(this,t)},t.prototype.mul=function(t){return this.throwIfDisposed(),K.mul(this,t)},t.prototype.mulStrict=function(t){return this.throwIfDisposed(),K.mulStrict(this,t)},t.prototype.div=function(t){return this.throwIfDisposed(),K.div(this,t)},t.prototype.floorDiv=function(t){return this.throwIfDisposed(),K.floorDiv(this,t)},t.prototype.divStrict=function(t){return this.throwIfDisposed(),K.divStrict(this,t)},t.prototype.minimum=function(t){return this.throwIfDisposed(),K.minimum(this,t)},t.prototype.minimumStrict=function(t){return this.throwIfDisposed(),K.minimumStrict(this,t)},t.prototype.maximum=function(t){return this.throwIfDisposed(),K.maximum(this,t)},t.prototype.maximumStrict=function(t){return this.throwIfDisposed(),K.maximumStrict(this,t)},t.prototype.mod=function(t){return this.throwIfDisposed(),K.mod(this,t)},t.prototype.modStrict=function(t){return this.throwIfDisposed(),K.modStrict(this,t)},t.prototype.squaredDifference=function(t){return this.throwIfDisposed(),K.squaredDifference(this,t)},t.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),K.squaredDifferenceStrict(this,t)},t.prototype.transpose=function(t){return this.throwIfDisposed(),K.transpose(this,t)},t.prototype.notEqual=function(t){return this.throwIfDisposed(),K.notEqual(this,t)},t.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),K.notEqualStrict(this,t)},t.prototype.less=function(t){return this.throwIfDisposed(),K.less(this,t)},t.prototype.lessStrict=function(t){return this.throwIfDisposed(),K.lessStrict(this,t)},t.prototype.equal=function(t){return this.throwIfDisposed(),K.equal(this,t)},t.prototype.equalStrict=function(t){return this.throwIfDisposed(),K.equalStrict(this,t)},t.prototype.lessEqual=function(t){return this.throwIfDisposed(),K.lessEqual(this,t)},t.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),K.lessEqualStrict(this,t)},t.prototype.greater=function(t){return this.throwIfDisposed(),K.greater(this,t)},t.prototype.greaterStrict=function(t){return this.throwIfDisposed(),K.greaterStrict(this,t)},t.prototype.greaterEqual=function(t){return this.throwIfDisposed(),K.greaterEqual(this,t)},t.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),K.greaterEqualStrict(this,t)},t.prototype.logicalAnd=function(t){return this.throwIfDisposed(),K.logicalAnd(this,t)},t.prototype.logicalOr=function(t){return this.throwIfDisposed(),K.logicalOr(this,t)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),K.logicalNot(this)},t.prototype.logicalXor=function(t){return this.throwIfDisposed(),K.logicalXor(this,t)},t.prototype.where=function(t,e){return this.throwIfDisposed(),K.where(t,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),K.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),K.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),K.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),K.sign(this)},t.prototype.exp=function(){return this.throwIfDisposed(),K.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),K.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),K.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),K.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),K.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),K.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),K.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),K.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),K.abs(this)},t.prototype.clipByValue=function(t,e){return this.throwIfDisposed(),K.clipByValue(this,t,e)},t.prototype.relu=function(){return this.throwIfDisposed(),K.relu(this)},t.prototype.elu=function(){return this.throwIfDisposed(),K.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),K.selu(this)},t.prototype.leakyRelu=function(t){return void 0===t&&(t=.2),this.throwIfDisposed(),K.leakyRelu(this,t)},t.prototype.prelu=function(t){return this.throwIfDisposed(),K.prelu(this,t)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),K.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),K.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),K.softplus(this)},t.prototype.sin=function(){return this.throwIfDisposed(),K.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),K.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),K.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),K.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),K.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),K.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),K.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),K.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),K.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),K.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),K.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),K.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),K.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),K.round(this)},t.prototype.step=function(t){return void 0===t&&(t=0),this.throwIfDisposed(),K.step(this,t)},t.prototype.softmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),K.softmax(this,t)},t.prototype.resizeBilinear=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),K.image.resizeBilinear(this,t,e)},t.prototype.resizeNearestNeighbor=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),K.image.resizeNearestNeighbor(this,t,e)},t.prototype.conv1d=function(t,e,n,r,o,i){return void 0===r&&(r="NWC"),void 0===o&&(o=1),this.throwIfDisposed(),K.conv1d(this,t,e,n,r,o,i)},t.prototype.conv2d=function(t,e,n,r,o,i){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),K.conv2d(this,t,e,n,r,o,i)},t.prototype.conv2dTranspose=function(t,e,n,r,o){return this.throwIfDisposed(),K.conv2dTranspose(this,t,e,n,r,o)},t.prototype.depthwiseConv2D=function(t,e,n,r,o,i){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),K.depthwiseConv2d(this,t,e,n,r,o,i)},t.prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),K.avgPool(this,t,e,n,r)},t.prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),K.maxPool(this,t,e,n,r)},t.prototype.localResponseNormalization=function(t,e,n,r){return void 0===t&&(t=5),void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=.5),K.localResponseNormalization(this,t,e,n,r)},t.prototype.variable=function(t,e,n){return void 0===t&&(t=!0),this.throwIfDisposed(),Y.variable(this,t,e,n)},t.prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),K.unsortedSegmentSum(this,t,e)},t.nextId=0,a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"flatten",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"asScalar",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"as1D",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"as2D",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"as3D",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"as4D",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"asType",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"buffer",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"data",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"dataSync",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"dispose",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"toFloat",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"toInt",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"toBool",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"print",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"reshape",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"reshapeAs",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"expandDims",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"cumsum",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"squeeze",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"clone",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"toString",null),e=a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t)}();Object.defineProperty(X,Symbol.hasInstance,{value:function(t){return null!=t.shape&&null!=t.dtype}});var Y=function(t){function e(e,r,o){void 0===r&&(r=!0);var i=t.call(this,e.shape,e.dtype,null,e.dataId)||this;i.trainable=r,i.name=o,null==i.name&&(i.name=n.nextVarId.toString(),n.nextVarId++);try{$().registerVariable(i)}catch(t){throw $().disposeTensor(i),t}return i}var n;return o(e,t),n=e,e.variable=function(t,e,r,o){return void 0===e&&(e=!0),null!=o&&o!==t.dtype&&(t=t.asType(o)),new n(t,e,r)},e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!b(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");$().disposeTensor(this),this.dataId=t.dataId,$().registerTensor(this)},e.nextVarId=0,a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],e.prototype,"assign",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],e,"variable",null),n=a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],e)}(X);Object.defineProperty(Y,Symbol.hasInstance,{value:function(t){return t instanceof X&&null!=t.assign&&t.assign instanceof Function}});var Z=Y.variable;function J(t,e){f(t.dtype===e.dtype," The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match")}function tt(t,e,n,r){if(void 0===r&&(r="float32"),r=r||"float32",t instanceof X)return t;if(!T(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t)throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got "+t.constructor.name);var o=v(t);return T(t)||Array.isArray(t)||(t=[t]),X.make(o,{values:L(t,r)},r)}function et(t,e,n){if(!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(t,r){return tt(t,e+"["+r+"]",n)})}function nt(t){var e=[];return function t(e,n,r){if(null!=e)if(e instanceof X)n.push(e);else if(function(t){return Array.isArray(t)||"object"==typeof t}(e)){var o=e;for(var i in o){var a=o[i];r.has(a)||(r.add(a),t(a,n,r))}}}(t,e,new Set),e}var rt,ot,it=function(){function t(t,e,n){this.backend=t,this.safeMode=e,this.debugMode=n,this.registeredVariables={},this.refCounter=new WeakMap,this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numDataBuffers=0,this.gradientScopeCount=0,this.customGradientDepth=0,this.keepTensors=new Set,this.activeScope={track:[],name:"default scope"},this.scopeStack=[this.activeScope],this.profiler=new U(t)}return t.prototype.tidy=function(t,e,n){var r=this;void 0===n&&(n=!1);var o,i=null;if(null==e){if("function"!=typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}return this.scopedRun(function(){return r.startScope(i,n)},function(){return r.endScope(o,n)},function(){return(o=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o})},t.prototype.scopedRun=function(t,e,n){t();try{var r=n();return e(),r}catch(t){throw e(),t}},t.prototype.runKernel=function(t,e,n){var r,o=this,i=[],a=function(t){return i.push(t),t},s=this.activeScope.name;if(this.scopedRun(function(){return o.customGradientDepth++},function(){return o.customGradientDepth--},function(){r=o.debugMode()?o.profiler.profileKernel(s,function(){return t(o.backend,a)}):t(o.backend,a)}),this.shouldRecord()){var u={id:this.nextTapeNodeId++,name:s,inputs:e,output:r};null!=n&&(u.gradient=function(t){return n(t,i)}),this.activeTape.push(u)}return r},t.prototype.registerTensor=function(t){var e=this.refCounter.has(t.dataId)?this.refCounter.get(t.dataId):0;this.numTensors++,0===e&&(this.numDataBuffers++,this.numBytes+=y(t.shape)*R(t.dtype),this.backend.register(t.dataId,t.shape,t.dtype)),this.refCounter.set(t.dataId,e+1),t instanceof Y||this.track(t)},t.prototype.registerVariable=function(t){if(null!=this.registeredVariables[t.name])throw new Error("Variable with name "+t.name+" was already registered");this.registeredVariables[t.name]=t},t.prototype.disposeTensor=function(t){if(this.refCounter.has(t.dataId)){this.keepTensors.has(t.id)&&this.keepTensors.delete(t.id),this.numTensors--;var e=this.refCounter.get(t.dataId);e<=1?(this.refCounter.delete(t.dataId),this.backend.disposeData(t.dataId),this.numDataBuffers--,this.numBytes-=y(t.shape)*R(t.dtype)):this.refCounter.set(t.dataId,e-1)}},t.prototype.disposeVariables=function(){for(var t in this.registeredVariables)this.disposeTensor(this.registeredVariables[t]),delete this.registeredVariables[t]},t.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.numTensors,t.numDataBuffers=this.numDataBuffers,t.numBytes=this.numBytes,t},t.prototype.shouldRecord=function(){return null!=this.activeTape&&0===this.customGradientDepth},t.prototype.addTapeNode=function(t,e,n){var r={};t.forEach(function(t,e){r[e]=t});var o={id:this.nextTapeNodeId++,name:this.activeScope.name,inputs:r,output:e,gradient:function(t){var e={};return n(t).forEach(function(t,n){e[n]=function(){return t}}),e}};this.activeTape.push(o)},t.prototype.keep=function(t){if(1===this.scopeStack.length&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {...}) to avoid memory leaks.");return this.keepTensors.add(t.id),t},t.prototype.startScope=function(t,e){void 0===e&&(e=!1),e&&0===this.gradientScopeCount&&(this.activeTape=[]),e&&this.gradientScopeCount++;var n={track:[],name:"unnamed scope"};t&&(n.name=t),this.scopeStack.push(n),this.activeScope=n},t.prototype.endScope=function(t,e){var n=this;void 0===e&&(e=!1),e&&(this.gradientScopeCount--,0===this.gradientScopeCount&&(this.activeTape=null));var r=new Set(this.keepTensors),o=nt(t);o.forEach(function(t){return r.add(t.id)});for(var i=0;i<this.activeScope.track.length;i++){var a=this.activeScope.track[i];r.has(a.id)||(null!=this.activeTape?o.push(a):a.dispose())}var s=this.scopeStack.pop();this.activeScope=0===this.scopeStack.length?{track:[],name:"default scope"}:this.scopeStack[this.scopeStack.length-1],o.forEach(function(t){!n.keepTensors.has(t.id)&&function(t,e){for(var n=0;n<e.length;n++)if(e[n].id===t.id)return!0;return!1}(t,s.track)&&n.track(t)})},t.prototype.gradients=function(t,e,n,r){var o=this;return void 0===r&&(r=!1),f(e.length>0,"gradients() received an empty list of xs."),this.tidy("gradients",function(){var i=t();f(i instanceof X,"The result y returned by f() must be a tensor.");var a=function(t,e,n){for(var r={},o={},i=0;i<e.length;i++)r[e[i].id]=!0;for(i=0;i<t.length;i++){var a=(m=t[i]).inputs;for(var s in a){for(var u=a[s],l=!1,c=0;c<e.length;c++)if(r[u.id]){r[m.output.id]=!0,l=!0,o[m.id]=!0;break}if(l)break}}var p={};p[n.id]=!0;var h={};for(i=t.length-1;i>=0;i--){a=(m=t[i]).inputs;var f=[];for(f.push(m.output),c=0;c<f.length;c++)if(p[f[c].id]){for(var s in a)p[a[s].id]=!0,h[m.id]=!0;break}}var d=[];for(i=0;i<t.length;i++){var m;if(o[(m=t[i]).id]&&h[m.id]){var g={};for(var s in m.inputs){var v=m.inputs[s];r[v.id]&&(g[s]=v)}var y=Object.assign({},m);y.inputs=g,y.output=m.output,d.push(y)}}return d}(o.activeTape,e,i);if(!r&&0===a.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");var s={};return s[i.id]=null==n?function(t){var e=z(y(t),"float32");return X.make(t,{values:e})}(i.shape):n,function(t,e){for(var n=e.length-1;n>=0;n--){var r=e[n],o=t[r.output.id];if(null==r.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+r.name+".");var i=r.gradient(o);for(var a in r.inputs){if(!(a in i))throw new Error("Cannot backprop through input "+a+". Available gradients found: "+Object.keys(i)+".");var s=i[a](),u=r.inputs[a];if(!b(s.shape,u.shape))throw new Error("Error in gradient for op "+r.name+". The gradient of input '"+a+"' has shape '"+s.shape+"', which does not match the shape of the input '"+u.shape+"'");if(null==t[u.id])t[u.id]=s;else{var l=t[u.id];t[u.id]=l.add(s),l.dispose()}}}}(s,a),{value:i,grads:e.map(function(t){return s[t.id]})}},!0)},t.prototype.customGrad=function(t){var e=this;return f(M(t),"The f passed in customGrad(f) must be a function."),function(){for(var n,r,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return f(o.every(function(t){return t instanceof X}),"The args passed in customGrad(f)(x1, x2,...) must all be tensors"),e.scopedRun(function(){return e.customGradientDepth++},function(){return e.customGradientDepth--},function(){r=e.tidy(t.name,function(){var e=t.apply(void 0,o),r=e.value,i=e.gradFunc;return f(r instanceof X,"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),f(M(i),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n=i,r},!0)}),e.shouldRecord()&&e.addTapeNode(o,r,function(t){var e=n(t),r=Array.isArray(e)?e:[e];return f(r.length===o.length,"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),f(r.every(function(t){return t instanceof X}),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."),r}),r}},t.prototype.write=function(t,e){this.backend.write(t,e)},t.prototype.readSync=function(t){return this.backend.readSync(t)},t.prototype.read=function(t){return this.backend.read(t)},t.prototype.fromPixels=function(t,e){return this.backend.fromPixels(t,e)},t.prototype.time=function(t){return s(this,void 0,void 0,function(){var e,n;return u(this,function(r){switch(r.label){case 0:return e=F(),[4,this.backend.time(t)];case 1:return(n=r.sent()).wallMs=F()-e,[2,n]}})})},t.prototype.track=function(t){if(1===this.scopeStack.length&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {op();...}); to avoid memory leaks.");return this.activeScope.track.push(t),t},t}();(ot=rt||(rt={}))[ot.NUMBER=0]="NUMBER",ot[ot.BOOLEAN=1]="BOOLEAN",ot[ot.STRING=2]="STRING";var at=[{name:"DEBUG",type:rt.BOOLEAN},{name:"IS_BROWSER",type:rt.BOOLEAN},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",type:rt.NUMBER},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",type:rt.BOOLEAN},{name:"WEBGL_VERSION",type:rt.NUMBER},{name:"WEBGL_RENDER_FLOAT32_ENABLED",type:rt.BOOLEAN},{name:"WEBGL_DOWNLOAD_FLOAT_ENABLED",type:rt.BOOLEAN},{name:"WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED",type:rt.BOOLEAN},{name:"BACKEND",type:rt.STRING}];function st(t,e){var n;try{n=pt(t,e)}catch(t){return!1}return null!=n&&(ht(n),!0)}var ut="tfjsflags";function lt(){var t={};if("undefined"==typeof window||void 0===window.location)return t;var e=S(window.location.search);if(ut in e){var n={};e[ut].split(",").forEach(function(t){var e=t.split(":");n[e[0]]=e[1]}),at.forEach(function(e){e.name in n&&(console.log("Setting feature override from URL "+e.name+": "+n[e.name]),e.type===rt.NUMBER?t[e.name]=+n[e.name]:e.type===rt.BOOLEAN?t[e.name]="true"===n[e.name]:e.type===rt.STRING?t[e.name]=n[e.name]:console.warn("Unknown URL param: "+e.name+"."))})}return t}function ct(t,e){return null!=t.getExtension(e)}function pt(t,e){if(0===t||!e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=document.createElement("canvas");return 1===t?n.getContext("webgl")||n.getContext("experimental-webgl"):n.getContext("webgl2")}function ht(t){if(null!=t){var e=t.getExtension("WEBGL_lose_context");if(null==e)throw new Error("Extension WEBGL_lose_context not supported on this browser.");e.loseContext()}}function ft(t,e){var n=t.createFramebuffer(),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,2===e?t.RGBA32F:t.RGBA,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0)}var dt=function(){function t(t){this.features={},this.registry={},null!=t&&(this.features=t),this.get("DEBUG")&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}return t.setBackend=function(t,e){if(void 0===e&&(e=!1),!(t in mt.registry))throw new Error("Backend type '"+t+"' not found in registry");mt.initBackend(t,e)},t.getBackend=function(){return mt.initDefaultBackend(),mt.currentBackend},t.disposeVariables=function(){mt.engine.disposeVariables()},t.memory=function(){return mt.engine.memory()},t.tidy=function(t,e,n){return void 0===n&&(n=!1),mt.engine.tidy(t,e,n)},t.dispose=function(t){nt(t).forEach(function(t){return t.dispose()})},t.keep=function(t){return mt.engine.keep(t)},t.time=function(t){return mt.engine.time(t)},t.prototype.get=function(t){return t in this.features?this.features[t]:(this.features[t]=this.evaluateFeature(t),this.features[t])},t.prototype.getFeatures=function(){return this.features},t.prototype.set=function(t,e){this.features[t]=e},t.prototype.getBestBackendType=function(){var t=this;if(0===Object.keys(this.registry).length)throw new Error("No backend found in registry.");return Object.keys(this.registry).map(function(e){return{name:e,entry:t.registry[e]}}).sort(function(t,e){return e.entry.priority-t.entry.priority})[0].name},t.prototype.evaluateFeature=function(t){if("DEBUG"===t)return!1;if("IS_BROWSER"===t)return"undefined"!=typeof window;if("IS_NODE"===t)return"undefined"!=typeof process&&void 0!==process.versions.node;if("IS_CHROME"===t)return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);if("IS_TEST"===t)return!1;if("BACKEND"===t)return this.getBestBackendType();if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"===t){var e=this.get("WEBGL_VERSION");return 0===e?0:function(t,e){if(0===t)return 0;var n,r=pt(t,e);return n=ct(r,"EXT_disjoint_timer_query_webgl2")&&2===t?2:ct(r,"EXT_disjoint_timer_query")?1:0,null!=r&&ht(r),n}(e,this.get("IS_BROWSER"))}if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE"===t)return this.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!function(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}();if("HAS_WEBGL"===t)return this.get("WEBGL_VERSION")>0;if("WEBGL_VERSION"===t)return st(2,this.get("IS_BROWSER"))?2:st(1,this.get("IS_BROWSER"))?1:0;if("WEBGL_RENDER_FLOAT32_ENABLED"===t)return function(t,e){if(0===t)return!1;var n=pt(t,e);if(1===t){if(!ct(n,"OES_texture_float"))return!1}else if(!ct(n,"EXT_color_buffer_float"))return!1;ft(n,t);var r=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return ht(n),r}(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("WEBGL_DOWNLOAD_FLOAT_ENABLED"===t)return function(t,e){if(0===t)return!1;var n=pt(t,e);if(1===t){if(!ct(n,"OES_texture_float"))return!1}else if(!ct(n,"EXT_color_buffer_float"))return!1;ft(n,t),n.readPixels(0,0,1,1,n.RGBA,n.FLOAT,new Float32Array(4));var r=n.getError()===n.NO_ERROR;return ht(n),r}(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED"===t)return function(t,e){if(t>0)return!1;if(2!==t)return!1;var n=pt(t,e),r=ct(n,"WEBGL_get_buffer_sub_data_async");return ht(n),r}(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("TEST_EPSILON"===t)return this.get("WEBGL_RENDER_FLOAT32_ENABLED")?.001:.1;throw new Error("Unknown feature "+t+".")},t.prototype.setFeatures=function(t){this.features=Object.assign({},t)},t.prototype.reset=function(){this.features=lt(),null!=this.globalEngine&&(this.globalEngine=null)},t.prototype.initBackend=function(t,e){var n=this;void 0===e&&(e=!1),this.currentBackend=t;var r=this.findBackend(t);this.globalEngine=new it(r,e,function(){return n.get("DEBUG")})},t.prototype.findBackend=function(t){return t in this.registry?this.registry[t].backend:null},t.prototype.registerBackend=function(t,e,n,r){var o=this;if(void 0===n&&(n=1),t in this.registry)return console.warn(t+" backend was already registered. Reusing existing backend"),null!=r&&r(function(){return o.engine}),!1;try{var i=e();return this.registry[t]={backend:i,priority:n},!0}catch(e){return console.warn("Registration of backend "+t+" failed"),console.warn(e.stack||e.message),!1}},t.prototype.removeBackend=function(t){if(!(t in this.registry))throw new Error(t+" backend not found in registry");this.registry[t].backend.dispose(),delete this.registry[t]},Object.defineProperty(t.prototype,"engine",{get:function(){return this.initDefaultBackend(),this.globalEngine},enumerable:!0,configurable:!0}),t.prototype.initDefaultBackend=function(){null==this.globalEngine&&this.initBackend(this.get("BACKEND"),!1)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"setBackend",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"getBackend",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"disposeVariables",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"memory",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tidy",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"dispose",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"keep",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"time",null),t}(),mt=function(){var t=function(){var t;if("undefined"!=typeof window)t=window;else{if("undefined"==typeof process)throw new Error("Could not find a global object");t=process}return t}();return null==t.ENV&&(t.ENV=new dt(lt()),Q(function(){return t.ENV.engine})),t.ENV}(),gt=Object.freeze({Environment:dt,ENV:mt});function vt(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function yt(t,e){for(var n=[],r=t.length,o=0;o<r;o++)-1===e.indexOf(o)&&n.push(t[o]);return[n,e.map(function(e){return t[e]})]}function bt(t,e){return function(t,e,n){for(var r=t.length+e.length,o=[],i=0,a=0,s=0;s<r;s++)-1===n.indexOf(s)?o.push(t[i++]):o.push(e[a++]);return o}(t,e.map(function(t){return 1}),e)}function wt(t,e){var n=e.length;return f((t=null==t?e.map(function(t,e){return e}):[].concat(t)).every(function(t){return t>=-n&&t<n}),"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t),f(t.every(function(t){return w(t)}),"All values in axis param must be integers but got axis "+t),t.map(function(t){return t<0?n+t:t})}function _t(t,e,n){f(vt(e,n),t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input.")}function xt(t,e){if(vt(t,e))return null;for(var n=[],r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach(function(t){return n.push(t)}),n}function Ot(t){return t.map(function(t,e){return[e,t]}).sort(function(t,e){return t[1]-e[1]}).map(function(t){return t[0]})}function Et(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function St(t,e,n){f(t.length===e.length,"x1 and x2 should have the same rank.");var r=t.slice();return r[n]+=e[n],r}function Ct(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];mt.engine.startScope(t.name);try{var r=t.apply(void 0,e);return r instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),mt.engine.endScope(r),r}catch(t){throw mt.engine.endScope(null),t}}}var It=function(){function t(){}return t.concat1d=function(e){return t.concat(e,0)},t.concat2d=function(e,n){return t.concat(e,n)},t.concat3d=function(e,n){return t.concat(e,n)},t.concat4d=function(e,n){return t.concat(e,n)},t.concat=function(t,e){void 0===e&&(e=0),f(t.length>=1,"Pass at least one tensor to concat");var n=et(t,"tensors","concat"),r=n[0];if(1===n.length)return r;for(var o=wt(e,r.shape),i=1;i<n.length;++i)r=At(r,n[i],o[0]);return r},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"concat",null),t}();function At(t,e,n){!function(t,e,n){var r=t.length;f(t.length===e.length,"Error in concat"+r+"D: rank of x1 ("+r+") and x2 ("+e.length+") must be the same."),f(n>=0&&n<r,"Error in concat"+r+"D: axis must be between 0 and "+(r-1)+".");for(var o=0;o<r;o++)f(o===n||t[o]===e[o],"Error in concat"+r+"D: Shape ("+t+") does not match ("+e+") along the non-concatenated axis "+o+".")}(t.shape,e.shape,n);var r=St(t.shape,e.shape,n),o=t.as2D(-1,y(t.shape.slice(n))),i=e.as2D(-1,y(e.shape.slice(n))),a=function(t,e){return{aBegin:[0,0],aSize:t,bBegin:[0,t[1]],bSize:i.shape}}(o.shape),s=a.aBegin,u=a.aSize,l=a.bBegin,c=a.bSize;return mt.engine.runKernel(function(t){return t.concat(o,i)},{a:o,b:i},function(t){return{a:function(){return t.slice(s,u)},b:function(){return t.slice(l,c)}}}).reshape(r)}var kt=Ct(It.concat),Nt=Ct(It.concat1d),Pt=Ct(It.concat2d),Tt=Ct(It.concat3d),Rt=Ct(It.concat4d);function Mt(t,e){return t(e={exports:{}},e.exports),e.exports}"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Dt=Mt(function(t){!function(t,e,n){function r(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function o(t,e){var n=new function(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}(t),o=e&&e.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+1.1102230246251565e-16*(2097152*i()|0)},i.quick=i,o&&("object"==typeof o&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:this.alea=o}(0,t)}),jt=Mt(function(t){!function(t,e,n){function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function o(t,e){var n=new function(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}(t),o=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,o&&("object"==typeof o&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:this.xor128=o}(0,t)}),Lt=Mt(function(t){!function(t,e,n){function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function o(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}(t),o=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,o&&("object"==typeof o&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:this.xorwow=o}(0,t)}),zt=Mt(function(t){!function(t,e,n){function r(t,e){return e.x=t.x.slice(),e.i=t.i,e}function o(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.x,o=e.i;return t=r[o],n=(t^=t>>>7)^t<<24,n^=(t=r[o+1&7])^t>>>10,n^=(t=r[o+3&7])^t>>>3,n^=(t=r[o+4&7])^t<<7,t=r[o+7&7],n^=(t^=t<<13)^t<<9,r[o]=n,e.i=o+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}(t),o=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,o&&(o.x&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:this.xorshift7=o}(0,t)}),Bt=Mt(function(t){!function(t,e,n){function r(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function o(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.w,o=e.X,i=e.i;return e.w=r=r+1640531527|0,n=o[i+34&127],t=o[i=i+1&127],n^=n<<13,t^=t<<17,n=o[i]=(n^=n>>>15)^(t^=t>>>12),e.i=i,n+(r^r>>>16)|0},function(t,e){var n,r,o,i,a,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),o=0,i=-32;i<u;++i)e&&(r^=e.charCodeAt((i+32)%e.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=0==(n=s[127&i]^=r+(a=a+1640531527|0))?o+1:0);for(o>=128&&(s[127&(e&&e.length||0)]=-1),o=127,i=512;i>0;--i)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,s[o]=(r^=r>>>15)^(n^=n>>>12);t.w=a,t.X=s,t.i=o}(e,t)}(t),o=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,o&&(o.X&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:this.xor4096=o}(0,t)}),Ft=Mt(function(t){!function(t,e,n){function r(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function o(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,o=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^o,e.a=o-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}(t),o=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,o&&("object"==typeof o&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:this.tychei=o}(0,t)}),Vt=Mt(function(t){!function(e,r){var o,i=this,a=256,s=6,u="random",l=r.pow(a,s),c=r.pow(2,52),p=2*c,h=a-1;function f(t,n,f){var v=[],y=m(function t(e,n){var r,o=[],i=typeof e;if(n&&"object"==i)for(r in e)try{o.push(t(e[r],n-1))}catch(t){}return o.length?o:"string"==i?e:e+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[t,g(e)]:null==t?function(){try{var t;return o&&(t=o.randomBytes)?t=t(a):(t=new Uint8Array(a),(i.crypto||i.msCrypto).getRandomValues(t)),g(t)}catch(t){var n=i.navigator,r=n&&n.plugins;return[+new Date,i,r,i.screen,g(e)]}}():t,3),v),b=new function(t){var e,n=t.length,r=this,o=0,i=r.i=r.j=0,s=r.S=[];for(n||(t=[n++]);o<a;)s[o]=o++;for(o=0;o<a;o++)s[o]=s[i=h&i+t[o%n]+(e=s[o])],s[i]=e;(r.g=function(t){for(var e,n=0,o=r.i,i=r.j,s=r.S;t--;)e=s[o=h&o+1],n=n*a+s[h&(s[o]=s[i=h&i+e])+(s[i]=e)];return r.i=o,r.j=i,n})(a)}(v),w=function(){for(var t=b.g(s),e=l,n=0;t<c;)t=(t+n)*a,e*=a,n=b.g(1);for(;t>=p;)t/=2,e/=2,n>>>=1;return(t+n)/e};return w.int32=function(){return 0|b.g(4)},w.quick=function(){return b.g(4)/4294967296},w.double=w,m(g(b.S),e),(n.pass||f||function(t,e,n,o){return o&&(o.S&&d(o,b),t.state=function(){return d(b,{})}),n?(r[u]=t,e):t})(w,y,"global"in n?n.global:this==r,n.state)}function d(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function m(t,e){for(var n,r=t+"",o=0;o<r.length;)e[h&o]=h&(n^=19*e[h&o])+r.charCodeAt(o++);return g(e)}function g(t){return String.fromCharCode.apply(0,t)}if(r["seed"+u]=f,m(r.random(),e),t.exports){t.exports=f;try{o=n(!function(){var t=new Error("Cannot find module 'crypto'");throw t.code="MODULE_NOT_FOUND",t}())}catch(t){}}}([],Math)});Vt.alea=Dt,Vt.xor128=jt,Vt.xorwow=Lt,Vt.xorshift7=zt,Vt.xor4096=Bt,Vt.tychei=Ft;var Ut=Vt.alea,Wt=function(){function t(t,e,n,r,o){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=Ut(i.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,n,r=!1;!r;){var o=void 0,i=void 0,a=void 0;do{a=(o=2*this.random()-1)*o+(i=2*this.random()-1)*i}while(a>=1||0===a);var s=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*o*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(e)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(e)},t.prototype.convertValue=function(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)},t.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},t}(),qt=function(){function t(){}return t.tensor=function(t,e,n){if(void 0===n&&(n="float32"),!T(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t)throw new Error("values passed to tensor(values) must be an array of numbers or booleans, or a TypedArray");var r=v(t);return null!=e&&1!==r.length&&d(e,r,"Error creating a new Tensor. Inferred shape ("+r+") does not match the provided shape ("+e+"). "),T(t)||Array.isArray(t)||(t=[t]),X.make(e=e||r,{values:L(t,n)},n)},t.scalar=function(e,n){if(void 0===n&&(n="float32"),T(e)||Array.isArray(e))throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean)");return t.tensor(e,[],n)},t.tensor1d=function(e,n){void 0===n&&(n="float32"),m(e);var r=v(e);if(1!==r.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return t.tensor(e,r,n)},t.tensor2d=function(e,n,r){if(void 0===r&&(r="float32"),m(e),null!=n&&2!==n.length)throw new Error("tensor2d() requires shape to have two numbers");var o=v(e);if(2!==o.length&&1!==o.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===o.length&&null==n)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return t.tensor(e,n=n||o,r)},t.tensor3d=function(e,n,r){if(void 0===r&&(r="float32"),m(e),null!=n&&3!==n.length)throw new Error("tensor3d() requires shape to have three numbers");var o=v(e);if(3!==o.length&&1!==o.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===o.length&&null==n)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return t.tensor(e,n=n||o,r)},t.tensor4d=function(e,n,r){if(void 0===r&&(r="float32"),m(e),null!=n&&4!==n.length)throw new Error("tensor4d() requires shape to have four numbers");var o=v(e);if(4!==o.length&&1!==o.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===o.length&&null==n)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return t.tensor(e,n=n||o,r)},t.tensor5d=function(e,n,r){if(void 0===r&&(r="float32"),m(e),null!=n&&5!==n.length)throw new Error("tensor5d() requires shape to have five numbers");var o=v(e);if(5!==o.length&&1!==o.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===o.length&&null==n)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return t.tensor(e,n=n||o,r)},t.tensor6d=function(e,n,r){if(void 0===r&&(r="float32"),m(e),null!=n&&6!==n.length)throw new Error("tensor6d() requires shape to have six numbers");var o=v(e);if(6!==o.length&&1!==o.length)throw new Error("tensor6d() requires values to be number[][][][] or flat/TypedArray");if(1===o.length&&null==n)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t.tensor(e,n=n||o,r)},t.ones=function(t,e){void 0===e&&(e="float32");var n=z(y(t),e);return X.make(t,{values:n},e)},t.zeros=function(t,e){void 0===e&&(e="float32");var n=B(y(t),e);return X.make(t,{values:n},e)},t.fill=function(t,e,n){void 0===n&&(n="float32");var r=A(n,y(t));return r.fill(e),X.make(t,{values:r},n)},t.onesLike=function(e){var n=tt(e,"x","onesLike");return t.ones(n.shape,n.dtype)},t.zerosLike=function(e){var n=tt(e,"x","zerosLike");return t.zeros(n.shape,n.dtype)},t.linspace=function(e,n,r){if(0===r)throw new Error("Cannot request zero samples");var o=(n-e)/(r-1),i=B(r,"float32");i[0]=e;for(var a=1;a<i.length;a++)i[a]=i[a-1]+o;return t.tensor1d(i,"float32")},t.range=function(e,n,r,o){if(void 0===r&&(r=1),void 0===o&&(o="float32"),0===r)throw new Error("Cannot have a step of zero");if(e===n||e<n&&r<0||n<e&&r>1)return t.zeros([0],o);var i=B(Math.abs(Math.ceil((n-e)/r)),o);n<e&&1===r&&(r=-1),i[0]=e;for(var a=1;a<i.length;a++)i[a]=i[a-1]+r;return t.tensor1d(i,o)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tensor",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"scalar",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tensor1d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tensor2d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tensor3d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tensor4d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tensor5d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tensor6d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"ones",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"zeros",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"fill",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"onesLike",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"zerosLike",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"linspace",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"range",null),t}(),Ht=qt.fill,Gt=qt.linspace,$t=qt.ones,Kt=qt.range,Qt=qt.scalar,Xt=qt.tensor,Yt=qt.tensor1d,Zt=qt.tensor2d,Jt=qt.tensor3d,te=qt.tensor4d,ee=qt.tensor5d,ne=qt.tensor6d,re=qt.zeros,oe=Ct(qt.onesLike),ie=Ct(qt.zerosLike),ae=function(){function t(){}return t.clone=function(t){var e=tt(t,"x","clone");return mt.engine.runKernel(function(t){return X.make(e.shape,{dataId:e.dataId},e.dtype)},{$x:e},function(t){return{$x:function(){return t.toFloat()}}})},t.eye=function(e,n,r,o){void 0===o&&(o="float32"),null==n&&(n=e);for(var i=t.buffer([e,n],o),a=e<=n?e:n,s=0;s<a;++s)i.set(1,s,s);var u=i.toTensor().as2D(e,n);if(null==r)return u;if(1===r.length)return t.tile(t.expandDims(u,0),[r[0],1,1]);if(2===r.length)return t.tile(t.expandDims(t.expandDims(u,0),0),[r[0],r[1],1,1]);if(3===r.length)return t.tile(t.expandDims(t.expandDims(t.expandDims(u,0),0),0),[r[0],r[1],r[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+r.length+"D.")},t.randomNormal=function(e,n,r,o,i){if(void 0===n&&(n=0),void 0===r&&(r=1),null!=o&&"bool"===o)throw new Error("Unsupported data type "+o);for(var a=new Wt(n,r,o,!1,i),s=t.buffer(e,o),u=0;u<s.values.length;u++)s.values[u]=a.nextValue();return s.toTensor()},t.truncatedNormal=function(e,n,r,o,i){if(void 0===n&&(n=0),void 0===r&&(r=1),null!=o&&"bool"===o)throw new Error("Unsupported data type "+o);for(var a=new Wt(n,r,o,!0,i),s=t.buffer(e,o),u=0;u<s.values.length;u++)s.values[u]=a.nextValue();return s.toTensor()},t.randomUniform=function(e,n,r,o){void 0===n&&(n=0),void 0===r&&(r=1),void 0===o&&(o="float32");for(var i=t.buffer(e,o),a=0;a<i.values.length;a++)i.values[a]=h(n,r);return i.toTensor()},t.rand=function(t,e,n){var r=y(t),o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var i=0;i<r;i++)o[i]=e();return X.make(t,{values:o},n)},t.multinomial=function(t,e,n,r){void 0===r&&(r=!1);var o=tt(t,"logits","multinomial"),i=o.size,a=o.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();var s=1===a?o.as2D(1,-1):o,u=mt.engine.runKernel(function(t){return t.multinomial(s,r,e,n)},{logits2D:s});return 1===a?u.as1D():u},t.oneHot=function(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=0);var o=tt(t,"indices","oneHot","int32");if(f("int32"===o.dtype,"Indices must be of dtype `int32`"),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);return mt.engine.runKernel(function(t){return t.oneHot(o,e,n,r)},{$indices:o})},t.fromPixels=function(t,e){if(void 0===e&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");return mt.engine.fromPixels(t,e)},t.toPixels=function(t,e){return s(this,void 0,void 0,function(){var n,r,o,i,a,s,l,c,p,h,f,d,m,g,v,y,b,w,_,x;return u(this,function(u){switch(u.label){case 0:if(2!==(n=tt(t,"img","toPixels","int32")).rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],i=r[1],(a=2===n.rank?1:n.shape[2])>4||2===a)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return s=n.min(),l=n.max(),[4,s.data()];case 1:return c=u.sent()[0],[4,l.data()];case 2:if(p=u.sent()[0],s.dispose(),l.dispose(),"float32"===n.dtype){if(c<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+c+" - "+p+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(c<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+c+" - "+p+"].")}return[4,n.data()];case 3:for(h=u.sent(),f="float32"===n.dtype?255:1,d=new Uint8ClampedArray(i*o*4),m=0;m<o*i;++m)g=void 0,v=void 0,y=void 0,b=void 0,1===a?(g=h[m]*f,v=h[m]*f,y=h[m]*f,b=255):3===a?(g=h[3*m]*f,v=h[3*m+1]*f,y=h[3*m+2]*f,b=255):4===a&&(g=h[4*m]*f,v=h[4*m+1]*f,y=h[4*m+2]*f,b=h[4*m+3]*f),d[0+(w=4*m)]=Math.round(g),d[w+1]=Math.round(v),d[w+2]=Math.round(y),d[w+3]=Math.round(b);return null!=e&&(e.width=i,e.height=o,_=e.getContext("2d"),x=new ImageData(d,i,o),_.putImageData(x,0,0)),n!==t&&n.dispose(),[2,d]}})})},t.reshape=function(t,e){var n=tt(t,"x","reshape");return e=C(e,n.size),f(n.size===y(e),"new shape and old shape must have the same number of elements."),mt.engine.runKernel(function(t){return t.reshape(n,e)},{$x:n},function(t){return{$x:function(){return t.reshape(n.shape)}}})},t.squeeze=function(e,n){var r=tt(e,"x","squeeze");return t.reshape(r,I(r.shape,n).newShape)},t.cast=function(t,e){var n=tt(t,"x","cast");return mt.engine.runKernel(function(t){return t.cast(n,e)},{$x:n},function(t){return{$x:function(){return t.clone()}}})},t.tile=function(t,e){var n=tt(t,"x","tile");return f(n.rank===e.length,"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."),mt.engine.runKernel(function(t){return t.tile(n,e)},{$x:n},function(t){return{$x:function(){var r=ie(n);if(1===n.rank)for(var o=0;o<e[0];++o)r=r.add(t.slice([o*n.shape[0]],[n.shape[0]]));else if(2===n.rank)for(o=0;o<e[0];++o)for(var i=0;i<e[1];++i)r=r.add(t.slice([o*n.shape[0],i*n.shape[1]],[n.shape[0],n.shape[1]]));else if(3===n.rank)for(o=0;o<e[0];++o)for(i=0;i<e[1];++i)for(var a=0;a<e[2];++a)r=r.add(t.slice([o*n.shape[0],i*n.shape[1],a*n.shape[2]],[n.shape[0],n.shape[1],n.shape[2]]));else{if(4!==n.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+n.rank+" tensors yet.");for(o=0;o<e[0];++o)for(i=0;i<e[1];++i)for(a=0;a<e[2];++a)for(var s=0;s<e[3];++s)r=r.add(t.slice([o*n.shape[0],i*n.shape[1],a*n.shape[2],s*n.shape[3]],[n.shape[0],n.shape[1],n.shape[2],n.shape[3]]))}return r}}})},t.pad1d=function(e,n,r){return void 0===r&&(r=0),f(2===n.length,"Invalid number of paddings. Must be length of 2."),t.pad(e,[n],r)},t.pad2d=function(e,n,r){return void 0===r&&(r=0),f(2===n.length&&2===n[0].length&&2===n[1].length,"Invalid number of paddings. Must be length of 2 each."),t.pad(e,n,r)},t.pad3d=function(e,n,r){return void 0===r&&(r=0),f(3===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length,"Invalid number of paddings. Must be length of 2 each."),t.pad(e,n,r)},t.pad4d=function(e,n,r){return void 0===r&&(r=0),f(4===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length&&2===n[3].length,"Invalid number of paddings. Must be length of 2 each."),t.pad(e,n,r)},t.pad=function(t,e,n){void 0===n&&(n=0);var r=tt(t,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o=e.map(function(t){return t[0]});return mt.engine.runKernel(function(t){return t.pad(r,e,n)},{$x:r},function(t){return{$x:function(){return t.slice(o,r.shape)}}})},t.stack=function(t,e){void 0===e&&(e=0);var n=et(t,"tensors","stack");if(f(n.length>=1,"Pass at least one tensor to tf.stack"),1===n.length)return n[0].expandDims(e);var r=n[0].shape,o=n[0].dtype;f(e<=n[0].rank,"Axis must be <= rank of the tensor"),n.forEach(function(t){d(r,t.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(t){f(o===t.dtype,"All tensors passed to stack must have matching dtypes")});var i=n.map(function(t){return t.expandDims(e)});return kt(i,e)},t.unstack=function(t,e){void 0===e&&(e=0);for(var n,r=tt(t,"x","unstack"),o=r.shape[e],i=Array(r.rank-1).fill(0),a=0,s=0;s<r.rank;s++)s!==e&&(i[a]=r.shape[s],a++);n=Array(o).fill(1);var u=Array(r.rank).fill(0),l=r.shape.slice();return n.map(function(t){l[e]=t;var n=r.slice(u,l);return u[e]+=t,n.reshape(i)})},t.split=function(t,e,n){void 0===n&&(n=0);var r,o=tt(t,"x","split");n=wt(n,o.shape)[0],"number"==typeof e?(f(o.shape[n]%e==0,"Number of splits must evenly divide the axis."),r=Array(e).fill(o.shape[n]/e)):(f(o.shape[n]===e.reduce(function(t,e){return t+e}),"The sum of sizes must match the size of the axis dimension."),r=e);var i=Array(o.rank).fill(0),a=o.shape.slice();return r.map(function(t){a[n]=t;var e=o.slice(i,a);return i[n]+=t,e})},t.cumsum=function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var o=tt(t,"x","cumsum"),i=xt([e|=0],o.rank),a=o;null!=i&&(a=o.transpose(i));var s=Et(1,o.rank)[0],u=mt.engine.runKernel(function(t){return t.cumsum(a,s,n,r)},{permutedX:a},function(t){return{permutedX:function(){return t.cumsum(e,n,!r)}}});return null!=i&&(u=u.transpose(i)),u},t.expandDims=function(e,n){void 0===n&&(n=0);var r=tt(e,"x","expandDims");f(n<=r.rank,"Axis must be <= rank of the tensor");var o=r.shape.slice();return n<0&&(f(-(r.rank+1)<=n,"Axis must be in the interval ["+-(r.rank+1)+", "+r.rank+"]"),n=r.rank+n+1),o.splice(n,0,1),t.reshape(r,o)},t.buffer=function(t,e,n){return void 0===e&&(e="float32"),new G(t,e,n)},t.print=function(t,e){void 0===e&&(e=!1),console.log(t.toString(e))},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"clone",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"eye",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"randomNormal",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"truncatedNormal",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"randomUniform",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"multinomial",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"oneHot",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"fromPixels",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"toPixels",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"reshape",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"squeeze",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"cast",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tile",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"pad",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"stack",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"unstack",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"split",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"cumsum",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"expandDims",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"buffer",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"print",null),t}(),se=ae.buffer,ue=ae.toPixels,le=Ct(ae.cast),ce=Ct(ae.clone),pe=Ct(ae.cumsum),he=Ct(ae.expandDims),fe=Ct(ae.eye),de=Ct(ae.fromPixels),me=Ct(ae.multinomial),ge=Ct(ae.oneHot),ve=Ct(ae.pad),ye=Ct(ae.pad1d),be=Ct(ae.pad2d),we=Ct(ae.pad3d),_e=Ct(ae.pad4d),xe=Ct(ae.print),Oe=Ct(ae.rand),Ee=Ct(ae.randomNormal),Se=Ct(ae.randomUniform),Ce=Ct(ae.reshape),Ie=Ct(ae.split),Ae=Ct(ae.squeeze),ke=Ct(ae.stack),Ne=Ct(ae.tile),Pe=Ct(ae.truncatedNormal),Te=Ct(ae.unstack);function Re(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var i=n-1-o;(e[e.length-1-o]||1)>1&&1===(t[i]||1)&&r.unshift(i)}return r}function Me(t,e){for(var n=[],r=0;r<e.length;r++){var o=t[t.length-r-1],i=e.length-r-1;(null==o||1===o&&e[i]>1)&&n.unshift(i)}return n}function De(t,e){for(var n=[],r="Operands could not be broadcast together with shapes "+t+" and "+e+".",o=Math.max(t.length,e.length),i=0;i<o;i++){var a=t[t.length-i-1]||1,s=e[e.length-i-1]||1;if(a>1&&s>1&&a!==s)throw Error(r);n.unshift(Math.max(a,s))}return n}var je=function(){function t(){}return t.neg=function(t){var e=tt(t,"x","neg");return mt.engine.runKernel(function(t){return t.neg(e)},{$x:e},function(t){return{$x:function(){return t.neg()}}})},t.ceil=function(t){var e=tt(t,"x","ceil");return mt.engine.runKernel(function(t){return t.ceil(e)},{$x:e},function(t){return{$x:function(){return ie(t)}}})},t.floor=function(t){var e=tt(t,"x","floor");return mt.engine.runKernel(function(t){return t.floor(e)},{$x:e},function(t){return{$x:function(){return ie(t)}}})},t.sign=function(t){var e=tt(t,"x","sign");return mt.engine.runKernel(function(t){return t.sign(e)},{$x:e},function(t){return{$x:function(){return ie(t)}}})},t.round=function(t){var e=tt(t,"x","round");return mt.engine.runKernel(function(t){return t.round(e)},{$x:e},function(t){return{$x:function(){return ie(t)}}})},t.exp=function(t){var e=tt(t,"x","exp");return mt.engine.runKernel(function(t,n){return n(t.exp(e))},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mulStrict(n)}}})},t.expm1=function(t){var e=tt(t,"x","expm1");return mt.engine.runKernel(function(t){return t.expm1(e)},{$x:e},function(t){return{$x:function(){return t.mulStrict(e.exp())}}})},t.log=function(t){var e=tt(t,"x","log");return mt.engine.runKernel(function(t){return t.log(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.toFloat())}}})},t.log1p=function(t){var e=tt(t,"x","log1p");return mt.engine.runKernel(function(t){return t.log1p(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.add(Qt(1)))}}})},t.sqrt=function(t){var e=tt(t,"x","sqrt");return mt.engine.runKernel(function(t){return t.sqrt(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.toFloat().sqrt().mul(Qt(2)))}}})},t.rsqrt=function(t){var e=tt(t,"x","rsqrt");return mt.engine.runKernel(function(t){return t.rsqrt(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.pow(Qt(1.5)).mul(Qt(2))).neg()}}})},t.square=function(t){var e=tt(t,"x","square");return mt.engine.runKernel(function(t){return t.square(e)},{$x:e},function(t){return{$x:function(){return t.mulStrict(e.toFloat().mul(Qt(2)))}}})},t.reciprocal=function(t){var e=tt(t,"x","reciprocal");return mt.engine.runKernel(function(t){return t.reciprocal(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.square().neg())}}})},t.abs=function(t){var e=tt(t,"x","abs");return mt.engine.runKernel(function(t){return t.abs(e)},{$x:e},function(t){return{$x:function(){return t.mulStrict(e.toFloat().step(-1))}}})},t.clipByValue=function(t,e,n){var r=tt(t,"x","clipByValue");return f(e<=n,"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."),mt.engine.runKernel(function(t){return t.clip(r,e,n)},{$x:r},function(t){return{$x:function(){return t.where(r.greaterEqual(Qt(e)).logicalAnd(r.lessEqual(Qt(n))),ie(t))}}})},t.sigmoid=function(t){var e=tt(t,"x","sigmoid");return mt.engine.runKernel(function(t,n){return n(t.sigmoid(e))},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mulStrict(n.mul(Qt(1).sub(n)))}}})},t.logSigmoid=function(t){var e=tt(t,"x","logSigmoid");return mt.engine.runKernel(function(t){return t.softplus(e.neg()).neg()},{$x:e},function(t){return{$x:function(){return t.mulStrict(e.neg().sigmoid())}}})},t.softplus=function(t){var e=tt(t,"x","softplus");return mt.engine.runKernel(function(t){return t.softplus(e)},{$x:e},function(t){return{$x:function(){return t.mulStrict(e.sigmoid())}}})},t.sin=function(t){var e=tt(t,"x","sin");return mt.engine.runKernel(function(t){return t.sin(e)},{$x:e},function(t){return{$x:function(){return e.toFloat().cos().mulStrict(t)}}})},t.cos=function(t){var e=tt(t,"x","cos");return mt.engine.runKernel(function(t){return t.cos(e)},{$x:e},function(t){return{$x:function(){return e.toFloat().sin().neg().mulStrict(t)}}})},t.tan=function(t){var e=tt(t,"x","tan");return mt.engine.runKernel(function(t){return t.tan(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.cos().square())}}})},t.asin=function(t){var e=tt(t,"x","asin");return mt.engine.runKernel(function(t){return t.asin(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(Qt(1).sub(e.toFloat().square()).sqrt())}}})},t.acos=function(t){var e=tt(t,"x","acos");return mt.engine.runKernel(function(t){return t.acos(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(Qt(1).sub(e.toFloat().square()).sqrt()).neg()}}})},t.atan=function(t){var e=tt(t,"x","atan");return mt.engine.runKernel(function(t){return t.atan(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(Qt(1).add(e.toFloat().square()))}}})},t.sinh=function(t){var e=tt(t,"x","sinh");return mt.engine.runKernel(function(t){return t.sinh(e)},{$x:e},function(t){return{$x:function(){return e.toFloat().cosh().mulStrict(t)}}})},t.cosh=function(t){var e=tt(t,"x","cosh");return mt.engine.runKernel(function(t){return t.cosh(e)},{$x:e},function(t){return{$x:function(){return e.toFloat().sinh().mulStrict(t)}}})},t.tanh=function(t){var e=tt(t,"x","tanh");return mt.engine.runKernel(function(t,n){return n(t.tanh(e))},{$x:e},function(t,e){var n=e[0];return{$x:function(){return Qt(1).sub(n.square()).mulStrict(t)}}})},t.asinh=function(t){var e=tt(t,"x","asinh");return mt.engine.runKernel(function(t){return t.asinh(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(Qt(1).add(e.toFloat().square()).sqrt())}}})},t.acosh=function(t){var e=tt(t,"x","acosh");return mt.engine.runKernel(function(t){return t.acosh(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.toFloat().square().sub(Qt(1)).sqrt())}}})},t.atanh=function(t){var e=tt(t,"x","atanh");return mt.engine.runKernel(function(t){return t.atanh(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(Qt(1).sub(e.toFloat().square()))}}})},t.erf=function(t){var e=tt(t,"x","erf");return f("int32"===e.dtype||"float32"===e.dtype,"Input dtype must be `int32` or `float32`."),"int32"===e.dtype&&(e=e.toFloat()),mt.engine.runKernel(function(t){return t.erf(e)},{$x:e},function(t){return{$x:function(){return t.mulStrict(Qt(2/Math.sqrt(Math.PI)).mul(e.square().neg().exp()))}}})},t.step=function(t,e){void 0===e&&(e=0);var n=tt(t,"x","step");return mt.engine.runKernel(function(t){return t.step(n,e)},{$x:n},function(t){return{$x:function(){return ie(t)}}})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"neg",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"ceil",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"floor",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sign",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"round",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"exp",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"expm1",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"log",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"log1p",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sqrt",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"rsqrt",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"square",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"reciprocal",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"abs",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"clipByValue",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sigmoid",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"logSigmoid",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"softplus",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sin",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"cos",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tan",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"asin",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"acos",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"atan",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sinh",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"cosh",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tanh",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"asinh",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"acosh",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"atanh",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"erf",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"step",null),t}(),Le=Ct(je.abs),ze=Ct(je.acos),Be=Ct(je.acosh),Fe=Ct(je.asin),Ve=Ct(je.asinh),Ue=Ct(je.atan),We=Ct(je.atanh),qe=Ct(je.ceil),He=Ct(je.clipByValue),Ge=Ct(je.cos),$e=Ct(je.cosh),Ke=Ct(je.erf),Qe=Ct(je.exp),Xe=Ct(je.expm1),Ye=Ct(je.floor),Ze=Ct(je.log),Je=Ct(je.log1p),tn=Ct(je.logSigmoid),en=Ct(je.neg),nn=Ct(je.reciprocal),rn=Ct(je.round),on=Ct(je.rsqrt),an=Ct(je.sigmoid),sn=Ct(je.sign),un=Ct(je.sin),ln=Ct(je.sinh),cn=Ct(je.softplus),pn=Ct(je.sqrt),hn=Ct(je.square),fn=Ct(je.step),dn=Ct(je.tan),mn=Ct(je.tanh),gn=function(){function t(){}return t.batchNormalization2d=function(e,n,r,o,i,a){void 0===o&&(o=.001);var s,u,l=tt(e,"x","batchNormalization"),c=tt(n,"mean","batchNormalization"),p=tt(r,"variance","batchNormalization");return null!=i&&(s=tt(i,"scale","batchNormalization")),null!=a&&(u=tt(a,"offset","batchNormalization")),f(2===l.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+l.rank+"."),f(2===c.rank||1===c.rank,"Error in batchNormalization2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."),f(2===p.rank||1===p.rank,"Error in batchNormalization2D: variance must be rank 2 or rank 1 but got rank "+p.rank+"."),null!=s&&f(2===s.rank||1===s.rank,"Error in batchNormalization2D: scale must be rank 2 or rank 1 but got rank "+s.rank+"."),null!=u&&f(2===u.rank||1===u.rank,"Error in batchNormalization2D: offset must be rank 2 or rank 1 but got rank "+u.rank+"."),t.batchNormalization(l,c,p,o,s,u)},t.batchNormalization3d=function(e,n,r,o,i,a){void 0===o&&(o=.001);var s,u,l=tt(e,"x","batchNormalization"),c=tt(n,"mean","batchNormalization"),p=tt(r,"variance","batchNormalization");return null!=i&&(s=tt(i,"scale","batchNormalization")),null!=a&&(u=tt(a,"offset","batchNormalization")),f(3===l.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+l.rank+"."),f(3===c.rank||1===c.rank,"Error in batchNormalization3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."),f(3===p.rank||1===p.rank,"Error in batchNormalization3D: variance must be rank 3 or rank 1 but got rank "+p.rank+"."),null!=s&&f(3===s.rank||1===s.rank,"Error in batchNormalization3D: scale must be rank 3 or rank 1 but got rank "+s.rank+"."),null!=u&&f(3===u.rank||1===u.rank,"Error in batchNormalization3D: offset must be rank 3 or rank 1 but got rank "+u.rank+"."),t.batchNormalization(l,c,p,o,s,u)},t.batchNormalization4d=function(e,n,r,o,i,a){void 0===o&&(o=.001);var s,u,l=tt(e,"x","batchNormalization"),c=tt(n,"mean","batchNormalization"),p=tt(r,"variance","batchNormalization");return null!=i&&(s=tt(i,"scale","batchNormalization")),null!=a&&(u=tt(a,"offset","batchNormalization")),f(4===l.rank,"Error in batchNormalization4D: x must be rank 4 but got rank "+l.rank+"."),f(4===c.rank||1===c.rank,"Error in batchNormalization4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."),f(4===p.rank||1===p.rank,"Error in batchNormalization4D: variance must be rank 4 or rank 1 but got rank "+p.rank+"."),null!=s&&f(4===s.rank||1===s.rank,"Error in batchNormalization4D: scale must be rank 4 or rank 1 but got rank "+s.rank+"."),null!=u&&f(4===u.rank||1===u.rank,"Error in batchNormalization4D: offset must be rank 4 or rank 1 but got rank "+u.rank+"."),t.batchNormalization(l,c,p,o,s,u)},t.batchNormalization=function(t,e,n,r,o,i){void 0===r&&(r=.001);var a,s,u,l=tt(t,"x","batchNormalization"),c=tt(e,"mean","batchNormalization"),p=tt(n,"variance","batchNormalization");return null!=o&&(a=tt(o,"scale","batchNormalization")),null!=i&&(s=tt(i,"offset","batchNormalization")),f(c.rank===p.rank,"Batch normalization gradient requires mean and variance to have equal ranks."),f(null==s||c.rank===s.rank,"Batch normalization gradient requires mean and offset to have equal ranks."),f(null==a||c.rank===a.rank,"Batch normalization gradient requires mean and scale to have equal ranks."),u=0===l.rank||1===l.rank?l.as4D(1,1,1,l.size):2===l.rank?l.as4D(1,1,l.shape[0],l.shape[1]):3===l.rank?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l,mt.engine.runKernel(function(t){return t.batchNormalization(u,vn(c),vn(p),r,vn(a),vn(s))},{$x:l,$mean:c,$variance:p,$scale:a,$offset:s},function(t){var e=null==a?Qt(1):a,n=Me(c.shape,u.shape),o=[];if(1===c.rank){for(var i=0;i<u.shape.length-1;++i)o.push(u.shape[i]);o.push(1)}var s=l.sub(c),h=t.mul(e),f=on(p.add(Qt(r))),d=f.mul(f).mul(f).mul(Qt(-.5));return{$x:function(){return 1===c.rank?t.mul(Ne(f.as4D(1,1,1,c.shape[0]),o)).mul(e).reshape(l.shape):t.mul(f).mul(e).reshape(l.shape)},$mean:function(){var t=f.mul(Qt(-1)).mul(h);return 1===c.rank&&(t=t.sum(n)),t.reshape(c.shape)},$variance:function(){var t=d.mul(s).mul(h);return 1===c.rank&&(t=t.sum(n)),t.reshape(c.shape)},$scale:function(){var e=s.mul(f),r=t.mul(e);return 1===c.rank&&(r=r.sum(n)),r.reshape(c.shape)},$offset:function(){var e=t;return 1===c.rank&&(e=e.sum(n)),e.reshape(c.shape)}}}).reshape(l.shape)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"batchNormalization",null),t}();function vn(t){return null==t?null:0===t.rank?t.as1D():1===t.rank?t:2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}var yn=Ct(gn.batchNormalization2d),bn=Ct(gn.batchNormalization3d),wn=Ct(gn.batchNormalization4d),_n=Ct(gn.batchNormalization);function xn(t,e,n,r,o,i){void 0===i&&(i="channelsLast");var a,s=En(e),u=s[0],l=s[1];if("channelsLast"===i)a=[u,l,t[3],t[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);a=[u,l,t[1],t[1]]}return On(t,a,n,1,r,o,!1,i)}function On(t,e,n,r,o,i,a,s){void 0===a&&(a=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],p=u[2],h=u[3];if("channelsLast"===s)l=t[0],c=t[1],p=t[2],h=t[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);l=t[0],h=t[1],c=t[2],p=t[3]}var d,m=e[0],g=e[1],v=e[3],y=En(n),b=y[0],_=y[1],x=En(r),O=x[0],E=x[1],S=function(t,e,n,r,o,i,a,s){var u,l,c;if("number"==typeof t){u={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};var p=function(t,e,n,r,o,i){null==o&&(o=function(t,e,n,r){void 0===r&&(r=1);var o=Sn(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}(t,e,r));var a=t[1],s=Cn((t[0]-e+2*o)/r+1,i);f(w(s),"The output # of rows ("+s+") must be an integer. Change the stride and/or zero pad parameters");var u=Cn((a-e+2*o)/r+1,i);return f(w(u),"The output # of columns ("+u+") must be an integer. Change the stride and/or zero pad parameters"),[s,u,1]}([e,n,1],i,0,r,t,s);l=p[0],c=p[1]}else if("same"===t){var h=((l=Math.ceil(e/r))-1)*r+i-e,d=((c=Math.ceil(n/o))-1)*o+a-n,m=Math.floor(h/2),g=h-m,v=Math.floor(d/2);u={top:m,bottom:g,left:v,right:d-v,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((e-i+1)/r),c=Math.ceil((n-a+1)/o)}return{padInfo:u,outHeight:l,outWidth:c}}(o,c,p,b,_,Sn(m,O),Sn(g,E),i),C=S.outHeight,I=S.outWidth,A=a?v*h:v;return"channelsFirst"===s?d=[l,A,C,I]:"channelsLast"===s&&(d=[l,C,I,A]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:p,inChannels:h,outHeight:C,outWidth:I,outChannels:A,padInfo:S.padInfo,strideHeight:b,strideWidth:_,filterHeight:m,filterWidth:g,dilationHeight:O,dilationWidth:E,inShape:t,outShape:d,filterShape:e}}function En(t){return"number"==typeof t?[t,t]:t}function Sn(t,e){return e<=1?t:t+(t-1)*(e-1)}function Cn(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}var In=function(){function t(){}return t.conv1d=function(e,n,r,o,i,a,s){void 0===i&&(i="NWC"),void 0===a&&(a=1);var u=tt(e,"x","conv1d"),l=tt(n,"filter","conv1d"),c=u,p=!1;2===u.rank&&(p=!0,c=u.as3D(1,u.shape[0],u.shape[1])),f(3===c.rank,"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."),f(3===l.rank,"Error in conv1d: filter must be rank 3, but got rank "+l.rank+"."),null!=s&&f(w(o),"Error in conv1d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+o+"."),f(c.shape[2]===l.shape[1],"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+l.shape[1]+"."),f(kn(r,a),"Error in conv1D: Either stride or dilation must be 1. Got stride "+r+" and dilation '"+a+"'"),f("NWC"===i,"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported.");var h=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]),d=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),m=t.conv2d(d,h,[1,r],o,"NHWC",[1,a],s);return p?m.as2D(m.shape[2],m.shape[3]):m.as3D(m.shape[0],m.shape[2],m.shape[3])},t.conv2d=function(e,n,r,o,i,a,s){void 0===i&&(i="NHWC"),void 0===a&&(a=[1,1]);var u=tt(e,"x","conv2d"),l=tt(n,"filter","conv2d"),c=u,p=!1;3===u.rank&&(p=!0,c=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),f(4===c.rank,"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."),f(4===l.rank,"Error in conv2d: filter must be rank 4, but got rank "+l.rank+"."),null!=s&&f(w(o),"Error in conv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+o+"."),f(c.shape[3]===l.shape[2],"Error in conv2d: depth of input ("+c.shape[3]+") must match input depth for filter "+l.shape[2]+"."),f(kn(r,a),"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"),f("NHWC"===i,"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported.");var h=On(c.shape,l.shape,r,a,o,s),d=mt.engine.runKernel(function(t){return t.conv2d(c,l,h)},{x:c,$filter:l},function(e){return f(An(a),"Error in gradient of conv2D: dilation rates greater than 1 are notyet supported in gradients. Got dilations '"+a+"'"),{x:function(){return t.conv2dDerInput(c.shape,e,l,r,o)},$filter:function(){return t.conv2dDerFilter(c,e,l.shape,r,o)}}});return p?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d},t.conv2dDerInput=function(t,e,n,r,o,i){f(t.length===e.rank,"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match");var a=t,s=e,u=!1;3===e.rank&&(u=!0,s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),a=[1,t[0],t[1],t[2]]);var l=a[3],c=s.shape[3];f(4===a.length,"Error in conv2dDerInput: inShape must be length 4, but got length "+a.length+"."),f(4===s.rank,"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank),f(4===n.rank,"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank),f(l===n.shape[2],"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."),f(c===n.shape[3],"Error in conv2dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[3]+"."),null!=i&&f(w(o),"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+".");var p=On(a,n.shape,r,1,o,i),h=mt.engine.runKernel(function(t){return t.conv2dDerInput(s,n,p)},{dy4D:s});return u?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},t.conv2dDerFilter=function(t,e,n,r,o,i){var a=t;3===t.rank&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var s=e;3===s.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),f(4===a.rank,"Error in conv2dDerFilter: input must be rank 4, but got shape "+a.shape+"."),f(4===s.rank,"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."),f(4===n.length,"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."),f(a.shape[3]===n[2],"Error in conv2dDerFilter: depth of input "+a.shape[3]+") must match input depth in filter ("+n[2]+"."),f(s.shape[3]===n[3],"Error in conv2dDerFilter: depth of dy ("+s.shape[3]+") must match output depth for filter ("+n[3]+")."),null!=i&&f(w(o),"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+".");var u=On(a.shape,n,r,1,o,i);return mt.engine.runKernel(function(t){return t.conv2dDerFilter(a,s,u)},{x4D:a,dy4D:s})},t.conv2dTranspose=function(e,n,r,o,i,a){var s=tt(e,"x","conv2dTranspose"),u=tt(n,"filter","conv2dTranspose");return t.conv2dDerInput(r,s,u,o,i,a)},t.depthwiseConv2d=function(t,e,n,r,o,i,a){void 0===o&&(o="NHWC"),void 0===i&&(i=[1,1]);var s=tt(t,"x","depthwiseConv2d"),u=tt(e,"filter","depthwiseConv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),f(4===l.rank,"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."),f(4===u.rank,"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."),f(l.shape[3]===u.shape[2],"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."),null==i&&(i=[1,1]),f(kn(n,i),"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"),null!=a&&f(w(r),"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+".");var p=On(l.shape,u.shape,n,i,r,a,!0),h=mt.engine.runKernel(function(t){return t.depthwiseConv2D(l,u,p)},{x:l,$filter:u},function(t){return f(An(i),"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"),{x:function(){return function(t,e,n,r){var o=e,i=!1;3===e.rank&&(i=!0,o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=mt.engine.runKernel(function(t){return t.depthwiseConv2DDerInput(o,n,r)},{dy4D:o});return i?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}(0,t,u,p)},$filter:function(){return function(t,e,n,r){var o=l;3===l.rank&&(o=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]));var i=e;return 3===i.rank&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),mt.engine.runKernel(function(t){return t.depthwiseConv2DDerFilter(o,i,r)},{x4D:o,dy4D:i})}(0,t,0,p)}}});return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},t.separableConv2d=function(e,n,r,o,i,a,s){void 0===a&&(a=[1,1]),void 0===s&&(s="NHWC");var u=tt(e,"x","separableConv2d"),l=tt(n,"depthwiseFilter","separableConv2d"),c=tt(r,"pointwiseFilter","separableConv2d"),p=u,h=!1;if(3===u.rank&&(h=!0,p=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),"NCHW"===s)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");f(4===p.rank,"Error in separableConv2d: input must be rank 4, but got rank "+p.rank+"."),f(4===l.rank,"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+l.rank+"."),f(4===c.rank,"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+l.rank+"."),f(1===c.shape[0],"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."),f(1===c.shape[1],"Error in separableConv2d: the second dimension of pointwise filter  must be 1, but got "+c.shape[1]+".");var d=l.shape[2],m=l.shape[3];f(c.shape[2]===d*m,"Error in separableConv2d: the third dimension of pointwise filter must be "+d*m+", but got "+c.shape[2]+".");var g=t.depthwiseConv2d(p,l,o,i,s,a),v=t.conv2d(g,c,1,"valid",s);return h?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"conv1d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"conv2d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"conv2dTranspose",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"depthwiseConv2d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"separableConv2d",null),t}();function An(t){var e=function(t){return"number"==typeof t?[t,t]:t}(t);return 1===e[0]&&1===e[1]}function kn(t,e){return An(t)||An(e)}var Nn=Ct(In.conv1d),Pn=Ct(In.conv2d),Tn=Ct(In.depthwiseConv2d),Rn=Ct(In.separableConv2d),Mn=Ct(In.conv2dTranspose),Dn=function(){function t(){}return t.matMul=function(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);var o=tt(t,"a","matMul"),i=tt(e,"b","matMul"),a=n?o.shape[0]:o.shape[1],s=r?i.shape[1]:i.shape[0];return f(2===o.rank&&2===i.rank,"Error in matMul: inputs must be rank 2, got ranks "+o.rank+" and "+i.rank+"."),f(a===s,"Error in matMul: inner shapes ("+a+") and ("+s+") of Tensors with shapes "+o.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."),mt.engine.runKernel(function(t){return t.matMul(o,i,n,r)},{$a:o,$b:i},function(t){return n||r?!n&&r?{$a:function(){return t.matMul(i.toFloat(),!1,!1)},$b:function(){return t.matMul(o.toFloat(),!0,!1)}}:n&&!r?{$a:function(){return i.toFloat().matMul(t,!1,!0)},$b:function(){return o.toFloat().matMul(t,!1,!1)}}:{$a:function(){return i.toFloat().matMul(t,!0,!0)},$b:function(){return t.matMul(o.toFloat(),!0,!0)}}:{$a:function(){return t.matMul(i.toFloat(),!1,!0)},$b:function(){return o.toFloat().matMul(t,!0,!1)}}})},t.outerProduct=function(t,e){var n=tt(t,"v1","outerProduct"),r=tt(e,"v2","outerProduct");return f(1===n.rank&&1===r.rank,"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."),n.as2D(-1,1).matMul(r.as2D(1,-1))},t.dot=function(t,e){var n=tt(t,"t1","dot"),r=tt(e,"t2","dot");f(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+".");var o=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];return f(o===i,"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+i+"."),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"matMul",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"outerProduct",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"dot",null),t}(),jn=Ct(Dn.matMul),Ln=Ct(Dn.dot),zn=Ct(Dn.outerProduct),Bn=function(){function t(){}return t.reverse1d=function(e){var n=tt(e,"x","reverse");return f(1===n.rank,"Error in reverse1D: x must be rank 1 but got\n             rank "+n.rank+"."),t.reverse(n,0)},t.reverse2d=function(e,n){var r=tt(e,"x","reverse");return f(2===r.rank,"Error in reverse2D: x must be rank 2 but got\n             rank "+r.rank+"."),t.reverse(r,n)},t.reverse3d=function(e,n){var r=tt(e,"x","reverse");return f(3===r.rank,"Error in reverse3D: x must be rank 3 but got\n             rank "+r.rank+"."),t.reverse(r,n)},t.reverse4d=function(e,n){var r=tt(e,"x","reverse");return f(4===r.rank,"Error in reverse4D: x must be rank 4 but got\n             rank "+r.rank+"."),t.reverse(r,n)},t.reverse=function(t,e){var n=tt(t,"x","reverse");if(0===n.rank)return n.clone();var r=wt(e,n.shape);return mt.engine.runKernel(function(t){return t.reverse(n,r)},{$x:n},function(t){return{$x:function(){return t.reverse(r)}}}).reshapeAs(n)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"reverse",null),t}(),Fn=Ct(Bn.reverse),Vn=Ct(Bn.reverse1d),Un=Ct(Bn.reverse2d),Wn=Ct(Bn.reverse3d),qn=Ct(Bn.reverse4d),Hn=function(){function t(){}return t.maxPool=function(t,e,n,r,o){var i=tt(t,"x","maxPool"),a=i,s=!1;3===i.rank&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),f(4===a.rank,"Error in maxPool: input must be rank 4 but got rank "+a.rank+"."),null!=o&&f(w(r),"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+".");var u=xn(a.shape,e,n,r,o),l=mt.engine.runKernel(function(t,e){return e(t.maxPool(a,u))},{x:a},function(t,o){var i=o[0];return{x:function(){return function(t,e,n,r,o,i,a){var s=tt(t,"dy","maxPoolBackprop"),u=tt(e,"input","maxPoolBackprop"),l=tt(n,"output","maxPoolBackprop");f(u.rank===s.rank,"Rank of input ("+u.rank+") does not match rank of dy ("+s.rank+")"),f(4===s.rank,"Error in maxPoolBackprop: dy must be rank 4 but got rank "+s.rank+"."),f(4===u.rank,"Error in maxPoolBackprop: input must be rank 4 but got rank "+u.rank+".");var c=xn(u.shape,r,o,i,void 0);return mt.engine.runKernel(function(t){return t.maxPoolBackprop(s,u,l,c)},{$dy:s,$input:u})}(t,a,i,e,n,r)}}});return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l},t.avgPool=function(t,e,n,r,o){var i=tt(t,"x","avgPool");f("float32"===i.dtype,"The input dtype to avgPool must be float32");var a=i,s=!1;3===i.rank&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),f(4===a.rank,"Error in avgPool: x must be rank 4 but got rank "+a.rank+"."),null!=o&&f(w(r),"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+".");var u=xn(a.shape,e,n,r),l=mt.engine.runKernel(function(t){return t.avgPool(a,u)},{x:a},function(t){return{x:function(){return function(t,e,n,r,o){var i=tt(t,"dy","avgPoolBackprop"),a=tt(e,"input","avgPoolBackprop");f(a.rank===i.rank,"Rank of input ("+a.rank+") does not match rank of dy ("+i.rank+")");var s=a,u=i,l=!1;3===a.rank&&(l=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]),u=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),f(4===u.rank,"Error in avgPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."),f(4===s.rank,"Error in avgPoolBackprop: input must be rank 4 but got rank "+s.rank+".");var c=xn(s.shape,n,r,o),p=mt.engine.runKernel(function(t){return t.avgPoolBackprop(u,s,c)},{dy4D:u,input4D:s});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}(t,a,e,n,r)}}});return l=l.cast(i.dtype),s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"maxPool",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"avgPool",null),t}(),Gn=Ct(Hn.maxPool),$n=Ct(Hn.avgPool);function Kn(t,e,n,r,o,i){void 0===o&&(o=0),void 0===i&&(i=0);for(var a=[],s=[],u=0;u<t.length;u++)a[u]=Qn(o,e,r,t,u),s[u]=Xn(i,n,r,t,u);var l=new Array(t.length).fill(0);return l=l.map(function(t,e){for(var n=0,o=a[e];!(r[e]>0?o>=s[e]:o<=s[e]);o+=r[e])n+=1;return n}),[a,l]}function Qn(t,e,n,r,o){var i=e[o];t&1<<o&&(i=n[o]>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var a=r[o];return i<0&&(i+=a),p(0,i,a-1)}function Xn(t,e,n,r,o){var i=e[o];t&1<<o&&(i=n[o]>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var a=r[o];return i<0&&(i+=a),n[o]>0?p(0,i,a):p(-1,i,a-1)}var Yn=function(){function t(){}return t.slice1d=function(e,n,r){var o=tt(e,"x","slice1d");return f(1===o.rank,"slice1d expects a rank-1 tensor, but got a rank-"+o.rank+" tensor"),t.slice(o,[n],[r])},t.slice2d=function(e,n,r){var o=tt(e,"x","slice2d");return f(2===o.rank,"slice1d expects a rank-2 tensor, but got a rank-"+o.rank+" tensor"),t.slice(o,n,r)},t.slice3d=function(e,n,r){var o=tt(e,"x","slice3d");return f(3===o.rank,"slice1d expects a rank-3 tensor, but got a rank-"+o.rank+" tensor"),t.slice(o,n,r)},t.slice4d=function(e,n,r){var o=tt(e,"x","slice4d");return f(4===o.rank,"slice1d expects a rank-4 tensor, but got a rank-"+o.rank+" tensor"),t.slice(o,n,r)},t.slice=function(t,e,n){var r,o,i=tt(t,"x","slice");if(0===i.rank)throw new Error("Slicing scalar is not possible");r="number"==typeof e?[e].concat(new Array(i.rank-1).fill(0)):e.length<i.rank?e.concat(new Array(i.rank-e.length).fill(0)):e,o=(o=null==n?new Array(i.rank).fill(-1):"number"==typeof n?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map(function(t,e){return t>=0?t:(f(-1===t,"Bad value in size"),i.shape[e]-r[e])}),function(t,e,n){f(t.rank===e.length,"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."),f(t.rank===n.length,"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+").");for(var r=0;r<t.rank;++r)f(e[r]+n[r]<=t.shape[r],"Error in slice"+t.rank+"D: begin["+r+"] + size["+r+"] ("+(e[r]+n[r])+") would overflow input.shape["+r+"] ("+t.shape[r]+")")}(i,r,o);var a=i.shape;return mt.engine.runKernel(function(t){return t.slice(i,r,o)},{$x:i},function(t){for(var e=[],n=0;n<t.rank;n++)e.push([r[n],a[n]-r[n]-o[n]]);return{$x:function(){return t.pad(e)}}})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"slice",null),t}(),Zn=Ct(Yn.slice),Jn=Ct(Yn.slice1d),tr=Ct(Yn.slice2d),er=Ct(Yn.slice3d),nr=Ct(Yn.slice4d),rr=function(){function t(){}return t.gradScope=function(t,e){return mt.engine.tidy(t,e,!0)},t.grad=function(t){return f(M(t),"The f passed in grad(f) must be a function"),function(e,n){return f(e instanceof X,"The x passed in grad(f)(x) must be a tensor"),f(null==n||n instanceof X,"The dy passed in grad(f)(x, dy) must be a tensor"),mt.engine.tidy(function(){var r=mt.engine.gradients(function(){return t(e)},[e],n),o=r.grads;return null!=n&&d(r.value.shape,n.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),or(o),o[0]})}},t.grads=function(t){return f(M(t),"The f passed in grads(f) must be a function"),function(e,n){return f(Array.isArray(e)&&e.every(function(t){return t instanceof X}),"The args passed in grads(f)(args) must be an array of tensors"),f(null==n||n instanceof X,"The dy passed in grads(f)(args, dy) must be a tensor"),mt.engine.tidy(function(){var r=mt.engine.gradients(function(){return t.apply(void 0,e)},e,n),o=r.grads;return null!=n&&d(r.value.shape,n.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),or(o),o})}},t.valueAndGrad=function(t){return f(M(t),"The f passed in valueAndGrad(f) must be a function"),function(e,n){f(e instanceof X,"The x passed in valueAndGrad(f)(x) must be a tensor"),f(null==n||n instanceof X,"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");var r=mt.engine.gradients(function(){return t(e)},[e],n),o=r.grads,i=r.value;return or(o),{grad:o[0],value:i}}},t.valueAndGrads=function(t){return f(M(t),"The f passed in valueAndGrads(f) must be a function"),function(e,n){f(Array.isArray(e)&&e.every(function(t){return t instanceof X}),"The args passed in valueAndGrads(f)(args) must be array of tensors"),f(null==n||n instanceof X,"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");var r=mt.engine.gradients(function(){return t.apply(void 0,e)},e,n);return null!=n&&d(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),or(r.grads),r}},t.variableGrads=function(t,e){if(f(M(t),"The f passed in variableGrads(f) must be a function"),f(null==e||Array.isArray(e)&&e.every(function(t){return t instanceof Y}),"The varList passed in variableGrads(f, varList) must be an array of variables"),null==e)for(var n in e=[],mt.engine.registeredVariables)e.push(mt.engine.registeredVariables[n]);var r=e.length;f((e=e.filter(function(t){return t.trainable})).length>0,"variableGrads() expects at least one of the input variables to be trainable, but none of the "+r+" variables is trainable.");var o=mt.engine.gradients(t,e,null,!0),i=o.value,a=o.grads;f(a.some(function(t){return null!=t}),"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),f(0===i.rank,"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+i.rank+" tensor");var s={};return e.forEach(function(t,e){null!=a[e]&&(s[t.name]=a[e])}),{value:i,grads:s}},t.customGrad=function(t){return mt.engine.customGrad(t)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"grad",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"grads",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"valueAndGrad",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"valueAndGrads",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"variableGrads",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"customGrad",null),t}();function or(t){if(t.filter(function(t){return null==t}).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var ir,ar,sr,ur,lr,cr=dt.tidy,pr=dt.keep,hr=dt.dispose,fr=dt.time,dr=rr.grad,mr=rr.valueAndGrad,gr=rr.grads,vr=rr.valueAndGrads,yr=rr.variableGrads,br=rr.customGrad,wr=function(){function t(){}return t.logSumExp=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=tt(t,"x","logSumExp"),o=wt(e,r.shape),i=r.max(o,!0),a=r.sub(i).exp().sum(o).log(),s=i.reshape(a.shape).add(a);if(n){var u=bt(s.shape,o);return s.reshape(u)}return s},t.sum=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=tt(t,"x","sum");"bool"===r.dtype&&(r=r.toInt());var o=wt(e,r.shape);return br(function(t){var e=xt(o,t.rank),r=o,i=t;null!=e&&(i=t.transpose(e),r=Et(r.length,t.rank));var a=mt.engine.runKernel(function(t){return t.sum(i,r)},{permutedX:i});if(n){var s=bt(a.shape,o);a=a.reshape(s)}return{value:a,gradFunc:function(e){var n=t.shape.slice();return o.forEach(function(t){n[t]=1}),e.reshape(n).mul($t(t.shape,"float32"))}}})(r)},t.mean=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=tt(t,"x","mean"),o=wt(e,r.shape),i=y(yt(r.shape,o)[1]);return br(function(t){var r=Qt(i);return{value:(r.dtype===t.dtype?t:t.cast(r.dtype)).div(r).sum(e,n),gradFunc:function(e){var n=t.shape.slice();return o.forEach(function(t){n[t]=1}),e.reshape(n).mul($t(t.shape,"float32")).div(r)}}})(r)},t.min=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=tt(t,"x","min"),o=wt(e,r.shape),i=o,a=xt(i,r.rank);null!=a&&(r=r.transpose(a),i=Et(i.length,r.rank));var s=mt.engine.runKernel(function(t){return t.min(r,i)},{$x:r});if(n){var u=bt(s.shape,o);return s.reshape(u)}return s},t.max=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=tt(t,"x","max"),o=wt(e,r.shape),i=o,a=xt(i,r.rank);null!=a&&(r=r.transpose(a),i=Et(i.length,r.rank));var s=mt.engine.runKernel(function(t){return t.max(r,i)},{$x:r});if(n){var u=bt(s.shape,o);return s.reshape(u)}return s},t.argMin=function(t,e){void 0===e&&(e=0);var n=tt(t,"x","argMin");null==e&&(e=0);var r=wt(e,n.shape),o=xt(r,n.rank);return null!=o&&(n=n.transpose(o),r=Et(r.length,n.rank)),mt.engine.runKernel(function(t){return t.argMin(n,r[0])},{$x:n})},t.argMax=function(t,e){void 0===e&&(e=0);var n=tt(t,"x","argMax");null==e&&(e=0);var r=wt(e,n.shape),o=xt(r,n.rank);return null!=o&&(n=n.transpose(o),r=Et(r.length,n.rank)),mt.engine.runKernel(function(t){return t.argMax(n,r[0])},{$x:n})},t.all=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=tt(t,"x","all","bool");f("bool"===r.dtype,"Error Tensor must be of type bool. Got: "+r.dtype);var o=wt(e,r.shape),i=o,a=xt(i,r.rank);null!=a&&(r=r.transpose(a),i=Et(i.length,r.rank));var s=mt.engine.runKernel(function(t){return t.all(r,i)},{$x:r});if(n){var u=bt(s.shape,o);return s.reshape(u)}return s},t.any=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=tt(t,"x","any","bool");f("bool"===r.dtype,"Error Tensor must be of type bool. Got: "+r.dtype);var o=wt(e,r.shape),i=o,a=xt(i,r.rank);null!=a&&(r=r.transpose(a),i=Et(i.length,r.rank));var s=mt.engine.runKernel(function(t){return t.any(r,i)},{$x:r});if(n){var u=bt(s.shape,o);return s.reshape(u)}return s},t.moments=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=wt(e,(t=tt(t,"x","moments")).shape),o=t.mean(r,n),i=o.shape;return n||(i=bt(o.shape,r)),{mean:o,variance:t.toFloat().sub(o.reshape(i)).square().mean(r,n)}},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"logSumExp",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sum",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"mean",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"min",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"max",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"argMin",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"argMax",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"all",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"any",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"moments",null),t}(),_r=Ct(wr.all),xr=Ct(wr.any),Or=Ct(wr.argMax),Er=Ct(wr.argMin),Sr=Ct(wr.logSumExp),Cr=Ct(wr.max),Ir=Ct(wr.mean),Ar=Ct(wr.min),kr=Ct(wr.moments),Nr=Ct(wr.sum),Pr=function(){function t(){}return t.notEqual=function(t,e){var n=tt(t,"a","notEqual"),r=tt(e,"b","notEqual");return J(n,r),De(n.shape,r.shape),mt.engine.runKernel(function(t){return t.notEqual(n,r)},{$a:n,$b:r})},t.notEqualStrict=function(t,e){var n=tt(t,"a","notEqualStrict"),r=tt(e,"b","notEqualStrict");return d(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)},t.less=function(t,e){var n=tt(t,"a","less"),r=tt(e,"b","less");return J(n,r),De(n.shape,r.shape),mt.engine.runKernel(function(t){return t.less(n,r)},{$a:n,$b:r})},t.lessStrict=function(t,e){var n=tt(t,"a","lessStrict"),r=tt(e,"b","lessStrict");return d(n.shape,r.shape,"Error in lessStrict: "),n.less(r)},t.equal=function(t,e){var n=tt(t,"a","equal"),r=tt(e,"b","equal");return J(n,r),De(n.shape,r.shape),mt.engine.runKernel(function(t){return t.equal(n,r)},{$a:n,$b:r})},t.equalStrict=function(t,e){var n=tt(t,"a","equalStrict"),r=tt(e,"b","equalStrict");return d(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)},t.lessEqual=function(t,e){var n=tt(t,"a","lessEqual"),r=tt(e,"b","lessEqual");return J(n,r),De(n.shape,r.shape),mt.engine.runKernel(function(t){return t.lessEqual(n,r)},{$a:n,$b:r})},t.lessEqualStrict=function(t,e){var n=tt(t,"a","lessEqualStrict"),r=tt(e,"b","lessEqualStrict");return d(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)},t.greater=function(t,e){var n=tt(t,"a","greater"),r=tt(e,"b","greater");return J(n,r),De(n.shape,r.shape),mt.engine.runKernel(function(t){return t.greater(n,r)},{$a:n,$b:r})},t.greaterStrict=function(t,e){var n=tt(t,"a","greaterStrict"),r=tt(e,"b","greaterStrict");return d(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)},t.greaterEqual=function(t,e){var n=tt(t,"a","greaterEqual"),r=tt(e,"b","greaterEqual");return J(n,r),De(n.shape,r.shape),mt.engine.runKernel(function(t){return t.greaterEqual(n,r)},{$a:n,$b:r})},t.greaterEqualStrict=function(t,e){var n=tt(t,"a","greaterEqualStrict"),r=tt(e,"b","greaterEqualStrict");return d(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"notEqual",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"less",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"equal",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"lessEqual",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"greater",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"greaterEqual",null),t}(),Tr=Ct(Pr.equal),Rr=Ct(Pr.equalStrict),Mr=Ct(Pr.greater),Dr=Ct(Pr.greaterEqual),jr=Ct(Pr.greaterEqualStrict),Lr=Ct(Pr.greaterStrict),zr=Ct(Pr.less),Br=Ct(Pr.lessEqual),Fr=Ct(Pr.lessEqualStrict),Vr=Ct(Pr.lessStrict),Ur=Ct(Pr.notEqual),Wr=Ct(Pr.notEqualStrict);!function(t){t.float32="float32",t.int32="int32",t.bool="bool"}(ir||(ir={})),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(ar||(ar={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32"}(sr||(sr={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool"}(ur||(ur={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32"}(lr||(lr={}));var qr={float32:lr,int32:sr,bool:ur};function Hr(t,e){return qr[t][e]}function Gr(t){return Hr(t,"int32")}var $r=function(){function t(){}return t.add=function(t,e){var n=tt(t,"a","add"),r=tt(e,"b","add");J(n,r);var o=De(n.shape,r.shape);return mt.engine.runKernel(function(t){return t.add(n,r)},{$a:n,$b:r},function(t){return{$a:function(){var e=t,r=Me(n.shape,o);return r.length>0&&(e=e.sum(r)),e.reshape(n.shape)},$b:function(){var e=t,n=Me(r.shape,o);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)}}})},t.addStrict=function(t,e){return d(t.shape,e.shape,"Error in addStrict: "),t.add(e)},t.sub=function(t,e){var n=tt(t,"a","sub"),r=tt(e,"b","sub");J(n,r);var o=De(n.shape,r.shape);return mt.engine.runKernel(function(t){return t.subtract(n,r)},{$a:n,$b:r},function(t){return{$a:function(){var e=t,r=Me(n.shape,o);return r.length>0&&(e=e.sum(r)),e.reshape(n.shape)},$b:function(){var e=t,n=Me(r.shape,o);return n.length>0&&(e=e.sum(n)),e.neg().reshape(r.shape)}}})},t.subStrict=function(t,e){return d(t.shape,e.shape,"Error in subStrict: "),t.sub(e)},t.pow=function(t,e){var n=tt(t,"base","pow"),r=tt(e,"exp","pow"),o=De(n.shape,r.shape);return t=n.cast(Hr(n.dtype,r.dtype)),e=r.cast(Hr(n.dtype,r.dtype)),mt.engine.runKernel(function(t,e){return e(t.pow(n,r))},{$base:n,$exp:r},function(t,e){var i=e[0];return{$base:function(){var e=t.mul(r.toFloat().mul(i.div(n))),a=Me(n.shape,o);return a.length>0&&(e=e.sum(a)),e.reshape(n.shape)},$exp:function(){var e=t.mul(i.mul(n.log()).toFloat()),a=Me(r.shape,o);return a.length>0&&(e=e.sum(a)),e.reshape(r.shape)}}})},t.powStrict=function(t,e){return d(t.shape,e.shape,"Error in powStrict: "),t.pow(e)},t.mul=function(t,e){var n=tt(t,"a","mul"),r=tt(e,"b","mul");J(n,r);var o=De(n.shape,r.shape);return mt.engine.runKernel(function(t){return t.multiply(n,r)},{$a:n,$b:r},function(t){return{$a:function(){var e=t.mul(r.toFloat()),i=Me(n.shape,o);return i.length>0?e.sum(i).reshape(n.shape):e},$b:function(){var e=t.mul(n.toFloat()),i=Me(r.shape,o);return i.length>0?e.sum(i).reshape(r.shape):e}}})},t.mulStrict=function(t,e){return d(t.shape,e.shape,"Error in multiplyStrict: "),t.mul(e)},t.div=function(e,n){var r,o=tt(e,"a","div"),i=tt(n,"b","div");if(J(o,i),"int32"===o.dtype&&"int32"===i.dtype)return t.floorDiv(o,i);r=function(t){return t.realDivide(o,i)};var a=De(o.shape,i.shape);return mt.engine.runKernel(r,{$a:o,$b:i},function(t){return{$a:function(){var e=t.div(i.toFloat()),n=Me(o.shape,a);return n.length>0?e.sum(n).reshape(o.shape):e},$b:function(){var e=t.mul(o.toFloat()),n=Me(i.shape,a);n.length>0&&(e=e.sum(n).reshape(i.shape));var r=i.square();return e.div(r.toFloat()).neg()}}})},t.floorDiv=function(t,e){var n=tt(t,"a","floorDiv"),r=tt(e,"b","floorDiv");J(n,r);var o=De(n.shape,r.shape);return mt.engine.runKernel(function(t){return t.floorDiv(n,r)},{$a:n,$b:r},function(t){return{$a:function(){var e=t.div(r.toFloat()),i=Me(n.shape,o);return i.length>0?e.sum(i).reshape(n.shape):e},$b:function(){var e=t.mul(n.toFloat()),i=Me(r.shape,o);i.length>0&&(e=e.sum(i).reshape(r.shape));var a=r.square();return e.div(a.toFloat()).neg()}}})},t.divStrict=function(t,e){return d(t.shape,e.shape,"Error in divideStrict: "),t.div(e)},t.mod=function(t,e){var n=tt(t,"a","mod"),r=tt(e,"b","mod");J(n,r);var o=De(n.shape,r.shape);return mt.engine.runKernel(function(t){return t.mod(n,r)},{$a:n,$b:r},function(t){return{$a:function(){var e=Me(n.shape,o);return e.length>0?t.sum(e).reshape(n.shape):t},$b:function(){var e=t.mul(n.div(r).floor().neg()),i=Me(r.shape,o);return i.length>0?e.sum(i).reshape(r.shape):e}}})},t.modStrict=function(t,e){return d(t.shape,e.shape,"Error in modStrict: "),t.mod(e)},t.minimum=function(t,e){var n=tt(t,"a","minimum"),r=tt(e,"b","minimum");return J(n,r),"bool"===n.dtype&&(n=n.toInt()),"bool"===r.dtype&&(r=r.toInt()),De(n.shape,r.shape),mt.engine.runKernel(function(t){return t.minimum(n,r)},{$a:n,$b:r},function(t){return{$a:function(){return t.mul(n.lessEqual(r).toFloat())},$b:function(){return t.mul(n.greater(r).toFloat())}}})},t.minimumStrict=function(t,e){return d(t.shape,e.shape,"Error in minimumStrict: "),t.minimum(e)},t.maximum=function(t,e){var n=tt(t,"a","maximum"),r=tt(e,"b","maximum");return J(n,r),"bool"===n.dtype&&(n=n.toInt()),"bool"===r.dtype&&(r=r.toInt()),De(n.shape,r.shape),mt.engine.runKernel(function(t){return t.maximum(n,r)},{$a:n,$b:r},function(t){return{$a:function(){return t.mul(n.greaterEqual(r).toFloat())},$b:function(){return t.mul(n.less(r).toFloat())}}})},t.maximumStrict=function(t,e){return d(t.shape,e.shape,"Error in minimumStrict: "),t.maximum(e)},t.squaredDifference=function(t,e){var n=tt(t,"a","squaredDifference"),r=tt(e,"b","squaredDifference");return J(n,r),De(n.shape,r.shape),mt.engine.runKernel(function(t){return t.squaredDifference(n,r)},{$a:n,$b:r},function(t){var e=Qt(2);return{$a:function(){return t.mul(n.sub(r).mul(e))},$b:function(){return t.mul(r.sub(n).mul(e))}}})},t.squaredDifferenceStrict=function(t,e){return d(t.shape,e.shape,"Error in squaredDifferenceStrict: "),t.squaredDifference(e)},t.atan2=function(e,n){var r=tt(e,"a","atan2"),o=tt(n,"b","atan2");J(r,o);var i=De(r.shape,o.shape);return mt.engine.runKernel(function(t){return t.atan2(r,o)},{$a:r,$b:o},function(e){return{$a:function(){var n=t.add(r.square(),o.square()),a=e.mul(o.div(n)),s=Me(r.shape,i);return s.length>0&&(a=a.sum(s)),a.reshape(r.shape)},$b:function(){var n=t.add(r.square(),o.square()),a=en(e.mul(r.div(n))),s=Me(o.shape,i);return s.length>0&&(a=a.sum(s)),a.reshape(o.shape)}}})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"add",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sub",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"pow",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"mul",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"div",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"floorDiv",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"mod",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"minimum",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"maximum",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"squaredDifference",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"atan2",null),t}(),Kr=Ct($r.add),Qr=Ct($r.addStrict),Xr=Ct($r.atan2),Yr=Ct($r.div),Zr=Ct($r.divStrict),Jr=Ct($r.floorDiv),to=Ct($r.maximum),eo=Ct($r.maximumStrict),no=Ct($r.minimum),ro=Ct($r.minimumStrict),oo=Ct($r.mod),io=Ct($r.modStrict),ao=Ct($r.mul),so=Ct($r.mulStrict),uo=Ct($r.pow),lo=Ct($r.powStrict),co=Ct($r.squaredDifference),po=Ct($r.squaredDifferenceStrict),ho=Ct($r.sub),fo=Ct($r.subStrict),mo=Ct(function(){function t(){}return t.sigmoidCrossEntropyWithLogits=function(t,e){var n=tt(t,"labels","sigmoidCrossEntropyWithLogits"),r=tt(e,"logits","sigmoidCrossEntropyWithLogits");d(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var o=r.relu(),i=r.mul(n),a=r.abs().neg().exp().log1p();return o.sub(i).add(a)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sigmoidCrossEntropyWithLogits",null),t}().sigmoidCrossEntropyWithLogits),go=function(){function t(){}return t.logicalNot=function(t){var e=tt(t,"x","logicalNot","bool");return f("bool"===e.dtype,"Error Array must be of type bool."),mt.engine.runKernel(function(t){return t.logicalNot(e)},{$x:e})},t.logicalAnd=function(t,e){var n=tt(t,"a","logicalAnd","bool"),r=tt(e,"b","logicalAnd","bool");return f("bool"===n.dtype&&"bool"===r.dtype,"Error Array must be of type bool."),De(n.shape,r.shape),mt.engine.runKernel(function(t){return t.logicalAnd(n,r)},{$a:n,$b:r})},t.logicalOr=function(t,e){var n=tt(t,"a","logicalOr","bool"),r=tt(e,"b","logicalOr","bool");return f("bool"===n.dtype&&"bool"===r.dtype,"Error Array must be of type bool."),De(n.shape,r.shape),mt.engine.runKernel(function(t){return t.logicalOr(n,r)},{$a:n,$b:r})},t.logicalXor=function(e,n){var r=tt(e,"a","logicalXor","bool"),o=tt(n,"b","logicalXor","bool");return f("bool"===r.dtype&&"bool"===o.dtype,"Error Array must be of type bool."),De(r.shape,o.shape),t.logicalOr(e,n).logicalAnd(t.logicalAnd(e,n).logicalNot())},t.where=function(t,e,n){var r=tt(e,"a","where"),o=tt(n,"b","where"),i=tt(t,"condition","where","bool");f("bool"===i.dtype,"Error Condition must be of type bool."),d(r.shape,o.shape,"Error in where: "),1===i.rank?f(i.shape[0]===r.shape[0],"The first dimension of `a` must match the size of `condition`."):d(i.shape,o.shape,"Error in where: ");var a=Hr(r.dtype,o.dtype);return mt.engine.runKernel(function(t){return t.where(i,r,o,a)},{$condition:i,$a:r,$b:o},function(t){return{$condition:function(){return ie(i)},$a:function(){return t.mul(i.cast(r.dtype))},$b:function(){return t.mul(i.logicalNot().cast(o.dtype))}}})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"logicalNot",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"logicalAnd",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"logicalOr",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"logicalXor",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"where",null),t}(),vo=Ct(go.logicalAnd),yo=Ct(go.logicalNot),bo=Ct(go.logicalOr),wo=Ct(go.logicalXor),_o=Ct(go.where),xo=function(){function t(){}return t.relu=function(t){var e=tt(t,"x","relu");return"bool"===e.dtype?e.toInt():mt.engine.runKernel(function(t){return t.relu(e)},{$x:e},function(t){var n=e.step();return{$x:function(){return t.mulStrict(n.toFloat())}}})},t.elu=function(t){var e=tt(t,"x","elu");return mt.engine.runKernel(function(t,n){return n(t.elu(e))},{$x:e},function(t,e){var n=e[0];return{$x:function(){return mt.engine.runKernel(function(e){return e.eluDer(t,n)},{dy:t,y:n})}}})},t.selu=function(t){var e=tt(t,"x","selu");return mt.engine.runKernel(function(t){return t.selu(e)},{$x:e},function(t){return{$x:function(){var n=e.greater(Qt(0)),r=Qt(1.7580993408473768),o=Qt(1.0507009873554805),i=t.mul(o),a=t.mul(r).mul(e.toFloat().exp());return _o(n,i,a)}}})},t.leakyRelu=function(t,e){void 0===e&&(e=.2);var n=tt(t,"x","leakyRelu");return to(Qt(e).mul(n),n)},t.prelu=function(t,e){var n=tt(t,"x","prelu"),r=tt(e,"alpha","prelu"),o=Qt(0);return to(o,n).add(r.mul(no(o,n)))},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"relu",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"elu",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"selu",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"leakyRelu",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"prelu",null),t}(),Oo=Ct(xo.elu),Eo=Ct(xo.leakyRelu),So=Ct(xo.prelu),Co=Ct(xo.relu),Io=Ct(xo.selu),Ao=Ct(function(){function t(){}return t.transpose=function(t,e){var n=tt(t,"x","transpose");return null==e&&(e=n.shape.map(function(t,e){return e}).reverse()),f(n.rank===e.length,"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."),e.forEach(function(t){f(t>=0&&t<n.rank,"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e)}),n.rank<=1?n.clone():mt.engine.runKernel(function(t){return t.transpose(n,e)},{$x:n},function(t){var n=Ot(e);return{$x:function(){return t.transpose(n)}}})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"transpose",null),t}().transpose),ko=Ct(function(){function t(){}return t.softmax=function(t,e){void 0===e&&(e=-1);var n=tt(t,"logits","softmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return rr.customGrad(function(t){var n=t.logSumExp([e],!0),r=t.toFloat().sub(n).exp();return{value:r,gradFunc:function(t){var n=t.mul(r);return n.sub(n.sum([e],!0).mul(r))}}})(n)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"softmax",null),t}().softmax),No=Ct(function(){function t(){}return t.localResponseNormalization=function(t,e,n,r,o){void 0===e&&(e=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=.5);var i=tt(t,"x","localResponseNormalization");f(4===i.rank||3===i.rank,"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+i.rank+"."),f(w(e),"Error in localResponseNormalization: depthRadius must be an integer\n                     but got depthRadius "+e+".");var a=i,s=!1;3===i.rank&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var u=mt.engine.runKernel(function(t){return t.localResponseNormalization4D(a,e,n,r,o)},{x4D:a});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"localResponseNormalization",null),t}().localResponseNormalization),Po=Ct(function(){function t(){}return t.norm=function(t,e,n,r){void 0===e&&(e="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var o=function t(e,n,r){if(void 0===r&&(r=null),0===e.rank)return e.abs();if(1!==e.rank&&null===r)return t(e.reshape([-1]),n,r);if(1===e.rank||"number"==typeof r||r instanceof Array&&1===r.length){if(1===n)return e.abs().sum(r);if(n===1/0)return e.abs().max(r);if(n===-1/0)return e.abs().min(r);if("euclidean"===n||2===n)return e.abs().pow(Qt(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(r instanceof Array&&2===r.length){if(1===n)return e.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return e.abs().sum(r[1]).max(r[0]);if(n===-1/0)return e.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return e.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(t=tt(t,"x","norm"),e,n),i=o.shape;if(r){var a=wt(n,t.shape);i=bt(o.shape,a)}return o.reshape(i)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"norm",null),t}().norm),To=function(){function t(){}return t.unsortedSegmentSum=function(t,e,n){var r=tt(t,"x","unsortedSegmentSum"),o=tt(e,"segmentIds","unsortedSegmentSum","int32");return f("int32"===o.dtype,"segmentIds must be of dtype `int32`"),f(w(n),"numSegments must be of dtype int"),mt.engine.runKernel(function(t){return t.unsortedSegmentSum(r,o,n)},{$x:r},function(t){return{$x:function(){return function(t,e){for(var n=to(e,ie(e)),r=To.gather(t,n),o=Dr(e,Qt(0,"int32")),i=r.rank-o.rank,a=0;a<i;++a)o=he(o,a+1);o=vo(o,$t(r.shape,"bool"));var s=ie(r);return _o(o,r,s)}(t,o)}}})},t.gather=function(e,n,r){void 0===r&&(r=0);var o=tt(e,"x","gather"),i=tt(n,"indices","gather","int32");return f("int32"===i.dtype,"Indices must be of dtype `int32`"),r=wt(r,o.shape)[0],mt.engine.runKernel(function(t){return t.gather(o,i,r)},{$x:o},function(e){return{$x:function(){if(0===r)return t.unsortedSegmentSum(e,i,o.shape[r]);var n=o.shape,a=i.size,s=n.slice(0,r),u=s.length,l=n.slice(r,n.length).slice(1),c=l.length,p=Ro(0,u),h=Ro(u+1,u+1+c),f=Mo([s,[a],l]),d=e.reshape(f),m=i.reshape([a]),g=Mo([[u],p,h]),v=d.transpose(g),y=t.unsortedSegmentSum(v,m,o.shape[r]),b=Ot(g);return y.transpose(b)}}})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"unsortedSegmentSum",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"gather",null),t}();function Ro(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function Mo(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}var Do,jo=Ct(To.gather),Lo=Ct(To.unsortedSegmentSum),zo=function(){function t(){}return t.multiRNNCell=function(t,e,n,r){for(var o=tt(e,"data","multiRNNCell"),i=et(n,"c","multiRNNCell"),a=et(r,"h","multiRNNCell"),s=o,u=[],l=0;l<t.length;l++){var c=t[l](s,i[l],a[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var p=[],h=[];for(l=0;l<u.length;l+=2)p.push(u[l]),h.push(u[l+1]);return[p,h]},t.basicLSTMCell=function(t,e,n,r,o,i){var a=tt(t,"forgetBias","basicLSTMCell"),s=tt(e,"lstmKernel","basicLSTMCell"),u=tt(n,"lstmBias","basicLSTMCell"),l=tt(r,"data","basicLSTMCell"),c=tt(o,"c","basicLSTMCell"),p=tt(i,"h","basicLSTMCell"),h=l.concat(p,1).matMul(s).add(u),f=h.shape[1]/4,d=[h.shape[0],f],m=h.slice([0,0],d),g=h.slice([0,f],d),v=h.slice([0,2*f],d),y=h.slice([0,3*f],d),b=m.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(a.add(v).sigmoid()));return[b,b.tanh().mulStrict(y.sigmoid())]},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"multiRNNCell",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"basicLSTMCell",null),t}(),Bo=Ct(zo.basicLSTMCell),Fo=Ct(zo.multiRNNCell),Vo=Ct(function(){function t(){}return t.movingAverage=function(t,e,n,r,o){void 0===o&&(o=!0);var i=tt(t,"v","movingAverage"),a=tt(e,"x","movingAverage"),s=tt(n,"decay","movingAverage");J(i,a),f(b(i.shape,a.shape),"Shape mismatch in v and x");var u=Qt(1),l=u.sub(s),c=a.sub(i).mul(l);if(o){f(null!=r,"When using zeroDebias: true, step is required.");var p=tt(r,"step","movingAverage");c=c.div(u.sub(uo(s,p)))}return i.add(c)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"movingAverage",null),t}().movingAverage),Uo=Ct(function(){function t(){}return t.stridedSlice=function(t,e,n,r,o,i){void 0===o&&(o=0),void 0===i&&(i=0);var a=tt(t,"x","stridedSlice");return mt.engine.runKernel(function(t){return t.stridedSlice(a,e,n,r,o,i)},{$x:a})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"stridedSlice",null),t}().stridedSlice);!function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Do||(Do={}));var Wo=function(){function t(){}return t.computeWeightedLoss=function(t,e,n){void 0===n&&(n=Do.SUM_BY_NONZERO_WEIGHTS);var r=tt(t,"losses","computeWeightedLoss"),o=null;null!=e&&(o=tt(e,"weights","computeWeightedLoss"));var i=null==o?r:r.mul(o);if(n===Do.NONE)return i;if(n===Do.SUM)return i.sum();if(n===Do.MEAN)return null==o?i.mean():i.sum().div(o.sum());if(n===Do.SUM_BY_NONZERO_WEIGHTS){if(null==o)return i.sum().div(Qt(r.size));var a=o.mul($t(r.shape)).notEqual(Qt(0)).sum().toFloat();return i.sum().div(a)}throw Error("Unknown reduction: "+n)},t.absoluteDifference=function(e,n,r,o){void 0===o&&(o=Do.SUM_BY_NONZERO_WEIGHTS);var i=tt(e,"labels","absoluteDifference"),a=tt(n,"predictions","absoluteDifference"),s=null;null!=r&&(s=tt(r,"weights","absoluteDifference")),d(i.shape,a.shape,"Error in absoluteDifference: ");var u=i.sub(a).abs();return t.computeWeightedLoss(u,s,o)},t.meanSquaredError=function(e,n,r,o){void 0===o&&(o=Do.SUM_BY_NONZERO_WEIGHTS);var i=tt(e,"labels","meanSquaredError"),a=tt(n,"predictions","meanSquaredError"),s=null;null!=r&&(s=tt(r,"weights","meanSquaredError")),d(i.shape,a.shape,"Error in meanSquaredError: ");var u=i.squaredDifference(a);return t.computeWeightedLoss(u,s,o)},t.cosineDistance=function(e,n,r,o,i){void 0===i&&(i=Do.SUM_BY_NONZERO_WEIGHTS);var a=tt(e,"labels","cosineDistance"),s=tt(n,"predictions","cosineDistance"),u=null;null!=o&&(u=tt(o,"weights","cosineDistance")),d(a.shape,s.shape,"Error in cosineDistance: ");var l=Qt(1).sub(a.mul(s).sum(r,!0));return t.computeWeightedLoss(l,u,i)},t.hingeLoss=function(e,n,r,o){void 0===o&&(o=Do.SUM_BY_NONZERO_WEIGHTS);var i=tt(e,"labels","hingeLoss"),a=tt(n,"predictions","hingeLoss"),s=null;null!=r&&(s=tt(r,"weights","hingeLoss")),d(i.shape,a.shape,"Error in hingeLoss: ");var u=Qt(1);i=Qt(2).mul(i).sub(u);var l=u.sub(i.mul(a)).relu();return t.computeWeightedLoss(l,s,o)},t.logLoss=function(e,n,r,o,i){void 0===o&&(o=1e-7),void 0===i&&(i=Do.SUM_BY_NONZERO_WEIGHTS);var a=tt(e,"labels","logLoss"),s=tt(n,"predictions","logLoss"),u=null;null!=r&&(u=tt(r,"weights","logLoss")),d(a.shape,s.shape,"Error in logLoss: ");var l=Qt(1),c=Qt(o),p=a.mul(s.add(c).log()).neg().sub(l.sub(a).mul(l.sub(s).add(c).log()));return t.computeWeightedLoss(p,u,i)},t.huberLoss=function(e,n,r,o,i){void 0===o&&(o=1),void 0===i&&(i=Do.SUM_BY_NONZERO_WEIGHTS);var a=tt(e,"labels","huberLoss"),s=tt(n,"predictions","huberLoss"),u=null;null!=r&&(u=tt(r,"weights","huberLoss")),d(a.shape,s.shape,"Error in huberLoss: ");var l=Qt(o),c=s.sub(a).abs(),p=no(c,l),h=c.sub(p),f=Qt(.5).mul(p.square()).add(l.mul(h));return t.computeWeightedLoss(f,u,i)},t.softmaxCrossEntropy=function(t,e,n){void 0===n&&(n=-1);var r=tt(t,"labels","softmaxCrossEntropy"),o=tt(e,"logits","softmaxCrossEntropy");if(d(r.shape,o.shape,"Error in softmaxCrossEntropy: "),-1===n&&(n=o.rank-1),n!==o.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+o.rank+" and dim was "+n);return br(function(t,e){var r=e.softmax(n);return{value:Qt(1e-5).add(r).log().mul(t).neg().sum([n]),gradFunc:function(e){var o=bt(e.shape,[n]);return[e.reshape(o).mul(t.toFloat().sub(r)),e.reshape(o).mul(r.sub(t.toFloat()))]}}})(r,o)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"computeWeightedLoss",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"absoluteDifference",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"meanSquaredError",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"cosineDistance",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"hingeLoss",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"logLoss",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"huberLoss",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"softmaxCrossEntropy",null),t}(),qo=Ct(Wo.absoluteDifference),Ho=Ct(Wo.computeWeightedLoss),Go=Ct(Wo.cosineDistance),$o=Ct(Wo.hingeLoss),Ko=Ct(Wo.huberLoss),Qo=Ct(Wo.logLoss),Xo=Ct(Wo.meanSquaredError),Yo=Ct(Wo.softmaxCrossEntropy),Zo=Object.freeze({get Reduction(){return Do},absoluteDifference:qo,computeWeightedLoss:Ho,cosineDistance:Go,hingeLoss:$o,huberLoss:Ko,logLoss:Qo,meanSquaredError:Xo,softmaxCrossEntropy:Yo}),Jo=function(){function t(){}return t.gramSchmidt=function(t){var e;if(Array.isArray(t)){e=!1,f(null!=t&&t.length>0,"Gram-Schmidt process: input must not be null, undefined, or empty");for(var n=t[0].shape[0],r=1;r<t.length;++r)f(t[r].shape[0]===n,"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[r].shape[0]+" vs. "+n+")")}else e=!0,t=Ie(t,t.shape[0],0).map(function(t){return Ae(t,[0])});f(t.length<=t[0].shape[0],"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+").");var o=[],i=t,a=function(t){o.push(mt.engine.tidy(function(){var e=i[t];if(t>0)for(var n=0;n<t;++n){var r=Nr(o[n].mulStrict(e)).mul(o[n]);e=e.sub(r)}return e.div(Po(e,"euclidean"))}))};for(r=0;r<t.length;++r)a(r);return e?ke(o,0):o},t.qr=function(t,e){if(void 0===e&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(2===t.rank)return ti(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(t,e){return t*e}),r=[],o=[];return Te(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0).forEach(function(t){var n=ti(t,e),i=n[1];r.push(n[0]),o.push(i)}),[ke(r,0).reshape(t.shape),ke(o,0).reshape(t.shape)]},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"gramSchmidt",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"qr",null),t}();function ti(t,e){return void 0===e&&(e=!1),mt.engine.tidy(function(){if(2!==t.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],o=fe(n),i=t.clone(),a=Zt([[1]],[1,1]),s=a.clone(),u=n>=r?r:n,l=function(t){var e,u=i,l=s,c=o;e=mt.engine.tidy(function(){var e=i.slice([t,t],[n-t,1]),u=e.norm(),l=i.slice([t,t],[1,1]),c=l.sign().neg(),p=l.sub(c.mul(u)),h=e.div(p);s=1===h.shape[0]?a.clone():a.concat(h.slice([1,0],[h.shape[0]-1,h.shape[1]]),0);var f=c.matMul(p).div(u).neg(),d=i.slice([t,0],[n-t,r]),m=f.mul(s);i=0===t?d.sub(m.matMul(s.transpose().matMul(d))):i.slice([0,0],[t,r]).concat(d.sub(m.matMul(s.transpose().matMul(d))),0);var g=o.slice([0,t],[n,o.shape[1]-t]);return o=0===t?g.sub(g.matMul(s).matMul(m.transpose())):o.slice([0,0],[n,t]).concat(g.sub(g.matMul(s).matMul(m.transpose())),1),[s,i,o]}),s=e[0],i=e[1],o=e[2],hr([u,l,c])},c=0;c<u;++c)l(c);return!e&&n>r&&(o=o.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[o,i]})}var ei=Ct(Jo.gramSchmidt),ni=Ct(Jo.qr),ri=Object.freeze({gramSchmidt:ei,qr:ni}),oi=function(){function t(){}return t.resizeBilinear=function(t,e,n){void 0===n&&(n=!1);var r=tt(t,"images","resizeBilinear");f(3===r.rank||4===r.rank,"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."),f(2===e.length,"Error in resizeBilinear: new shape must 2D, but got shape "+e+".");var o=r,i=!1;3===r.rank&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=e[0],s=e[1],u=mt.engine.runKernel(function(t,e){return t.resizeBilinear(o,a,s,n)},{batchImages:o},function(t,e){return{batchImages:function(){return mt.engine.runKernel(function(e){return e.resizeBilinearBackprop(t,o,n)},{})}}});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u},t.resizeNearestNeighbor=function(t,e,n){void 0===n&&(n=!1);var r=tt(t,"images","resizeNearestNeighbor");f(3===r.rank||4===r.rank,"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."),f(2===e.length,"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."),f("float32"===r.dtype||"int32"===r.dtype,"`images` must have `int32` or `float32` as dtype");var o=r,i=!1;3===r.rank&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=e[0],s=e[1],u=mt.engine.runKernel(function(t,e){return t.resizeNearestNeighbor(o,a,s,n)},{batchImages:o},function(t,e){return{batchImages:function(){return mt.engine.runKernel(function(e){return e.resizeNearestNeighborBackprop(t,o,n)},{})}}});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"resizeBilinear",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"resizeNearestNeighbor",null),t}(),ii=Ct(oi.resizeBilinear),ai=Ct(oi.resizeNearestNeighbor),si=Object.freeze({resizeBilinear:ii,resizeNearestNeighbor:ai}),ui=Object.freeze({image:si,linalg:ri,losses:Zo,op:Ct,batchNormalization2d:yn,batchNormalization3d:bn,batchNormalization4d:wn,batchNormalization:_n,concat:kt,concat1d:Nt,concat2d:Pt,concat3d:Tt,concat4d:Rt,conv1d:Nn,conv2d:Pn,depthwiseConv2d:Tn,separableConv2d:Rn,conv2dTranspose:Mn,matMul:jn,dot:Ln,outerProduct:zn,reverse:Fn,reverse1d:Vn,reverse2d:Un,reverse3d:Wn,reverse4d:qn,maxPool:Gn,avgPool:$n,slice:Zn,slice1d:Jn,slice2d:tr,slice3d:er,slice4d:nr,abs:Le,acos:ze,acosh:Be,asin:Fe,asinh:Ve,atan:Ue,atanh:We,ceil:qe,clipByValue:He,cos:Ge,cosh:$e,erf:Ke,exp:Qe,expm1:Xe,floor:Ye,log:Ze,log1p:Je,logSigmoid:tn,neg:en,reciprocal:nn,round:rn,rsqrt:on,sigmoid:an,sign:sn,sin:un,sinh:ln,softplus:cn,sqrt:pn,square:hn,step:fn,tan:dn,tanh:mn,all:_r,any:xr,argMax:Or,argMin:Er,logSumExp:Sr,max:Cr,mean:Ir,min:Ar,moments:kr,sum:Nr,equal:Tr,equalStrict:Rr,greater:Mr,greaterEqual:Dr,greaterEqualStrict:jr,greaterStrict:Lr,less:zr,lessEqual:Br,lessEqualStrict:Fr,lessStrict:Vr,notEqual:Ur,notEqualStrict:Wr,add:Kr,addStrict:Qr,atan2:Xr,div:Yr,divStrict:Zr,floorDiv:Jr,maximum:to,maximumStrict:eo,minimum:no,minimumStrict:ro,mod:oo,modStrict:io,mul:ao,mulStrict:so,pow:uo,powStrict:lo,squaredDifference:co,squaredDifferenceStrict:po,sub:ho,subStrict:fo,sigmoidCrossEntropyWithLogits:mo,elu:Oo,leakyRelu:Eo,prelu:So,relu:Co,selu:Io,logicalAnd:vo,logicalNot:yo,logicalOr:bo,logicalXor:wo,where:_o,buffer:se,toPixels:ue,cast:le,clone:ce,cumsum:pe,expandDims:he,eye:fe,fromPixels:de,multinomial:me,oneHot:ge,pad:ve,pad1d:ye,pad2d:be,pad3d:we,pad4d:_e,print:xe,rand:Oe,randomNormal:Ee,randomUniform:Se,reshape:Ce,split:Ie,squeeze:Ae,stack:ke,tile:Ne,truncatedNormal:Pe,unstack:Te,fill:Ht,linspace:Gt,ones:$t,range:Kt,scalar:Qt,tensor:Xt,tensor1d:Yt,tensor2d:Zt,tensor3d:Jt,tensor4d:te,tensor5d:ee,tensor6d:ne,zeros:re,onesLike:oe,zerosLike:ie,transpose:Ao,softmax:ko,localResponseNormalization:No,norm:Po,gather:jo,unsortedSegmentSum:Lo,basicLSTMCell:Bo,multiRNNCell:Fo,movingAverage:Vo,stridedSlice:Uo}),li=30;function ci(t){return t<=li?t:D(t,Math.floor(Math.sqrt(t)))}function pi(t,e,n){if(!N(t.dtype,e))return X.make(t.shape,{dataId:t.dataId},e);if("int32"===e)return n.int(t);if("bool"===e)return n.notEqual(t,Qt(0,t.dtype));throw new Error("Error in Cast: unknown dtype argument ("+e+")")}function hi(t,e){return X.make(e,{dataId:t.dataId},t.dtype)}var fi=function(){function t(t,e,n){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.outputShape=De(e,n),this.userCode="\n      uniform float NAN;\n      float binaryOperation(float a, float b) {\n        "+t+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(){var t=this;return function(e,n){null==t.startLoc&&(t.startLoc=e.getUniformLocationNoThrow(n,"NAN"),null==t.startLoc)||e.gl.uniform1f(t.startLoc,NaN)}},t}();var di,mi,gi="\n  float sampleTexture(sampler2D textureSampler, vec2 uv) {\n    return texture2D(textureSampler, uv).r;\n  }\n",vi="\n  void setOutput(float val) {\n    gl_FragColor = vec4(val, 0, 0, 0);\n  }\n",yi="\n  precision highp float;\n  precision highp int;\n  varying vec2 resultUV;\n  const vec2 halfCR = vec2(0.5, 0.5);\n\n  struct ivec5\n  {\n    int x;\n    int y;\n    int z;\n    int w;\n    int u;\n  };\n\n  struct ivec6\n  {\n    int x;\n    int y;\n    int z;\n    int w;\n    int u;\n    int v;\n  };\n\n  bool isNaN(float val) {\n    return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;\n  }\n\n  bool hasNaN(vec4 values) {\n    vec4 v1 = values * values;\n    vec4 v2 = values * values;\n    return any(notEqual(v1, v2));\n  }\n\n  float getNaN(vec4 values) {\n    return dot(vec4(1), values);\n  }\n\n  int round(float value) {\n    return int(floor(value + 0.5));\n  }\n\n  int imod(int x, int y) {\n    return x - y * (x / y);\n  }\n\n  //Based on the work of Dave Hoskins\n  //https://www.shadertoy.com/view/4djSRW\n  #define HASHSCALE1 443.8975\n  float random(float seed){\n    vec2 p = resultUV * seed;\n    vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n  }\n\n  \nvec2 UVfrom1D(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom2D(int texNumR, int texNumC, int numC, int row, int col) {\n  int index = row * numC + col;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom3D(int texNumR, int texNumC, int stride0,\n    int stride1, int row, int col, int depth) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom4D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int row, int col, int depth,\n    int depth2) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom5D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int stride3, int row, int col, int depth,\n    int depth2, int depth3) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 +\n              depth * stride2 + depth2 * stride3 + depth3;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom6D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int stride3, int stride4,\n    int row, int col, int depth, int depth2, int depth3, int depth4) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2 *\n    stride3 + depth3 * stride4 + depth4;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n";function bi(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function wi(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function _i(t,e){return e.map(function(e){return t[e]}).join(", ")}function xi(t,e){if(1===t)return""+e;if(2===t)return e+".y";if(3===t)return e+".z";if(4===t)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}function Oi(t,e){return[e,t]}function Ei(t,e){return t*e}function Si(t,e,n){var r=function(t,e){if(t%e!=0)throw new Error("unpackedSize ("+t+") must be a multiple of "+e);return t/e}(t.length,n);if(e.length<r)throw new Error("matrix length ("+e.length+") must be >= "+r);for(var o=0,i=0;i<t.length;i+=n)e[o++]=t[i]}function Ci(t,e){return[Math.ceil(e/2),Math.ceil(t/2)]}function Ii(t,e){var n=Ci(t,e);return n[0]*n[1]*4}!function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(di||(di={})),function(t){t[t.FLOAT16=0]="FLOAT16",t[t.FLOAT32=1]="FLOAT32",t[t.UNSIGNED_BYTE=2]="UNSIGNED_BYTE"}(mi||(mi={}));var Ai=null;function ki(t){var e=document.createElement("canvas");return e.width=1,e.height=1,Ni(e,t)}function Ni(t,e){var n,r=mt.get("WEBGL_VERSION");if(2===r?n=t.getContext("webgl2",e):1===r&&(n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)),0===r||null==n)throw new Error("This browser does not support WebGL.");return n}function Pi(t,e){var n=e();return Mi(t),n}var Ti=!1;function Ri(t){Ti=t}function Mi(t){if(Ti){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+Di(t,e))}}function Di(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function ji(t,e){return ia(t,function(){return t.getExtension(e)},'Extension "'+e+'" not supported on this browser.')}function Li(t,e){var n=ia(t,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Pi(t,function(){return t.shaderSource(n,e)}),Pi(t,function(){return t.compileShader(n)}),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function zi(t,e){var n=ia(t,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Pi(t,function(){return t.shaderSource(n,e)}),Pi(t,function(){return t.compileShader(n)}),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw function(t,e){var n=Bi.exec(e);if(null==n)return console.log("Couldn't parse line number in error: "+e),void console.log(t);for(var r=+n[1],o=t.split("\n"),i=o.length.toString().length+2,a=o.map(function(t,e){return O((e+1).toString(),i)+t}),s=0,u=0;u<a.length;u++)s=Math.max(a[u].length,s);var l=a.slice(0,r-1),c=a.slice(r-1,r),p=a.slice(r);console.log(l.join("\n")),console.log(e.split("\n")[0]),console.log("%c "+O(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(p.join("\n"))}(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var Bi=/ERROR: [0-9]+:([0-9]+):/g;function Fi(t){return ia(t,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function Vi(t,e){if(Pi(t,function(){return t.linkProgram(e)}),!1===t.getProgramParameter(e,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function Ui(t,e){if(Pi(t,function(){return t.validateProgram(e)}),!1===t.getProgramParameter(e,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function Wi(t,e){var n=ia(t,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Pi(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,n)}),Pi(t,function(){return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}),n}function qi(t,e){var n=ia(t,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Pi(t,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)}),Pi(t,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)}),n}function Hi(t){return null!=Ai?Ai:Ai=Pi(t,function(){return t.getParameter(t.MAX_TEXTURE_SIZE)})}function Gi(){return 2===mt.get("WEBGL_VERSION")?1:4}function $i(t){return ia(t,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function Ki(t,e,n){var r=Hi(t);if(e<=0||n<=0){var o="["+e+"x"+n+"]";throw new Error("Requested texture size "+o+" is invalid.")}if(e>r||n>r)throw o="["+e+"x"+n+"]",new Error("Requested texture size "+o+" greater than WebGL maximum on this browser / GPU ["+r+"x"+r+"].")}function Qi(t){return ia(t,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function Xi(t,e,n,r,o,i,a){var s=t.getAttribLocation(e,n);return-1!==s&&(Pi(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),Pi(t,function(){return t.vertexAttribPointer(s,o,t.FLOAT,!1,i,a)}),Pi(t,function(){return t.enableVertexAttribArray(s)}),!0)}function Yi(t,e,n){aa(t,n),Pi(t,function(){return t.activeTexture(t.TEXTURE0+n)}),Pi(t,function(){return t.bindTexture(t.TEXTURE_2D,e)})}function Zi(t,e,n){return ia(t,function(){return t.getUniformLocation(e,n)},'uniform "'+n+'" not present in program.')}function Ji(t,e,n){return t.getUniformLocation(e,n)}function ta(t,e,n,r,o){Pi(t,function(){return Yi(t,n,o)}),Pi(t,function(){return t.uniform1i(r,o)})}function ea(t,e,n){Pi(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),Pi(t,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)})}function na(t,e){Pi(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)}),Pi(t,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function ra(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+oa(t,e))}function oa(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function ia(t,e,n){var r=Pi(t,function(){return e()});if(null==r)throw new Error(n);return r}function aa(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function sa(t,e){2!==e.length&&(e=I(e).newShape);var n=Hi(t),r=y(e);return e.length<=1&&r<=n?[r,1]:2===e.length&&e[0]<=n&&e[1]<=n?e:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?[e[0],e[1]*e[2]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n?[e[0],e[1]*e[2]*e[3]]:x(r)}var ua=Object.freeze({createWebGLRenderingContext:ki,createWebGLRenderingContextFromCanvas:Ni,callAndCheck:Pi,enableDebugWebGLErrorChecking:Ri,checkWebGLError:Mi,getWebGLErrorMessage:Di,getExtensionOrThrow:ji,createVertexShader:Li,createFragmentShader:zi,createProgram:Fi,linkProgram:Vi,validateProgram:Ui,createStaticVertexBuffer:Wi,createStaticIndexBuffer:qi,queryMaxTextureSize:Hi,getNumChannels:Gi,createTexture:$i,validateTextureSize:Ki,createFramebuffer:Qi,bindVertexBufferToProgramAttribute:Xi,bindTextureUnit:Yi,unbindTextureUnit:function(t,e){aa(t,e),Pi(t,function(){return t.activeTexture(t.TEXTURE0+e)}),Pi(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:Zi,getProgramUniformLocation:Ji,bindTextureToProgramUniformSampler:ta,bindCanvasToFramebuffer:function(t){Pi(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Pi(t,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),Pi(t,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},bindColorTextureToFramebuffer:ea,unbindColorTextureFromFramebuffer:na,validateFramebuffer:ra,getFramebufferErrorMessage:oa,getTextureShapeFromLogicalShape:sa});function la(t){var e,n={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};return Pi(e=null!=t?Ni(t,n):ki(n),function(){return e.disable(e.DEPTH_TEST)}),Pi(e,function(){return e.disable(e.STENCIL_TEST)}),Pi(e,function(){return e.disable(e.BLEND)}),Pi(e,function(){return e.disable(e.DITHER)}),Pi(e,function(){return e.disable(e.POLYGON_OFFSET_FILL)}),Pi(e,function(){return e.disable(e.SAMPLE_COVERAGE)}),Pi(e,function(){return e.enable(e.SCISSOR_TEST)}),Pi(e,function(){return e.enable(e.CULL_FACE)}),Pi(e,function(){return e.cullFace(e.BACK)}),e}function ca(t){return Li(t,"\n    precision highp float;\n    attribute vec3 clipSpacePos;\n    attribute vec2 uv;\n    varying vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function pa(t){return Wi(t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function ha(t){return qi(t,new Uint16Array([0,1,2,2,1,3]))}function fa(t,e){var n,r,o,i,a,s,u,l=t;return 2===mt.get("WEBGL_VERSION")?(n=l.R32F,r=l.R16F,o=l.RGBA32F,i=l.RED,a=4,s=1,u=l.HALF_FLOAT):(n=t.RGBA,r=t.RGBA,o=l.RGBA,i=t.RGBA,a=4,s=4,u=null!=e?e.HALF_FLOAT_OES:null),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:a,defaultNumChannels:s,textureTypeHalfFloat:u}}function da(t,e,n,r,o,i){Ki(t,e,n);var a=$i(t),s=t.TEXTURE_2D;return Pi(t,function(){return t.bindTexture(s,a)}),Pi(t,function(){return t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),Pi(t,function(){return t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),Pi(t,function(){return t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)}),Pi(t,function(){return t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)}),Pi(t,function(){return t.texImage2D(s,0,r,e,n,0,o,i,null)}),Pi(t,function(){return t.bindTexture(t.TEXTURE_2D,null)}),a}function ma(t,e,n,r){var o=Oi(e,n);return da(t,o[0],o[1],r.internalFormatFloat,r.textureFormatFloat,t.FLOAT)}function ga(t,e,n,r){var o=Oi(e,n);return da(t,o[0],o[1],r.internalFormatFloat,r.textureFormatFloat,r.textureTypeHalfFloat)}function va(t,e,n,r){var o=Oi(e,n);return da(t,o[0],o[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function ya(t,e,n,r){var o=Ci(e,n);return da(t,o[0],o[1],r.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function ba(t,e,n){return Pi(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,n)}),Xi(t,e,"clipSpacePos",n,3,20,0)&&Xi(t,e,"uv",n,2,20,12)}function wa(t,e,n){Pi(t,function(){return t.bindTexture(t.TEXTURE_2D,e)}),Pi(t,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)}),Pi(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function _a(t,e,n,r,o,i){Ki(t,n,r),Pi(t,function(){return t.bindTexture(t.TEXTURE_2D,e)}),Pi(t,function(){return t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,i,t.FLOAT,o)}),Pi(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function xa(t,e,n,r,o,i,a){var s,u=Oi(n,r),l=u[0],c=u[1];1===a.defaultNumChannels?s=o:function(t,e,n){var r=Ei(t.length,n);if(e.length<r)throw new Error("unpackedArray length ("+e.length+") must be >= "+r);for(var o=0,i=0;i<t.length;++i)e[o]=t[i],o+=n}(o,s=new Float32Array(Ei(o.length,i)),i),_a(t,e,l,c,s,a.textureFormatFloat)}function Oa(t,e,n,r,o,i){var a=Ci(n,r),s=a[0],u=a[1],l=new Float32Array(Ii(n,r));(function(t,e,n,r){var o=Ii(e,n);if(r.length<o)throw new Error("packedRGBA length ("+r.length+") must be >= "+o);for(var i=Ci(e,n),a=i[0],s=i[1],u=n%2==1,l=e%2==1,c=Math.floor(n/2),p=Math.floor(e/2),h=u?4:0,f=n,d=0,m=0;m<p;++m){for(var g=2*m*n,v=0;v<c;++v){var y=g+2*v;r[d]=t[y],r[d+1]=t[y+1],r[d+2]=t[y+f],r[d+3]=t[y+f+1],d+=4}d+=h}if(u){y=n-1,d=4*(a-1);var b=2*n;for(h=4*a,m=0;m<p;++m)r[d]=t[y],r[d+2]=t[y+n],y+=b,d+=h}if(l)for(y=(e-1)*n,d=(s-1)*a*4,v=0;v<c;++v)r[d++]=t[y++],r[d++]=t[y++],d+=2;u&&l&&(r[r.length-4]=t[t.length-1])})(o,n,r,l),_a(t,e,s,u,l,t.RGBA)}function Ea(t,e,n,r,o){return s(this,void 0,void 0,function(){var i,a,s,l,c;return u(this,function(u){switch(u.label){case 0:return i=t,a=new Float32Array(Ei(n*r,o.downloadUnpackNumChannels)),s=a instanceof Float32Array?4*a.length:a,l=t.createBuffer(),Pi(t,function(){return t.bindBuffer(i.PIXEL_PACK_BUFFER,l)}),Pi(t,function(){return t.bufferData(i.PIXEL_PACK_BUFFER,s,t.STATIC_DRAW)}),Pi(t,function(){return i.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)}),[4,e.getBufferSubDataAsync(i.PIXEL_PACK_BUFFER,0,a)];case 1:return u.sent(),c=new Float32Array(n*r),Si(a,c,o.downloadUnpackNumChannels),[2,c]}})})}function Sa(t,e,n,r){var o=Oi(e,n),i=o[0],a=o[1],s=new Float32Array(Ei(e*n,r.downloadUnpackNumChannels));Pi(t,function(){return t.readPixels(0,0,i,a,r.downloadTextureFormat,t.FLOAT,s)});var u=new Float32Array(e*n);return Si(s,u,r.downloadUnpackNumChannels),u}function Ca(t,e,n,r){var o=Oi(e,n),i=o[0],a=o[1],s=new Uint8Array(Ei(e*n,4));return Pi(t,function(){return t.readPixels(0,0,i,a,r.downloadTextureFormat,t.UNSIGNED_BYTE,s)}),new Float32Array(s.buffer)}function Ia(t,e,n,r){var o=Ci(e,n),i=o[0],a=o[1],s=new Float32Array(Ii(e,n));Pi(t,function(){return t.readPixels(0,0,i,a,t.RGBA,t.FLOAT,s)});var u=new Float32Array(e*n);return function(t,e,n,r){var o=e*n;if(o<r.length)throw new Error("matrix length ("+r.length+") must be >= "+o);for(var i=n%2==1,a=e%2==1,s=Math.floor(n/2),u=Math.floor(e/2),l=Ci(e,n),c=l[0],p=l[1],h=i?4:0,f=n+(i?1:0),d=0,m=0,g=n,v=0;v<u;++v){for(var y=0;y<s;++y)r[m++]=t[d++],r[m++]=t[d++],r[g++]=t[d++],r[g++]=t[d++];d+=h,m+=f,g+=f}if(i){d=4*(c-1);var b=n-1;for(h=4*c,f=2*n,v=0;v<u;++v)r[b]=t[d],r[b+n]=t[d+2],d+=h,b+=f}if(a)for(d=(p-1)*c*4,b=(e-1)*n,y=0;y<s;++y)r[b++]=t[d++],r[b++]=t[d++],d+=2;return i&&a&&(r[r.length-1]=t[t.length-4]),r}(s,e,n,u)}var Aa=Object.freeze({getWebGLContextAttributes:function(){return{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0}},createWebGLContext:la,createVertexShader:ca,createVertexBuffer:pa,createIndexBuffer:ha,getTextureConfig:fa,createFloat32MatrixTexture:ma,createFloat16MatrixTexture:ga,createUnsignedBytesMatrixTexture:va,createPackedMatrixTexture:ya,bindVertexProgramAttributeStreams:ba,uploadPixelDataToTexture:wa,uploadMatrixToTexture:xa,uploadMatrixToPackedTexture:Oa,downloadMatrixFromOutputTextureAsync:Ea,downloadFloat32MatrixFromOutputTexture:Sa,downloadByteEncodedFloatMatrixFromOutputTexture:Ca,downloadMatrixFromPackedOutputTexture:Ia}),ka=function(){function t(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.autoDebugValidate=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[],this.gl=null!=t?t:la(),1===mt.get("WEBGL_VERSION")?(this.textureFloatExtension=ji(this.gl,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),mt.get("WEBGL_RENDER_FLOAT32_ENABLED")||(this.textureHalfFloatExtension=ji(this.gl,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float"))):this.colorBufferFloatExtension=ji(this.gl,"EXT_color_buffer_float"),this.loseContextExtension=ji(this.gl,"WEBGL_lose_context"),mt.get("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED")&&(this.getBufferSubDataAsyncExtension=this.gl.getExtension("WEBGL_get_buffer_sub_data_async")),this.vertexBuffer=pa(this.gl),this.indexBuffer=ha(this.gl),this.framebuffer=Qi(this.gl),this.textureConfig=fa(this.gl,this.textureHalfFloatExtension)}return t.prototype.dispose=function(){var t=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;Pi(e,function(){return e.finish()}),Pi(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),Pi(e,function(){return e.deleteFramebuffer(t.framebuffer)}),Pi(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),Pi(e,function(){return e.deleteBuffer(t.vertexBuffer)}),Pi(e,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),Pi(e,function(){return e.deleteBuffer(t.indexBuffer)}),this.loseContextExtension.loseContext(),this.disposed=!0}},t.prototype.enableAutomaticDebugValidation=function(t){this.autoDebugValidate=t,Ri(t)},t.prototype.createFloat32MatrixTexture=function(t,e){return this.throwIfDisposed(),ma(this.gl,t,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(t,e){return this.throwIfDisposed(),ga(this.gl,t,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(t,e){return this.throwIfDisposed(),va(this.gl,t,e)},t.prototype.uploadPixelDataToTexture=function(t,e){this.throwIfDisposed(),wa(this.gl,t,e)},t.prototype.createPackedMatrixTexture=function(t,e){return this.throwIfDisposed(),ya(this.gl,t,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(na(this.gl,this.framebuffer),this.outputTexture=null),Pi(this.gl,function(){return e.gl.deleteTexture(t)})},t.prototype.uploadMatrixToTexture=function(t,e,n,r){this.throwIfDisposed();var o=Gi();return xa(this.gl,t,e,n,r,o,this.textureConfig)},t.prototype.uploadMatrixToPackedTexture=function(t,e,n,r){return this.throwIfDisposed(),Oa(this.gl,t,e,n,r)},t.prototype.downloadFloat32MatrixFromOutputTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return Sa(r.gl,e,n,r.textureConfig)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return Ca(r.gl,e,n,r.textureConfig)})},t.prototype.downloadMatrixFromTextureAsync=function(t,e,n){return s(this,void 0,void 0,function(){var r=this;return u(this,function(o){if(null==this.getBufferSubDataAsyncExtension)throw new Error("Cannot download matrix from output texture asynchronously, WEBGL_get_buffer_sub_data_async is not enabled.");return[2,this.downloadMatrixDriverAsync(t,function(){return Ea(r.gl,r.getBufferSubDataAsyncExtension,e,n,r.textureConfig)})]})})},t.prototype.downloadMatrixFromPackedTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return Ia(r.gl,e,n)})},t.prototype.createProgram=function(t){this.throwIfDisposed();var e=this.gl,n=zi(e,t),r=ca(e),o=Fi(e);return Pi(e,function(){return e.attachShader(o,r)}),Pi(e,function(){return e.attachShader(o,n)}),Vi(e,o),this.autoDebugValidate&&Ui(e,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=ba(e,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&Pi(this.gl,function(){return e.gl.deleteProgram(t)})},t.prototype.setProgram=function(t){var e=this;this.throwIfDisposed(),this.program=t,null!=this.program&&this.autoDebugValidate&&Ui(this.gl,this.program),Pi(this.gl,function(){return e.gl.useProgram(t)})},t.prototype.getUniformLocation=function(t,e,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?Zi(this.gl,t,e):Ji(this.gl,t,e)},t.prototype.getAttributeLocation=function(t,e){var n=this;return this.throwIfDisposed(),Pi(this.gl,function(){return n.gl.getAttribLocation(t,e)})},t.prototype.getUniformLocationNoThrow=function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)},t.prototype.setInputMatrixTexture=function(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),ta(this.gl,0,t,e,n)},t.prototype.setOutputMatrixTexture=function(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)},t.prototype.setOutputPackedMatrixTexture=function(t,e,n){this.throwIfDisposed();var r=Ci(e,n);this.setOutputMatrixTextureDriver(t,r[0],r[1])},t.prototype.setOutputMatrixWriteRegion=function(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){null!=this.program&&Ui(this.gl,this.program),ra(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.autoDebugValidate&&this.debugValidate(),Pi(t,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),Pi(this.gl,function(){return t.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=ji(this.gl,2===mt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.runQuery=function(t){var e=this.beginQuery();return t(),this.endQuery(),this.pollQueryTime(e)},t.prototype.beginQuery=function(){if(2===mt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),o=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(2!==mt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var e=this.gl,n=this.getQueryTimerExtensionWebGL2();e.endQuery(n.TIME_ELAPSED_EXT)}},t.prototype.isQueryAvailable=function(t,e){if(0===e)return!0;if(2===e){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.prototype.pollQueryTime=function(t){var e=this;return new Promise(function(n){var r=mt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION");e.addItemToPoll(function(){return e.isQueryAvailable(t,r)},function(){return n(e.getQueryTime(t,r))})})},t.prototype.pollItems=function(){for(var t=function(t){for(var e=0,n=t.length-1,r=-1;e<=n;){var o=e+n>>1;t[o]()?(r=o,e=o+1):n=o-1}return r}(this.itemsToPoll.map(function(t){return t.isDoneFn})),e=0;e<=t;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},t.prototype.addItemToPoll=function(t,e){var n=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||E(function(){return n.pollItems(),0===n.itemsToPoll.length})},t.prototype.getQueryTime=function(t,e){if(0===e)return null;if(2===e){var n=this.gl;return n.getQueryParameter(t,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6},t.prototype.downloadMatrixDriverSetup=function(t){this.throwIfDisposed(),ea(this.gl,t,this.framebuffer),this.autoDebugValidate&&ra(this.gl)},t.prototype.downloadMatrixDriverTeardown=function(){null!=this.outputTexture?(ea(this.gl,this.outputTexture,this.framebuffer),this.autoDebugValidate&&ra(this.gl)):na(this.gl,this.framebuffer)},t.prototype.downloadMatrixDriver=function(t,e){this.downloadMatrixDriverSetup(t);var n=e();return this.downloadMatrixDriverTeardown(),n},t.prototype.downloadMatrixDriverAsync=function(t,e){return s(this,void 0,void 0,function(){var n;return u(this,function(r){switch(r.label){case 0:return this.downloadMatrixDriverSetup(t),[4,e()];case 1:return n=r.sent(),this.downloadMatrixDriverTeardown(),[2,n]}})})},t.prototype.setOutputMatrixTextureDriver=function(t,e,n){this.throwIfDisposed();var r=this.gl;ea(r,t,this.framebuffer),this.autoDebugValidate&&ra(r),this.outputTexture=t,Pi(r,function(){return r.viewport(0,0,e,n)}),Pi(r,function(){return r.scissor(0,0,e,n)})},t.prototype.setOutputMatrixWriteRegionDriver=function(t,e,n,r){var o=this;this.throwIfDisposed(),Pi(this.gl,function(){return o.gl.scissor(t,e,n,r)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},t}();function Na(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(t,n){var r=t.logicalShape,o=e[n],i=o.tensor.shape;if(!b(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+i+" must match");if(!t.isUniform||!o.isUniform){var a=t.texShape,s=o.isUniform?null:o.texData.texShape;if(!b(a,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+s+" must match")}})}var Pa=function(){function t(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(e-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(e-1)+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.seedLoc&&(e.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(e.seedLoc,t)}},t}(),Ta=function(t,e,n){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterHeight,o=t.filterWidth,i=t.strideHeight,a=t.strideWidth,s=t.padInfo.top,u=t.padInfo.left;this.outputShape=t.outShape;var l="avg"===e,c="0.0";if(l||(c="-1.0 / 0.0"),n)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+a+");\n        const ivec2 pads = ivec2("+s+", "+u+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+r+"; wR++) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+o+"; wC++) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+o+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var p=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(p="avgValue / count");var h=4*Math.floor(o/4),f=o%4,d="\n      if ("+l+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+a+");\n      const ivec2 pads = ivec2("+s+", "+u+");\n      const float initializationValue = "+c+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+c+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+r+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+h+"; wC += 4) {\n            int xC = xCCorner + wC;\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              getValue(batch, xR, xC + 3, d)\n            );\n\n            "+d+"\n          }\n\n          int xC = xCCorner + "+h+";\n          if ("+(1===f)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+d+"\n          } else if ("+(2===f)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+d+"\n          } else if ("+(3===f)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              initializationValue\n            );\n\n            "+d+"\n          }\n        }\n        setOutput("+p+");\n      }\n    "}},Ra=function(){function t(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var e=bi(this.rank),n=function(t){if(1===t)return"sourceLoc";if(2===t)return"sourceLoc.x, sourceLoc.y";if(3===t)return"sourceLoc.x, sourceLoc.y, sourceLoc.z";if(4===t)return"sourceLoc.x, sourceLoc.y, sourceLoc.z, sourceLoc.w";throw Error("Slicing for rank "+t+" is not yet supported")}(this.rank);this.userCode="\n      uniform "+e+" start;\n\n      void main() {\n        "+e+" sourceLoc = start + getOutputCoords();\n        setOutput(getSource("+n+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){if(null!=e.startLoc||(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null!=e.startLoc))if(1===e.rank)n.gl.uniform1i(e.startLoc,t[0]);else if(2===e.rank)n.gl.uniform2i(e.startLoc,t[0],t[1]);else if(3===e.rank)n.gl.uniform3i(e.startLoc,t[0],t[1],t[2]);else{if(4!==e.rank)throw Error("Slicing for rank "+e.rank+" is not yet supported");n.gl.uniform4i(e.startLoc,t[0],t[1],t[2],t[3])}}},t}(),Ma=function(){function t(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(t,e){var n,r=Da(e),o=ja(t,r);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var i=this.freeTextures[o].shift();return this.usedTextures[o].push(i),i}return this.numUsedTextures++,this.log(),r===mi.FLOAT32?n=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):r===mi.FLOAT16?n=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):r===mi.UNSIGNED_BYTE&&(n=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[o].push(n),n},t.prototype.releaseTexture=function(t,e,n){var r=ja(e,Da(n));r in this.freeTextures||(this.freeTextures[r]=[]),this.freeTextures[r].push(t),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[r],i=o.indexOf(t);if(i<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(i,1),this.log()},t.prototype.log=function(){this.logEnabled&&console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+(this.numFreeTextures+this.numUsedTextures)+")")},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var t=this;if(null!=this.freeTextures){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(e){t.gpgpu.deleteMatrixTexture(e)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(e){t.gpgpu.deleteMatrixTexture(e)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function Da(t){if(t===di.DOWNLOAD||t===di.PIXELS)return mi.UNSIGNED_BYTE;if(t===di.UPLOAD)return mi.FLOAT32;if(t===di.RENDER)return mt.get("WEBGL_RENDER_FLOAT32_ENABLED")?mi.FLOAT32:mi.FLOAT16;throw new Error("Unknown logical texture type "+t)}function ja(t,e){return t[0]+"_"+t[1]+"_"+e}var La=function(){function t(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float NAN;\n      float unaryOperation(float x) {\n        "+e+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(){var t=this;return function(e,n){null==t.startLoc&&(t.startLoc=e.getUniformLocationNoThrow(n,"NAN"),null==t.startLoc)||e.gl.uniform1f(t.startLoc,NaN)}},t}(),za=300,Ba=function(){function t(t,e){if(void 0===e&&(e=!0),this.gpgpu=t,this.delayedStorage=e,this.texData=new WeakMap,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.lruDataGPU=[],this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.binaryCache={},this.disposed=!1,mt.get("WEBGL_VERSION")<1)throw new Error("WebGL is not supported on this device");mt.get("IS_BROWSER")&&(this.canvas=document.createElement("canvas")),null==t?(this.gpgpu=new ka(la(this.canvas)),this.gpgpuCreatedLocally=!0):this.gpgpuCreatedLocally=!1,this.NUM_BYTES_BEFORE_PAGING=window.screen.height*window.screen.width*window.devicePixelRatio*za,this.textureManager=new Ma(this.gpgpu)}return t.prototype.register=function(t,e,n){if(this.texData.has(t))throw new Error("Data buffer is already registered");this.texData.set(t,{shape:e,dtype:n,values:null,texture:null,texShape:null,usage:di.RENDER})},t.prototype.fromPixels=function(t,e){if(null==t)throw new Error("pixels passed to tf.fromPixels() can not be null");var n=[t.height,t.width],r=[t.height,t.width,e];if(!(t instanceof HTMLVideoElement||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageData))throw new Error("pixels passed to tf.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+t.constructor.name);if(t instanceof HTMLVideoElement){if(null==this.fromPixelsCanvas){if(!mt.get("IS_BROWSER"))throw new Error("Can't read pixels from HTMLImageElement outside the browser.");if("complete"!==document.readyState)throw new Error("The DOM is not ready yet. Please call tf.fromPixels() once the DOM is ready. One way to do that is to add an event listener for `DOMContentLoaded` on the document object");this.fromPixelsCanvas=document.createElement("canvas")}this.fromPixelsCanvas.width=t.width,this.fromPixelsCanvas.height=t.height,this.fromPixelsCanvas.getContext("2d").drawImage(t,0,0,t.width,t.height),t=this.fromPixelsCanvas}var o=X.make(n,{},"int32");this.texData.get(o.dataId).usage=di.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(o.dataId),t);var i=new function(t){this.variableNames=["A"];var e=t[0],n=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+n+".0, "+e+".0);\n\n        vec4 values = texture2D(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "}(r),a=this.compileAndRun(i,[o]);return o.dispose(),a},t.prototype.write=function(t,e){if(null==e)throw new Error("MathBackendWebGL.write(): values can not be null");this.throwIfNoData(t);var n=this.texData.get(t),r=n.texture;null!=r&&(this.releaseTexture(t,r,n.texShape,n.usage),n.texture=null,n.texShape=null),n.usage=di.UPLOAD,n.values=e,this.delayedStorage||this.uploadToGPU(t)},t.prototype.readSync=function(t){this.throwIfNoData(t);var e=this.texData.get(t),n=e.shape,r=e.texture,o=e.values,i=e.texShape,a=e.dtype;if(null!=o)return this.cacheOnCPU(t),o;var s,u,l=null!=this.activeTimers;if(l&&(s=performance.now()),mt.get("WEBGL_DOWNLOAD_FLOAT_ENABLED"))u=this.gpgpu.downloadFloat32MatrixFromOutputTexture(r,i[0],i[1]);else{var c=X.make(n,{});this.texData.get(c.dataId).usage=di.DOWNLOAD;var p=X.make(n,{dataId:t},a),h=new function(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      const float FLOAT_MAX = 1.70141184e38;\n      const float FLOAT_MIN = 1.17549435e-38;\n\n      lowp vec4 encode_float(highp float v) {\n        if (isNaN(v)) {\n          return vec4(255, 255, 255, 255);\n        }\n\n        highp float av = abs(v);\n\n        if(av < FLOAT_MIN) {\n          return vec4(0.0, 0.0, 0.0, 0.0);\n        } else if(v > FLOAT_MAX) {\n          return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n        } else if(v < -FLOAT_MAX) {\n          return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n        }\n\n        highp vec4 c = vec4(0,0,0,0);\n\n        highp float e = floor(log2(av));\n        highp float m = exp2(fract(log2(av))) - 1.0;\n\n        c[2] = floor(128.0 * m);\n        m -= c[2] / 128.0;\n        c[1] = floor(32768.0 * m);\n        m -= c[1] / 32768.0;\n        c[0] = floor(8388608.0 * m);\n\n        highp float ebias = e + 127.0;\n        c[3] = floor(ebias / 2.0);\n        ebias -= c[3] * 2.0;\n        c[2] += floor(ebias) * 128.0;\n\n        c[3] += 128.0 * step(0.0, -v);\n\n        return c / 255.0;\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        gl_FragColor = encode_float(x);\n      }\n    "}(n);this.compileAndRun(h,[p],c,null,!1);var f=this.texData.get(c.dataId);u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(f.texture,f.texShape[0],f.texShape[1]),p.dispose(),c.dispose()}return l&&(this.downloadWaitMs+=performance.now()-s),this.cacheOnCPU(t,u),e.values},t.prototype.read=function(t){return s(this,void 0,void 0,function(){var e,n,r,o,i,a,s,l;return u(this,function(u){switch(u.label){case 0:return this.pendingRead.has(t)?(e=this.pendingRead.get(t),[2,new Promise(function(t){return e.push(t)})]):(this.throwIfNoData(t),n=this.texData.get(t),r=n.texture,i=n.texShape,null!=(o=n.values)?(this.cacheOnCPU(t),[2,o]):mt.get("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED")?[4,this.gpgpu.downloadMatrixFromTextureAsync(r,i[0],i[1])]:[3,2]);case 1:return a=u.sent(),this.cacheOnCPU(t,a),[2,n.values];case 2:return 0===mt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?[2,this.readSync(t)]:(this.pendingRead.set(t,[]),[4,this.gpgpu.runQuery(function(){})]);case 3:return u.sent(),s=this.pendingRead.get(t),this.pendingRead.delete(t),l=this.readSync(t),s.forEach(function(t){return t(l)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)),[2,l]}})})},t.prototype.time=function(t){return s(this,void 0,void 0,function(){var e,n,r,o,i,a;return u(this,function(s){switch(s.label){case 0:return e=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,t(),o=g(this.activeTimers),this.activeTimers=e,r&&(this.programTimersStack=null),[4,Promise.all(o).then(function(t){var e=0;return t.forEach(function(t){return e+=t}),e})];case 1:return i=s.sent(),a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:i,wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,a]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return mt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},t.prototype.endTimer=function(t){return mt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),t):(t.endMs=performance.now(),t)},t.prototype.getQueryTime=function(t){return s(this,void 0,void 0,function(){var e;return u(this,function(n){return mt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.pollQueryTime(t)]:[2,(e=t).endMs-e.startMs]})})},t.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t))if(this.pendingRead.has(t))this.pendingDisposal.add(t);else if(this.texData.has(t)){var e=this.texData.get(t),n=e.texture;null!=n&&this.releaseTexture(t,n,e.texShape,e.usage),this.texData.delete(t)}},t.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.getCanvas=function(){return this.canvas},t.prototype.slice=function(t,e,n){var r=new Ra(n),o=r.getCustomSetupFunc(e);return this.compileAndRun(r,[t],null,o)},t.prototype.stridedSlice=function(t,e,n,r,o,i){var a=Kn(t.shape,e,n,r,o,i),s=a[0],u=a[1];if(u.some(function(t){return 0===t}))return Xt([],u);var l=new function(t,e,n){this.variableNames=["x"],this.outputShape=n,this.rank=n.length;var r,o=bi(this.rank);r=1===this.rank?"coords * strides + begin":n.map(function(t,e){return"coords["+e+"] * strides["+e+"] + begin["+e+"]"}).join(","),this.userCode="\n      "+o+" begin = "+o+"("+t+");\n      "+o+" strides = "+o+"("+e+");\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}(s,r,u);return this.compileAndRun(l,[t])},t.prototype.reverse=function(t,e){var n=new function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,1!==n){var r=t.map(function(n,r){return function(n){return-1!==e.indexOf(n)&&1!==t[n]?t[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)}).join(","),o=bi(n);this.userCode="\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+t[0]+" - coord - 1));\n        }\n      "}(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.concat=function(t,e){var n=new function(t,e){this.variableNames=["A","B"],this.outputShape=[],this.outputShape=St(t,e,1),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        float value = 0.0;\n        if (yC < "+t[1]+") {\n          value = getA(yR, yC);\n        } else {\n          yC -= "+t[1]+";\n          value = getB(yR, yC);\n        }\n\n        setOutput(value);\n      }\n    "}(t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.neg=function(t){var e=new La(t.shape,"return -x;");return this.compileAndRun(e,[t])},t.prototype.matMul=function(t,e,n,r){var o=new function(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),this.variableNames=["matrixA","matrixB"];var o=n?t[0]:t[1];this.outputShape=[n?t[1]:t[0],r?e[0]:e[1]];var i=function(t,e){return n?e+" + "+t+", aRow":"aRow, "+e+" + "+t},a=function(t,e){return r?"bCol, "+e+" + "+t:e+" + "+t+", bCol"},s=4*Math.floor(o/4),u=o%4;this.userCode=" float dotARowBCol(int aRow, int bCol) {\n      float result = 0.0;\n      for (int i = 0; i < "+s+"; i += 4) {\n        vec4 a = vec4(\n          getMatrixA("+i(0,"i")+"),\n          getMatrixA("+i(1,"i")+"),\n          getMatrixA("+i(2,"i")+"),\n          getMatrixA("+i(3,"i")+")\n        );\n        vec4 b = vec4(\n          getMatrixB("+a(0,"i")+"),\n          getMatrixB("+a(1,"i")+"),\n          getMatrixB("+a(2,"i")+"),\n          getMatrixB("+a(3,"i")+")\n        );\n\n        result += dot(a, b);\n      }\n\n      if ("+(1===u)+") {\n        result += getMatrixA("+i(0,s)+") *\n          getMatrixB("+a(0,s)+");\n      } else if ("+(2===u)+") {\n        vec2 a = vec2(\n          getMatrixA("+i(0,s)+"),\n          getMatrixA("+i(1,s)+")\n        );\n        vec2 b = vec2(\n          getMatrixB("+a(0,s)+"),\n          getMatrixB("+a(1,s)+")\n        );\n        result += dot(a, b);\n      } else if ("+(3===u)+") {\n        vec3 a = vec3(\n          getMatrixA("+i(0,s)+"),\n          getMatrixA("+i(1,s)+"),\n          getMatrixA("+i(2,s)+")\n        );\n        vec3 b = vec3(\n          getMatrixB("+a(0,s)+"),\n          getMatrixB("+a(1,s)+"),\n          getMatrixB("+a(2,s)+")\n        );\n        result += dot(a, b);\n      }\n\n      return result;\n    }\n\n    void main() {\n      ivec2 resRC = getOutputCoords();\n      setOutput(dotARowBCol(resRC.x, resRC.y));\n    }\n    "}(t.shape,e.shape,n,r);return this.compileAndRun(o,[t,e])},t.prototype.multiply=function(t,e){var n=new fi("return a * b;",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,Hr(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],r)},t.prototype.batchNormalization=function(t,e,n,r,o,i){var a=[t,e,n],s=null;null!=i&&(s=i.shape,a.push(i));var u=null;null!=o&&(u=o.shape,a.push(o));var l=new function(t,e,n,r,o,i){this.outputShape=[],this.supportsBroadcasting=!0,this.variableNames=["x","mean","variance"],De(t,e),De(t,n);var a="0.0";null!=r&&(De(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";null!=o&&(De(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+a+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+i+"));\n        setOutput((x - mean) * inv + offset);\n      }\n    "}(t.shape,e.shape,n.shape,s,u,r);return this.compileAndRun(l,a)},t.prototype.localResponseNormalization4D=function(t,e,n,r,o){var i=new function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[];var i=e,a=t[3]-1;this.outputShape=t;var s="float("+n+") + float("+r+") * sum";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+i+"; j <= "+i+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+a+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+(.5===o?"inversesqrt("+s+")":1===o?"1.0/("+s+")":"exp(log("+s+") * float(-"+o+"));")+";\n        setOutput(val);\n      }\n    "}(t.shape,e,n,r,o);return this.compileAndRun(i,[t])},t.prototype.tile=function(t,e){var n=new function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var o=bi(this.rank),i=function(t){var e=t.length;if(e>5)throw Error("Tile for rank "+e+" is not yet supported");if(1===e)return"imod(resRC, "+t[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],o=0;o<t.length;o++)r.push("imod("+n[o]+", "+t[o]+")");return r.join()}(t);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "}(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.pad=function(t,e,n){var r=new function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(e,n){return e[0]+t[n]+e[1]});var r=t.length,o=bi(r),i=e.map(function(t){return t[0]}).join(","),a=e.map(function(e,n){return e[0]+t[n]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+o+" start = "+o+"("+i+");\n      "+o+" end = "+o+"("+a+");\n\n      void main() {\n        "+o+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+o+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+i+";\n        int end = "+a+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "}(t.shape,e,n);return this.compileAndRun(r,[t])},t.prototype.transpose=function(t,e){var n=new function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var o=bi(this.rank),i=function(t){var e=t.length;if(e>6)throw Error("Transpose for rank "+e+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e),o=0;o<t.length;o++)r[t[o]]=n[o];return r.join()}(e);this.userCode="\n    void main() {\n      "+o+" resRC = getOutputCoords();\n      setOutput(getA("+i+"));\n    }\n    "}(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.gather=function(t,e,n){var r=new function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var o=bi(this.rank),i=function(t,e){var n=t.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],i=0;i<t.length;i++)o.push(i===e?"int(getIndices("+r[i]+"))":""+r[i]);return o.join()}(t,n);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "}(t.shape,e.size,n);return this.compileAndRun(r,[t,e])},t.prototype.reduce=function(t,e,n){var r=t.shape[0],o=t.shape[1],i=new function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,o=t.inSize,i=Math.ceil(o/n);this.outputShape=[r,i];var a="0.0",s="";"min"===e?(a="1.0 / 0.0",s="min"):"max"===e&&(a="-1.0 / 0.0",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e?u="sumValue":"all"===e?u="allValue":"any"===e&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,p="\n      if ("+("sum"===e)+") {\n        sumValue += dot(values, ones);\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",h="vec4";"all"===e?(a="1.0",p="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===e&&(a="0.0",p="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var f="";o%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+a+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+f+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+a+");\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+p+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+p+"\n        } else if ("+(2===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+p+"\n        } else if ("+(3===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+p+"\n        }\n        setOutput("+u+");\n      }\n    "}({windowSize:ci(o),inSize:o,batchSize:r},e),a=i.outputShape,s=this.makeOutputArray([a[0],a[1]],n);return this.compileAndRun(i,[t],s),1===s.shape[1]?s:this.reduce(s,e,n)},t.prototype.argReduce=function(t,e,n){void 0===n&&(n=null);var r=t.shape[0],o=t.shape[1];null!=n&&(r=n.shape[0],o=n.shape[1]);var i=new function(t,e,n){this.variableNames=["A"];var r=t.windowSize,o=t.batchSize,i=Math.ceil(t.inSize/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = 0;\n        float bestValue = getA(batch, inOffset);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+(n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));")+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+("max"===e?">":"<")+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "}({windowSize:ci(o),inSize:o,batchSize:r},e,null==n),a=i.outputShape,s=this.makeOutputArray([a[0],a[1]],"int32"),u=[t];return null!=n&&u.push(n),this.compileAndRun(i,u,s),1===s.shape[1]?s:this.argReduce(t,e,s)},t.prototype.sum=function(t,e){_t("sum",e,t.rank);var n=yt(t.shape,e),r=n[0],o=y(n[1]),i=t.as2D(-1,o),a=Gr(t.dtype);return this.reduce(i,"sum",a).reshape(r)},t.prototype.unsortedSegmentSum=function(t,e,n){var r=0,o=xt([r],t.rank),i=t;null!=o&&(i=t.transpose(o),r=Et(1,t.rank)[0]);var a=function(t,e,n){for(var r=[],o=t.length,i=0;i<o;i++)r.push(i!==e?t[i]:n);return r}(i.shape,r,n),s=y([i.shape[r]]),u=i.as2D(-1,s),l=Gr(t.dtype),c=this.segOpCompute(u,"unsortedSegmentSum",e,l,n).reshape(a);return null!=o&&(c=c.transpose(Ot(o))),c},t.prototype.segOpCompute=function(t,e,n,r,o){var i=t.shape[0],a=t.shape[1],s=function(t,e){var n,r=!1;for(t<=li?(n=t,r=!0):n=D(t,Math.floor(Math.sqrt(t)));!r;){if(n>e||n===t){r=!0;break}n=D(t,n+1)}return n}(a,o),u=new function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,o=t.inSize,i=t.numSegments,a=i*Math.ceil(o/n);this.outputShape=[r,a];var s=4*Math.floor(n/4),u=n%4,l="\n        sumValue += dot(values, filter);\n    ",c="";o%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      ");var p="";o%n>0&&(p="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+p+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+i+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+i+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+l+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+l+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+l+"\n        }\n        setOutput(sumValue);\n      }\n    "}({windowSize:s,inSize:a,batchSize:i,numSegments:o},e),l=u.outputShape,c=this.makeOutputArray([l[0],l[1]],r);return this.compileAndRun(u,[t,n],c),c.shape[1]===o?c:(n=Kt(0,o).tile([a/s]),this.segOpCompute(c,e,n,r,o))},t.prototype.argMin=function(t,e){var n=[e];_t("argMin",n,t.rank);var r=yt(t.shape,n),o=r[0],i=y(r[1]),a=t.as2D(-1,i);return this.argReduce(a,"min").reshape(o)},t.prototype.argMax=function(t,e){var n=[e];_t("argMax",n,t.rank);var r=yt(t.shape,n),o=r[0],i=y(r[1]),a=t.as2D(-1,i);return this.argReduce(a,"max").reshape(o)},t.prototype.cumsum=function(t,e,n,r){if(e!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+e);var o=new function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,o=t[t.length-1],i=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+o+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+bi(r)+" coords = getOutputCoords();\n        int end = "+xi(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+o+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+i+" end) {\n            continue;\n          }\n          if (idx == end && "+e+") {\n            continue;\n          }\n          "+xi(r,"coords")+" = idx;\n          val += getX("+function(t,e){if(1===t)return""+e;if(2===t)return e+".x, "+e+".y";if(3===t)return e+".x, "+e+".y, "+e+".z";if(4===t)return e+".x, "+e+".y, "+e+".z, "+e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "}(t.shape,n,r);return this.compileAndRun(o,[t])},t.prototype.equal=function(t,e){var n=new fi("return float(a == b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.notEqual=function(t,e){var n=new fi("return float(a != b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.less=function(t,e){var n=new fi("return float(a < b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.lessEqual=function(t,e){var n=new fi("return float(a <= b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.greater=function(t,e){var n=new fi("return float(a > b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.greaterEqual=function(t,e){var n=new fi("return float(a >= b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.logicalNot=function(t){var e=new La(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(e,[t])},t.prototype.logicalAnd=function(t,e){var n=new fi("return float(a >= 1.0 && b >= 1.0);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.logicalOr=function(t,e){var n=new fi("return float(a >= 1.0 || b >= 1.0);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.where=function(t,e,n,r){var o=new function(t,e,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)o="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],u=0;u<e.length;u++)s.push(""+i[u]),u<t&&a.push(""+i[u]);r=a.join(),o=s.join()}var l=bi(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+o+"));\n        } else {\n          setOutput(getB("+o+"));\n        }\n      }\n    "}(t.rank,e.shape,e.rank),i=this.makeOutputArray(o.outputShape,r);return this.compileAndRun(o,[t,e,n],i)},t.prototype.topKValues=function(t,e){throw new Error("topKValues GPU not yet implemented!")},t.prototype.topKIndices=function(t,e){throw new Error("topKIndices GPU not yet implemented!")},t.prototype.min=function(t,e){_t("min",e,t.rank);var n=yt(t.shape,e),r=n[0],o=y(n[1]),i=t.as2D(-1,o);return this.reduce(i,"min",i.dtype).reshape(r)},t.prototype.minimum=function(t,e){var n=new fi("\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n\n  return min(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.mod=function(t,e){var n=new fi("if (b == 0.0) return NAN;\n  return mod(a, b);",t.shape,e.shape),r=n.getCustomSetupFunc();return this.compileAndRun(n,[t,e],null,r)},t.prototype.max=function(t,e){_t("max",e,t.rank);var n=yt(t.shape,e),r=n[0],o=y(n[1]),i=t.as2D(-1,o);return this.reduce(i,"max",i.dtype).reshape(r)},t.prototype.maximum=function(t,e){var n=new fi("\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n\n  return max(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.all=function(t,e){_t("all",e,t.rank);var n=yt(t.shape,e),r=n[0],o=y(n[1]),i=t.as2D(-1,o);return this.reduce(i,"all",i.dtype).reshape(r)},t.prototype.any=function(t,e){_t("any",e,t.rank);var n=yt(t.shape,e),r=n[0],o=y(n[1]),i=t.as2D(-1,o);return this.reduce(i,"any",i.dtype).reshape(r)},t.prototype.squaredDifference=function(t,e){var n=new fi("return (a - b) * (a - b);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.realDivide=function(t,e){var n=new fi("if (a == b) return 1.0;\n  return a / b;",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[t,e],r)},t.prototype.floorDiv=function(t,e){var n=new fi("\n  float resultSign = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  int result = ia / ib;\n  int amodb = ia - ib * result;\n\n  if (resultSign < 0.0 && amodb != 0) {\n    result -= 1;\n  }\n  return float(result);\n",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"int32");return this.compileAndRun(n,[t,e],r)},t.prototype.add=function(t,e){var n=new fi("return a + b;",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,Hr(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],r)},t.prototype.subtract=function(t,e){var n=new fi("return a - b;",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,Hr(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],r)},t.prototype.pow=function(t,e){var n=new fi("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nreturn (round(mod(b, 2.0)) == 0 || round(mod(b, 2.0)) == 2) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",t.shape,e.shape),r=n.getCustomSetupFunc(),o=this.makeOutputArray(n.outputShape,Hr(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],o,r)},t.prototype.ceil=function(t){var e=new La(t.shape,"return ceil(x);");return this.compileAndRun(e,[t])},t.prototype.floor=function(t){var e=new La(t.shape,"return floor(x);");return this.compileAndRun(e,[t])},t.prototype.sign=function(t){var e=new La(t.shape,"\n  if (isNaN(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(e,[t])},t.prototype.round=function(t){var e=new La(t.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(e,[t])},t.prototype.exp=function(t){var e=new La(t.shape,"return exp(x);");return this.compileAndRun(e,[t])},t.prototype.expm1=function(t){var e=new La(t.shape,"return exp(x) - 1.0;");return this.compileAndRun(e,[t])},t.prototype.log=function(t){var e=new La(t.shape,"if (x < 0.0) return NAN;\n  return log(x);"),n=e.getCustomSetupFunc();return this.compileAndRun(e,[t],null,n)},t.prototype.log1p=function(t){var e=new La(t.shape,"return log(1.0 + x);");return this.compileAndRun(e,[t])},t.prototype.sqrt=function(t){var e=new La(t.shape,"return sqrt(x);");return this.compileAndRun(e,[t])},t.prototype.rsqrt=function(t){var e=new La(t.shape,"return inversesqrt(x);");return this.compileAndRun(e,[t])},t.prototype.square=function(t){var e=new La(t.shape,"return x * x;");return this.compileAndRun(e,[t])},t.prototype.reciprocal=function(t){var e=new La(t.shape,"return 1.0 / x;");return this.compileAndRun(e,[t])},t.prototype.relu=function(t){var e=new La(t.shape,"if (isNaN(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n");return this.compileAndRun(e,[t])},t.prototype.elu=function(t){var e=new La(t.shape,"return (x >= 0.0) ? x : (exp(x) - 1.0);");return this.compileAndRun(e,[t])},t.prototype.eluDer=function(t,e){var n=new fi("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.selu=function(t){var e=new La(t.shape,"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n");return this.compileAndRun(e,[t])},t.prototype.int=function(t){var e=new La(t.shape,"return float(int(x));"),n=this.makeOutputArray(e.outputShape,"int32");return this.compileAndRun(e,[t],n)},t.prototype.clip=function(t,e,n){var r=new function(t,e,n){this.variableNames=["A"],this.outputShape=t;var r=e.toFixed(20),o=n.toFixed(20);this.userCode="\n      void main() {\n        float value = getAAtOutCoords();\n        if (isNaN(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, "+r+", "+o+"));\n      }\n    "}(t.shape,e,n);return this.compileAndRun(r,[t])},t.prototype.abs=function(t){var e=new La(t.shape,"return abs(x);");return this.compileAndRun(e,[t])},t.prototype.sigmoid=function(t){var e=new La(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(e,[t])},t.prototype.softplus=function(t){var e=new La(t.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(e,[t])},t.prototype.sin=function(t){var e=new La(t.shape,"if (isNaN(x)) return x;\n  return sin(x);\n");return this.compileAndRun(e,[t])},t.prototype.cos=function(t){var e=new La(t.shape,"if (isNaN(x)) return x;\n  return cos(x);\n");return this.compileAndRun(e,[t])},t.prototype.tan=function(t){var e=new La(t.shape,"return tan(x);");return this.compileAndRun(e,[t])},t.prototype.asin=function(t){var e=new La(t.shape,"return asin(x);");return this.compileAndRun(e,[t])},t.prototype.acos=function(t){var e=new La(t.shape,"return acos(x);");return this.compileAndRun(e,[t])},t.prototype.atan=function(t){var e=new La(t.shape,"if (isNaN(x)) return x;\n  return atan(x);\n");return this.compileAndRun(e,[t])},t.prototype.atan2=function(t,e){var n=new fi("\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n\n  return atan(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.sinh=function(t){var e=new La(t.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},t.prototype.cosh=function(t){var e=new La(t.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},t.prototype.tanh=function(t){var e=new La(t.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(e,[t])},t.prototype.asinh=function(t){var e=new La(t.shape,"return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(e,[t])},t.prototype.acosh=function(t){var e=new La(t.shape,"if (isNaN(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));"),n=e.getCustomSetupFunc();return this.compileAndRun(e,[t],null,n)},t.prototype.atanh=function(t){var e=new La(t.shape,"if (isNaN(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;"),n=e.getCustomSetupFunc();return this.compileAndRun(e,[t],null,n)},t.prototype.erf=function(t){var e=new La(t.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float t = 1.0 / (1.0 + p * x);\n  return 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x);\n');return this.compileAndRun(e,[t])},t.prototype.step=function(t,e){var n=new La(t.shape,function(t){return void 0===t&&(t=0),"if (isNaN(x)) return x;\n    return x > 0.0 ? 1.0 : float("+t+");\n  "}(e));return this.compileAndRun(n,[t])},t.prototype.conv2d=function(t,e,n){var r=new function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.top,n=t.padInfo.left,r=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,a=t.dilationWidth,s=t.filterHeight,u=t.filterWidth,l=4*Math.floor(t.inChannels/4),c=t.inChannels%4;this.userCode="\n      const ivec2 strides = ivec2("+r+", "+o+");\n      const ivec2 pads = ivec2("+e+", "+n+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+"; wR++) {\n          int xR = xRCorner + wR * "+i+";\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC * "+a+";\n\n            if (xC < 0 || xC >= "+t.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+l+"; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if ("+(1===c)+") {\n              dotProd +=\n                getX(batch, xR, xC, "+l+") *\n                getW(wR, wC, "+l+", d2);\n            } else if ("+(2===c)+") {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, "+l+"),\n                getX(batch, xR, xC, "+l+" + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, "+l+", d2),\n                getW(wR, wC, "+l+" + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if ("+(3===c)+") {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, "+l+"),\n                getX(batch, xR, xC, "+l+" + 1),\n                getX(batch, xR, xC, "+l+" + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, "+l+", d2),\n                getW(wR, wC, "+l+" + 1, d2),\n                getW(wR, wC, "+l+" + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[t,e])},t.prototype.conv2dDerInput=function(t,e,n){var r=new function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[t,e])},t.prototype.conv2dDerFilter=function(t,e,n){var r=new function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+t.strideHeight+" - "+t.padInfo.top+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+t.strideWidth+" - "+t.padInfo.left+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[t,e])},t.prototype.depthwiseConv2D=function(t,e,n){var r=new function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 strides = ivec2("+t.strideHeight+", "+t.strideWidth+");\n      const ivec2 pads = ivec2("+t.padInfo.top+", "+t.padInfo.left+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+e+";\n        int q = d2 - d1 * "+e+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+t.filterHeight+"; wR++) {\n          int xR = xRCorner + wR * "+t.dilationHeight+";\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+t.filterWidth+"; wC++) {\n            int xC = xCCorner + wC * "+t.dilationWidth+";\n\n            if (xC < 0 || xC >= "+t.inWidth+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[t,e])},t.prototype.depthwiseConv2DDerInput=function(t,e,n){var r=new function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TODO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+r+"; dm++) {\n              int d2 = d1 * "+r+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[t,e])},t.prototype.depthwiseConv2DDerFilter=function(t,e,n){var r=new function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+t.outChannels/t.inChannels+" + dm;\n\n        float dotProd = 0.0;\n\n        // TODO: Vec4 over the batch size\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+t.strideHeight+" - "+t.padInfo.top+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+t.strideWidth+" - "+t.padInfo.left+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[t,e])},t.prototype.maxPool=function(t,e){var n=new Ta(e,"max",!1),r=this.makeOutputArray(n.outputShape,t.dtype);return this.compileAndRun(n,[t],r)},t.prototype.avgPool=function(t,e){var n=new Ta(e,"avg",!1),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[t],r)},t.prototype.maxPoolBackprop=function(t,e,n,r){var o=new Ta(r,"max",!0),i=this.compileAndRun(o,[e]),a=new function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+(e*n-1)+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+n+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(r),s=this.makeOutputArray(a.outputShape,e.dtype),u=this.compileAndRun(a,[t,i],s);return i.dispose(),u},t.prototype.avgPoolBackprop=function(t,e,n){var r=new function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n      const float avgMultiplier = float("+1/(e*n)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n),o=this.makeOutputArray(r.outputShape,e.dtype);return this.compileAndRun(r,[t],o)},t.prototype.cast=function(t,e){return pi(t,e,this)},t.prototype.reshape=function(t,e){return hi(t,e)},t.prototype.resizeBilinear=function(t,e,n,r){var o=new function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[1],i=t[2];this.outputShape=[t[0],e,n,t[3]];var a=[r&&e>1?o-1:o,r&&n>1?i-1:i],s=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+a[0]/s[0]+",\n          "+a[1]/s[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "}(t.shape,e,n,r);return this.compileAndRun(o,[t])},t.prototype.resizeBilinearBackprop=function(t,e,n){var r=new function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],i=r[2],a=t.shape,s=a[1],u=a[2],l=[n&&s>1?o-1:o,n&&u>1?i-1:i],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],p=l[0]/c[0],h=l[1]/c[1],f=1/p,d=1/h,m=2*Math.ceil(f)+2,g=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+p+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+d+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(o-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(i-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "}(t,e,n);return this.compileAndRun(r,[t])},t.prototype.resizeNearestNeighbor=function(t,e,n,r){var o=new function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[1],i=t[2];this.outputShape=[t[0],e,n,t[3]];var a=[r&&e>1?o-1:o,r&&n>1?i-1:i],s=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+a[0]/s[0]+",\n          "+a[1]/s[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+(r?"0.5":"0.0")+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "}(t.shape,e,n,r);return this.compileAndRun(o,[t])},t.prototype.resizeNearestNeighborBackprop=function(t,e,n){var r=new function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],i=r[2],a=t.shape,s=a[1],u=a[2],l=[n&&s>1?o-1:o,n&&u>1?i-1:i],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],p=l[0]/c[0],h=l[1]/c[1],f=1/p,d=1/h,m=2*Math.ceil(f)+2,g=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+p+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+d+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+l[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+l[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "}(t,e,n);return this.compileAndRun(r,[t])},t.prototype.multinomial=function(t,e,n,r){var o=e?t:ko(t),i=new Pa(o.shape[0],o.shape[1],n),a=this.makeOutputArray(i.outputShape,"int32"),s=i.getCustomSetupFunc(r);return this.compileAndRun(i,[o],a,s)},t.prototype.oneHot=function(t,e,n,r){var o=new function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "}(t.size,e,n,r);return this.compileAndRun(o,[t])},t.prototype.makeOutputArray=function(t,e){return X.make(t,{},e)},t.prototype.compileAndRun=function(t,e,n,r,o){var i=this;void 0===o&&(o=!0),null==n&&(n=this.makeOutputArray(t.outputShape,e[0].dtype));var a=e.map(function(t){var e=i.texData.get(t.dataId);return null==e.texture&&t.size<=32?{tensor:t,texData:null,isUniform:!0}:(i.uploadToGPU(t.dataId),{tensor:t,texData:e,isUniform:!1})});this.uploadToGPU(n.dataId);var s,u={tensor:n,texData:this.texData.get(n.dataId),isUniform:!1},l=function(t,e,n){var r="";a.concat(u).forEach(function(t){r+=t.tensor.shape+"_"+(t.isUniform?"uniform":t.texData.texShape)});var o=t.userCode,i=(!0===t.supportsBroadcasting).toString();return t.constructor.name+"_"+i+"_"+r+"_"+o}(t),c=this.getAndSaveBinary(l,function(){return function(t,e,n,r){for(var o=e.userCode,i=n.map(function(t,n){return{name:e.variableNames[n],shapeInfo:{logicalShape:t.tensor.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform}}}),a=i.map(function(t){return t.shapeInfo}),s={logicalShape:r.tensor.shape,texShape:r.texData.texShape,isUniform:!1},u=function(t,e,n,r){var o=t.map(function(t){var e=y(t.shapeInfo.logicalShape);return t.shapeInfo.isUniform?"uniform float "+t.name+(e>1?"["+e+"]":"")+";":"uniform sampler2D "+t.name+";"});o=o.join("\n");var i=t.map(function(t){return function(t,e,n){var r=function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1)+"Flat",r=y(t.shapeInfo.logicalShape);if(t.shapeInfo.isUniform)return 1===r?"float "+n+"(int index) {return "+e+";}":"\n      float "+n+"(int index) {\n        for (int i = 0; i < "+r+"; i++) {\n          if (i == index) {\n            return "+e+"[i];\n          }\n        }\n      }\n    ";var o=t.shapeInfo.texShape,i=o[0],a=o[1];return 1===a&&1===i?"\n      float "+n+"(int index) {\n        return sampleTexture("+e+", halfCR);\n      }\n    ":1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index) + 0.5) / "+i+".0);\n        return sampleTexture("+e+", uv);\n      }\n    ":1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index) + 0.5) / "+a+".0, 0.5);\n        return sampleTexture("+e+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = UVfrom1D("+i+", "+a+", index);\n      return sampleTexture("+e+", uv);\n    }\n  "}(t);return r+=function t(e){var n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);return t.shapeInfo.isUniform?"float "+n+"() {return "+e+";}":"\n    float "+n+"() {\n      return sampleTexture("+e+", halfCR);\n    }\n  "}(e);case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);return"\n    float "+n+"(int index) {\n      return "+n+"Flat(index);\n    }\n  "}(e);case 2:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&b(n,i))return"\n    float "+o+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+i[1]+".0, "+i[0]+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ";var a=I(n),s=a.newShape,u=a.keptDims;if(s.length<n.length)return"\n      "+t(wi(e,s))+"\n      float "+o+"(int row, int col) {\n        return "+o+"("+_i(["row","col"],u)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col) {\n        int index = row * "+n[1]+" + col;\n        return "+o+"Flat(index);\n      }\n    ";var l=i[0],c=i[1];return 1===c?"\n    float "+o+"(int row, int col) {\n      int index = row * "+n[1]+" + col;\n      vec2 uv = vec2(0.5, (float(index) + 0.5) / "+l+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ":1===l?"\n    float "+o+"(int row, int col) {\n      int index = row * "+n[1]+" + col;\n      vec2 uv = vec2((float(index) + 0.5) / "+c+".0, 0.5);\n      return sampleTexture("+r+", uv);\n    }\n  ":"\n  float "+o+"(int row, int col) {\n    vec2 uv = UVfrom2D("+l+", "+c+", "+n[1]+", row, col);\n    return sampleTexture("+r+", uv);\n  }\n"}(e);case 3:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],a=n[2],s=I(n),u=s.newShape,l=s.keptDims;if(u.length<n.length)return"\n        "+t(wi(e,u))+"\n        float "+o+"(int row, int col, int depth) {\n          return "+o+"("+_i(["row","col","depth"],l)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth) {\n        int index = row * "+i+" + col * "+a+" + depth;\n        return "+o+"Flat(index);\n      }\n    ";var c=e.shapeInfo.texShape,p=c[0],h=c[1];return h===i?"\n        float "+o+"(int row, int col, int depth) {\n          int texR = row;\n          int texC = col * "+a+" + depth;\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+h+".0, "+p+".0);\n          return sampleTexture("+r+", uv);\n        }\n      ":h===a?"\n    float "+o+"(int row, int col, int depth) {\n      int texR = row * "+n[1]+" + col;\n      int texC = depth;\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+h+".0, "+p+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ":"\n      float "+o+"(int row, int col, int depth) {\n        vec2 uv = UVfrom3D(\n            "+p+", "+h+", "+i+", "+a+", row, col, depth);\n        return sampleTexture("+r+", uv);\n      }\n  "}(e);case 4:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],a=n[2]*i,s=n[1]*a,u=I(n),l=u.newShape,c=u.keptDims;if(l.length<n.length)return"\n      "+t(wi(e,l))+"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        return "+o+"("+_i(["row","col","depth","depth2"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        int index = row * "+s+" + col * "+a+" +\n            depth * "+i+" + depth2;\n        return "+o+"Flat(index);\n      }\n    ";var p=e.shapeInfo.texShape,h=p[0],f=p[1];return f===s?"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        int texR = row;\n        int texC = col * "+a+" + depth * "+i+" + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+f+".0, "+h+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":f===i?"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        int texR = row * "+n[1]*n[2]+" + col * "+n[2]+" + depth;\n        int texC = depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+f+".0, "+h+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+o+"(int row, int col, int depth, int depth2) {\n      vec2 uv = UVfrom4D("+h+", "+f+", "+s+", "+a+",\n          "+i+", row, col, depth, depth2);\n      return sampleTexture("+r+", uv);\n    }\n  "}(e);case 5:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[4],a=n[3]*i,s=n[2]*a,u=n[1]*s,l=I(n),c=l.newShape,p=l.keptDims;if(c.length<n.length)return"\n      "+t(wi(e,c))+"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+o+"("+_i(["row","col","depth","depth2","depth3"],p)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        int index = row * "+u+" + col * "+s+" +\n            depth * "+a+" + depth2 * "+i+" + depth3;\n        return "+o+"Flat(index);\n      }\n    ";var h=e.shapeInfo.texShape,f=h[0],d=h[1];return d===u?"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        int texC = col * "+s+" + depth * "+a+" +\n                   depth2 * "+i+" + depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+d+".0, "+f+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":d===i?"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row * "+n[1]*n[2]+" + col * "+n[2]+" +\n                   depth * "+n[3]+" + depth2;\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+d+".0, "+f+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n      vec2 uv = UVfrom5D("+f+", "+d+", "+u+", "+s+",\n          "+a+", "+i+", row, col, depth, depth2, depth3);\n      return sampleTexture("+r+", uv);\n    }\n  "}(e);case 6:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[5],a=n[4]*i,s=n[3]*a,u=n[2]*s,l=n[1]*u,c=I(n),p=c.newShape,h=c.keptDims;if(p.length<n.length)return"\n      "+t(wi(e,p))+"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+o+"("+_i(["row","col","depth","depth2","depth3","depth4"],h)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = row * "+l+" + col * "+u+" +\n            depth * "+s+" + depth2 * "+a+" + depth3 * "+a+"\n            + depth4\n        return "+o+"Flat(index);\n      }\n    ";var f=e.shapeInfo.texShape,d=f[0],m=f[1];return m===l?"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        int texC = col * "+u+" + depth * "+s+" + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+d+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":m===i?"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row * "+n[1]*n[2]+" + col * "+n[2]+" + depth;\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+d+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+o+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      vec2 uv = UVfrom6D("+d+", "+m+", "+l+", "+u+",\n          "+s+", "+a+", "+i+"\n          ,row, col, depth, depth2, depth3, depth4);\n      return sampleTexture("+r+", uv);\n    }\n  "}(e);default:throw new Error(n.length+"-D input sampling is not yet supported")}}(t),(n||b(t.shapeInfo.logicalShape,e.logicalShape))&&(r+=function(t,e,n){var r=t.name,o=r.charAt(0).toUpperCase()+r.slice(1),i="get"+o+"AtOutCoords",a=Re(t.shapeInfo.logicalShape,e.logicalShape),s=n&&(e.logicalShape.length>t.shapeInfo.logicalShape.length||a.length>0),u=function(t){for(var e=0;e<t.length;e++)if(t[e]!==e)return!1;return!0}(a),l=t.shapeInfo.isUniform;if(s&&!u)return function(t,e,n,r){var o=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,a="int";2===i?a="ivec2":3===i?a="ivec3":4===i&&(a="ivec4");var s=Re(t.shapeInfo.logicalShape,e.logicalShape),u=i-o;return"\n    float "+r+"() {\n      "+a+" coords = getOutputCoords();\n      "+(0===o?"":i<2&&s.length>=1?"coords = 0;":s.map(function(t){return"coords["+(t+u)+"] = 0;"}).join("\n"))+"\n      return get"+n+"("+(i<2&&o>0?"coords":t.shapeInfo.logicalShape.map(function(t,e){return"coords["+(e+u)+"]"}).join(", "))+");\n    }\n  "}(t,e,o,i);var c=y(t.shapeInfo.logicalShape),p="";s&&u&&(p="\n        int mainPart = index / "+c+";\n        index -= mainPart * "+c+";\n      ");var h=e.texShape;if(l)return 1===c?"float "+i+"() {return "+r+";}":"\n      float "+i+"() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                              vec2("+h[0]+", "+h[1]+"));\n        int index = resTexRC.x * "+h[1]+" + resTexRC.y;\n        "+p+"\n        return get"+o+"Flat(index);\n      }\n    ";var f=t.shapeInfo.texShape;return b(f,h)?"\n      float "+i+"() {\n        return sampleTexture("+r+", resultUV);\n      }\n    ":"\n    float "+i+"() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+h[0]+", "+h[1]+"));\n      int index = resTexRC.x * "+h[1]+" + resTexRC.y;\n      "+p+"\n      int texR = index / "+f[1]+";\n      int texC = index - texR * "+f[1]+";\n      vec2 uv = (vec2(texC, texR) + halfCR) /\n                 vec2("+f[1]+".0, "+f[0]+".0);\n\n      return sampleTexture("+r+", uv);\n    }\n  "}(t,e,n)),r}(t,e,r)}).join("\n"),a=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){return 1===e[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+e[1]+".0);\n      }\n    ":1===e[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+e[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      return resTexRC.x * "+e[1]+" + resTexRC.y;\n    }\n  "}(0,e);case 2:return function(t,e){return b(t,e)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+e[0]+", "+e[1]+"));\n      }\n    ":1===t[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===t[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      int r = index / "+t[1]+";\n      int c = index - r * "+t[1]+";\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return function(t,e){var n=t[1]*t[2],r=t[2];return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      int r = index / "+n+";\n      index -= r * "+n+";\n      int c = index / "+r+";\n      int d = index - c * "+r+";\n      return ivec3(r, c, d);\n    }\n  "}(t,e);case 4:return function(t,e){var n=t[3],r=t[2]*n,o=t[1]*r;return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      int r = index / "+o+";\n      index -= r * "+o+";\n\n      int c = index / "+r+";\n      index -= c * "+r+";\n\n      int d = index / "+n+";\n      int d2 = index - d * "+n+";\n\n      return ivec4(r, c, d, d2);\n    }\n  "}(t,e);case 5:return function(t,e){var n=t[4],r=t[3]*n,o=t[2]*r,i=t[1]*o;return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+e[0]+",\n                             "+e[1]+"));\n\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      int r = index / "+i+";\n      index -= r * "+i+";\n\n      int c = index / "+o+";\n      index -= c * "+o+";\n\n      int d = index / "+r+";\n      index -= d * "+r+";\n\n      int d2 = index  / "+n+";\n      int d3 = index - d2 * "+n+";\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(t,e);case 6:return function(t,e){var n=t[5],r=t[4]*n,o=t[3]*r,i=t[2]*o,a=t[1]*i;return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      int r = index / "+a+";\n      index -= r * "+a+";\n\n      int c = index / "+i+";\n      index -= c * "+i+";\n\n      int d = index / "+o+";\n      index -= d * "+o+";\n\n      int d2 = index / "+r+";\n      index -= d2 * "+r+";\n\n      int d3 = index / "+n+";\n      int d4 = index - d3 * "+n+";\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}}(e.logicalShape,e.texShape);return[yi,gi,vi,o,a,i,n].join("\n")}(i,s,o,!0===e.supportsBroadcasting),l=t.createProgram(u),c={},p=0;p<e.variableNames.length;p++){var h=e.variableNames[p];c[h]=t.getUniformLocation(l,h,!1)}return{program:e,source:u,webGLProgram:l,uniformLocations:c,gpgpu:t,inShapeInfos:a,outShapeInfo:s}}(i.gpgpu,t,a,u)}),p=null!=this.activeTimers;if(p&&(s=this.startTimer()),function(t,e,n,r){Na(t.inShapeInfos,e),Na([t.outShapeInfo],[n]);var o=n.texData.texShape,i=t.gpgpu;i.setOutputMatrixTexture(n.texData.texture,o[0],o[1]),i.setProgram(t.webGLProgram),e.forEach(function(e,n){var r=t.uniformLocations[t.program.variableNames[n]];if(null!=r){if(e.isUniform){if(1===e.tensor.size)i.gl.uniform1f(r,e.tensor.dataSync()[0]);else{var o=e.tensor.dataSync();o instanceof Float32Array||(o=new Float32Array(o)),i.gl.uniform1fv(r,o)}return}i.setInputMatrixTexture(e.texData.texture,r,n)}}),null!=r&&r(i,t.webGLProgram),i.executeProgram()}(c,a,u,r),o&&this.numBytesInGPU>this.NUM_BYTES_BEFORE_PAGING)for(var h=this.numBytesInGPU-this.NUM_BYTES_BEFORE_PAGING;h>0&&this.lruDataGPU.length>0;){var f=this.lruDataGPU.shift(),d=this.texData.get(f);h-=this.computeBytes(d.shape,d.dtype),this.read(f)}return p&&(s=this.endTimer(s),this.activeTimers.push(this.getQueryTime(s))),n},t.prototype.getAndSaveBinary=function(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){if(!this.disposed){for(var t in this.binaryCache)this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram);this.textureManager.dispose(),this.canvas.remove(),null!=this.fromPixelsCanvas&&this.fromPixelsCanvas.remove(),this.gpgpuCreatedLocally&&this.gpgpu.dispose(),this.disposed=!0}},t.prototype.throwIfNoData=function(t){if(!this.texData.has(t))throw new Error("WebGL backend: No data found for this tensor. Did you change your backend in the middle of the program? New backends can't use Tensors created with previous backends")},t.prototype.uploadToGPU=function(t){this.throwIfNoData(t);var e=this.texData.get(t),n=e.shape,r=e.values,o=e.usage;if(null==e.texture){var i,a=null!=this.activeTimers;a&&(i=performance.now());var s=sa(this.gpgpu.gl,n);e.texShape=s;var u=this.acquireTexture(t,s,o);e.texture=u,null!=r&&(this.gpgpu.uploadMatrixToTexture(u,s[0],s[1],r instanceof Float32Array?r:new Float32Array(r)),e.values=null,a&&(this.uploadWaitMs+=performance.now()-i))}else this.lruDataGPU.indexOf(t)>=0&&(this.lruDataGPU.splice(this.lruDataGPU.indexOf(t),1),this.lruDataGPU.push(t))},t.prototype.cacheOnCPU=function(t,e){var n=this.delayedStorage,r=this.texData.get(t),o=r.texture,i=r.dtype;n&&null!=o&&(this.releaseTexture(t,o,r.texShape,r.usage),r.texture=null,r.texShape=null),null!=e&&(r.values=function(t,e){if("float32"===e)return t;if("int32"===e||"bool"===e){for(var n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length),r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}throw new Error("Unknown dtype "+e)}(e,i))},t.prototype.releaseTexture=function(t,e,n,r){var o=this.texData.get(t),i=o.shape,a=o.dtype,s=this.lruDataGPU.indexOf(t);s>=0&&this.lruDataGPU.splice(s,1),this.numBytesInGPU-=this.computeBytes(i,a),this.textureManager.releaseTexture(e,n,r)},t.prototype.acquireTexture=function(t,e,n){var r=this.texData.get(t),o=r.shape,i=r.dtype;return this.lruDataGPU.push(t),this.numBytesInGPU+=this.computeBytes(o,i),this.textureManager.acquireTexture(e,n)},t.prototype.computeBytes=function(t,e){return y(t)*R(e)},t}();mt.get("IS_BROWSER")&&mt.registerBackend("webgl",function(){return new Ba},2,Q);var Fa=function(){function t(){this.data=new WeakMap,this.firstUse=!0,mt.get("IS_BROWSER")&&(this.canvas=document.createElement("canvas"))}return t.prototype.register=function(t,e,n){if(this.firstUse&&(this.firstUse=!1,mt.get("IS_NODE")&&!mt.get("IS_TEST")&&console.warn("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================\n")),this.data.has(t))throw new Error("Data buffer is already registered");this.data.set(t,null)},t.prototype.write=function(t,e){if(null==e)throw new Error("MathBackendCPU.write(): values can not be null");this.throwIfNoData(t),this.data.set(t,e)},t.prototype.fromPixels=function(t,e){if(null==t)throw new Error("pixels passed to tf.fromPixels() can not be null");var n,r;if(mt.get("IS_NODE")&&null==t.getContext)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(null!=t.getContext)n=t.getContext("2d").getImageData(0,0,t.width,t.height).data;else if(t instanceof ImageData)n=t.data;else{if(!(t instanceof HTMLImageElement||t instanceof HTMLVideoElement))throw new Error("pixels passed to tf.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+t.constructor.name);if(null==this.canvas)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.canvas.width=t.width,this.canvas.height=t.height,this.canvas.getContext("2d").drawImage(t,0,0,t.width,t.height),n=this.canvas.getContext("2d").getImageData(0,0,t.width,t.height).data}if(4===e)r=new Int32Array(n);else{var o=t.width*t.height;r=new Int32Array(o*e);for(var i=0;i<o;i++)for(var a=0;a<e;++a)r[i*e+a]=n[4*i+a]}return Jt(r,[t.height,t.width,e],"int32")},t.prototype.read=function(t){return s(this,void 0,void 0,function(){return u(this,function(e){return[2,this.readSync(t)]})})},t.prototype.readSync=function(t){return this.throwIfNoData(t),this.data.get(t)},t.prototype.disposeData=function(t){this.data.has(t)&&this.data.delete(t)},t.prototype.time=function(t){return s(this,void 0,void 0,function(){var e;return u(this,function(n){return e=F(),t(),[2,{kernelMs:F()-e}]})})},t.prototype.memory=function(){return{unreliable:!0}},t.prototype.throwIfNoData=function(t){if(!this.data.has(t))throw new Error("CPU backend: No data found for this tensor. Did you change your backend in the middle of the program? New backends can't use Tensors created with previous backends")},t.prototype.slice=function(t,e,n){for(var r=se(n,t.dtype),o=0;o<r.size;++o){var i=r.indexToLoc(o),a=i.map(function(t,n){return t+e[n]});r.set.apply(r,[t.get.apply(t,a)].concat(i))}return r.toTensor()},t.prototype.stridedSlice=function(t,e,n,r,o,i){var a=Kn(t.shape,e,n,r,o,i),s=a[0],u=a[1];if(u.some(function(t){return 0===t}))return Xt([],u);for(var l=se(u,t.dtype),c=0;c<l.size;c++){for(var p=l.indexToLoc(c),h=new Array(p.length),f=0;f<h.length;f++)h[f]=p[f]*r[f]+s[f];l.set.apply(l,[t.get.apply(t,h)].concat(p))}return l.toTensor()},t.prototype.reverse=function(t,e){for(var n=se(t.shape,t.dtype),r=t.buffer(),o=function(o){var i=n.indexToLoc(o),a=i.slice();e.forEach(function(e){return a[e]=t.shape[e]-1-a[e]}),n.set.apply(n,[r.get.apply(r,a)].concat(i))},i=0;i<n.size;i++)o(i);return n.toTensor()},t.prototype.concat=function(t,e){var n=St(t.shape,e.shape,1),r=se(n,t.dtype);if(1===t.shape[0]&&1===e.shape[0]){var o=t.dataSync(),i=e.dataSync(),a=r.values;return a.set(o,0),a.set(i,t.size),r.toTensor()}for(var s=0;s<n[0];++s){for(var u=0;u<t.shape[1];++u)r.set(t.get(s,u),s,u);for(u=0;u<e.shape[1];++u)r.set(e.get(s,u),s,u+t.shape[1])}return r.toTensor()},t.prototype.neg=function(t){return this.multiply(Qt(-1),t)},t.prototype.add=function(t,e){return this.broadcastedBinaryOp(t,e,Hr(t.dtype,e.dtype),function(t,e){return t+e})},t.prototype.subtract=function(t,e){return this.broadcastedBinaryOp(t,e,Hr(t.dtype,e.dtype),function(t,e){return t-e})},t.prototype.pow=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.pow(t,e)})},t.prototype.matMul=function(t,e,n,r){for(var o=n?t.shape[0]:t.shape[1],i=n?t.shape[1]:t.shape[0],a=r?e.shape[0]:e.shape[1],s=t.dataSync(),u=e.dataSync(),l=n?[1,t.strides[0]]:[t.strides[0],1],c=l[0],p=l[1],h=r?[e.strides[0],1]:[1,e.strides[0]],f=h[0],d=h[1],m=i*c,g=a*f,v=new Float32Array(i*a),y=0,b=0;b<m;b+=c)for(var w=0;w<g;w+=f){for(var _=b,x=w,O=0,E=0;E<o;++E)O+=s[_]*u[x],_+=p,x+=d;v[y++]=O}return Zt(v,[i,a])},t.prototype.multiply=function(t,e){return this.broadcastedBinaryOp(t,e,Hr(t.dtype,e.dtype),function(t,e){return t*e})},t.prototype.realDivide=function(t,e){return this.broadcastedBinaryOp(t,e,"float32",function(t,e){return t/e})},t.prototype.floorDiv=function(t,e){return this.broadcastedBinaryOp(t,e,"int32",function(t,e){return Math.floor(t/e)})},t.prototype.sum=function(t,e){_t("sum",e,t.rank);for(var n=yt(t.shape,e),r=n[0],o=n[1],i=Hr(t.dtype,"int32"),a=re(r,i),s=y(o),u=a.dataSync(),l=t.dataSync(),c=0;c<u.length;++c){for(var p=c*s,h=0,f=0;f<s;++f)h+=l[p+f];u[c]=h}return a},t.prototype.unsortedSegmentSum=function(t,e,n){for(var r=[],o=t.rank-e.rank,i=0;i<o;++i)e=e.expandDims(i+1);for(i=0;i<n;++i){var a=Qt(i,"int32"),s=Tr(a,e).asType("float32").mul(t).sum(0);r.push(s)}return ke(r)},t.prototype.argMin=function(t,e){var n=[e];_t("argMin",n,t.rank);for(var r=yt(t.shape,n),o=r[1],i=re(r[0],"int32"),a=y(o),s=i.dataSync(),u=t.dataSync(),l=0;l<s.length;++l){for(var c=l*a,p=u[c],h=0,f=0;f<a;++f){var d=u[c+f];d<p&&(p=d,h=f)}s[l]=h}return i},t.prototype.argMax=function(t,e){var n=[e];_t("argMax",n,t.rank);for(var r=yt(t.shape,n),o=r[1],i=re(r[0],"int32"),a=y(o),s=i.dataSync(),u=t.dataSync(),l=0;l<s.length;++l){for(var c=l*a,p=u[c],h=0,f=0;f<a;++f){var d=u[c+f];d>p&&(p=d,h=f)}s[l]=h}return i},t.prototype.cumsum=function(t,e,n,r){if(e!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+e);for(var o=Hr(t.dtype,"int32"),i=re(t.shape,o),a=i.dataSync(),s=t.dataSync(),u=t.shape[t.rank-1],l=r?function(t,e){return t+u-e-1}:function(t,e){return t+e},c=0;c<s.length;c+=u)for(var p=0;p<u;p++){var h=l(c,p);if(0===p)a[h]=n?0:s[h];else{var f=l(c,p-1);a[h]=n?s[f]+a[f]:s[h]+a[f]}}return i},t.prototype.equal=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t===e?1:0})},t.prototype.notEqual=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t!==e?1:0})},t.prototype.less=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t<e?1:0})},t.prototype.lessEqual=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t<=e?1:0})},t.prototype.greater=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t>e?1:0})},t.prototype.greaterEqual=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t>=e?1:0})},t.prototype.logicalNot=function(t){for(var e=t.dataSync(),n=new Int32Array(e.length),r=0;r<e.length;++r)n[r]=e[r]?0:1;return X.make(t.shape,{values:n},"bool")},t.prototype.logicalAnd=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t&&e})},t.prototype.logicalOr=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t||e})},t.prototype.where=function(t,e,n,r){for(var o=t.dataSync(),i=e.dataSync(),a=n.dataSync(),s=re(e.shape,r),u=s.dataSync(),l=0,c=0===t.rank||t.rank>1||1===e.rank?1:e.shape[1],p=0;p<o.length;p++)for(var h=0;h<c;h++)u[l++]=1===o[p]?i[p]:a[p];return s},t.prototype.topKValues=function(t,e){return this.topK(t,e).values},t.prototype.topKIndices=function(t,e){return this.topK(t,e).indices},t.prototype.topK=function(t,e){for(var n=t.dataSync(),r=[],o=0;o<n.length;o++)r.push({value:n[o],index:o});r.sort(function(t,e){return e.value-t.value});var i=A(t.dtype,e),a=new Int32Array(e);for(o=0;o<e;o++)i[o]=r[o].value,a[o]=r[o].index;return{values:Yt(i,t.dtype),indices:Yt(a,"int32")}},t.prototype.min=function(t,e){_t("min",e,t.rank);for(var n=yt(t.shape,e),r=n[1],o=re(n[0],t.dtype),i=y(r),a=o.dataSync(),s=t.dataSync(),u=0;u<a.length;++u){for(var l=u*i,c=s[l],p=0;p<i;++p){var h=s[l+p];h<c&&(c=h)}a[u]=c}return o},t.prototype.minimum=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.min(t,e)})},t.prototype.mod=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){var n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})},t.prototype.max=function(t,e){_t("max",e,t.rank);for(var n=yt(t.shape,e),r=n[1],o=re(n[0],t.dtype),i=y(r),a=o.dataSync(),s=t.dataSync(),u=0;u<a.length;++u){for(var l=u*i,c=s[l],p=0;p<i;++p){var h=s[l+p];h>c&&(c=h)}a[u]=c}return o},t.prototype.maximum=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.max(t,e)})},t.prototype.all=function(t,e){_t("all",e,t.rank);for(var n=yt(t.shape,e),r=n[1],o=re(n[0],t.dtype),i=y(r),a=o.dataSync(),s=t.dataSync(),u=0;u<a.length;++u){for(var l=u*i,c=s[l],p=0;p<i;++p)c=c&&s[l+p];a[u]=c}return o},t.prototype.any=function(t,e){_t("any",e,t.rank);for(var n=yt(t.shape,e),r=n[1],o=re(n[0],t.dtype),i=y(r),a=o.dataSync(),s=t.dataSync(),u=0;u<a.length;++u){for(var l=u*i,c=s[l],p=0;p<i;++p)c=c||s[l+p];a[u]=c}return o},t.prototype.squaredDifference=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){var n=t-e;return n*n})},t.prototype.ceil=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.ceil(e[r]);return X.make(t.shape,{values:n})},t.prototype.floor=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.floor(e[r]);return X.make(t.shape,{values:n})},t.prototype.sign=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=e[r]<0?-1:e[r]>0?1:0;return X.make(t.shape,{values:n})},t.prototype.round=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=Math.floor(e[r]);n[r]=e[r]-o<.5?Math.floor(e[r]):e[r]-o>.5?Math.ceil(e[r]):o%2==0?o:o+1}return X.make(t.shape,{values:n})},t.prototype.exp=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.exp(e[r]);return X.make(t.shape,{values:n})},t.prototype.expm1=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.expm1(e[r]);return X.make(t.shape,{values:n})},t.prototype.log=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.log(e[r]);return X.make(t.shape,{values:n})},t.prototype.log1p=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.log1p(e[r]);return X.make(t.shape,{values:n})},t.prototype.sqrt=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.sqrt(e[r]);return X.make(t.shape,{values:n})},t.prototype.rsqrt=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=1/Math.sqrt(e[r]);return X.make(t.shape,{values:n})},t.prototype.square=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=e[r];n[r]=o*o}return X.make(t.shape,{values:n})},t.prototype.reciprocal=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=1/e[r];return X.make(t.shape,{values:n})},t.prototype.relu=function(t){for(var e=re(t.shape,t.dtype),n=e.dataSync(),r=t.dataSync(),o=0;o<r.length;++o)n[o]=Math.max(0,r[o]);return e},t.prototype.elu=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r){var o=n[r];e[r]=o>=0?o:Math.exp(o)-1}return X.make(t.shape,{values:e})},t.prototype.eluDer=function(t,e){for(var n=new Float32Array(e.size),r=e.dataSync(),o=t.dataSync(),i=0;i<r.length;++i){var a=r[i];n[i]=a>=1?o[i]:o[i]*(a+1)}return X.make(e.shape,{values:n})},t.prototype.selu=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r){var o=n[r];e[r]=o>=0?1.0507009873554805*o:1.7580993408473768*(Math.exp(o)-1)}return X.make(t.shape,{values:e})},t.prototype.clip=function(t,e,n){for(var r=new Float32Array(t.size),o=t.dataSync(),i=0;i<o.length;++i)r[i]=Math.min(n,Math.max(e,o[i]));return X.make(t.shape,{values:r})},t.prototype.abs=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.abs(n[r]);return X.make(t.shape,{values:e})},t.prototype.int=function(t){for(var e=new Int32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=n[r];return X.make(t.shape,{values:e},"int32")},t.prototype.sigmoid=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=1/(1+Math.exp(-n[r]));return X.make(t.shape,{values:e})},t.prototype.softplus=function(t){for(var e=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(t.size),r=t.dataSync(),o=0;o<r.length;++o){var i,a=r[o]>-e,s=r[o]<e,u=Math.exp(r[o]);i=s?u:a?r[o]:Math.log(1+u),n[o]=i}return X.make(t.shape,{values:n})},t.prototype.sin=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.sin(n[r]);return X.make(t.shape,{values:e})},t.prototype.cos=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.cos(n[r]);return X.make(t.shape,{values:e})},t.prototype.tan=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.tan(n[r]);return X.make(t.shape,{values:e})},t.prototype.asin=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.asin(n[r]);return X.make(t.shape,{values:e})},t.prototype.acos=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.acos(n[r]);return X.make(t.shape,{values:e})},t.prototype.atan=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.atan(n[r]);return X.make(t.shape,{values:e})},t.prototype.atan2=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.atan2(t,e)})},t.prototype.sinh=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.sinh(n[r]);return X.make(t.shape,{values:e})},t.prototype.cosh=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.cosh(n[r]);return X.make(t.shape,{values:e})},t.prototype.tanh=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=_(n[r]);return X.make(t.shape,{values:e})},t.prototype.asinh=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.asinh(n[r]);return X.make(t.shape,{values:e})},t.prototype.acosh=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.acosh(n[r]);return X.make(t.shape,{values:e})},t.prototype.atanh=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.atanh(n[r]);return X.make(t.shape,{values:e})},t.prototype.erf=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r){var o=n[r],i=1/(1+.3275911*o);e[r]=1-((((1.061405429*i-1.453152027)*i+1.421413741)*i-.284496736)*i+.254829592)*i*Math.exp(-o*o)}return X.make(t.shape,{values:e})},t.prototype.step=function(t,e){void 0===e&&(e=0);for(var n=new Float32Array(t.size),r=t.dataSync(),o=0;o<r.length;++o){var i=r[o];n[o]=isNaN(i)?NaN:i>0?1:e}return X.make(t.shape,{values:n})},t.prototype.conv2d=function(t,e,n){for(var r=n.filterHeight,o=n.filterWidth,i=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=se(n.outShape,t.dtype),c=0;c<n.batchSize;++c)for(var p=0;p<n.outChannels;++p)for(var h=0;h<n.outHeight;++h)for(var f=h*n.strideHeight-s,d=0;d<n.outWidth;++d){for(var m=d*n.strideWidth-u,g=0,v=0;v<r;v++){var y=f+v*i;if(!(y<0||y>=n.inHeight))for(var b=0;b<o;b++){var w=m+b*a;if(!(w<0||w>=n.inWidth))for(var _=0;_<n.inChannels;++_)g+=t.get(c,y,w,_)*e.get(v,b,_,p)}}l.set(g,c,h,d,p)}return l.toTensor()},t.prototype.conv2dDerInput=function(t,e,n){for(var r=se(n.inShape,"float32"),o=r.values,i=r.strides,a=i[0],s=i[1],u=i[2],l=t.dataSync(),c=t.strides,p=c[0],h=c[1],f=c[2],d=e.dataSync(),m=e.strides,g=m[0],v=m[1],y=m[2],b=n.batchSize,w=n.filterHeight,_=n.filterWidth,x=n.inChannels,O=n.inHeight,E=n.inWidth,S=n.outChannels,C=n.outHeight,I=n.outWidth,A=n.strideHeight,k=n.strideWidth,N=w-1-n.padInfo.top,P=_-1-n.padInfo.left,T=0;T<b;++T)for(var R=0;R<x;++R)for(var M=0;M<O;++M)for(var D=M-N,j=Math.max(0,Math.ceil(D/A)),L=Math.min(C,(w+D)/A),z=0;z<E;++z){for(var B=z-P,F=Math.max(0,Math.ceil(B/k)),V=Math.min(I,(_+B)/k),U=0,W=j;W<L;++W)for(var q=W*A-D,H=F;H<V;++H)for(var G=p*T+h*W+f*H,$=g*(w-1-q)+v*(_-1-(H*k-B))+y*R,K=0;K<S;++K)U+=l[G+K]*d[$+K];o[a*T+s*M+u*z+R]=U}return r.toTensor()},t.prototype.conv2dDerFilter=function(t,e,n){for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=se(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=0;c<i;++c)for(var p=Math.max(0,Math.ceil((l-c)/r)),h=Math.min(n.outHeight,(n.inHeight+l-c)/r),f=0;f<a;++f)for(var d=Math.max(0,Math.ceil((u-f)/o)),m=Math.min(n.outWidth,(n.inWidth+u-f)/o),g=0;g<n.inChannels;++g)for(var v=0;v<n.outChannels;++v){for(var y=0,b=0;b<n.batchSize;++b)for(var w=p;w<h;++w)for(var _=c+w*r-l,x=d;x<m;++x)y+=t.get(b,_,f+x*o-u,g)*e.get(b,w,x,v);s.set(y,c,f,g,v)}return s.toTensor()},t.prototype.depthwiseConv2D=function(t,e,n){for(var r=n.filterHeight,o=n.filterWidth,i=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=n.outChannels/n.inChannels,c=se(n.outShape,t.dtype),p=0;p<n.batchSize;++p)for(var h=0;h<n.inChannels;++h)for(var f=0;f<n.outHeight;++f)for(var d=f*n.strideHeight-s,m=0;m<n.outWidth;++m)for(var g=m*n.strideWidth-u,v=0;v<l;++v){for(var y=0,b=0;b<r;++b){var w=d+b*i;if(!(w<0||w>=n.inHeight))for(var _=0;_<o;++_){var x=g+_*a;x<0||x>=n.inWidth||(y+=t.get(p,w,x,h)*e.get(b,_,h,v))}}c.set(y,p,f,m,h*l+v)}return c.toTensor()},t.prototype.depthwiseConv2DDerInput=function(t,e,n){for(var r=se(n.inShape,"float32"),o=r.values,i=r.strides,a=i[0],s=i[1],u=i[2],l=t.dataSync(),c=t.strides,p=c[0],h=c[1],f=c[2],d=e.dataSync(),m=e.strides,g=m[0],v=m[1],y=m[2],b=n.batchSize,w=n.filterHeight,_=n.filterWidth,x=n.inChannels,O=n.inHeight,E=n.inWidth,S=n.outHeight,C=n.outWidth,I=n.strideHeight,A=n.strideWidth,k=w-1-n.padInfo.top,N=_-1-n.padInfo.left,P=n.outChannels/x,T=0;T<b;++T)for(var R=0;R<x;++R)for(var M=0;M<O;++M)for(var D=M-k,j=Math.max(0,Math.ceil(D/I)),L=Math.min(S,(w+D)/I),z=0;z<E;++z){for(var B=z-N,F=Math.max(0,Math.ceil(B/A)),V=Math.min(C,(_+B)/A),U=0,W=j;W<L;++W)for(var q=W*I-D,H=F;H<V;++H)for(var G=p*T+h*W+f*H,$=g*(w-1-q)+v*(_-1-(H*A-B))+y*R,K=0;K<P;++K)U+=l[G+(R*P+K)]*d[$+K];o[a*T+s*M+u*z+R]=U}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(t,e,n){for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=se(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,p=0;p<i;++p)for(var h=Math.max(0,Math.ceil((l-p)/r)),f=Math.min(n.outHeight,(n.inHeight+l-p)/r),d=0;d<a;++d)for(var m=Math.max(0,Math.ceil((u-d)/o)),g=Math.min(n.outWidth,(n.inWidth+u-d)/o),v=0;v<n.outChannels;++v){for(var y=Math.trunc(v/c),b=v%c,w=0,_=0;_<n.batchSize;++_)for(var x=h;x<f;++x)for(var O=p+x*r-l,E=m;E<g;++E)w+=t.get(_,O,d+E*o-u,y)*e.get(_,x,E,v);s.set(w,p,d,y,b)}return s.toTensor()},t.prototype.tile=function(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var o=se(n,t.dtype),i=t.buffer();for(r=0;r<o.values.length;++r){for(var a=o.indexToLoc(r),s=new Array(t.rank),u=0;u<s.length;u++)s[u]=a[u]%t.shape[u];var l=i.locToIndex(s);o.values[r]=i.values[l]}return o.toTensor()},t.prototype.pad=function(t,e,n){var r=e.map(function(e,n){return e[0]+t.shape[n]+e[1]}),o=e.map(function(t){return t[0]}),i=t.buffer(),a=se(r,t.dtype);0!==n&&a.values.fill(n);for(var s=0;s<t.size;s++){var u=i.indexToLoc(s),l=u.map(function(t,e){return t+o[e]});a.set.apply(a,[t.get.apply(t,u)].concat(l))}return a.toTensor()},t.prototype.transpose=function(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[e[r]];var o=t.dataSync(),i=se(n,t.dtype),a=t.buffer();for(r=0;r<t.size;++r){for(var s=a.indexToLoc(r),u=new Array(s.length),l=0;l<u.length;l++)u[l]=s[e[l]];var c=i.locToIndex(u);i.values[c]=o[r]}return i.toTensor()},t.prototype.gather=function(t,e,n){var r=t.shape.slice(),o=e.dataSync();r[n]=o.length;for(var i=se(r,t.dtype),a=t.buffer(),s=0;s<i.size;++s){var u=i.indexToLoc(s),l=u.slice();l[n]=o[u[n]];var c=a.locToIndex(l);i.values[s]=a.values[c]}return i.toTensor()},t.prototype.pool=function(t,e,n){for(var r=e.strideHeight,o=e.strideWidth,i=e.filterHeight,a=e.filterWidth,s=se(e.outShape,"float32"),u=e.padInfo.top,l=e.padInfo.left,c=0;c<e.batchSize;++c)for(var p=0;p<e.inChannels;++p)for(var h=0;h<e.outHeight;++h)for(var f=h*r-u,d=Math.max(0,f),m=Math.min(e.inHeight,i+f),g=0;g<e.outWidth;++g){for(var v=g*o-l,y=Math.max(0,v),b=Math.min(e.inWidth,a+v),w="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,_=0,x=0,O=d;O<m;++O){for(var E=y;E<b;++E){var S=t.get(c,O,E,p);"max"===n&&S>w?w=S:"avg"===n&&(_+=S,x++)}if(isNaN(w))break}s.set("avg"===n?_/x:w,c,h,g,p)}return s.toTensor()},t.prototype.maxPool=function(t,e){return this.pool(t,e,"max")},t.prototype.maxPoolPositions=function(t,e){for(var n=se(e.outShape,"int32"),r=e.strideHeight,o=e.strideWidth,i=e.filterHeight,a=e.filterWidth,s=e.padInfo.top,u=e.padInfo.left,l=0;l<e.batchSize;++l)for(var c=0;c<e.inChannels;++c)for(var p=0;p<e.outHeight;++p)for(var h=p*r-s,f=Math.max(0,h),d=Math.min(e.inHeight,i+h),m=0;m<e.outWidth;++m){for(var g=m*o-u,v=Math.max(0,g),y=Math.min(e.inWidth,a+g),b=Number.NEGATIVE_INFINITY,w=-1,_=f;_<d;++_)for(var x=_-h,O=v;O<y;++O){var E=O-g,S=t.get(l,_,O,c);S>b&&(b=S,w=x*a+E)}n.set(w,l,p,m,c)}return n.toTensor()},t.prototype.maxPoolBackprop=function(t,e,n,r){for(var o=this.maxPoolPositions(e,r),i=r.strideHeight,a=r.strideWidth,s=r.filterHeight,u=r.filterWidth,l=u-1-r.padInfo.left,c=s-1-r.padInfo.top,p=se(e.shape,"float32"),h=0;h<r.batchSize;++h)for(var f=0;f<r.inChannels;++f)for(var d=0;d<r.inHeight;++d)for(var m=0;m<r.inWidth;++m){for(var g=d-c,v=m-l,y=0,b=0;b<s;++b){var w=(g+b)/i;if(!(w<0||w>=r.outHeight||Math.floor(w)!==w))for(var _=0;_<u;++_){var x=(v+_)/a;if(!(x<0||x>=r.outWidth||Math.floor(x)!==x)){var O=s*u-1-o.get(h,w,x,f)===b*u+_?1:0;0!==O&&(y+=t.get(h,w,x,f)*O)}}}p.set(y,h,d,m,f)}return p.toTensor()},t.prototype.avgPoolBackprop=function(t,e,n){for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=a-1-n.padInfo.left,u=i-1-n.padInfo.top,l=se(e.shape,"float32"),c=1/(i*a),p=0;p<n.batchSize;++p)for(var h=0;h<n.inChannels;++h)for(var f=0;f<n.inHeight;++f)for(var d=0;d<n.inWidth;++d){for(var m=f-u,g=d-s,v=0,y=0;y<i;++y){var b=(m+y)/r;if(!(b<0||b>=n.outHeight||Math.floor(b)!==b))for(var w=0;w<a;++w){var _=(g+w)/o;_<0||_>=n.outWidth||Math.floor(_)!==_||(v+=t.get(p,b,_,h))}}l.set(v*c,p,f,d,h)}return l.toTensor()},t.prototype.cast=function(t,e){return pi(t,e,this)},t.prototype.reshape=function(t,e){return hi(t,e)},t.prototype.avgPool=function(t,e){return this.pool(t,e,"avg").toFloat()},t.prototype.resizeBilinear=function(t,e,n,r){for(var o=t.shape,i=o[0],a=o[1],s=o[2],u=o[3],l=se([i,e,n,u],t.dtype),c=[r&&e>1?a-1:a,r&&n>1?s-1:s],p=[r&&e>1?e-1:e,r&&n>1?n-1:n],h=0;h<i;h++)for(var f=0;f<e;f++)for(var d=0;d<n;d++)for(var m=0;m<u;m++){var g=c[0]*f/p[0],v=c[1]*d/p[1],y=Math.floor(g),b=Math.min(a-1,Math.ceil(g)),w=Math.floor(v),_=Math.min(s-1,Math.ceil(v)),x=t.get(h,y,w,m),O=t.get(h,b,w,m),E=v-w,S=x+(t.get(h,y,_,m)-x)*E,C=S+(O+(t.get(h,b,_,m)-O)*E-S)*(g-y);l.set(C,h,f,d,m)}return l.toTensor()},t.prototype.resizeBilinearBackprop=function(t,e,n){for(var r=e.shape,o=r[0],i=r[1],a=r[2],s=r[3],u=t.shape,l=u[1],c=u[2],p=se([o,i,a,s],e.dtype),h=[n&&l>1?i-1:i,n&&c>1?a-1:a],f=[n&&l>1?l-1:l,n&&c>1?c-1:c],d=h[0]/f[0],m=h[1]/f[1],g=0;g<o;g++)for(var v=0;v<l;v++)for(var y=v*d,b=Math.floor(y),w=Math.min(Math.ceil(y),i-1),_=y-b,x=1-_,O=0;O<c;O++)for(var E=O*m,S=Math.floor(E),C=Math.min(Math.ceil(E),a-1),I=E-S,A=1-I,k=0;k<s;k++){var N=t.get(g,v,O,k),P=p.get(g,b,S,k);p.set(P+=N*x*A,g,b,S,k);var T=p.get(g,b,C,k);p.set(T+=N*x*I,g,b,C,k);var R=p.get(g,w,S,k);p.set(R+=N*_*A,g,w,S,k);var M=p.get(g,w,C,k);p.set(M+=N*_*I,g,w,C,k)}return p.toTensor()},t.prototype.resizeNearestNeighbor=function(t,e,n,r){for(var o=t.shape,i=o[0],a=o[1],s=o[2],u=o[3],l=se([i,e,n,u],t.dtype),c=[r&&e>1?a-1:a,r&&n>1?s-1:s],p=[r&&e>1?e-1:e,r&&n>1?n-1:n],h=0;h<i;h++)for(var f=0;f<e;f++)for(var d=0;d<n;d++)for(var m=0;m<u;m++){var g=c[0]*f/p[0],v=c[1]*d/p[1],y=Math.min(a-1,r?Math.round(g):Math.floor(g)),b=Math.min(s-1,r?Math.round(v):Math.floor(v)),w=t.get(h,y,b,m);l.set(w,h,f,d,m)}return l.toTensor()},t.prototype.resizeNearestNeighborBackprop=function(t,e,n){for(var r=e.shape,o=r[0],i=r[1],a=r[2],s=r[3],u=t.shape,l=u[1],c=u[2],p=se([o,i,a,s],e.dtype),h=[n&&l>1?i-1:i,n&&c>1?a-1:a],f=[n&&l>1?l-1:l,n&&c>1?c-1:c],d=1/(h[0]/f[0]),m=1/(h[1]/f[1]),g=2*Math.ceil(d)+2,v=2*Math.ceil(m)+2,y=0;y<o;y++)for(var b=0;b<i;b++)for(var w=0;w<a;w++)for(var _=Math.floor(b*d),x=Math.floor(_-g/2),O=Math.floor(w*m),E=Math.floor(O-v/2),S=0;S<s;S++){for(var C=0,I=0;I<g;I++){var A=I+x;if(!(A<0||A>=l))for(var k=0;k<v;k++){var N=k+E;if(!(N<0||N>=c)){var P=h[0]*(A/f[0]),T=h[1]*(N/f[1]),R=Math.min(i-1,n?Math.round(P):Math.floor(P)),M=Math.min(a-1,n?Math.round(T):Math.floor(T));b===R&&w===M&&(C+=t.get(y,A,N,S))}}}p.set(C,y,b,w,S)}return p.toTensor()},t.prototype.batchNormalization=function(t,e,n,r,o,i){for(var a=t.dataSync(),s=e.dataSync(),u=n.dataSync(),l=o?o.dataSync():new Float32Array([1]),c=i?i.dataSync():new Float32Array([0]),p=new Float32Array(a.length),h=0;h<a.length;h++)p[h]=c[h%c.length]+(a[h]-s[h%s.length])*l[h%l.length]/Math.sqrt(u[h%u.length]+r);return te(p,t.shape)},t.prototype.localResponseNormalization4D=function(t,e,n,r,o){var i=se(t.shape,"float32"),a=e,s=i.shape[3]-1;function u(e,n,r,o){for(var i=0,u=Math.max(0,o-a);u<=Math.min(o+a,s);u++){var l=t.get(e,n,r,u);i+=l*l}return i}for(var l=0;l<i.shape[0];l++)for(var c=0;c<=i.shape[1];c++)for(var p=0;p<i.shape[2];p++)for(var h=0;h<i.shape[3];h++){var f=u(l,c,p,h),d=t.get(l,c,p,h)*Math.pow(n+r*f,-o);i.set(d,l,c,p,h)}return i.toTensor()},t.prototype.multinomial=function(t,e,n,r){for(var o=e?t:ko(t),i=o.shape[0],a=o.shape[1],s=re([i,n],"int32"),u=s.dataSync(),l=o.dataSync(),c=0;c<i;++c){var p=c*a,h=new Float32Array(a-1);h[0]=l[p];for(var f=1;f<h.length;++f)h[f]=h[f-1]+l[p+f];for(var d=Ut(r.toString()),m=c*n,g=0;g<n;++g){var v=d();u[m+g]=h.length;for(var y=0;y<h.length;y++)if(v<h[y]){u[m+g]=y;break}}}return s},t.prototype.oneHot=function(t,e,n,r){var o=new Float32Array(t.size*e);o.fill(r);for(var i=0;i<t.size;++i)t.get(i)>=0&&t.get(i)<e&&(o[i*e+t.get(i)]=n);return Zt(o,[t.size,e],"int32")},t.prototype.broadcastedBinaryOp=function(t,e,n,r){for(var o=De(t.shape,e.shape),i=se(o,n),a=t.dataSync(),s=e.dataSync(),u=Re(t.shape,o),l=Re(e.shape,o),c=t.buffer(),p=e.buffer(),h=function(n){var o=i.indexToLoc(n),h=o.slice(-t.rank);u.forEach(function(t){return h[t]=0});var f=c.locToIndex(h),d=o.slice(-e.rank);l.forEach(function(t){return d[t]=0});var m=p.locToIndex(d);i.values[n]=r(a[f],s[m])},f=0;f<i.values.length;++f)h(f);return i.toTensor()},t.prototype.dispose=function(){},t}();mt.registerBackend("cpu",function(){return new Fa},1,Q);var Va="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setImmediate,Ua=function(){function t(){}return t.nextFrame=function(){return new Promise(function(t){return Va(function(){return t()})})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"nextFrame",null),t}(),Wa={float32:4,int32:4,uint16:2,uint8:1,bool:1},qa="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Ha(t){return qa?Buffer.byteLength(t):new Blob([t]).size}function Ga(t){var e=0;t.forEach(function(t){e+=t.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(t){n.set(new Uint8Array(t),r),r+=t.byteLength}),n.buffer}function $a(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function Ka(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:Ha(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:Ha(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}var Qa=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e){return t.getHandlers(e,"load")},t.getHandlers=function(t,e){var n=[];return("load"===e?this.getInstance().loadRouters:this.getInstance().saveRouters).forEach(function(e){var r=e(t);null!==r&&n.push(r)}),n},t}(),Xa="://",Ya=function(){function t(){this.managers={}}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerManager=function(e,n){f(null!=e,"scheme must not be undefined or null."),e.endsWith(Xa)&&(e=e.slice(0,e.indexOf(Xa))),f(e.length>0,"scheme must not be an empty string.");var r=t.getInstance();f(null==r.managers[e],"A model store manager is already registered for scheme '"+e+"'."),r.managers[e]=n},t.getManager=function(t){var e=this.getInstance().managers[t];if(null==e)throw new Error("Cannot find model manager for scheme '"+t+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function Za(t){if(-1===t.indexOf(Xa))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Ya.getSchemes().join(","));return{scheme:t.split(Xa)[0],path:t.split(Xa)[1]}}function Ja(t,e,n){return void 0===n&&(n=!1),s(this,void 0,void 0,function(){var r,o,i,a,s,l,c,p,h;return u(this,function(u){switch(u.label){case 0:return f(t!==e,"Old path and new path are the same: '"+t+"'"),f((r=Qa.getLoadHandlers(t)).length>0,"Copying failed because no load handler is found for source URL "+t+"."),f(r.length<2,"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."),o=r[0],f((i=Qa.getSaveHandlers(e)).length>0,"Copying failed because no save handler is found for destination URL "+e+"."),f(i.length<2,"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."),a=i[0],s=Za(t).scheme,l=Za(t).path,c=s===Za(t).scheme,[4,o.load()];case 1:return p=u.sent(),n&&c?[4,Ya.getManager(s).removeModel(l)]:[3,3];case 2:u.sent(),u.label=3;case 3:return[4,a.save(p)];case 4:return h=u.sent(),!n||c?[3,6]:[4,Ya.getManager(s).removeModel(l)];case 5:u.sent(),u.label=6;case 6:return[2,h.modelArtifactsInfo]}})})}var ts=function(){function t(){}return t.listModels=function(){return s(this,void 0,void 0,function(){var t,e,n,r,o,i,a;return u(this,function(s){switch(s.label){case 0:t=Ya.getSchemes(),e={},n=0,r=t,s.label=1;case 1:return n<r.length?[4,Ya.getManager(o=r[n]).listModels()]:[3,4];case 2:for(a in i=s.sent())e[o+Xa+a]=i[a];s.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},t.removeModel=function(t){return s(this,void 0,void 0,function(){var e;return u(this,function(n){switch(n.label){case 0:return e=Za(t),[4,Ya.getManager(e.scheme).removeModel(e.path)];case 1:return[2,n.sent()]}})})},t.copyModel=function(t,e){return s(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return[4,Ja(t,e,!1)];case 1:return[2,n.sent()]}})})},t.moveModel=function(t,e){return s(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return[4,Ja(t,e,!0)];case 1:return[2,n.sent()]}})})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"listModels",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"removeModel",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"copyModel",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"moveModel",null),t}(),es="models_store",ns="model_info_store";function rs(){if(!mt.get("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function os(t){var e=t.result;e.createObjectStore(es,{keyPath:"modelPath"}),e.createObjectStore(ns,{keyPath:"modelPath"})}var is=function(){function t(t){if(this.indexedDB=rs(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return t.prototype.save=function(t){return s(this,void 0,void 0,function(){return u(this,function(e){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},t.prototype.load=function(){return s(this,void 0,void 0,function(){return u(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(t,e){var n=this;return new Promise(function(t,r){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return os(o)},o.onsuccess=function(){var i=o.result;if(null==e){var a=i.transaction(es,"readonly"),s=a.objectStore(es).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));t(s.result.modelArtifacts)},s.onerror=function(t){return i.close(),r(s.error)},a.oncomplete=function(){return i.close()}}else{var u,l=Ka(e),c=i.transaction(ns,"readwrite"),p=c.objectStore(ns),h=p.put({modelPath:n.modelPath,modelArtifactsInfo:l});h.onsuccess=function(){var o=(u=i.transaction(es,"readwrite")).objectStore(es).put({modelPath:n.modelPath,modelArtifacts:e,modelArtifactsInfo:l});o.onsuccess=function(){return t({modelArtifactsInfo:l})},o.onerror=function(t){var e=(p=c.objectStore(ns)).delete(n.modelPath);e.onsuccess=function(){return i.close(),r(o.error)},e.onerror=function(t){return i.close(),r(o.error)}}},h.onerror=function(t){return i.close(),r(h.error)},c.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},o.onerror=function(t){return r(o.error)}})},t.URL_SCHEME="indexeddb://",t}(),as=function(t){return mt.get("IS_BROWSER")&&t.startsWith(is.URL_SCHEME)?function(t){return new is(t)}(t.slice(is.URL_SCHEME.length)):null};Qa.registerSaveRouter(as),Qa.registerLoadRouter(as);var ss=function(){function t(){this.indexedDB=rs()}return t.prototype.listModels=function(){return s(this,void 0,void 0,function(){var t=this;return u(this,function(e){return[2,new Promise(function(e,n){var r=t.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return os(r)},r.onsuccess=function(){var t=r.result,o=t.transaction(ns,"readonly"),i=o.objectStore(ns).getAll();i.onsuccess=function(){for(var t={},n=0,r=i.result;n<r.length;n++){var o=r[n];t[o.modelPath]=o.modelArtifactsInfo}e(t)},i.onerror=function(e){return t.close(),n(i.error)},o.oncomplete=function(){return t.close()}},r.onerror=function(t){return n(r.error)}})]})})},t.prototype.removeModel=function(t){return s(this,void 0,void 0,function(){var e=this;return u(this,function(n){return t=function(t){return t.startsWith(is.URL_SCHEME)?t.slice(is.URL_SCHEME.length):t}(t),[2,new Promise(function(n,r){var o=e.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return os(o)},o.onsuccess=function(){var e,i=o.result,a=i.transaction(ns,"readwrite"),s=a.objectStore(ns),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var o=s.delete(t),a=function(){var o=(e=i.transaction(es,"readwrite")).objectStore(es).delete(t);o.onsuccess=function(){return n(u.result.modelArtifactsInfo)},o.onerror=function(t){return r(u.error)}};o.onsuccess=a,o.onerror=function(t){return a(),i.close(),r(u.error)}},u.onerror=function(t){return i.close(),r(u.error)},a.oncomplete=function(){null==e?i.close():e.oncomplete=function(){return i.close()}}},o.onerror=function(t){return r(o.error)}})]})})},t}();if(mt.get("IS_BROWSER"))try{Ya.registerManager(is.URL_SCHEME,new ss)}catch(ot){}var us="/",ls="tensorflowjs_models",cs="info",ps="model_topology",hs="weight_specs",fs="weight_data";function ds(t){return{info:[ls,t,cs].join(us),topology:[ls,t,ps].join(us),weightSpecs:[ls,t,hs].join(us),weightData:[ls,t,fs].join(us)}}function ms(t){var e=t.split(us);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(us)}var gs=function(){function t(t){if(!mt.get("IS_BROWSER")||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=ds(this.modelPath)}return t.prototype.save=function(t){return s(this,void 0,void 0,function(){var e,n,r,o;return u(this,function(i){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(t.modelTopology),n=JSON.stringify(t.weightSpecs),r=Ka(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(t){return qa?Buffer.from(t).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(t)))}(t.weightData)),[2,{modelArtifactsInfo:r}]}catch(t){for(o in this.keys)this.LS.removeItem(this.keys[o]);throw new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return s(this,void 0,void 0,function(){var t,e,n,r,o;return u(this,function(i){if(null==(t=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=r,null==(o=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(t){if(qa){var e=Buffer.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}for(var n=atob(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r.set([n.charCodeAt(o)],o);return r.buffer}(o),[2,e]})})},t.URL_SCHEME="localstorage://",t}(),vs=function(t){return mt.get("IS_BROWSER")&&t.startsWith(gs.URL_SCHEME)?function(t){return new gs(t)}(t.slice(gs.URL_SCHEME.length)):null};Qa.registerSaveRouter(vs),Qa.registerLoadRouter(vs);var ys=function(){function t(){f(mt.get("IS_BROWSER"),"Current environment is not a web browser"),f(void 0!==window.localStorage,"Current browser does not appear to support localStorage"),this.LS=window.localStorage}return t.prototype.listModels=function(){return s(this,void 0,void 0,function(){var t,e,n,r,o,i;return u(this,function(a){for(t={},e=ls+us,n=us+cs,r=0;r<this.LS.length;++r)(o=this.LS.key(r)).startsWith(e)&&o.endsWith(n)&&(i=ms(o),t[i]=JSON.parse(this.LS.getItem(o)));return[2,t]})})},t.prototype.removeModel=function(t){return s(this,void 0,void 0,function(){var e,n;return u(this,function(r){if(t=function(t){return t.startsWith(gs.URL_SCHEME)?t.slice(gs.URL_SCHEME.length):t}(t),e=ds(t),null==this.LS.getItem(e.info))throw new Error("Cannot find model at path '"+t+"'");return n=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,n]})})},t}();if(mt.get("IS_BROWSER"))try{Ya.registerManager(gs.URL_SCHEME,new ys)}catch(ot){}var bs="model",ws=".json",_s=".weights.bin",xs=function(){function t(e){if(!mt.get("IS_BROWSER"))throw new Error("triggerDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),null!=e&&0!==e.length||(e=bs),this.modelTopologyFileName=e+ws,this.weightDataFileName=e+_s}return t.prototype.save=function(t){return s(this,void 0,void 0,function(){var e,n,r,o;return u(this,function(i){if(e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),t.modelTopology instanceof ArrayBuffer)throw new Error("DownloadTrigger.save() does not support saving model topology in binary formats yet.");return n=window.URL.createObjectURL(new Blob([JSON.stringify({modelTopology:t.modelTopology,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}]})],{type:"application/json"})),(r=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,r.href=n,r.click(),null!=t.weightData&&((o=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,o.href=e,o.click()),[2,{modelArtifactsInfo:Ka(t)}]})})},t.URL_SCHEME="downloads://",t}(),Os=function(){function t(t){if(null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return t.prototype.load=function(){return s(this,void 0,void 0,function(){var t,e,n=this;return u(this,function(r){return t=this.files[0],e=this.files.slice(1),[2,new Promise(function(r,o){var i=new FileReader;i.onload=function(i){var a=JSON.parse(i.target.result),s=a.modelTopology;if(null!=s){0===e.length&&r({modelTopology:s});var u=a.weightsManifest;if(null!=u){var l;try{l=n.checkManifestAndWeightFiles(u,e)}catch(t){return void o(t)}var c=[],p=[],h=[];u.forEach(function(t){t.paths.forEach(function(t){p.push(t),h.push(null)}),c.push.apply(c,t.weights)}),u.forEach(function(t){t.paths.forEach(function(t){var e=new FileReader;e.onload=function(e){var n=e.target.result,o=p.indexOf(t);h[o]=n,-1===h.indexOf(null)&&r({modelTopology:s,weightSpecs:c,weightData:Ga(h)})},e.onerror=function(e){o("Failed to weights data from file of path '"+t+"'.")},e.readAsArrayBuffer(l[t])})})}else o(new Error("weightManifest field is missing from file "+t.name))}else o(new Error("modelTopology field is missing from file "+t.name))},i.onerror=function(e){o("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},i.readAsText(t)})]})})},t.prototype.checkManifestAndWeightFiles=function(t,e){for(var n=[],r=e.map(function(t){return $a(t.name)}),o={},i=0,a=t;i<a.length;i++)a[i].paths.forEach(function(t){var i=$a(t);if(-1!==n.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: '"+i+"'");if(n.push(i),-1===r.indexOf(i))throw new Error("Weight file with basename '"+i+"' is not provided.");o[t]=e[r.indexOf(i)]});if(n.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+e.length+").");return o},t}();function Es(t,e){return s(this,void 0,void 0,function(){var n,r;return u(this,function(o){switch(o.label){case 0:return n=t.map(function(t){return fetch(t,e)}),[4,Promise.all(n)];case 1:return r=o.sent(),[4,Promise.all(r.map(function(t){return t.arrayBuffer()}))];case 2:return[2,o.sent()]}})})}Qa.registerSaveRouter(function(t){return mt.get("IS_BROWSER")&&t.startsWith(xs.URL_SCHEME)?function(t){return void 0===t&&(t="model"),new xs(t)}(t.slice(xs.URL_SCHEME.length)):null});var Ss=function(){function t(t,e){if(this.DEFAULT_METHOD="POST",!mt.get("IS_BROWSER"))throw new Error("browserHTTPRequest is not supported outside the web browser.");if(f(null!=t&&t.length>0,"URL path for browserHTTPRequest must not be null, undefined or empty."),this.path=t,null!=e&&null!=e.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e||{}}return t.prototype.save=function(t){return s(this,void 0,void 0,function(){var e,n;return u(this,function(r){switch(r.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,e.body.append("model.json",new Blob([JSON.stringify({modelTopology:t.modelTopology,weightsManifest:[{paths:["./model.weights.bin"],weights:t.weightSpecs}]})],{type:"application/json"}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,fetch(this.path,e)];case 1:if(200===(n=r.sent()).status)return[2,{modelArtifactsInfo:Ka(t),responses:[n]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+n.status+".")}})})},t.prototype.load=function(){return s(this,void 0,void 0,function(){var t,e,n,r,o,i,a,s,l,c,p;return u(this,function(u){switch(u.label){case 0:return[4,fetch(this.path,this.requestInit)];case 1:return[4,u.sent().json()];case 2:if(t=u.sent(),n=t.weightsManifest,null==(e=t.modelTopology)&&null==n)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");if(null==n)return[3,4];for(r=[],a=0,s=i=t.weightsManifest;a<s.length;a++)r.push.apply(r,s[a].weights);return(l=this.path.substring(0,this.path.lastIndexOf("/"))).endsWith("/")||(l+="/"),c=[],i.forEach(function(t){t.paths.forEach(function(t){c.push(l+t)})}),p=Ga,[4,Es(c,this.requestInit)];case 3:o=p.apply(void 0,[u.sent()]),u.label=4;case 4:return[2,{modelTopology:e,weightSpecs:r,weightData:o}]}})})},t.URL_SCHEMES=["http://","https://"],t}(),Cs=function(t){if(mt.get("IS_BROWSER")){for(var e=0,n=Ss.URL_SCHEMES;e<n.length;e++)if(t.startsWith(n[e]))return Is(t);return null}return null};function Is(t,e){return new Ss(t,e)}Qa.registerSaveRouter(Cs),Qa.registerLoadRouter(Cs);var As=function(){function t(t,e,n){this.modelTopology=t,this.weightSpecs=e,this.weightData=n}return t.prototype.load=function(){return s(this,void 0,void 0,function(){var t;return u(this,function(e){return t={},null!=this.modelTopology&&(t=i({modelTopology:this.modelTopology},t)),null!=this.weightSpecs&&this.weightSpecs.length>0&&(t=i({weightSpecs:this.weightSpecs},t)),null!=this.weightData&&this.weightData.byteLength>0&&(t=i({weightData:this.weightData},t)),[2,t]})})},t}(),ks=function(){function t(t){this.saveHandler=t}return t.prototype.save=function(t){return s(this,void 0,void 0,function(){return u(this,function(e){return[2,this.saveHandler(t)]})})},t}(),Ns=Object.freeze({browserFiles:function(t){return new Os(t)},browserHTTPRequest:Is,concatenateArrayBuffers:Ga,copyModel:ts.copyModel,decodeWeights:function(t,e){for(var n={},r=0,o=0,i=e;o<i.length;o++){var a=i[o],s=a.name,u=a.dtype,l=a.shape;if(null!=a.quantization)throw new Error("decodeWeights does not support quantization yet, but encountered weight '"+s+" with quantization.'");var c=y(l),p=void 0;if("float32"===u)p=Xt(new Float32Array(t,r,c),l,"float32");else if("int32"===u)p=Xt(new Int32Array(t,r,c),l,"int32");else{if("bool"!==u)throw new Error("Unsupported dtype in weight '"+s+"': "+u);p=Xt(new Uint8Array(t,r,c),l,"bool")}n[s]=p,r+=c*Wa[u]}return n},encodeWeights:function(t){return s(this,void 0,void 0,function(){var e,n,r,o;return u(this,function(i){switch(i.label){case 0:for(r in e=[],n=[],t){if("float32"!==(o=t[r]).dtype&&"int32"!==o.dtype&&"bool"!==o.dtype)throw new Error("Unsupported dtype in weight '"+r+"': "+o.dtype);e.push({name:r,shape:o.shape,dtype:o.dtype}),n.push(o.data())}return[4,Promise.all(n)];case 1:return[2,{data:function(t){if(null===t)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0;t.forEach(function(t){if(t instanceof Float32Array||t instanceof Int32Array)e+=t.buffer.byteLength;else{if(!(t instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+t.constructor.name);e+=t.buffer.byteLength}});var n=new Uint8Array(e),r=0;return t.forEach(function(t){n.set(new Uint8Array(t.buffer),r),r+=t.buffer.byteLength}),n.buffer}(i.sent()),specs:e}]}})})},fromMemory:function(t,e,n){return new As(t,e,n)},getLoadHandlers:Qa.getLoadHandlers,getModelArtifactsInfoForJSON:Ka,getSaveHandlers:Qa.getSaveHandlers,listModels:ts.listModels,loadWeights:function(t,e,n,r){return void 0===e&&(e=""),s(this,void 0,void 0,function(){var o,i,a,s,l,c,p,h,f,d;return u(this,function(u){switch(u.label){case 0:if(o=t.map(function(){return!1}),i={},a=null!=n?n.map(function(){return!1}):[],s=[],t.forEach(function(t,e){var r=0;t.weights.forEach(function(t){var u=Wa["quantization"in t?t.quantization.dtype:t.dtype]*y(t.shape),l=function(){o[e]=!0,null==i[e]&&(i[e]=[]),i[e].push({manifestEntry:t,groupOffset:r,sizeBytes:u})};null!=n?n.forEach(function(e,n){e===t.name&&(l(),a[n]=!0)}):l(),s.push(t.name),r+=u})}),!a.every(function(t){return t}))throw l=n.filter(function(t,e){return!a[e]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".");return c=o.reduce(function(t,e,n){return e&&t.push(n),t},[]),p=[],c.forEach(function(n){t[n].paths.forEach(function(t){var n=e+(e.endsWith("/")?"":"/")+t;p.push(n)})}),[4,Es(p,r)];case 1:return h=u.sent(),f={},d=0,c.forEach(function(e){for(var n=t[e].paths.length,r=0,o=0;o<n;o++)r+=h[d+o].byteLength;for(var a=new ArrayBuffer(r),s=new Uint8Array(a),u=0,l=0;l<n;l++){var c=new Uint8Array(h[d+l]);s.set(c,u),u+=c.byteLength}i[e].forEach(function(t){var e,n=a.slice(t.groupOffset,t.groupOffset+t.sizeBytes),r=t.manifestEntry.dtype;if("quantization"in t.manifestEntry){var o=t.manifestEntry.quantization;if("uint8"!==o.dtype&&"uint16"!==o.dtype)throw new Error("Weight "+t.manifestEntry.name+" has unknown quantization dtype "+o.dtype+".");var i="uint8"===o.dtype?new Uint8Array(n):new Uint16Array(n);if("float32"===r)e=Float32Array.from(i,function(t){return t*o.scale+o.min});else{if("int32"!==r)throw new Error("Weight "+t.manifestEntry.name+" has a dtype not supported by quantization: "+r);e=Int32Array.from(i,function(t){return Math.round(t*o.scale+o.min)})}}else if("float32"===r)e=new Float32Array(n);else{if("int32"!==r)throw new Error("Weight "+t.manifestEntry.name+" has unknown dtype "+r+".");e=new Int32Array(n)}var s=t.manifestEntry.name;if(null!=f[s])throw new Error("Duplicate weight with name "+s+". Please make sure weights names are unique in the manifest JSON.");f[s]=Xt(e,t.manifestEntry.shape,t.manifestEntry.dtype)}),d+=n}),[2,f]}})})},moveModel:ts.moveModel,registerLoadRouter:Qa.registerLoadRouter,registerSaveRouter:Qa.registerSaveRouter,removeModel:ts.removeModel,withSaveHandler:function(t){return new ks(t)}}),Ps=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(t,e){return new t(e)},t}(),Ts=function(){function t(){this.classNameMap={}}return t.getMap=function(){return null==t.instance&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}(),Rs=Object.freeze({Serializable:Ps,SerializationMap:Ts});function Ms(t,e,n){if(null==n&&(n=mt.get("TEST_EPSILON")),t instanceof X||e instanceof X){if(t instanceof X&&e instanceof X){if(t.dtype!==e.dtype)throw new Error("Arrays are of different type actual: "+t.dtype+" vs expected: "+e.dtype+".");if(!b(t.shape,e.shape))throw new Error("Arrays are of different shape actual: "+t.shape+" vs expected: "+e.shape+".")}}else{var r=t.constructor.name,o=e.constructor.name;if(r!==o)throw new Error("Arrays are of different type actual: "+r+" vs expected: "+o)}var i,a;if(i=t instanceof X?t.dataSync():t,a=e instanceof X?e.dataSync():e,i.length!==a.length)throw new Error("Arrays have different lengths actual: "+i.length+" vs expected: "+a.length+".\nActual:   "+i+".\nExpected: "+a+".");for(var s=0;s<a.length;++s){var u=i[s],l=a[s];if(!Ds(u,Number(l),n))throw new Error("Arrays differ: actual["+s+"] = "+u+", expected["+s+"] = "+l+".\nActual:   "+i+".\nExpected: "+a+".")}}function Ds(t,e,n){return!(!isNaN(t)||!isNaN(e))||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}var js=Object.freeze({WEBGL_ENVS:{HAS_WEBGL:!0},NODE_ENVS:{IS_NODE:!0},CHROME_ENVS:{IS_CHROME:!0},BROWSER_ENVS:{IS_BROWSER:!0},CPU_ENVS:{HAS_WEBGL:!1},ALL_ENVS:{},expectArraysClose:Ms,expectPromiseToFail:function(t,e){t().then(function(){return e.fail()},function(){return e()})},expectArraysEqual:function(t,e){return Ms(t,e,0)},expectNumbersClose:function(t,e,n){if(null==n&&(n=mt.get("TEST_EPSILON")),!Ds(t,e,n))throw new Error("Numbers differ: actual === "+t+", expected === "+e)},expectValuesInRange:function(t,e,n){var r;r=t instanceof X?t.dataSync():t;for(var o=0;o<r.length;o++)if(r[o]<e||r[o]>n)throw new Error("Value out of range:"+r[o]+" low: "+e+", high: "+n)},expectArrayBuffersEqual:function(t,e){expect(new Float32Array(t)).toEqual(new Float32Array(e))}}),Ls="0.12.4",zs=Object.freeze({gpgpu_util:Aa,webgl_util:ua,MathBackendWebGL:Ba,GPGPUContext:ka}),Bs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.minimize=function(t,e,n){void 0===e&&(e=!1);var r=this.computeGradients(t,n),o=r.value,i=r.grads;return this.applyGradients(i),Object.keys(i).forEach(function(t){return i[t].dispose()}),e?o:(o.dispose(),null)},e.prototype.computeGradients=function(t,e){return yr(t,e)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],e.prototype,"minimize",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],e)}(Ps),Fs=1e-8,Vs=1e-4;function Us(){return mt.get("WEBGL_RENDER_FLOAT32_ENABLED")?Fs:Vs}var Ws=function(t){function e(e,n,r){void 0===r&&(r=null);var o=t.call(this)||this;return o.learningRate=e,o.rho=n,o.epsilon=r,o.accumulatedGrads={},o.accumulatedUpdates={},o.c=pr(Qt(-e)),o.rhoScalar=pr(Qt(n)),o.oneMinusRho=pr(Qt(1-n)),null===r&&(r=Us()),o.epsilonScalar=pr(Qt(r)),o}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=function(n){var o=mt.engine.registeredVariables[n];null==r.accumulatedGrads[n]&&cr(function(){e.accumulatedGrads[n]=ie(o).variable(!1)}),null==r.accumulatedUpdates[n]&&cr(function(){e.accumulatedUpdates[n]=ie(o).variable(!1)});var i=t[n],a=r.accumulatedGrads[n],s=r.accumulatedUpdates[n];cr(function(){var t=e.rhoScalar.mul(a).add(e.oneMinusRho.mul(i.square())),r=s.add(e.epsilonScalar).sqrt().div(a.add(e.epsilonScalar).sqrt()).mul(i),u=e.rhoScalar.mul(s).add(e.oneMinusRho.mul(r.square()));e.accumulatedGrads[n].assign(t),e.accumulatedUpdates[n].assign(u);var l=e.c.mul(r).add(o);o.assign(l)})},r=this;for(var o in t)n(o)},e.prototype.dispose=function(){var t=this;this.c.dispose(),this.epsilonScalar.dispose(),this.rhoScalar.dispose(),this.oneMinusRho.dispose(),null!=this.accumulatedUpdates&&(Object.keys(this.accumulatedUpdates).forEach(function(e){return t.accumulatedUpdates[e].dispose()}),Object.keys(this.accumulatedGrads).forEach(function(e){return t.accumulatedGrads[e].dispose()}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.rho,e.epsilon)},e.className="AdadeltaOptimizer",e}(Bs);Ts.register(Ws);var qs=function(t){function e(e,n){void 0===n&&(n=.1);var r=t.call(this)||this;r.learningRate=e,r.initialAccumulatorValue=n,r.accumulatedGrads={},r.c=pr(Qt(-e));var o=Us();return r.epsilon=pr(Qt(o)),r}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=function(n){var o=mt.engine.registeredVariables[n];null==r.accumulatedGrads[n]&&cr(function(){e.accumulatedGrads[n]=Ht(o.shape,e.initialAccumulatorValue).variable(!1)});var i=t[n],a=r.accumulatedGrads[n];cr(function(){var t=a.add(i.square());e.accumulatedGrads[n].assign(t);var r=e.c.mul(i.div(t.add(e.epsilon).sqrt())).add(o);o.assign(r)})},r=this;for(var o in t)n(o)},e.prototype.dispose=function(){var t=this;this.epsilon.dispose(),this.c.dispose(),null!=this.accumulatedGrads&&Object.keys(this.accumulatedGrads).forEach(function(e){return t.accumulatedGrads[e].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,e){return new t(e.learningRate,e.initialAccumulatorValue)},e.className="AdagradOptimizer",e}(Bs);Ts.register(qs);var Hs=function(t){function e(e,n,r,o){void 0===o&&(o=null);var i=t.call(this)||this;return i.learningRate=e,i.beta1=n,i.beta2=r,i.epsilon=o,i.accumulatedFirstMoment={},i.accumulatedSecondMoment={},i.c=pr(Qt(-e)),i.beta1Scalar=pr(Qt(n)),i.beta2Scalar=pr(Qt(r)),cr(function(){i.accBeta1=Qt(n).variable(),i.accBeta2=Qt(r).variable()}),i.oneMinusBeta1=pr(Qt(1-n)),i.oneMinusBeta2=pr(Qt(1-r)),i.one=pr(Qt(1)),null===o&&(o=Us()),i.epsScalar=pr(Qt(o)),i}return o(e,t),e.prototype.applyGradients=function(t){var e=this;cr(function(){var n=e.one.sub(e.accBeta1),r=e.one.sub(e.accBeta2);for(var o in t){var i=mt.engine.registeredVariables[o];if(null==e.accumulatedFirstMoment[o]){var a=!1;e.accumulatedFirstMoment[o]=ie(i).variable(a)}null==e.accumulatedSecondMoment[o]&&(a=!1,e.accumulatedSecondMoment[o]=ie(i).variable(a));var s=t[o],u=e.accumulatedSecondMoment[o],l=e.beta1Scalar.mul(e.accumulatedFirstMoment[o]).add(e.oneMinusBeta1.mul(s)),c=e.beta2Scalar.mul(u).add(e.oneMinusBeta2.mul(s.square())),p=l.div(n),h=c.div(r);e.accumulatedFirstMoment[o].assign(l),e.accumulatedSecondMoment[o].assign(c);var f=e.c.mul(p.div(e.epsScalar.add(h.sqrt()))).add(i);i.assign(f)}e.accBeta1.assign(e.accBeta1.mul(e.beta1Scalar)),e.accBeta2.assign(e.accBeta2.mul(e.beta2Scalar))})},e.prototype.dispose=function(){var t=this;this.c.dispose(),this.epsScalar.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.accBeta1.dispose(),this.accBeta2.dispose(),this.oneMinusBeta1.dispose(),this.oneMinusBeta2.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach(function(e){return t.accumulatedFirstMoment[e].dispose()}),null!=this.accumulatedSecondMoment&&Object.keys(this.accumulatedSecondMoment).forEach(function(e){return t.accumulatedSecondMoment[e].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)},e.className="AdamOptimizer",e}(Bs);Ts.register(Hs);var Gs=function(t){function e(e,n,r,o,i){void 0===o&&(o=null),void 0===i&&(i=0);var a=t.call(this)||this;return a.learningRate=e,a.beta1=n,a.beta2=r,a.epsilon=o,a.decay=i,a.accumulatedFirstMoment={},a.accumulatedWeightedInfNorm={},a.c=pr(Qt(-e)),a.beta1Scalar=pr(Qt(n)),a.beta2Scalar=pr(Qt(r)),a.decayScalar=pr(Qt(i)),cr(function(){a.iteration=Qt(0).variable(),a.accBeta1=Qt(n).variable()}),a.oneMinusBeta1=pr(Qt(1-n)),a.one=pr(Qt(1)),null===o&&(o=Us()),a.epsScalar=pr(Qt(o)),a}return o(e,t),e.prototype.applyGradients=function(t){var e=this;cr(function(){var n=e.one.sub(e.accBeta1),r=e.c.div(e.one.add(e.decayScalar.mul(e.iteration)));for(var o in t){var i=mt.engine.registeredVariables[o];if(null==e.accumulatedFirstMoment[o]){var a=!1;e.accumulatedFirstMoment[o]=ie(i).variable(a)}null==e.accumulatedWeightedInfNorm[o]&&(a=!1,e.accumulatedWeightedInfNorm[o]=ie(i).variable(a));var s=t[o],u=e.accumulatedWeightedInfNorm[o],l=e.beta1Scalar.mul(e.accumulatedFirstMoment[o]).add(e.oneMinusBeta1.mul(s)),c=e.beta2Scalar.mul(u),p=s.abs(),h=c.maximum(p);e.accumulatedFirstMoment[o].assign(l),e.accumulatedWeightedInfNorm[o].assign(h);var f=r.div(n).mul(l.div(e.epsScalar.add(h))).add(i);i.assign(f)}e.iteration.assign(e.iteration.add(e.one)),e.accBeta1.assign(e.accBeta1.mul(e.beta1Scalar))})},e.prototype.dispose=function(){var t=this;this.c.dispose(),this.epsScalar.dispose(),this.accBeta1.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.oneMinusBeta1.dispose(),this.decayScalar.dispose(),this.iteration.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach(function(e){return t.accumulatedFirstMoment[e].dispose()}),null!=this.accumulatedWeightedInfNorm&&Object.keys(this.accumulatedWeightedInfNorm).forEach(function(e){return t.accumulatedWeightedInfNorm[e].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)},e.className="AdamaxOptimizer",e}(Bs);Ts.register(Gs);var $s=function(t){function e(e){var n=t.call(this)||this;return n.learningRate=e,n.setLearningRate(e),n}return o(e,t),e.prototype.applyGradients=function(t){var e=this;Object.keys(t).forEach(function(n){var r=t[n],o=mt.engine.registeredVariables[n];cr(function(){var t=e.c.mul(r).add(o);o.assign(t)})})},e.prototype.setLearningRate=function(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=pr(Qt(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,e){return new t(e.learningRate)},e.className="SGDOptimizer",e}(Bs);Ts.register($s);var Ks=function(t){function e(e,n,r){void 0===r&&(r=!1);var o=t.call(this,e)||this;return o.learningRate=e,o.momentum=n,o.useNesterov=r,o.m=Qt(o.momentum),o.accumulations={},o}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=function(n){var o=mt.engine.registeredVariables[n];null==r.accumulations[n]&&cr(function(){e.accumulations[n]=ie(o).variable(!1)});var i=r.accumulations[n],a=t[n];cr(function(){var t,r=e.m.mul(i).add(a);t=e.useNesterov?e.c.mul(a.add(r.mul(e.m))).add(o):e.c.mul(r).add(o),e.accumulations[n].assign(r),o.assign(t)})},r=this;for(var o in t)n(o)},e.prototype.dispose=function(){if(t.prototype.dispose.call(this),this.m.dispose(),null!=this.accumulations)for(var e in this.accumulations)this.accumulations[e].dispose()},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)},e.className="MomentumOptimizer",e}($s);Ts.register(Ks);var Qs=function(t){function e(e,n,r,o,i){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===o&&(o=null),void 0===i&&(i=!1);var a=t.call(this)||this;return a.learningRate=e,a.decay=n,a.momentum=r,a.epsilon=o,a.accumulatedMeanSquares={},a.accumulatedMeanGrads={},a.accumulatedMoments={},a.c=pr(Qt(e)),a.decayScalar=pr(Qt(n)),a.momentumScalar=pr(Qt(r)),a.oneMinusDecay=pr(Qt(1-n)),a.centered=i,null===o&&(o=Us()),a.epsilonScalar=pr(Qt(o)),a}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=function(n){var o=mt.engine.registeredVariables[n];null==r.accumulatedMeanSquares[n]&&cr(function(){e.accumulatedMeanSquares[n]=ie(o).variable(!1)}),null==r.accumulatedMeanGrads[n]&&r.centered&&cr(function(){e.accumulatedMeanGrads[n]=ie(o).variable(!1)}),null==r.accumulatedMoments[n]&&cr(function(){e.accumulatedMoments[n]=ie(o).variable(!1)});var i=r.accumulatedMeanSquares[n],a=r.accumulatedMeanGrads[n],s=r.accumulatedMoments[n],u=t[n];cr(function(){var t=e.decayScalar.mul(i).add(e.oneMinusDecay.mul(u.square()));if(e.centered){var r=e.decayScalar.mul(a).add(e.oneMinusDecay.mul(u)),l=e.momentumScalar.mul(s).add(e.c.mul(u).div(t.sub(r.square().add(e.epsilonScalar)).sqrt()));e.accumulatedMeanSquares[n].assign(t),e.accumulatedMeanGrads[n].assign(r),e.accumulatedMoments[n].assign(l);var c=o.sub(l);o.assign(c)}else{var p=e.decayScalar.mul(i).add(e.oneMinusDecay.mul(u.square()));l=e.momentumScalar.mul(s).add(e.c.mul(u).div(p.add(e.epsilonScalar).sqrt())),e.accumulatedMeanSquares[n].assign(p),e.accumulatedMoments[n].assign(l),c=o.sub(l),o.assign(c)}})},r=this;for(var o in t)n(o)},e.prototype.dispose=function(){var t=this;this.c.dispose(),this.epsilonScalar.dispose(),this.decayScalar.dispose(),this.momentumScalar.dispose(),this.oneMinusDecay.dispose(),null!=this.accumulatedMeanSquares&&Object.keys(this.accumulatedMeanSquares).forEach(function(e){return t.accumulatedMeanSquares[e].dispose()}),null!=this.accumulatedMeanGrads&&this.centered&&Object.keys(this.accumulatedMeanGrads).forEach(function(e){return t.accumulatedMeanGrads[e].dispose()}),null!=this.accumulatedMoments&&Object.keys(this.accumulatedMoments).forEach(function(e){return t.accumulatedMoments[e].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)},e.className="RMSPropOptimizer",e}(Bs);Ts.register(Qs);var Xs=function(){function t(){}return t.sgd=function(t){return new $s(t)},t.momentum=function(t,e,n){return void 0===n&&(n=!1),new Ks(t,e,n)},t.rmsprop=function(t,e,n,r,o){return void 0===e&&(e=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=!1),new Qs(t,e,n,r,o)},t.adam=function(t,e,n,r){return void 0===t&&(t=.001),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new Hs(t,e,n,r)},t.adadelta=function(t,e,n){return void 0===t&&(t=.001),void 0===e&&(e=.95),void 0===n&&(n=null),new Ws(t,e,n)},t.adamax=function(t,e,n,r,o){return void 0===t&&(t=.002),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===o&&(o=0),new Gs(t,e,n,r,o)},t.adagrad=function(t,e){return void 0===e&&(e=.1),new qs(t,e)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sgd",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"momentum",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"rmsprop",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"adam",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"adadelta",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"adamax",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"adagrad",null),t}(),Ys={sgd:Xs.sgd,momentum:Xs.momentum,adadelta:Xs.adadelta,adagrad:Xs.adagrad,rmsprop:Xs.rmsprop,adamax:Xs.adamax,adam:Xs.adam},Zs=dt.setBackend,Js=dt.getBackend,tu=dt.disposeVariables,eu=dt.memory,nu=Ua.nextFrame;K=ui},S5bw:function(t,e,n){"use strict";var r=n(null),o=n(null),i=n("zo3G"),a=n(null),s=n(null),u=n("60iU"),l=function(t){function e(e,n,r){void 0===r&&(r=0);var o=t.call(this,e)||this;return o.scheduler=n,o.delay=r,o}return r.c(e,t),e.dispatch=function(t){t.notification.observe(t.destination),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(u.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(u.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(u.Notification.createComplete())},e}(s.a),c=function(t,e){this.notification=t,this.destination=e},p=n(null),h=n(null);n.d(e,"ReplaySubject",function(){return f});var f=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var o=t.call(this)||this;return o.scheduler=r,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=e<1?1:e,o._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return r.c(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new d(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,i=r.length;if(this.closed)throw new p.a;if(this.isStopped||this.hasError?e=a.a.EMPTY:(this.observers.push(t),e=new h.a(this,t)),o&&t.add(t=new l(t,o)),n)for(var s=0;s<i&&!t.closed;s++)t.next(r[s]);else for(s=0;s<i&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||i.queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,o=r.length,i=0;i<o&&!(t-r[i].time<n);)i++;return o>e&&(i=Math.max(i,o-e)),i>0&&r.splice(0,i),r},e}(o.a),d=function(t,e){this.time=t,this.value=e}},T1DM:function(t,e,n){"use strict";var r=n(null),o=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.c(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.c(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(null).a)),i=n("siIJ"),a=function(t){function e(n,r){void 0===r&&(r=i.Scheduler.now);var o=t.call(this,n,function(){return e.delegate&&e.delegate!==o?e.delegate.now():r()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.c(e,t),e.prototype.schedule=function(n,r,o){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,o):t.prototype.schedule.call(this,n,r,o)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(i.Scheduler);n.d(e,"async",function(){return s});var s=new a(o)},UGPC:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();e.AsapScheduler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,o=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<o&&(t=n.shift()));if(this.active=!1,e){for(;++r<o&&(t=n.shift());)t.unsubscribe();throw e}},e}(n("NTcF").AsyncScheduler)},UNqx:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("cSoz"),i=n("Y4kR"),a=n("Vi6O"),s=n("q3Kh"),u=n("gTqA");e.mergeMap=function t(e,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(o){return o.pipe(t(function(t,r){return u.from(e(t,r)).pipe(s.map(function(e,o){return n(t,e,r,o)}))},r))}:("number"==typeof n&&(r=n),function(t){return t.lift(new l(e,r))})};var l=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.project,this.concurrent))},t}();e.MergeMapOperator=l;var c=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var o=t.call(this,e)||this;return o.project=n,o.concurrent=r,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return r(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new a.InnerSubscriber(this,void 0,void 0);this.add(r),o.subscribeToResult(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(i.OuterSubscriber);e.MergeMapSubscriber=c},UR0p:function(t,e,n){"use strict";var r=n(null),o=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.c(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.c(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(null).a)),i=n("siIJ"),a=function(t){function e(n,r){void 0===r&&(r=i.Scheduler.now);var o=t.call(this,n,function(){return e.delegate&&e.delegate!==o?e.delegate.now():r()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.c(e,t),e.prototype.schedule=function(n,r,o){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,o):t.prototype.schedule.call(this,n,r,o)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(i.Scheduler);n.d(e,"VirtualTimeScheduler",function(){return s}),n.d(e,"VirtualAction",function(){return u});var s=function(t){function e(e,n){void 0===e&&(e=u),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e,function(){return r.frame})||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return r.c(e,t),e.prototype.flush=function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n.shift())&&(this.frame=e.delay)<=r&&!(t=e.execute(e.state,e.delay)););if(t){for(;e=n.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(a),u=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1);var o=t.call(this,e,n)||this;return o.scheduler=e,o.work=n,o.index=r,o.active=!0,o.index=e.index=r,o}return r.c(e,t),e.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var o=new e(this.scheduler,this.work);return this.add(o),o.schedule(n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var o=t.actions;return o.push(this),o.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(o)},VKeD:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}e.getSymbolIterator=r,e.iterator=r(),e.$$iterator=e.iterator},VNr4:function(t,e,n){"use strict";n.r(e),n.d(e,"forkJoin",function(){return c});var r=n(null),o=n(null),i=n(null),a=n(null),s=n(null),u=n(null),l=n(null);function c(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&Object(i.a)(e[0])&&(e=e[0]),0===e.length?a[!1]:t?c(e).pipe(Object(l.a)(function(e){return t.apply(void 0,e)})):new o.a(function(t){return new p(t,e)})}var p=function(t){function e(e,n){var r=t.call(this,e)||this;r.sources=n,r.completed=0,r.haveValues=0;var o=n.length;r.values=new Array(o);for(var i=0;i<o;i++){var a=n[i],u=Object(s.a)(r,a,null,i);u&&r.add(u)}return r}return r.c(e,t),e.prototype.notifyNext=function(t,e,n,r,o){this.values[n]=e,o._hasValue||(o._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,n=this.haveValues,r=this.values,o=r.length;t._hasValue?(this.completed++,this.completed===o&&(n===o&&e.next(r),e.complete())):e.complete()},e}(u.a)},Vi6O:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();e.InnerSubscriber=function(t){function e(e,n,r){var o=t.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=r,o.index=0,o}return r(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n("FWf1").Subscriber)},W0Ae:function(t,e,n){"use strict";n.r(e),n.d(e,"race",function(){return u}),n.d(e,"RaceOperator",function(){return l}),n.d(e,"RaceSubscriber",function(){return c});var r=n(null),o=n(null),i=n(null),a=n(null),s=n(null);function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!Object(o.a)(t[0]))return t[0];t=t[0]}return Object(i.a)(t,void 0).lift(new l)}var l=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new c(t))},t}(),c=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r.c(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],o=Object(s.a)(this,r,r,n);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,o){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==n){var a=this.subscriptions[i];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(e)},e}(a.a)},XdTn:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("iFGG");e.AsapAction=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=o.Immediate.setImmediate(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(o.Immediate.clearImmediate(n),e.scheduled=void 0)},e}(n("2tF/").AsyncAction)},XlPw:function(t,e,n){"use strict";n.r(e),n.d(e,"throwError",function(){return o});var r=n(null);function o(t,e){return new r.a(e?function(n){return e.schedule(i,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function i(t){t.subscriber.error(t.error)}},"Xwq/":function(t,e,n){"use strict";var r=n("FWf1"),o=n("p//D"),i=n("GiSu");e.toSubscriber=function(t,e,n){if(t){if(t instanceof r.Subscriber)return t;if(t[o.rxSubscriber])return t[o.rxSubscriber]()}return t||e||n?new r.Subscriber(t,e,n):new r.Subscriber(i.empty)}},Y4kR:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();e.OuterSubscriber=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n("FWf1").Subscriber)},Z5tI:function(t,e,n){"use strict";var r=n("MkmW");e.subscribeToPromise=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,r.hostReportError),e}}},aJGj:function(t,e,n){"use strict";var r=n("Q1FS");function o(t){return new r.Observable(function(e){return t.schedule(function(){return e.complete()})})}e.EMPTY=new r.Observable(function(t){return t.complete()}),e.empty=function(t){return t?o(t):e.EMPTY},e.emptyScheduled=o},"b/k1":function(t,e,n){"use strict";var r=n("Q1FS"),o=n("gTqA"),i=n("aJGj");e.defer=function(t){return new r.Observable(function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?o.from(n):i.empty()).subscribe(e)})}},b0Xh:function(t,e,r){var o;(function(){var r=!1,i=function(t){return t instanceof i?t:this instanceof i?void(this.EXIFwrapped=t):new i(t)};void 0!==t&&t.exports&&(e=t.exports=i),e.EXIF=i;var a=i.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},s=i.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},u=i.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},l=i.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},c=i.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function p(t){return!!t.exifdata}function h(t){var e=new DataView(t);if(r&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return r&&console.log("Not a valid JPEG"),!1;for(var n,o=2,i=t.byteLength;o<i;){if(255!=e.getUint8(o))return r&&console.log("Not a valid marker at offset "+o+", found: "+e.getUint8(o)),!1;if(n=e.getUint8(o+1),r&&console.log(n),225==n)return r&&console.log("Found 0xFFE1 marker"),y(e,o+4,e.getUint16(o+2));o+=2+e.getUint16(o+2)}}var f={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function d(t,e,n){for(var r,o,i,a,s=new DataView(t),u={},l=e;l<e+n;)28===s.getUint8(l)&&2===s.getUint8(l+1)&&(a=s.getUint8(l+2))in f&&(i=s.getInt16(l+3),o=f[a],r=v(s,l+5,i),u.hasOwnProperty(o)?u[o]instanceof Array?u[o].push(r):u[o]=[u[o],r]:u[o]=r),l++;return u}function m(t,e,n,o,i){var a,s,u,l=t.getUint16(n,!i),c={};for(u=0;u<l;u++)!(s=o[t.getUint16(a=n+12*u+2,!i)])&&r&&console.log("Unknown tag: "+t.getUint16(a,!i)),c[s]=g(t,a,e,0,i);return c}function g(t,e,n,r,o){var i,a,s,u,l,c,p=t.getUint16(e+2,!o),h=t.getUint32(e+4,!o),f=t.getUint32(e+8,!o)+n;switch(p){case 1:case 7:if(1==h)return t.getUint8(e+8,!o);for(i=h>4?f:e+8,a=[],u=0;u<h;u++)a[u]=t.getUint8(i+u);return a;case 2:return v(t,i=h>4?f:e+8,h-1);case 3:if(1==h)return t.getUint16(e+8,!o);for(i=h>2?f:e+8,a=[],u=0;u<h;u++)a[u]=t.getUint16(i+2*u,!o);return a;case 4:if(1==h)return t.getUint32(e+8,!o);for(a=[],u=0;u<h;u++)a[u]=t.getUint32(f+4*u,!o);return a;case 5:if(1==h)return l=t.getUint32(f,!o),c=t.getUint32(f+4,!o),(s=new Number(l/c)).numerator=l,s.denominator=c,s;for(a=[],u=0;u<h;u++)l=t.getUint32(f+8*u,!o),c=t.getUint32(f+4+8*u,!o),a[u]=new Number(l/c),a[u].numerator=l,a[u].denominator=c;return a;case 9:if(1==h)return t.getInt32(e+8,!o);for(a=[],u=0;u<h;u++)a[u]=t.getInt32(f+4*u,!o);return a;case 10:if(1==h)return t.getInt32(f,!o)/t.getInt32(f+4,!o);for(a=[],u=0;u<h;u++)a[u]=t.getInt32(f+8*u,!o)/t.getInt32(f+4+8*u,!o);return a}}function v(t,e,r){var o="";for(n=e;n<e+r;n++)o+=String.fromCharCode(t.getUint8(n));return o}function y(t,e){if("Exif"!=v(t,e,4))return r&&console.log("Not valid EXIF data! "+v(t,e,4)),!1;var n,o,i,p,h,f=e+6;if(18761==t.getUint16(f))n=!1;else{if(19789!=t.getUint16(f))return r&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=t.getUint16(f+2,!n))return r&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var d=t.getUint32(f+4,!n);if(d<8)return r&&console.log("Not valid TIFF data! (First offset less than 8)",t.getUint32(f+4,!n)),!1;if((o=m(t,f,f+d,s,n)).ExifIFDPointer)for(i in p=m(t,f,f+o.ExifIFDPointer,a,n)){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":p[i]=c[i][p[i]];break;case"ExifVersion":case"FlashpixVersion":p[i]=String.fromCharCode(p[i][0],p[i][1],p[i][2],p[i][3]);break;case"ComponentsConfiguration":p[i]=c.Components[p[i][0]]+c.Components[p[i][1]]+c.Components[p[i][2]]+c.Components[p[i][3]]}o[i]=p[i]}if(o.GPSInfoIFDPointer)for(i in h=m(t,f,f+o.GPSInfoIFDPointer,u,n)){switch(i){case"GPSVersionID":h[i]=h[i][0]+"."+h[i][1]+"."+h[i][2]+"."+h[i][3]}o[i]=h[i]}return o.thumbnail=function(t,e,n,r){var o=function(t,e,n){var r=t.getUint16(e,!n);return t.getUint32(e+2+12*r,!n)}(t,e+n,r);if(!o)return{};if(o>t.byteLength)return{};var i=m(t,e,e+o,l,r);if(i.Compression)switch(i.Compression){case 6:i.JpegIFOffset&&i.JpegIFByteCount&&(i.blob=new Blob([new Uint8Array(t.buffer,e+i.JpegIFOffset,i.JpegIFByteCount)],{type:"image/jpeg"}));break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",i.Compression)}else 2==i.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return i}(t,f,d,n),o}function b(t){var e={};if(1==t.nodeType){if(t.attributes.length>0){e["@attributes"]={};for(var n=0;n<t.attributes.length;n++){var r=t.attributes.item(n);e["@attributes"][r.nodeName]=r.nodeValue}}}else if(3==t.nodeType)return t.nodeValue;if(t.hasChildNodes())for(var o=0;o<t.childNodes.length;o++){var i=t.childNodes.item(o),a=i.nodeName;if(null==e[a])e[a]=b(i);else{if(null==e[a].push){var s=e[a];e[a]=[],e[a].push(s)}e[a].push(b(i))}}return e}function w(t){try{var e={};if(t.children.length>0)for(var n=0;n<t.children.length;n++){var r=t.children.item(n),o=r.attributes;for(var i in o){var a=o[i],s=a.nodeName;void 0!==s&&(e[s]=a.nodeValue)}var u=r.nodeName;if(void 0===e[u])e[u]=b(r);else{if(void 0===e[u].push){var l=e[u];e[u]=[],e[u].push(l)}e[u].push(b(r))}}else e=t.textContent;return e}catch(t){console.log(t.message)}}i.enableXmp=function(){i.isXmpEnabled=!0},i.disableXmp=function(){i.isXmpEnabled=!1},i.getData=function(t,e){return!((self.Image&&t instanceof self.Image||self.HTMLImageElement&&t instanceof self.HTMLImageElement)&&!t.complete||(p(t)?e&&e.call(t):function(t,e){function n(n){var o=h(n);t.exifdata=o||{};var a=function(t){var e=new DataView(t);if(r&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return r&&console.log("Not a valid JPEG"),!1;for(var n=2,o=t.byteLength,i=function(t,e){return 56===t.getUint8(e)&&66===t.getUint8(e+1)&&73===t.getUint8(e+2)&&77===t.getUint8(e+3)&&4===t.getUint8(e+4)&&4===t.getUint8(e+5)};n<o;){if(i(e,n)){var a=e.getUint8(n+7);return a%2!=0&&(a+=1),0===a&&(a=4),d(t,n+8+a,e.getUint16(n+6+a))}n++}}(n);if(t.iptcdata=a||{},i.isXmpEnabled){var s=function(t){if("DOMParser"in self){var e=new DataView(t);if(r&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return r&&console.log("Not a valid JPEG"),!1;for(var n=2,o=t.byteLength,i=new DOMParser;n<o-4;){if("http"==v(e,n,4)){var a=v(e,n-1,e.getUint16(n-2)-1),s=a.indexOf("xmpmeta>")+8,u=(a=a.substring(a.indexOf("<x:xmpmeta"),s)).indexOf("x:xmpmeta")+10;return a=a.slice(0,u)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+a.slice(u),w(i.parseFromString(a,"text/xml"))}n++}}}(n);t.xmpdata=s||{}}e&&e.call(t)}if(t.src)if(/^data\:/i.test(t.src))n(function(t,e){e=e||t.match(/^data\:([^\;]+)\;base64,/im)[1]||"",t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(t),r=n.length,o=new ArrayBuffer(r),i=new Uint8Array(o),a=0;a<r;a++)i[a]=n.charCodeAt(a);return o}(t.src));else if(/^blob\:/i.test(t.src))(a=new FileReader).onload=function(t){n(t.target.result)},function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(t){200!=this.status&&0!==this.status||a.readAsArrayBuffer(this.response)},n.send()}(t.src);else{var o=new XMLHttpRequest;o.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(o.response),o=null},o.open("GET",t.src,!0),o.responseType="arraybuffer",o.send(null)}else if(self.FileReader&&(t instanceof self.Blob||t instanceof self.File)){var a;(a=new FileReader).onload=function(t){r&&console.log("Got file of length "+t.target.result.byteLength),n(t.target.result)},a.readAsArrayBuffer(t)}}(t,e),0))},i.getTag=function(t,e){if(p(t))return t.exifdata[e]},i.getIptcTag=function(t,e){if(p(t))return t.iptcdata[e]},i.getAllTags=function(t){if(!p(t))return{};var e,n=t.exifdata,r={};for(e in n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r},i.getAllIptcTags=function(t){if(!p(t))return{};var e,n=t.iptcdata,r={};for(e in n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r},i.pretty=function(t){if(!p(t))return"";var e,n=t.exifdata,r="";for(e in n)n.hasOwnProperty(e)&&("object"==typeof n[e]?n[e]instanceof Number?r+=e+" : "+n[e]+" ["+n[e].numerator+"/"+n[e].denominator+"]\r\n":r+=e+" : ["+n[e].length+" values]\r\n":r+=e+" : "+n[e]+"\r\n");return r},i.readFromBinaryFile=function(t){return h(t)},void 0===(o=(function(){return i}).apply(e,[]))||(t.exports=o)}).call(this)},bne5:function(t,e,n){"use strict";n.r(e),n.d(e,"fromEvent",function(){return s});var r=n(null),o=n(null),i=n(null),a=n(null);function s(t,e,n,u){return Object(i.a)(n)&&(u=n,n=void 0),u?s(t,e,n).pipe(Object(a.a)(function(t){return Object(o.a)(t)?u.apply(void 0,t):u(t)})):new r.a(function(r){!function t(e,n,r,o,i){var a;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var s=e;e.addEventListener(n,r,i),a=function(){return s.removeEventListener(n,r,i)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var u=e;e.on(n,r),a=function(){return u.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var l=e;e.addListener(n,r),a=function(){return l.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,p=e.length;c<p;c++)t(e[c],n,r,o,i)}o.add(a)}(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}Object},c4Wt:function(t,e,n){"use strict";var r=n("QtHX");e.concatAll=function(){return r.mergeAll(1)}},cSoz:function(t,e,n){"use strict";var r=n("Vi6O"),o=n("6qA3");e.subscribeToResult=function(t,e,n,i,a){if(void 0===a&&(a=new r.InnerSubscriber(t,n,i)),!a.closed)return o.subscribeTo(e)(a)}},crnd:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="crnd"},dEwP:function(t,e,n){"use strict";n.r(e),n.d(e,"concat",function(){return s});var r=n(null),o=n(null),i=n(null),a=n(null);function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&Object(r.a)(t[1])?Object(i.a)(t[0]):Object(a.a)()(o.a.apply(void 0,t))}},dNeE:function(t,e,n){"use strict";e.Observable=n("Q1FS").Observable,e.ConnectableObservable=n("Ceu0").ConnectableObservable,e.GroupedObservable=n("w1o2").GroupedObservable,e.observable=n("zfKp").observable,e.Subject=n("ds6q").Subject,e.BehaviorSubject=n("7RJT").BehaviorSubject,e.ReplaySubject=n("+Zhm").ReplaySubject,e.AsyncSubject=n("eYLY").AsyncSubject,e.asapScheduler=n("zvlq").asap,e.asyncScheduler=n("1pIY").async,e.queueScheduler=n("xHZb").queue,e.animationFrameScheduler=n("H0e8").animationFrame;var r=n("ptTZ");e.VirtualTimeScheduler=r.VirtualTimeScheduler,e.VirtualAction=r.VirtualAction,e.Scheduler=n("ffpz").Scheduler,e.Subscription=n("zB/H").Subscription,e.Subscriber=n("FWf1").Subscriber,e.Notification=n("xKqS").Notification,e.pipe=n("9AGB").pipe,e.noop=n("w5QO").noop,e.identity=n("yoF8").identity,e.isObservable=n("MjHj").isObservable,e.ArgumentOutOfRangeError=n("IKal").ArgumentOutOfRangeError,e.EmptyError=n("0z0v").EmptyError,e.ObjectUnsubscribedError=n("Mxlh").ObjectUnsubscribedError,e.UnsubscriptionError=n("LBXl").UnsubscriptionError,e.TimeoutError=n("zk/k").TimeoutError,e.bindCallback=n("ICFB").bindCallback,e.bindNodeCallback=n("r8S4").bindNodeCallback,e.combineLatest=n("FCKb").combineLatest,e.concat=n("IKMM").concat,e.defer=n("b/k1").defer,e.empty=n("aJGj").empty,e.forkJoin=n("Ljqs").forkJoin,e.from=n("gTqA").from,e.fromEvent=n("q7YW").fromEvent,e.fromEventPattern=n("+W7E").fromEventPattern,e.generate=n("sMO2").generate,e.iif=n("5Qfn").iif,e.interval=n("CIkO").interval,e.merge=n("6eB1").merge,e.never=n("2E8i").never,e.of=n("I65S").of,e.onErrorResumeNext=n("GAJ/").onErrorResumeNext,e.pairs=n("ez72").pairs,e.race=n("rhxD").race,e.range=n("Iy3P").range,e.throwError=n("vLqr").throwError,e.timer=n("eJ3O").timer,e.using=n("FHQ3").using,e.zip=n("AmbE").zip,e.EMPTY=n("aJGj").EMPTY,e.NEVER=n("2E8i").NEVER,e.config=n("n3uD").config},ds6q:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("Q1FS"),i=n("FWf1"),a=n("zB/H"),s=n("Mxlh"),u=n("FiyT"),l=n("p//D"),c=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return r(e,t),e}(i.Subscriber);e.SubjectSubscriber=c;var p=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r(e,t),e.prototype[l.rxSubscriber]=function(){return new c(this)},e.prototype.lift=function(t){var e=new h(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(t.complete(),a.Subscription.EMPTY):(this.observers.push(t),new u.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new o.Observable;return t.source=this,t},e.create=function(t,e){return new h(t,e)},e}(o.Observable);e.Subject=p;var h=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return r(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):a.Subscription.EMPTY},e}(p);e.AnonymousSubject=h},dzgT:function(t,e,n){"use strict";n.r(e),n.d(e,"combineLatest",function(){return c}),n.d(e,"CombineLatestOperator",function(){return p}),n.d(e,"CombineLatestSubscriber",function(){return h});var r=n(null),o=n(null),i=n(null),a=n(null),s=n(null),u=n(null),l={};function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return Object(o.a)(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(i.a)(t[0])&&(t=t[0]),Object(u.a)(t,r).lift(new p(n))}var p=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.resultSelector))},t}(),h=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.c(e,t),e.prototype._next=function(t){this.values.push(l),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(s.a)(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,o){var i=this.values,a=this.toRespond?i[n]===l?--this.toRespond:this.toRespond:0;i[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(a.a)},e2pG:function(t,e,n){"use strict";var r=n("Q1FS"),o=n("zB/H"),i=n("VKeD"),a=n("poJ0");e.fromIterable=function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.Observable(e?function(n){var r,a=new o.Subscription;return a.add(function(){r&&"function"==typeof r.return&&r.return()}),a.add(e.schedule(function(){r=t[i.iterator](),a.add(e.schedule(function(){if(!n.closed){var t,e;try{var o=r.next();t=o.value,e=o.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),a}:a.subscribeToIterable(t))}},eJ3O:function(t,e,n){"use strict";var r=n("Q1FS"),o=n("1pIY"),i=n("p0+S"),a=n("nzqU");function s(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}e.timer=function(t,e,n){void 0===t&&(t=0);var u=-1;return i.isNumeric(e)?u=Number(e)<1?1:Number(e):a.isScheduler(e)&&(n=e),a.isScheduler(n)||(n=o.async),new r.Observable(function(e){var r=i.isNumeric(t)?t:+t-n.now();return n.schedule(s,r,{index:0,period:u,subscriber:e})})}},eYLY:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("ds6q"),i=n("zB/H");e.AsyncSubject=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return r(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),i.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),i.Subscription.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(o.Subject)},eipH:function(t,e,n){"use strict";var r=n("Q1FS"),o=n("zB/H"),i=n("zfKp"),a=n("ozli");e.fromObservable=function(t,e){return new r.Observable(e?function(n){var r=new o.Subscription;return r.add(e.schedule(function(){var o=t[i.observable]();r.add(o.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:a.subscribeToObservable(t))}},emHa:function(t,e,n){"use strict";n.r(e),n.d(e,"bindNodeCallback",function(){return u});var r=n(null),o=n("svcd"),i=n(null),a=n(null),s=n(null);function u(t,e,n){if(e){if(!Object(a.a)(e))return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return u(t,n).apply(void 0,r).pipe(Object(i.a)(function(t){return Object(s.a)(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var a={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new r.a(function(r){var i=a.context,s=a.subject;if(n)return n.schedule(l,0,{params:a,subscriber:r,context:i});if(!s){s=a.subject=new o.AsyncSubject;try{t.apply(i,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();n?s.error(n):(s.next(t.length<=1?t[0]:t),s.complete())}]))}catch(t){s.error(t)}}return s.subscribe(r)})}}function l(t){var e=this,n=t.params,r=t.subscriber,i=t.context,a=n.callbackFunc,s=n.args,u=n.scheduler,l=n.subject;if(!l){l=n.subject=new o.AsyncSubject;try{a.apply(i,s.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.shift();e.add(r?u.schedule(p,0,{err:r,subject:l}):u.schedule(c,0,{value:t.length<=1?t[0]:t,subject:l}))}]))}catch(t){this.add(u.schedule(p,0,{err:t,subject:l}))}}this.add(l.subscribe(r))}function c(t){var e=t.subject;e.next(t.value),e.complete()}function p(t){t.subject.error(t.err)}},ez72:function(t,e,n){"use strict";var r=n("Q1FS"),o=n("zB/H");function i(t){var e=t.keys,n=t.index,r=t.subscriber,o=t.subscription,i=t.obj;if(!r.closed)if(n<e.length){var a=e[n];r.next([a,i[a]]),o.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:o,obj:i}))}else r.complete()}e.pairs=function(t,e){return new r.Observable(e?function(n){var r=Object.keys(t),a=new o.Subscription;return a.add(e.schedule(i,0,{keys:r,index:0,subscriber:n,subscription:a,obj:t})),a}:function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var o=n[r];t.hasOwnProperty(o)&&e.next([o,t[o]])}e.complete()})},e.dispatch=i},ffpz:function(t,e,n){"use strict";e.Scheduler=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}()},gI3B:function(t,e,n){"use strict";var r=n(null),o=n("T1DM"),i=n(null);function a(t){return!Object(i.a)(t)&&t-parseFloat(t)+1>=0}var s=n(null);function u(t,e,n){void 0===t&&(t=0);var i=-1;return a(e)?i=Number(e)<1?1:Number(e):Object(s.a)(e)&&(n=e),Object(s.a)(n)||(n=o.async),new r.a(function(e){var r=a(t)?t:+t-n.now();return n.schedule(l,r,{index:0,period:i,subscriber:e})})}function l(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}n.d(e,"timer",function(){return u})},gTqA:function(t,e,n){"use strict";var r=n("Q1FS"),o=n("90cg"),i=n("yRPT"),a=n("HZF8"),s=n("0alx"),u=n("zzsZ"),l=n("m12A"),c=n("e2pG"),p=n("eipH"),h=n("6qA3");e.from=function(t,e){if(!e)return t instanceof r.Observable?t:new r.Observable(h.subscribeTo(t));if(null!=t){if(a.isInteropObservable(t))return p.fromObservable(t,e);if(o.isPromise(t))return l.fromPromise(t,e);if(i.isArrayLike(t))return u.fromArray(t,e);if(s.isIterable(t)||"string"==typeof t)return c.fromIterable(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}},gkvR:function(t,e,n){var r;t.exports=function t(e,n,o){function i(s,u){if(!n[s]){if(!e[s]){if(!u&&"function"==typeof r&&r)return r(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){return i(e[s][1][t]||t)},c,c.exports,t,e,n,o)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,e,n){"use strict";var r=t("inherits"),o=t("multimath"),i=t("multimath/lib/unsharp_mask"),a=t("./mm_resize");function s(t){var e=t||[],n={js:e.indexOf("js")>=0,wasm:e.indexOf("wasm")>=0};o.call(this,n),this.features={js:n.js,wasm:n.wasm&&this.has_wasm},this.use(i),this.use(a)}r(s,o),s.prototype.resizeAndUnsharp=function(t,e){var n=this.resize(t,e);return t.unsharpAmount&&this.unsharp_mask(n,t.toWidth,t.toHeight,t.unsharpAmount,t.unsharpRadius,t.unsharpThreshold),n},e.exports=s},{"./mm_resize":4,inherits:15,multimath:16,"multimath/lib/unsharp_mask":19}],2:[function(t,e,n){"use strict";function r(t){return t<0?0:t>255?255:t}e.exports={convolveHorizontally:function(t,e,n,o,i,a){var s,u,l,c,p,h,f,d,m,g,v,y=0,b=0;for(m=0;m<o;m++){for(p=0,g=0;g<i;g++){for(h=a[p++],f=a[p++],d=y+4*h|0,s=u=l=c=0;f>0;f--)c=c+(v=a[p++])*t[d+3]|0,l=l+v*t[d+2]|0,u=u+v*t[d+1]|0,s=s+v*t[d]|0,d=d+4|0;e[b+3]=r(c+8192>>14),e[b+2]=r(l+8192>>14),e[b+1]=r(u+8192>>14),e[b]=r(s+8192>>14),b=b+4*o|0}b=4*(m+1)|0,y=(m+1)*n*4|0}},convolveVertically:function(t,e,n,o,i,a){var s,u,l,c,p,h,f,d,m,g,v,y=0,b=0;for(m=0;m<o;m++){for(p=0,g=0;g<i;g++){for(h=a[p++],f=a[p++],d=y+4*h|0,s=u=l=c=0;f>0;f--)c=c+(v=a[p++])*t[d+3]|0,l=l+v*t[d+2]|0,u=u+v*t[d+1]|0,s=s+v*t[d]|0,d=d+4|0;e[b+3]=r(c+8192>>14),e[b+2]=r(l+8192>>14),e[b+1]=r(u+8192>>14),e[b]=r(s+8192>>14),b=b+4*o|0}b=4*(m+1)|0,y=(m+1)*n*4|0}}}},{}],3:[function(t,e,n){"use strict";e.exports="AGFzbQEAAAABFAJgBn9/f39/fwBgB39/f39/f38AAg8BA2VudgZtZW1vcnkCAAEDAwIAAQQEAXAAAAcZAghjb252b2x2ZQAACmNvbnZvbHZlSFYAAQkBAArmAwLBAwEQfwJAIANFDQAgBEUNACAFQQRqIRVBACEMQQAhDQNAIA0hDkEAIRFBACEHA0AgB0ECaiESAn8gBSAHQQF0IgdqIgZBAmouAQAiEwRAQQAhCEEAIBNrIRQgFSAHaiEPIAAgDCAGLgEAakECdGohEEEAIQlBACEKQQAhCwNAIBAoAgAiB0EYdiAPLgEAIgZsIAtqIQsgB0H/AXEgBmwgCGohCCAHQRB2Qf8BcSAGbCAKaiEKIAdBCHZB/wFxIAZsIAlqIQkgD0ECaiEPIBBBBGohECAUQQFqIhQNAAsgEiATagwBC0EAIQtBACEKQQAhCUEAIQggEgshByABIA5BAnRqIApBgMAAakEOdSIGQf8BIAZB/wFIG0EQdEGAgPwHcUEAIAZBAEobIAtBgMAAakEOdSIGQf8BIAZB/wFIG0EYdEEAIAZBAEobciAJQYDAAGpBDnUiBkH/ASAGQf8BSBtBCHRBgP4DcUEAIAZBAEobciAIQYDAAGpBDnUiBkH/ASAGQf8BSBtB/wFxQQAgBkEAShtyNgIAIA4gA2ohDiARQQFqIhEgBEcNAAsgDCACaiEMIA1BAWoiDSADRw0ACwsLIQACQEEAIAIgAyAEIAUgABAAIAJBACAEIAUgBiABEAALCw=="},{}],4:[function(t,e,n){"use strict";e.exports={name:"resize",fn:t("./resize"),wasm_fn:t("./resize_wasm"),wasm_src:t("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(t,e,n){"use strict";var r=t("./resize_filter_gen"),o=t("./convolve").convolveHorizontally,i=t("./convolve").convolveVertically;e.exports=function(t){var e=t.src,n=t.width,a=t.height,s=t.toWidth,u=t.toHeight,l=t.scaleX||t.toWidth/t.width,c=t.scaleY||t.toHeight/t.height,p=t.offsetX||0,h=t.offsetY||0,f=t.dest||new Uint8Array(s*u*4),d=void 0===t.quality?3:t.quality,m=t.alpha||!1,g=r(d,n,s,l,p),v=r(d,a,u,c,h),y=new Uint8Array(s*a*4);return o(e,y,n,a,s,g),i(y,f,a,s,u,v),m||function(t,e,n){for(var r=3,o=s*u*4|0;r<o;)t[r]=255,r=r+4|0}(f),f}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(t,e,n){"use strict";var r=t("./resize_filter_info"),o=14;function i(t){return Math.round(t*((1<<o)-1))}e.exports=function(t,e,n,o,a){var s,u,l,c,p,h,f,d,m,g,v,y,b,w,_,x,O=r[t].filter,E=1/o,S=Math.min(1,o),C=r[t].win/S,I=Math.floor(2*(C+1)),A=new Int16Array((I+2)*n),k=0,N=!A.subarray||!A.set;for(s=0;s<n;s++){for(u=(s+.5)*E+a,l=Math.max(0,Math.floor(u-C)),p=(c=Math.min(e-1,Math.ceil(u+C)))-l+1,h=new Float32Array(p),f=new Int16Array(p),d=0,m=l,g=0;m<=c;m++,g++)d+=v=O((m+.5-u)*S),h[g]=v;for(y=0,g=0;g<h.length;g++)y+=b=h[g]/d,f[g]=i(b);for(f[n>>1]+=i(1-y),w=0;w<f.length&&0===f[w];)w++;if(w<f.length){for(_=f.length-1;_>0&&0===f[_];)_--;if(x=_-w+1,A[k++]=l+w,A[k++]=x,N)for(g=w;g<=_;g++)A[k++]=f[g];else A.set(f.subarray(w,_+1),k),k+=x}else A[k++]=0,A[k++]=0}return A}},{"./resize_filter_info":7}],7:[function(t,e,n){"use strict";e.exports=[{win:.5,filter:function(t){return t>=-.5&&t<.5?1:0}},{win:1,filter:function(t){if(t<=-1||t>=1)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*(.54+.46*Math.cos(e/1))}},{win:2,filter:function(t){if(t<=-2||t>=2)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/2)/(e/2)}},{win:3,filter:function(t){if(t<=-3||t>=3)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/3)/(e/3)}}]},{}],8:[function(t,e,n){"use strict";var r=t("./resize_filter_gen"),o=!0;try{o=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]}catch(t){}function i(t,e,n){if(o)e.set(function(t){return new Uint8Array(t.buffer,0,t.byteLength)}(t),n);else for(var r=n,i=0;i<t.length;i++){var a=t[i];e[r++]=255&a,e[r++]=a>>8&255}}e.exports=function(t){var e=t.src,n=t.width,o=t.height,a=t.toWidth,s=t.toHeight,u=t.scaleX||t.toWidth/t.width,l=t.scaleY||t.toHeight/t.height,c=t.offsetX||0,p=t.offsetY||0,h=t.dest||new Uint8Array(a*s*4),f=void 0===t.quality?3:t.quality,d=t.alpha||!1,m=r(f,n,a,u,c),g=r(f,o,s,l,p),v=this.__align(0+Math.max(e.byteLength,h.byteLength)),y=this.__align(v+o*a*4),b=this.__align(y+m.byteLength),w=this.__instance("resize",b+g.byteLength),_=new Uint8Array(this.__memory.buffer),x=new Uint32Array(this.__memory.buffer),O=new Uint32Array(e.buffer);return x.set(O),i(m,_,y),i(g,_,b),(w.exports.convolveHV||w.exports._convolveHV)(y,b,v,n,o,a,s),new Uint32Array(h.buffer).set(new Uint32Array(this.__memory.buffer,0,s*a)),d||function(t,e,n){for(var r=3,o=a*s*4|0;r<o;)t[r]=255,r=r+4|0}(h),h}},{"./resize_filter_gen":6}],9:[function(t,e,n){"use strict";function r(t,e){this.create=t,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=e||2e3}r.prototype.acquire=function(){var t=this,e=void 0;return 0!==this.available.length?e=this.available.pop():((e=this.create()).id=this.lastId++,e.release=function(){return t.release(e)}),this.acquired[e.id]=e,e},r.prototype.release=function(t){var e=this;delete this.acquired[t.id],t.lastUsed=Date.now(),this.available.push(t),0===this.timeoutId&&(this.timeoutId=setTimeout(function(){return e.gc()},100))},r.prototype.gc=function(){var t=this,e=Date.now();this.available=this.available.filter(function(n){return!(e-n.lastUsed>t.idle&&(n.destroy(),1))}),this.timeoutId=0!==this.available.length?setTimeout(function(){return t.gc()},100):0},e.exports=r},{}],10:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,o,i){var a=n/t,s=r/e,u=(2*i+2+1)/o;if(u>.5)return[[n,r]];var l=Math.ceil(Math.log(Math.min(a,s))/Math.log(u));if(l<=1)return[[n,r]];for(var c=[],p=0;p<l;p++){var h=Math.round(Math.pow(Math.pow(t,l-p-1)*Math.pow(n,p+1),1/l)),f=Math.round(Math.pow(Math.pow(e,l-p-1)*Math.pow(r,p+1),1/l));c.push([h,f])}return c}},{}],11:[function(t,e,n){"use strict";var r=1e-5;function o(t){var e=Math.round(t);return Math.abs(t-e)<r?e:Math.floor(t)}function i(t){var e=Math.round(t);return Math.abs(t-e)<r?e:Math.ceil(t)}e.exports=function(t){var e,n,r,a,s,u,l=t.toWidth/t.width,c=t.toHeight/t.height,p=o(t.srcTileSize*l)-2*t.destTileBorder,h=o(t.srcTileSize*c)-2*t.destTileBorder;if(p<1||h<1)throw new Error("Internal error in pica: target tile width/height is too small.");var f,d=[];for(a=0;a<t.toHeight;a+=h)for(r=0;r<t.toWidth;r+=p)(e=r-t.destTileBorder)<0&&(e=0),e+(s=r+p+t.destTileBorder-e)>=t.toWidth&&(s=t.toWidth-e),(n=a-t.destTileBorder)<0&&(n=0),n+(u=a+h+t.destTileBorder-n)>=t.toHeight&&(u=t.toHeight-n),f={toX:e,toY:n,toWidth:s,toHeight:u,toInnerX:r,toInnerY:a,toInnerWidth:p,toInnerHeight:h,offsetX:e/l-o(e/l),offsetY:n/c-o(n/c),scaleX:l,scaleY:c,x:o(e/l),y:o(n/c),width:i(s/l),height:i(u/c)},d.push(f);return d}},{}],12:[function(t,e,n){"use strict";function r(t){return Object.prototype.toString.call(t)}e.exports.isCanvas=function(t){var e=r(t);return"[object HTMLCanvasElement]"===e||"[object Canvas]"===e},e.exports.isImage=function(t){return"[object HTMLImageElement]"===r(t)},e.exports.limiter=function(t){var e=0,n=[];function r(){e<t&&n.length&&(e++,n.shift()())}return function(t){return new Promise(function(o,i){n.push(function(){t().then(function(t){o(t),e--,r()},function(t){i(t),e--,r()})}),r()})}},e.exports.cib_quality_name=function(t){switch(t){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},e.exports.cib_support=function(){return Promise.resolve().then(function(){if("undefined"==typeof createImageBitmap||"undefined"==typeof document)return!1;var t=document.createElement("canvas");return t.width=100,t.height=100,createImageBitmap(t,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(e){var n=10===e.width;return e.close(),t=null,n})}).catch(function(){return!1})}},{}],13:[function(t,e,n){"use strict";e.exports=function(){var e=t("./mathlib"),n=void 0;onmessage=function(t){var r=t.data.opts;n||(n=new e(t.data.features));var o=n.resizeAndUnsharp(r);postMessage({result:o},[o.buffer])}}},{"./mathlib":1}],14:[function(t,e,n){var r,o,i,a,s,u;function l(t,e,n,r,o,i){var a,s,u,l,c,p,h,f,d,m,g,v,y,b;for(d=0;d<i;d++){for(h=d,f=0,l=c=(a=t[p=d*o])*r[6],g=r[0],v=r[1],y=r[4],b=r[5],m=0;m<o;m++)u=(s=t[p])*g+a*v+l*y+c*b,c=l,a=s,n[f]=l=u,f++,p++;for(f--,h+=i*(o-1),l=c=(a=t[--p])*r[7],s=a,g=r[2],v=r[3],m=o-1;m>=0;m--)u=s*g+a*v+l*y+c*b,c=l,a=s,s=t[p],e[h]=n[f]+(l=u),p--,f--,h-=i}}e.exports=function(t,e,n,c){if(c){var p=new Uint16Array(t.length),h=new Float32Array(Math.max(e,n)),f=function(t){t<.5&&(t=.5);var e=Math.exp(.527076)/t,n=Math.exp(-e),l=Math.exp(-2*e),c=(1-n)*(1-n)/(1+2*e*n-l);return r=c,o=c*(e-1)*n,i=c*(e+1)*n,a=-c*l,s=2*n,u=-l,new Float32Array([r,o,i,a,s,u,(r+o)/(1-s-u),(i+a)/(1-s-u)])}(c);l(t,p,h,f,e,n),l(p,t,h,f,n,e)}}},{}],15:[function(t,e,n){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],16:[function(t,e,n){"use strict";var r=t("object-assign"),o=t("./lib/base64decode"),i=t("./lib/wa_detect"),a={js:!0,wasm:!0};function s(t){if(!(this instanceof s))return new s(t);var e=r({},a,t||{});if(this.options=e,this.__cache={},this.has_wasm=i(),this.__init_promise=null,this.__modules=e.modules||{},this.__memory=null,this.__wasm={},this.__isLE=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0],!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}s.prototype.use=function(t){return this.__modules[t.name]=t,this[t.name]=this.has_wasm&&this.options.wasm&&t.wasm_fn?t.wasm_fn:t.fn,this},s.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm)return Promise.reject(new Error('mathlib: only "wasm" was enabled, but it\'s not supported'));var t=this;return this.__init_promise=Promise.all(Object.keys(t.__modules).map(function(e){var n=t.__modules[e];return t.has_wasm&&t.options.wasm&&n.wasm_fn?t.__wasm[e]?null:WebAssembly.compile(t.__base64decode(n.wasm_src)).then(function(n){t.__wasm[e]=n}):null})).then(function(){return t}),this.__init_promise},s.prototype.__base64decode=o,s.prototype.__reallocate=function(t){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(t/65536)}),this.__memory;var e=this.__memory.buffer.byteLength;return e<t&&this.__memory.grow(Math.ceil((t-e)/65536)),this.__memory},s.prototype.__instance=function(t,e,n){if(e&&this.__reallocate(e),this.__wasm[t]||(this.__wasm[t]=new WebAssembly.Module(this.__base64decode(this.__modules[t].wasm_src))),!this.__cache[t]){var o={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[t]=new WebAssembly.Instance(this.__wasm[t],{env:r(o,n||{})})}return this.__cache[t]},s.prototype.__align=function(t,e){var n=t%(e=e||8);return t+(n?e-n:0)},e.exports=s},{"./lib/base64decode":17,"./lib/wa_detect":23,"object-assign":24}],17:[function(t,e,n){"use strict";e.exports=function(t){for(var e=t.replace(/[\r\n=]/g,""),n=e.length,r=new Uint8Array(3*n>>2),o=0,i=0,a=0;a<n;a++)a%4==0&&a&&(r[i++]=o>>16&255,r[i++]=o>>8&255,r[i++]=255&o),o=o<<6|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(a));var s=n%4*6;return 0===s?(r[i++]=o>>16&255,r[i++]=o>>8&255,r[i++]=255&o):18===s?(r[i++]=o>>10&255,r[i++]=o>>2&255):12===s&&(r[i++]=o>>4&255),r}},{}],18:[function(t,e,n){"use strict";e.exports=function(t,e,n){for(var r,o,i,a=e*n,s=new Uint16Array(a),u=0;u<a;u++)i=t[4*u+2],s[u]=257*(((r=t[4*u])>=(o=t[4*u+1])&&r>=i?r:o>=i&&o>=r?o:i)+(r<=o&&r<=i?r:o<=i&&o<=r?o:i))>>1;return s}},{}],19:[function(t,e,n){"use strict";e.exports={name:"unsharp_mask",fn:t("./unsharp_mask"),wasm_fn:t("./unsharp_mask_wasm"),wasm_src:t("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":20,"./unsharp_mask_wasm":21,"./unsharp_mask_wasm_base64":22}],20:[function(t,e,n){"use strict";var r=t("glur/mono16"),o=t("./hsl_l16");e.exports=function(t,e,n,i,a,s){var u,l,c,p,h,f,d,m,g,v,y,b,w;if(!(0===i||a<.5)){a>2&&(a=2);var _=o(t,e,n),x=new Uint16Array(_);r(x,e,n,a);for(var O=i/100*4096+.5|0,E=257*s|0,S=e*n,C=0;C<S;C++)b=2*(_[C]-x[C]),Math.abs(b)>=E&&(c=t[2+(w=4*C)],f=257*((m=(u=t[w])>=(l=t[w+1])&&u>=c?u:l>=u&&l>=c?l:c)+(d=u<=l&&u<=c?u:l<=u&&l<=c?l:c))>>1,d===m?p=h=0:(h=f<=32767?4095*(m-d)/(m+d)|0:4095*(m-d)/(510-m-d)|0,p=u===m?65535*(l-c)/(6*(m-d))|0:l===m?21845+(65535*(c-u)/(6*(m-d))|0):43690+(65535*(u-l)/(6*(m-d))|0)),(f+=O*b+2048>>12)>65535?f=65535:f<0&&(f=0),0===h?u=l=c=f>>8:(g=2*f-(v=f<=32767?f*(4096+h)+2048>>12:f+((65535-f)*h+2048>>12))>>8,v>>=8,u=(y=p+21845&65535)>=43690?g:y>=32767?g+(6*(v-g)*(43690-y)+32768>>16):y>=10922?v:g+(6*(v-g)*y+32768>>16),l=(y=65535&p)>=43690?g:y>=32767?g+(6*(v-g)*(43690-y)+32768>>16):y>=10922?v:g+(6*(v-g)*y+32768>>16),c=(y=p-21845&65535)>=43690?g:y>=32767?g+(6*(v-g)*(43690-y)+32768>>16):y>=10922?v:g+(6*(v-g)*y+32768>>16)),t[w]=u,t[w+1]=l,t[w+2]=c)}}},{"./hsl_l16":18,"glur/mono16":14}],21:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,o,i){if(!(0===r||o<.5)){o>2&&(o=2);var a=e*n,s=4*a,u=2*a,l=2*a,c=4*Math.max(e,n),p=s,h=p+u,f=h+l,d=f+l,m=d+c,g=this.__instance("unsharp_mask",s+u+2*l+c+32,{exp:Math.exp}),v=new Uint32Array(t.buffer);new Uint32Array(this.__memory.buffer).set(v);var y=g.exports.hsl_l16||g.exports._hsl_l16;y(0,p,e,n),(y=g.exports.blurMono16||g.exports._blurMono16)(p,h,f,d,m,e,n,o),(y=g.exports.unsharp||g.exports._unsharp)(0,0,p,h,e,n,r,i),v.set(new Uint32Array(this.__memory.buffer,0,a))}}},{}],22:[function(t,e,n){"use strict";e.exports="AGFzbQEAAAABMQZgAXwBfGACfX8AYAZ/f39/f38AYAh/f39/f39/fQBgBH9/f38AYAh/f39/f39/fwACGQIDZW52A2V4cAAAA2VudgZtZW1vcnkCAAEDBgUBAgMEBQQEAXAAAAdMBRZfX2J1aWxkX2dhdXNzaWFuX2NvZWZzAAEOX19nYXVzczE2X2xpbmUAAgpibHVyTW9ubzE2AAMHaHNsX2wxNgAEB3Vuc2hhcnAABQkBAAqJEAXZAQEGfAJAIAFE24a6Q4Ia+z8gALujIgOaEAAiBCAEoCIGtjgCECABIANEAAAAAAAAAMCiEAAiBbaMOAIUIAFEAAAAAAAA8D8gBKEiAiACoiAEIAMgA6CiRAAAAAAAAPA/oCAFoaMiArY4AgAgASAEIANEAAAAAAAA8L+gIAKioiIHtjgCBCABIAQgA0QAAAAAAADwP6AgAqKiIgO2OAIIIAEgBSACoiIEtow4AgwgASACIAegIAVEAAAAAAAA8D8gBqGgIgKjtjgCGCABIAMgBKEgAqO2OAIcCwu3AwMDfwR9CHwCQCADKgIUIQkgAyoCECEKIAMqAgwhCyADKgIIIQwCQCAEQX9qIgdBAEgiCA0AIAIgAC8BALgiDSADKgIYu6IiDiAJuyIQoiAOIAq7IhGiIA0gAyoCBLsiEqIgAyoCALsiEyANoqCgoCIPtjgCACACQQRqIQIgAEECaiEAIAdFDQAgBCEGA0AgAiAOIBCiIA8iDiARoiANIBKiIBMgAC8BALgiDaKgoKAiD7Y4AgAgAkEEaiECIABBAmohACAGQX9qIgZBAUoNAAsLAkAgCA0AIAEgByAFbEEBdGogAEF+ai8BACIIuCINIAu7IhGiIA0gDLsiEqKgIA0gAyoCHLuiIg4gCrsiE6KgIA4gCbsiFKKgIg8gAkF8aioCALugqzsBACAHRQ0AIAJBeGohAiAAQXxqIQBBACAFQQF0ayEHIAEgBSAEQQF0QXxqbGohBgNAIAghAyAALwEAIQggBiANIBGiIAO4Ig0gEqKgIA8iECAToqAgDiAUoqAiDyACKgIAu6CrOwEAIAYgB2ohBiAAQX5qIQAgAkF8aiECIBAhDiAEQX9qIgRBAUoNAAsLCwvfAgIDfwZ8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIgyaEAAiDSANoCIPtjgCECAEIAxEAAAAAAAAAMCiEAAiDraMOAIUIAREAAAAAAAA8D8gDaEiCyALoiANIAwgDKCiRAAAAAAAAPA/oCAOoaMiC7Y4AgAgBCANIAxEAAAAAAAA8L+gIAuioiIQtjgCBCAEIA0gDEQAAAAAAADwP6AgC6KiIgy2OAIIIAQgDiALoiINtow4AgwgBCALIBCgIA5EAAAAAAAA8D8gD6GgIgujtjgCGCAEIAwgDaEgC6O2OAIcIAYEQCAFQQF0IQogBiEJIAIhCANAIAAgCCADIAQgBSAGEAIgACAKaiEAIAhBAmohCCAJQX9qIgkNAAsLIAVFDQAgBkEBdCEIIAUhAANAIAIgASADIAQgBiAFEAIgAiAIaiECIAFBAmohASAAQX9qIgANAAsLC7wBAQV/IAMgAmwiAwRAQQAgA2shBgNAIAAoAgAiBEEIdiIHQf8BcSECAn8gBEH/AXEiAyAEQRB2IgRB/wFxIgVPBEAgAyIIIAMgAk8NARoLIAQgBCAHIAIgA0kbIAIgBUkbQf8BcQshCAJAIAMgAk0EQCADIAVNDQELIAQgByAEIAMgAk8bIAIgBUsbQf8BcSEDCyAAQQRqIQAgASADIAhqQYECbEEBdjsBACABQQJqIQEgBkEBaiIGDQALCwvTBgEKfwJAIAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6CqIQ0gBSAEbCILBEAgB0GBAmwhDgNAQQAgAi8BACADLwEAayIGQQF0IgdrIAcgBkEASBsgDk8EQCAAQQJqLQAAIQUCfyAALQAAIgYgAEEBai0AACIESSIJRQRAIAYiCCAGIAVPDQEaCyAFIAUgBCAEIAVJGyAGIARLGwshCAJ/IAYgBE0EQCAGIgogBiAFTQ0BGgsgBSAFIAQgBCAFSxsgCRsLIgogCGoiD0GBAmwiEEEBdiERQQAhDAJ/QQAiCSAIIApGDQAaIAggCmsiCUH/H2wgD0H+AyAIayAKayAQQYCABEkbbSEMIAYgCEYEQCAEIAVrQf//A2wgCUEGbG0MAQsgBSAGayAGIARrIAQgCEYiBhtB//8DbCAJQQZsbUHVqgFBqtUCIAYbagshCSARIAcgDWxBgBBqQQx1aiIGQQAgBkEAShsiBkH//wMgBkH//wNIGyEGAkACfwJAIAxB//8DcSIFBEAgBkH//wFKDQEgBUGAIGogBmxBgBBqQQx2DAILIAZBCHYiBiEFIAYhBAwCCyAFIAZB//8Dc2xBgBBqQQx2IAZqCyIFQQh2IQcgBkEBdCAFa0EIdiIGIQQCQCAJQdWqAWpB//8DcSIFQanVAksNACAFQf//AU8EQEGq1QIgBWsgByAGa2xBBmxBgIACakEQdiAGaiEEDAELIAchBCAFQanVAEsNACAFIAcgBmtsQQZsQYCAAmpBEHYgBmohBAsCfyAGIgUgCUH//wNxIghBqdUCSw0AGkGq1QIgCGsgByAGa2xBBmxBgIACakEQdiAGaiAIQf//AU8NABogByIFIAhBqdUASw0AGiAIIAcgBmtsQQZsQYCAAmpBEHYgBmoLIQUgCUGr1QJqQf//A3EiCEGp1QJLDQAgCEH//wFPBEBBqtUCIAhrIAcgBmtsQQZsQYCAAmpBEHYgBmohBgwBCyAIQanVAEsEQCAHIQYMAQsgCCAHIAZrbEEGbEGAgAJqQRB2IAZqIQYLIAEgBDoAACABQQFqIAU6AAAgAUECaiAGOgAACyADQQJqIQMgAkECaiECIABBBGohACABQQRqIQEgC0F/aiILDQALCwsL"},{}],23:[function(t,e,n){"use strict";var r;e.exports=function(){if(void 0!==r)return r;if(r=!1,"undefined"==typeof WebAssembly)return r;try{var t=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),e=new WebAssembly.Module(t);return 0!==new WebAssembly.Instance(e,{}).exports.test(4)&&(r=!0),r}catch(t){}return r}},{}],24:[function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))o.call(n,l)&&(s[l]=n[l]);if(r){a=r(n);for(var c=0;c<a.length;c++)i.call(n,a[c])&&(s[a[c]]=n[a[c]])}}return s}},{}],25:[function(t,e,n){var r=arguments[3],o=arguments[4],i=arguments[5],a=JSON.stringify;e.exports=function(t,e){for(var n,s=Object.keys(i),u=0,l=s.length;u<l;u++){var c=i[h=s[u]].exports;if(c===t||c&&c.default===t){n=h;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var p={};for(u=0,l=s.length;u<l;u++){var h;p[h=s[u]]=h}o[n]=["function(require,module,exports){"+t+"(self); }",p]}var f=Math.floor(Math.pow(16,8)*Math.random()).toString(16),d={};d[n]=n,o[f]=["function(require,module,exports){var f = require("+a(n)+");(f.default ? f.default : f)(self);}",d];var m={};!function t(e){for(var n in m[e]=!0,o[e][1]){var r=o[e][1][n];m[r]||t(r)}}(f);var g="("+r+")({"+Object.keys(m).map(function(t){return a(t)+":["+o[t][0]+","+a(o[t][1])+"]"}).join(",")+"},{},["+a(f)+"])",v=window.URL||window.webkitURL||window.mozURL||window.msURL,y=new Blob([g],{type:"text/javascript"});if(e&&e.bare)return y;var b=v.createObjectURL(y),w=new Worker(b);return w.objectURL=b,w}},{}],"/":[function(t,e,n){"use strict";var r=t("object-assign"),o=t("webworkify"),i=t("./lib/mathlib"),a=t("./lib/pool"),s=t("./lib/utils"),u=t("./lib/worker"),l=t("./lib/stepper"),c=t("./lib/tiler"),p={},h=!1;try{"undefined"!=typeof navigator&&navigator.userAgent&&(h=navigator.userAgent.indexOf("Safari")>=0)}catch(t){}var f=1;"undefined"!=typeof navigator&&(f=Math.min(navigator.hardwareConcurrency||1,4));var d={tile:1024,concurrency:f,features:["js","wasm","ww"],idle:2e3},m={quality:3,alpha:!1,unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},g=void 0,v=void 0;function y(){return{value:o(u),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var t=window.URL||window.webkitURL||window.mozURL||window.msURL;t&&t.revokeObjectURL&&this.value.objectURL&&t.revokeObjectURL(this.value.objectURL)}}}}function b(t){if(!(this instanceof b))return new b(t);this.options=r({},d,t||{});var e="lk_"+this.options.concurrency;this.__limit=p[e]||s.limiter(this.options.concurrency),p[e]||(p[e]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}b.prototype.init=function(){var e=this;if(this.__initPromise)return this.__initPromise;if(!1!==g&&!0!==g&&(g=!1,"undefined"!=typeof ImageData&&"undefined"!=typeof Uint8ClampedArray))try{new ImageData(new Uint8ClampedArray(400),10,10),g=!0}catch(t){}!1!==v&&!0!==v&&(v=!1,"undefined"!=typeof ImageBitmap&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?v=!0:this.debug("ImageBitmap does not support .close(), disabled")));var n=this.options.features.slice();if(n.indexOf("all")>=0&&(n=["cib","wasm","js","ww"]),this.__requested_features=n,this.__mathlib=new i(n),n.indexOf("ww")>=0&&"undefined"!=typeof window&&"Worker"in window)try{t("webworkify")(function(){}).terminate(),this.features.ww=!0;var o="wp_"+JSON.stringify(this.options);p[o]?this.__workersPool=p[o]:(this.__workersPool=new a(y,this.options.idle),p[o]=this.__workersPool)}catch(t){}var u,l=this.__mathlib.init().then(function(t){r(e.features,t.features)});return u=v?s.cib_support().then(function(t){e.features.cib&&n.indexOf("cib")<0?e.debug("createImageBitmap() resize supported, but disabled by config"):n.indexOf("cib")>=0&&(e.features.cib=t)}):Promise.resolve(!1),this.__initPromise=Promise.all([l,u]).then(function(){return e}),this.__initPromise},b.prototype.resize=function(t,e,n){var o=this;this.debug("Start resize...");var i=r({},m);isNaN(n)?n&&(i=r(i,n)):i=r(i,{quality:n}),i.toWidth=e.width,i.toHeight=e.height,i.width=t.naturalWidth||t.width,i.height=t.naturalHeight||t.height,i.unsharpRadius>2&&(i.unsharpRadius=2);var a=!1,u=null;i.cancelToken&&(u=i.cancelToken.then(function(t){throw a=!0,t},function(t){throw a=!0,t}));var p=Math.ceil(Math.max(3,2.5*i.unsharpRadius|0));return this.init().then(function(){if(a)return u;if(o.features.cib){var n=e.getContext("2d",{alpha:Boolean(i.alpha)});return o.debug("Resize via createImageBitmap()"),createImageBitmap(t,{resizeWidth:i.toWidth,resizeHeight:i.toHeight,resizeQuality:s.cib_quality_name(i.quality)}).then(function(t){if(a)return u;if(!i.unsharpAmount)return n.drawImage(t,0,0),t.close(),n=null,o.debug("Finished!"),e;o.debug("Unsharp result");var r=document.createElement("canvas");r.width=i.toWidth,r.height=i.toHeight;var s=r.getContext("2d",{alpha:Boolean(i.alpha)});s.drawImage(t,0,0),t.close();var l=s.getImageData(0,0,i.toWidth,i.toHeight);return o.__mathlib.unsharp(l.data,i.toWidth,i.toHeight,i.unsharpAmount,i.unsharpRadius,i.unsharpThreshold),n.putImageData(l,0,0),l=s=r=n=null,o.debug("Finished!"),e})}var f={};return function t(e,n,i,l){if(a)return u;var d=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),2!==n.length);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e.shift()),m=d[0],y=d[1],b=0===e.length;l=r({},l,{toWidth:m,toHeight:y,quality:b?l.quality:Math.min(1,l.quality)});var w=void 0;return b||((w=document.createElement("canvas")).width=m,w.height=y),function(t,e,n){var r=void 0,i=void 0,l=void 0;return Promise.resolve().then(function(){if(l=e.getContext("2d",{alpha:Boolean(n.alpha)}),s.isCanvas(t))return r=t.getContext("2d",{alpha:Boolean(n.alpha)}),null;if(s.isImage(t))return v?(o.debug("Decode image via createImageBitmap"),createImageBitmap(t).then(function(t){i=t})):null;throw new Error('".from" should be image or canvas')}).then(function(){if(a)return u;o.debug("Calculate tiles");var d=c({width:n.width,height:n.height,srcTileSize:o.options.tile,toWidth:n.toWidth,toHeight:n.toHeight,destTileBorder:p}).map(function(e){return function(e){return o.__limit(function(){if(a)return u;var c=void 0;if(s.isCanvas(t))o.debug("Get tile pixel data"),c=r.getImageData(e.x,e.y,e.width,e.height);else{o.debug("Draw tile imageBitmap/image to temporary canvas");var p=document.createElement("canvas");p.width=e.width,p.height=e.height;var d=p.getContext("2d",{alpha:Boolean(n.alpha)});d.globalCompositeOperation="copy",d.drawImage(i||t,e.x,e.y,e.width,e.height,0,0,e.width,e.height),o.debug("Get tile pixel data"),c=d.getImageData(0,0,e.width,e.height),d=p=null}var m={src:c.data,width:e.width,height:e.height,toWidth:e.toWidth,toHeight:e.toHeight,scaleX:e.scaleX,scaleY:e.scaleY,offsetX:e.offsetX,offsetY:e.offsetY,quality:n.quality,alpha:n.alpha,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold};return o.debug("Invoke resize math"),Promise.resolve().then(function(){return t=m,Promise.resolve().then(function(){return o.features.ww?new Promise(function(e,n){var r=o.__workersPool.acquire();u&&u.catch(function(t){return n(t)}),r.value.onmessage=function(t){r.release(),t.data.err?n(t.data.err):e(t.data.result)},r.value.postMessage({opts:t,features:o.__requested_features,preload:{wasm_nodule:o.__mathlib.__}},[t.src.buffer])}):o.__mathlib.resizeAndUnsharp(t,f)});var t}).then(function(t){if(a)return u;c=null;var n=void 0;if(o.debug("Convert raw rgba tile result to ImageData"),g)n=new ImageData(new Uint8ClampedArray(t),e.toWidth,e.toHeight);else if((n=l.createImageData(e.toWidth,e.toHeight)).data.set)n.data.set(t);else for(var r=n.data.length-1;r>=0;r--)n.data[r]=t[r];return o.debug("Draw tile"),h?l.putImageData(n,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth+1e-5,e.toInnerHeight+1e-5):l.putImageData(n,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth,e.toInnerHeight),null})})}(e)});function m(){i&&(i.close(),i=null)}return o.debug("Process tiles"),Promise.all(d).then(function(){return o.debug("Finished!"),m(),e},function(t){throw m(),t})})}(n,b?i:w,l).then(function(){return b?i:(l.width=m,l.height=y,t(e,w,i,l))})}(l(i.width,i.height,i.toWidth,i.toHeight,o.options.tile,p),t,e,i)})},b.prototype.resizeBuffer=function(t){var e=this,n=r({},m,t);return this.init().then(function(){return e.__mathlib.resizeAndUnsharp(n)})},b.prototype.toBlob=function(t,e,n){return e=e||"image/png",new Promise(function(r){if(t.toBlob)t.toBlob(function(t){return r(t)},e,n);else{for(var o=atob(t.toDataURL(e,n).split(",")[1]),i=o.length,a=new Uint8Array(i),s=0;s<i;s++)a[s]=o.charCodeAt(s);r(new Blob([a],{type:e}))}})},b.prototype.debug=function(){},e.exports=b},{"./lib/mathlib":1,"./lib/pool":9,"./lib/stepper":10,"./lib/tiler":11,"./lib/utils":12,"./lib/worker":13,"object-assign":24,webworkify:25}]},{},[])("/")},iFGG:function(t,e,n){"use strict";var r=1,o={};e.Immediate={setImmediate:function(t){var e=r++;return o[e]=t,Promise.resolve().then(function(){return function(t){var e=o[t];e&&e()}(e)}),e},clearImmediate:function(t){delete o[t]}}},kERW:function(t,e,n){"use strict";n.r(e),n.d(e,"fromEventPattern",function(){return s});var r=n(null),o=n(null),i=n(null),a=n(null);function s(t,e,n){return n?s(t,e).pipe(Object(a.a)(function(t){return Object(o.a)(t)?n.apply(void 0,t):n(t)})):new r.a(function(n){var r,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(o)}catch(t){return void n.error(t)}if(Object(i.a)(e))return function(){return e(o,r)}})}},lYZG:function(t,e,n){"use strict";n.r(e),n.d(e,"defer",function(){return a});var r=n(null),o=n(null),i=n(null);function a(t){return new r.a(function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?Object(o.a)(n):Object(i.a)()).subscribe(e)})}},m12A:function(t,e,n){"use strict";var r=n("Q1FS"),o=n("zB/H"),i=n("Z5tI");e.fromPromise=function(t,e){return new r.Observable(e?function(n){var r=new o.Subscription;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:i.subscribeToPromise(t))}},mEZQ:function(t,e,n){"use strict";n.r(e),n.d(e,"iif",function(){return i});var r=n("lYZG"),o=n(null);function i(t,e,n){return void 0===e&&(e=o[!1]),void 0===n&&(n=o[!1]),Object(r.defer)(function(){return t()?e:n})}},mbIT:function(t,e,n){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},n3uD:function(t,e,n){"use strict";var r=!1;e.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},nzqU:function(t,e,n){"use strict";e.isScheduler=function(t){return t&&"function"==typeof t.schedule}},ozli:function(t,e,n){"use strict";var r=n("zfKp");e.subscribeToObservable=function(t){return function(e){var n=t[r.observable]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}}},"p//D":function(t,e,n){"use strict";e.rxSubscriber="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},"p0+S":function(t,e,n){"use strict";var r=n("mbIT");e.isNumeric=function(t){return!r.isArray(t)&&t-parseFloat(t)+1>=0}},pbg4:function(t,e,n){"use strict";n.r(e),n.d(e,"bindCallback",function(){return u});var r=n(null),o=n("svcd"),i=n(null),a=n(null),s=n(null);function u(t,e,n){if(e){if(!Object(s.a)(e))return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return u(t,n).apply(void 0,r).pipe(Object(i.a)(function(t){return Object(a.a)(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var a,s=this,u={context:s,subject:a,callbackFunc:t,scheduler:n};return new r.a(function(r){if(n)return n.schedule(l,0,{args:e,subscriber:r,params:u});if(!a){a=new o.AsyncSubject;try{t.apply(s,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.next(t.length<=1?t[0]:t),a.complete()}]))}catch(t){a.error(t)}}return a.subscribe(r)})}}function l(t){var e=this,n=t.args,r=t.subscriber,i=t.params,a=i.callbackFunc,s=i.context,u=i.scheduler,l=i.subject;if(!l){l=i.subject=new o.AsyncSubject;try{a.apply(s,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.add(u.schedule(c,0,{value:t.length<=1?t[0]:t,subject:l}))}]))}catch(t){l.error(t)}}this.add(l.subscribe(r))}function c(t){var e=t.subject;e.next(t.value),e.complete()}},poJ0:function(t,e,n){"use strict";var r=n("VKeD");e.subscribeToIterable=function(t){return function(e){for(var n=t[r.iterator]();;){var o=n.next();if(o.done){e.complete();break}if(e.next(o.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}}},pshJ:function(t,e,n){"use strict";e.isFunction=function(t){return"function"==typeof t}},ptTZ:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("2tF/");e.VirtualTimeScheduler=function(t){function e(e,n){void 0===e&&(e=i),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e,function(){return r.frame})||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return r(e,t),e.prototype.flush=function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n.shift())&&(this.frame=e.delay)<=r&&!(t=e.execute(e.state,e.delay)););if(t){for(;e=n.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(n("NTcF").AsyncScheduler);var i=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1);var o=t.call(this,e,n)||this;return o.scheduler=e,o.work=n,o.index=r,o.active=!0,o.index=e.index=r,o}return r(e,t),e.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var o=new e(this.scheduler,this.work);return this.add(o),o.schedule(n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var o=t.actions;return o.push(this),o.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(o.AsyncAction);e.VirtualAction=i},q3Kh:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("FWf1");e.map=function(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new i(t,e))}};var i=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))},t}();e.MapOperator=i;var a=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return r(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(o.Subscriber)},q7YW:function(t,e,n){"use strict";var r=n("Q1FS"),o=n("mbIT"),i=n("pshJ"),a=n("q3Kh");Object,e.fromEvent=function t(e,n,s,u){return i.isFunction(s)&&(u=s,s=void 0),u?t(e,n,s).pipe(a.map(function(t){return o.isArray(t)?u.apply(void 0,t):u(t)})):new r.Observable(function(t){!function t(e,n,r,o,i){var a;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var s=e;e.addEventListener(n,r,i),a=function(){return s.removeEventListener(n,r,i)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var u=e;e.on(n,r),a=function(){return u.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var l=e;e.addListener(n,r),a=function(){return l.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,p=e.length;c<p;c++)t(e[c],n,r,o,i)}o.add(a)}(e,n,function(e){t.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},t,s)})}},r8S4:function(t,e,n){"use strict";var r=n("Q1FS"),o=n("eYLY"),i=n("q3Kh"),a=n("nzqU"),s=n("mbIT");function u(t){var e=this,n=t.params,r=t.subscriber,i=t.context,a=n.callbackFunc,s=n.args,u=n.scheduler,p=n.subject;if(!p){p=n.subject=new o.AsyncSubject;try{a.apply(i,s.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.shift();e.add(r?u.schedule(c,0,{err:r,subject:p}):u.schedule(l,0,{value:t.length<=1?t[0]:t,subject:p}))}]))}catch(t){this.add(u.schedule(c,0,{err:t,subject:p}))}}this.add(p.subscribe(r))}function l(t){var e=t.subject;e.next(t.value),e.complete()}function c(t){t.subject.error(t.err)}e.bindNodeCallback=function t(e,n,l){if(n){if(!a.isScheduler(n))return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return t(e,l).apply(void 0,r).pipe(i.map(function(t){return s.isArray(t)?n.apply(void 0,t):n(t)}))};l=n}return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i={subject:void 0,args:t,callbackFunc:e,scheduler:l,context:this};return new r.Observable(function(n){var r=i.context,a=i.subject;if(l)return l.schedule(u,0,{params:i,subscriber:n,context:r});if(!a){a=i.subject=new o.AsyncSubject;try{e.apply(r,t.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();n?a.error(n):(a.next(t.length<=1?t[0]:t),a.complete())}]))}catch(t){a.error(t)}}return a.subscribe(n)})}}},rhxD:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("mbIT"),i=n("zzsZ"),a=n("Y4kR"),s=n("cSoz");e.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!o.isArray(t[0]))return t[0];t=t[0]}return i.fromArray(t,void 0).lift(new u)};var u=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new l(t))},t}();e.RaceOperator=u;var l=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],o=s.subscribeToResult(this,r,r,n);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,o){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==n){var a=this.subscriptions[i];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(e)},e}(a.OuterSubscriber);e.RaceSubscriber=l},sMO2:function(t,e,n){"use strict";var r=n("Q1FS"),o=n("yoF8"),i=n("nzqU");function a(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(t){return void e.error(t)}if(!r)return void e.complete();if(e.closed)return}var o;try{o=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(o),!e.closed))return this.schedule(t)}}e.generate=function(t,e,n,s,u){var l,c;return 1==arguments.length?(c=t.initialState,e=t.condition,n=t.iterate,l=t.resultSelector||o.identity,u=t.scheduler):void 0===s||i.isScheduler(s)?(c=t,l=o.identity,u=s):(c=t,l=s),new r.Observable(function(t){var r=c;if(u)return u.schedule(a,0,{subscriber:t,iterate:n,condition:e,resultSelector:l,state:r});for(;;){if(e){var o=void 0;try{o=e(r)}catch(e){return void t.error(e)}if(!o){t.complete();break}}var i=void 0;try{i=l(r)}catch(e){return void t.error(e)}if(t.next(i),t.closed)break;try{r=n(r)}catch(e){return void t.error(e)}}})}},siIJ:function(t,e,n){"use strict";n.r(e),n.d(e,"Scheduler",function(){return r});var r=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}()},svcd:function(t,e,n){"use strict";n.r(e),n.d(e,"AsyncSubject",function(){return a});var r=n(null),o=n(null),i=n(null),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return r.c(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),i.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),i.a.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(o.a)},tHPV:function(t,e,n){"use strict";var r=n(null),o=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.c(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.c(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.c(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(null).a))),i=n("siIJ"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.c(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,o=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<o&&(t=n.shift()));if(this.active=!1,e){for(;++r<o&&(t=n.shift());)t.unsubscribe();throw e}},e}(function(t){function e(n,r){void 0===r&&(r=i.Scheduler.now);var o=t.call(this,n,function(){return e.delegate&&e.delegate!==o?e.delegate.now():r()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.c(e,t),e.prototype.schedule=function(n,r,o){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,o):t.prototype.schedule.call(this,n,r,o)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(i.Scheduler));n.d(e,"animationFrame",function(){return s});var s=new a(o)},tgWb:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return FrozenModel}),__webpack_require__.d(__webpack_exports__,"b",function(){return loadFrozenModel}),__webpack_require__.d(__webpack_exports__,"c",function(){return version});var _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("Re/O"),__assign=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function __awaiter(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function __generator(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var punycode=createCommonjsModule(function(t,e){!function(n){var r=e&&!e.nodeType&&e,o=t&&!t.nodeType&&t,i="object"==typeof commonjsGlobal&&commonjsGlobal;i.global!==i&&i.window!==i&&i.self!==i||(n=i);var a,s,u=2147483647,l=36,c=1,p=26,h=38,f=700,d=72,m=128,g="-",v=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=l-c,x=Math.floor,O=String.fromCharCode;function E(t){throw RangeError(w[t])}function S(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function C(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+S((t=t.replace(b,".")).split("."),e).join(".")}function I(t){for(var e,n,r=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function A(t){return S(t,function(t){var e="";return t>65535&&(e+=O((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+O(t)}).join("")}function k(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function N(t,e,n){var r=0;for(t=n?x(t/f):t>>1,t+=x(t/e);t>_*p>>1;r+=l)t=x(t/_);return x(r+(_+1)*t/(t+h))}function P(t){var e,n,r,o,i,a,s,h,f,v,y,b=[],w=t.length,_=0,O=m,S=d;for((n=t.lastIndexOf(g))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&E("not-basic"),b.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<w;){for(i=_,a=1,s=l;o>=w&&E("invalid-input"),((h=(y=t.charCodeAt(o++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:l)>=l||h>x((u-_)/a))&&E("overflow"),_+=h*a,!(h<(f=s<=S?c:s>=S+p?p:s-S));s+=l)a>x(u/(v=l-f))&&E("overflow"),a*=v;S=N(_-i,e=b.length+1,0==i),x(_/e)>u-O&&E("overflow"),O+=x(_/e),_%=e,b.splice(_++,0,O)}return A(b)}function T(t){var e,n,r,o,i,a,s,h,f,v,y,b,w,_,S,C=[];for(b=(t=I(t)).length,e=m,n=0,i=d,a=0;a<b;++a)(y=t[a])<128&&C.push(O(y));for(r=o=C.length,o&&C.push(g);r<b;){for(s=u,a=0;a<b;++a)(y=t[a])>=e&&y<s&&(s=y);for(s-e>x((u-n)/(w=r+1))&&E("overflow"),n+=(s-e)*w,e=s,a=0;a<b;++a)if((y=t[a])<e&&++n>u&&E("overflow"),y==e){for(h=n,f=l;!(h<(v=f<=i?c:f>=i+p?p:f-i));f+=l)C.push(O(k(v+(S=h-v)%(_=l-v),0))),h=x(S/_);C.push(O(k(h,0))),i=N(n,w,r==o),n=0,++r}++n,++e}return C.join("")}if(a={version:"1.3.2",ucs2:{decode:I,encode:A},decode:P,encode:T,toASCII:function(t){return C(t,function(t){return y.test(t)?"xn--"+T(t):t})},toUnicode:function(t){return C(t,function(t){return v.test(t)?P(t.slice(4).toLowerCase()):t})}},r&&o)if(t.exports==r)o.exports=a;else for(s in a)a.hasOwnProperty(s)&&(r[s]=a[s]);else n.punycode=a}(commonjsGlobal)}),util$1={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}};function hasOwnProperty(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var decode=function(t,e,n,r){e=e||"&",n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var i=/\+/g;t=t.split(e);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=t.length;a>0&&s>a&&(s=a);for(var u=0;u<s;++u){var l,c,p,h,f=t[u].replace(i,"%20"),d=f.indexOf(n);d>=0?(l=f.substr(0,d),c=f.substr(d+1)):(l=f,c=""),p=decodeURIComponent(l),h=decodeURIComponent(c),hasOwnProperty(o,p)?Array.isArray(o[p])?o[p].push(h):o[p]=[o[p],h]:o[p]=h}return o},stringifyPrimitive=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},encode=function(t,e,n,r){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(r){var o=encodeURIComponent(stringifyPrimitive(r))+n;return Array.isArray(t[r])?t[r].map(function(t){return o+encodeURIComponent(stringifyPrimitive(t))}).join(e):o+encodeURIComponent(stringifyPrimitive(t[r]))}).join(e):r?encodeURIComponent(stringifyPrimitive(r))+n+encodeURIComponent(stringifyPrimitive(t)):""},querystring=createCommonjsModule(function(t,e){e.decode=e.parse=decode,e.encode=e.stringify=encode}),querystring_1=querystring.decode,querystring_2=querystring.parse,querystring_3=querystring.encode,querystring_4=querystring.stringify,parse=urlParse,format=urlFormat;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(t,e,n){if(t&&util$1.isObject(t)&&t instanceof Url)return t;var r=new Url;return r.parse(t,e,n),r}function urlFormat(t){return util$1.isString(t)&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)}Url.prototype.parse=function(t,e,n){if(!util$1.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),o=-1!==r&&r<t.indexOf("#")?"?":"#",i=t.split(o);i[0]=i[0].replace(/\\/g,"/");var a=t=i.join(o);if(a=a.trim(),!n&&1===t.split("#").length){var s=simplePathPattern.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?querystring.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=protocolPattern.exec(a);if(u){var l=(u=u[0]).toLowerCase();this.protocol=l,a=a.substr(u.length)}if(n||u||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c="//"===a.substr(0,2);!c||u&&hostlessProtocol[u]||(a=a.substr(2),this.slashes=!0)}if(!hostlessProtocol[u]&&(c||u&&!slashedProtocol[u])){for(var p,h,f=-1,d=0;d<hostEndingChars.length;d++)-1!==(m=a.indexOf(hostEndingChars[d]))&&(-1===f||m<f)&&(f=m);for(-1!==(h=-1===f?a.lastIndexOf("@"):a.lastIndexOf("@",f))&&(p=a.slice(0,h),a=a.slice(h+1),this.auth=decodeURIComponent(p)),f=-1,d=0;d<nonHostChars.length;d++){var m;-1!==(m=a.indexOf(nonHostChars[d]))&&(-1===f||m<f)&&(f=m)}-1===f&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var v=this.hostname.split(/\./),y=(d=0,v.length);d<y;d++){var b=v[d];if(b&&!b.match(hostnamePartPattern)){for(var w="",_=0,x=b.length;_<x;_++)b.charCodeAt(_)>127?w+="x":w+=b[_];if(!w.match(hostnamePartPattern)){var O=v.slice(0,d),E=v.slice(d+1),S=b.match(hostnamePartStart);S&&(O.push(S[1]),E.unshift(S[2])),E.length&&(a="/"+E.join(".")+a),this.hostname=O.join(".");break}}}this.hostname=this.hostname.length>hostnameMaxLen?"":this.hostname.toLowerCase(),g||(this.hostname=punycode.toASCII(this.hostname));var C=this.port?":"+this.port:"";this.host=(this.hostname||"")+C,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!unsafeProtocol[l])for(d=0,y=autoEscape.length;d<y;d++){var I=autoEscape[d];if(-1!==a.indexOf(I)){var A=encodeURIComponent(I);A===I&&(A=escape(I)),a=a.split(I).join(A)}}var k=a.indexOf("#");-1!==k&&(this.hash=a.substr(k),a=a.slice(0,k));var N=a.indexOf("?");return-1!==N?(this.search=a.substr(N),this.query=a.substr(N+1),e&&(this.query=querystring.parse(this.query)),a=a.slice(0,N)):e&&(this.search="",this.query={}),a&&(this.pathname=a),slashedProtocol[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(C=this.pathname||"")+(this.search||"")),this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&util$1.isObject(this.query)&&Object.keys(this.query).length&&(i=querystring.stringify(this.query));var a=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||slashedProtocol[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+r},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if(util$1.isString(t)){var e=new Url;e.parse(t,!1,!0),t=e}for(var n=new Url,r=Object.keys(this),o=0;o<r.length;o++){var i=r[o];n[i]=this[i]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),s=0;s<a.length;s++){var u=a[s];"protocol"!==u&&(n[u]=t[u])}return slashedProtocol[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!slashedProtocol[t.protocol]){for(var l=Object.keys(t),c=0;c<l.length;c++){var p=l[c];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||hostlessProtocol[t.protocol])n.pathname=t.pathname;else{for(var h=(t.pathname||"").split("/");h.length&&!(t.host=h.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}return n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,(n.pathname||n.search)&&(n.path=(n.pathname||"")+(n.search||"")),n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var f=n.pathname&&"/"===n.pathname.charAt(0),d=t.host||t.pathname&&"/"===t.pathname.charAt(0),m=d||f||n.host&&t.pathname,g=m,v=n.pathname&&n.pathname.split("/")||[],y=(h=t.pathname&&t.pathname.split("/")||[],n.protocol&&!slashedProtocol[n.protocol]);if(y&&(n.hostname="",n.port=null,n.host&&(""===v[0]?v[0]=n.host:v.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===h[0]?h[0]=t.host:h.unshift(t.host)),t.host=null),m=m&&(""===h[0]||""===v[0])),d)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,v=h;else if(h.length)v||(v=[]),v.pop(),v=v.concat(h),n.search=t.search,n.query=t.query;else if(!util$1.isNullOrUndefined(t.search))return y&&(n.hostname=n.host=v.shift(),(O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift())),n.search=t.search,n.query=t.query,util$1.isNull(n.pathname)&&util$1.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!v.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var b=v.slice(-1)[0],w=(n.host||t.host||v.length>1)&&("."===b||".."===b)||""===b,_=0,x=v.length;x>=0;x--)"."===(b=v[x])?v.splice(x,1):".."===b?(v.splice(x,1),_++):_&&(v.splice(x,1),_--);if(!m&&!g)for(;_--;_)v.unshift("..");!m||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),w&&"/"!==v.join("/").substr(-1)&&v.push("");var O,E=""===v[0]||v[0]&&"/"===v[0].charAt(0);return y&&(n.hostname=n.host=E?"":v.length?v.shift():"",(O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift())),(m=m||n.host&&v.length)&&!E&&v.unshift(""),v.length?n.pathname=v.join("/"):(n.pathname=null,n.path=null),util$1.isNull(n.pathname)&&util$1.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},Url.prototype.parseHost=function(){var t=this.host,e=portPattern.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var aspromise=asPromise;function asPromise(t,e){for(var n=new Array(arguments.length-1),r=0,o=2,i=!0;o<arguments.length;)n[r++]=arguments[o++];return new Promise(function(o,a){n[r]=function(t){if(i)if(i=!1,t)a(t);else{for(var e=new Array(arguments.length-1),n=0;n<e.length;)e[n++]=arguments[n];o.apply(null,e)}};try{t.apply(e||null,n)}catch(t){i&&(i=!1,a(t))}})}var base64_1=createCommonjsModule(function(t,e){var n=e;n.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&"="===t.charAt(e);)++n;return Math.ceil(3*t.length)/4-n};for(var r=new Array(64),o=new Array(123),i=0;i<64;)o[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;n.encode=function(t,e,n){for(var o,i=null,a=[],s=0,u=0;e<n;){var l=t[e++];switch(u){case 0:a[s++]=r[l>>2],o=(3&l)<<4,u=1;break;case 1:a[s++]=r[o|l>>4],o=(15&l)<<2,u=2;break;case 2:a[s++]=r[o|l>>6],a[s++]=r[63&l],u=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return u&&(a[s++]=r[o],a[s++]=61,1===u&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))},n.decode=function(t,e,n){for(var r,i=n,a=0,s=0;s<t.length;){var u=t.charCodeAt(s++);if(61===u&&a>1)break;if(void 0===(u=o[u]))throw Error("invalid encoding");switch(a){case 0:r=u,a=1;break;case 1:e[n++]=r<<2|(48&u)>>4,r=u,a=2;break;case 2:e[n++]=(15&r)<<4|(60&u)>>2,r=u,a=3;break;case 3:e[n++]=(3&r)<<6|u,a=0}}if(1===a)throw Error("invalid encoding");return n-i},n.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}}),eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},EventEmitter.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this},EventEmitter.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this};var float_1=factory(factory);function factory(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),r=128===n[3];function o(t,r,o){e[0]=t,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3]}function i(t,r,o){e[0]=t,r[o]=n[3],r[o+1]=n[2],r[o+2]=n[1],r[o+3]=n[0]}function a(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],e[0]}function s(t,r){return n[3]=t[r],n[2]=t[r+1],n[1]=t[r+2],n[0]=t[r+3],e[0]}t.writeFloatLE=r?o:i,t.writeFloatBE=r?i:o,t.readFloatLE=r?a:s,t.readFloatBE=r?s:a}():function(){function e(t,e,n,r){var o=e<0?1:0;if(o&&(e=-e),0===e)t(1/e>0?0:2147483648,n,r);else if(isNaN(e))t(2143289344,n,r);else if(e>3.4028234663852886e38)t((o<<31|2139095040)>>>0,n,r);else if(e<1.1754943508222875e-38)t((o<<31|Math.round(e/1.401298464324817e-45))>>>0,n,r);else{var i=Math.floor(Math.log(e)/Math.LN2);t((o<<31|i+127<<23|8388607&Math.round(e*Math.pow(2,-i)*8388608))>>>0,n,r)}}function n(t,e,n){var r=t(e,n),o=2*(r>>31)+1,i=r>>>23&255,a=8388607&r;return 255===i?a?NaN:o*(1/0):0===i?1.401298464324817e-45*o*a:o*Math.pow(2,i-150)*(a+8388608)}t.writeFloatLE=e.bind(null,writeUintLE),t.writeFloatBE=e.bind(null,writeUintBE),t.readFloatLE=n.bind(null,readUintLE),t.readFloatBE=n.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),r=128===n[7];function o(t,r,o){e[0]=t,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3],r[o+4]=n[4],r[o+5]=n[5],r[o+6]=n[6],r[o+7]=n[7]}function i(t,r,o){e[0]=t,r[o]=n[7],r[o+1]=n[6],r[o+2]=n[5],r[o+3]=n[4],r[o+4]=n[3],r[o+5]=n[2],r[o+6]=n[1],r[o+7]=n[0]}function a(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],n[4]=t[r+4],n[5]=t[r+5],n[6]=t[r+6],n[7]=t[r+7],e[0]}function s(t,r){return n[7]=t[r],n[6]=t[r+1],n[5]=t[r+2],n[4]=t[r+3],n[3]=t[r+4],n[2]=t[r+5],n[1]=t[r+6],n[0]=t[r+7],e[0]}t.writeDoubleLE=r?o:i,t.writeDoubleBE=r?i:o,t.readDoubleLE=r?a:s,t.readDoubleBE=r?s:a}():function(){function e(t,e,n,r,o,i){var a=r<0?1:0;if(a&&(r=-r),0===r)t(0,o,i+e),t(1/r>0?0:2147483648,o,i+n);else if(isNaN(r))t(0,o,i+e),t(2146959360,o,i+n);else if(r>1.7976931348623157e308)t(0,o,i+e),t((a<<31|2146435072)>>>0,o,i+n);else{var s;if(r<2.2250738585072014e-308)t((s=r/5e-324)>>>0,o,i+e),t((a<<31|s/4294967296)>>>0,o,i+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),t(4503599627370496*(s=r*Math.pow(2,-u))>>>0,o,i+e),t((a<<31|u+1023<<20|1048576*s&1048575)>>>0,o,i+n)}}}function n(t,e,n,r,o){var i=t(r,o+e),a=t(r,o+n),s=2*(a>>31)+1,u=a>>>20&2047,l=4294967296*(1048575&a)+i;return 2047===u?l?NaN:s*(1/0):0===u?5e-324*s*l:s*Math.pow(2,u-1075)*(l+4503599627370496)}t.writeDoubleLE=e.bind(null,writeUintLE,0,4),t.writeDoubleBE=e.bind(null,writeUintBE,4,0),t.readDoubleLE=n.bind(null,readUintLE,0,4),t.readDoubleBE=n.bind(null,readUintBE,4,0)}(),t}function writeUintLE(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function writeUintBE(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function readUintLE(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function readUintBE(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod$$1=eval("quire".replace(/^/,"re"))(moduleName);if(mod$$1&&(mod$$1.length||Object.keys(mod$$1).length))return mod$$1}catch(t){}return null}var utf8_1=createCommonjsModule(function(t,e){var n=e;n.length=function(t){for(var e=0,n=0,r=0;r<t.length;++r)(n=t.charCodeAt(r))<128?e+=1:n<2048?e+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e},n.read=function(t,e,n){if(n-e<1)return"";for(var r,o=null,i=[],a=0;e<n;)(r=t[e++])<128?i[a++]=r:r>191&&r<224?i[a++]=(31&r)<<6|63&t[e++]:r>239&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,i[a++]=55296+(r>>10),i[a++]=56320+(1023&r)):i[a++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},n.write=function(t,e,n){for(var r,o,i=n,a=0;a<t.length;++a)(r=t.charCodeAt(a))<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(o=t.charCodeAt(a+1)))?(++a,e[n++]=(r=65536+((1023&r)<<10)+(1023&o))>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128);return n-i}}),pool_1=pool;function pool(t,e,n){var r=n||8192,o=r>>>1,i=null,a=r;return function(n){if(n<1||n>o)return t(n);a+n>r&&(i=t(r),a=0);var s=e.call(i,a,a+=n);return 7&a&&(a=1+(7|a)),s}}var longbits=LongBits;function LongBits(t,e){this.lo=t>>>0,this.hi=e>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(t){if(0===t)return zero;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new LongBits(n,r)},LongBits.from=function(t){if("number"==typeof t)return LongBits.fromNumber(t);if(minimal.isString(t)){if(!minimal.Long)return LongBits.fromNumber(parseInt(t,10));t=minimal.Long.fromString(t)}return t.low||t.high?new LongBits(t.low>>>0,t.high>>>0):zero},LongBits.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(t){return minimal.Long?new minimal.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(t){return t===zeroHash?zero:new LongBits((charCodeAt.call(t,0)|charCodeAt.call(t,1)<<8|charCodeAt.call(t,2)<<16|charCodeAt.call(t,3)<<24)>>>0,(charCodeAt.call(t,4)|charCodeAt.call(t,5)<<8|charCodeAt.call(t,6)<<16|charCodeAt.call(t,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},LongBits.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},LongBits.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10};var minimal=createCommonjsModule(function(t,e){var n=e;function r(t,e,n){for(var r=Object.keys(e),o=0;o<r.length;++o)void 0!==t[r[o]]&&n||(t[r[o]]=e[r[o]]);return t}function o(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}n.asPromise=aspromise,n.base64=base64_1,n.EventEmitter=eventemitter,n.float=float_1,n.inquire=inquire_1,n.utf8=utf8_1,n.pool=pool_1,n.LongBits=longbits,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isNode=Boolean(commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),n.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},n.isString=function(t){return"string"==typeof t||t instanceof String},n.isObject=function(t){return t&&"object"==typeof t},n.isset=n.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},n.Buffer=function(){try{var t=n.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(t){return"number"==typeof t?n.Buffer?n._Buffer_allocUnsafe(t):new n.Array(t):n.Buffer?n._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=commonjsGlobal.dcodeIO&&commonjsGlobal.dcodeIO.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(t){return t?n.LongBits.from(t).toHash():n.LongBits.zeroHash},n.longFromHash=function(t,e){var r=n.LongBits.fromHash(t);return n.Long?n.Long.fromBits(r.lo,r.hi,e):r.toNumber(Boolean(e))},n.merge=r,n.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},n.newError=o,n.ProtocolError=o("ProtocolError"),n.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(1===e[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},n.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var t=n.Buffer;t?(n._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n)},n._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}),writer=Writer,BufferWriter,LongBits$1=minimal.LongBits,base64=minimal.base64,utf8=minimal.utf8;function Op(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function noop(){}function State(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Writer(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}function writeByte(t,e,n){e[n]=255&t}function writeVarint32(t,e,n){for(;t>127;)e[n++]=127&t|128,t>>>=7;e[n]=t}function VarintOp(t,e){this.len=t,this.next=void 0,this.val=e}function writeVarint64(t,e,n){for(;t.hi;)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function writeFixed32(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}Writer.create=minimal.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer},Writer.alloc=function(t){return new minimal.Array(t)},minimal.Array!==Array&&(Writer.alloc=minimal.pool(Writer.alloc,minimal.Array.prototype.subarray)),Writer.prototype._push=function(t,e,n){return this.tail=this.tail.next=new Op(t,e,n),this.len+=e,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new VarintOp((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},Writer.prototype.int32=function(t){return t<0?this._push(writeVarint64,10,LongBits$1.fromNumber(t)):this.uint32(t)},Writer.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},Writer.prototype.uint64=function(t){var e=LongBits$1.from(t);return this._push(writeVarint64,e.length(),e)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(t){var e=LongBits$1.from(t).zzEncode();return this._push(writeVarint64,e.length(),e)},Writer.prototype.bool=function(t){return this._push(writeByte,1,t?1:0)},Writer.prototype.fixed32=function(t){return this._push(writeFixed32,4,t>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(t){var e=LongBits$1.from(t);return this._push(writeFixed32,4,e.lo)._push(writeFixed32,4,e.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(t){return this._push(minimal.float.writeFloatLE,4,t)},Writer.prototype.double=function(t){return this._push(minimal.float.writeDoubleLE,8,t)};var writeBytes=minimal.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};Writer.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(writeByte,1,0);if(minimal.isString(t)){var n=Writer.alloc(e=base64.length(t));base64.decode(t,n,0),t=n}return this.uint32(e)._push(writeBytes,e,t)},Writer.prototype.string=function(t){var e=utf8.length(t);return e?this.uint32(e)._push(utf8.write,e,t):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},Writer.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},Writer._configure=function(t){BufferWriter=t};var writer_buffer=BufferWriter$1;(BufferWriter$1.prototype=Object.create(writer.prototype)).constructor=BufferWriter$1;var Buffer=minimal.Buffer;function BufferWriter$1(){writer.call(this)}BufferWriter$1.alloc=function(t){return(BufferWriter$1.alloc=minimal._Buffer_allocUnsafe)(t)};var writeBytesBuffer=Buffer&&Buffer.prototype instanceof Uint8Array&&"set"===Buffer.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]};function writeStringBuffer(t,e,n){t.length<40?minimal.utf8.write(t,e,n):e.utf8Write(t,n)}BufferWriter$1.prototype.bytes=function(t){minimal.isString(t)&&(t=minimal._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(writeBytesBuffer,e,t),this},BufferWriter$1.prototype.string=function(t){var e=Buffer.byteLength(t);return this.uint32(e),e&&this._push(writeStringBuffer,e,t),this};var reader=Reader,BufferReader,LongBits$2=minimal.LongBits,utf8$1=minimal.utf8;function indexOutOfRange(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Reader(t){this.buf=t,this.pos=0,this.len=t.length}var create_array="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new Reader(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new Reader(t);throw Error("illegal buffer")},e;function readLongVarint(){var t=new LongBits$2(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function readFixed32_end(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$2(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=minimal.Buffer?function(t){return(Reader.create=function(t){return minimal.Buffer.isBuffer(t)?new BufferReader(t):create_array(t)})(t)}:create_array,Reader.prototype._slice=minimal.Array.prototype.subarray||minimal.Array.prototype.slice,Reader.prototype.uint32=(e=4294967295,function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var t=minimal.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var t=minimal.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},Reader.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw indexOutOfRange(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)},Reader.prototype.string=function(){var t=this.bytes();return utf8$1.read(t,0,t.length)},Reader.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw indexOutOfRange(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},Reader._configure=function(t){BufferReader=t;var e=minimal.Long?"toLong":"toNumber";minimal.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader$1;function BufferReader$1(t){reader.call(this,t)}(BufferReader$1.prototype=Object.create(reader.prototype)).constructor=BufferReader$1,minimal.Buffer&&(BufferReader$1.prototype._slice=minimal.Buffer.prototype.slice),BufferReader$1.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len))};var service=Service;function Service(t,e,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");minimal.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n)}(Service.prototype=Object.create(minimal.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function t(e,n,r,o,i){if(!o)throw TypeError("request must be specified");var a=this;if(!i)return minimal.asPromise(t,a,e,n,r,o);if(a.rpcImpl)try{return a.rpcImpl(e,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(t,n){if(t)return a.emit("error",t,e),i(t);if(null!==n){if(!(n instanceof r))try{n=r[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){return a.emit("error",t,e),i(t)}return a.emit("data",n,e),i(null,n)}a.end(!0)})}catch(t){return a.emit("error",t,e),void setTimeout(function(){i(t)},0)}else setTimeout(function(){i(Error("already ended"))},0)},Service.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var rpc_1=createCommonjsModule(function(t,e){e.Service=service}),roots={},indexMinimal=createCommonjsModule(function(t,e){var n=e;function r(){n.Reader._configure(n.BufferReader),n.util._configure()}n.build="minimal",n.Writer=writer,n.BufferWriter=writer_buffer,n.Reader=reader,n.BufferReader=reader_buffer,n.util=minimal,n.rpc=rpc_1,n.roots=roots,n.configure=r,n.Writer._configure(n.BufferWriter),r()}),minimal$1=indexMinimal,minimal_1=minimal$1.roots,minimal_2=minimal$1.Reader,minimal_3=minimal$1.util,$Reader=minimal$1.Reader,$util=minimal$1.util,$root=minimal$1.roots.default||(minimal$1.roots.default={});$root.tensorflow=function(){var t,e,n={};return n.Any=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.typeUrl="",t.prototype.value=$util.newBuffer([]),t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.Any;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.typeUrl=t.string();break;case 2:r.value=t.bytes();break;default:t.skipType(7&o)}}return r},t}(),n.DataType=(t={},(e=Object.create(t))[t[0]="DT_INVALID"]=0,e[t[1]="DT_FLOAT"]=1,e[t[2]="DT_DOUBLE"]=2,e[t[3]="DT_INT32"]=3,e[t[4]="DT_UINT8"]=4,e[t[5]="DT_INT16"]=5,e[t[6]="DT_INT8"]=6,e[t[7]="DT_STRING"]=7,e[t[8]="DT_COMPLEX64"]=8,e[t[9]="DT_INT64"]=9,e[t[10]="DT_BOOL"]=10,e[t[11]="DT_QINT8"]=11,e[t[12]="DT_QUINT8"]=12,e[t[13]="DT_QINT32"]=13,e[t[14]="DT_BFLOAT16"]=14,e[t[101]="DT_FLOAT_REF"]=101,e[t[102]="DT_DOUBLE_REF"]=102,e[t[103]="DT_INT32_REF"]=103,e[t[104]="DT_UINT8_REF"]=104,e[t[105]="DT_INT16_REF"]=105,e[t[106]="DT_INT8_REF"]=106,e[t[107]="DT_STRING_REF"]=107,e[t[108]="DT_COMPLEX64_REF"]=108,e[t[109]="DT_INT64_REF"]=109,e[t[110]="DT_BOOL_REF"]=110,e[t[111]="DT_QINT8_REF"]=111,e[t[112]="DT_QUINT8_REF"]=112,e[t[113]="DT_QINT32_REF"]=113,e[t[114]="DT_BFLOAT16_REF"]=114,e),n.TensorShape=function(){function t(t){if(this.dim=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dim=$util.emptyArray,t.prototype.unknownRank=!1,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.TensorShape;t.pos<n;){var o=t.uint32();switch(o>>>3){case 2:r.dim&&r.dim.length||(r.dim=[]),r.dim.push($root.tensorflow.TensorShape.Dim.decode(t,t.uint32()));break;case 3:r.unknownRank=t.bool();break;default:t.skipType(7&o)}}return r},t.Dim=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.size=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.name="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.TensorShape.Dim;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.size=t.int64();break;case 2:r.name=t.string();break;default:t.skipType(7&o)}}return r},t}(),t}(),n.Tensor=function(){function t(t){if(this.floatVal=[],this.doubleVal=[],this.intVal=[],this.stringVal=[],this.scomplexVal=[],this.int64Val=[],this.boolVal=[],this.uint32Val=[],this.uint64Val=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dtype=0,t.prototype.tensorShape=null,t.prototype.versionNumber=0,t.prototype.tensorContent=$util.newBuffer([]),t.prototype.floatVal=$util.emptyArray,t.prototype.doubleVal=$util.emptyArray,t.prototype.intVal=$util.emptyArray,t.prototype.stringVal=$util.emptyArray,t.prototype.scomplexVal=$util.emptyArray,t.prototype.int64Val=$util.emptyArray,t.prototype.boolVal=$util.emptyArray,t.prototype.uint32Val=$util.emptyArray,t.prototype.uint64Val=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.Tensor;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.dtype=t.int32();break;case 2:r.tensorShape=$root.tensorflow.TensorShape.decode(t,t.uint32());break;case 3:r.versionNumber=t.int32();break;case 4:r.tensorContent=t.bytes();break;case 5:if(r.floatVal&&r.floatVal.length||(r.floatVal=[]),2==(7&o))for(var i=t.uint32()+t.pos;t.pos<i;)r.floatVal.push(t.float());else r.floatVal.push(t.float());break;case 6:if(r.doubleVal&&r.doubleVal.length||(r.doubleVal=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.doubleVal.push(t.double());else r.doubleVal.push(t.double());break;case 7:if(r.intVal&&r.intVal.length||(r.intVal=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.intVal.push(t.int32());else r.intVal.push(t.int32());break;case 8:r.stringVal&&r.stringVal.length||(r.stringVal=[]),r.stringVal.push(t.bytes());break;case 9:if(r.scomplexVal&&r.scomplexVal.length||(r.scomplexVal=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.scomplexVal.push(t.float());else r.scomplexVal.push(t.float());break;case 10:if(r.int64Val&&r.int64Val.length||(r.int64Val=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.int64Val.push(t.int64());else r.int64Val.push(t.int64());break;case 11:if(r.boolVal&&r.boolVal.length||(r.boolVal=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.boolVal.push(t.bool());else r.boolVal.push(t.bool());break;case 16:if(r.uint32Val&&r.uint32Val.length||(r.uint32Val=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.uint32Val.push(t.uint32());else r.uint32Val.push(t.uint32());break;case 17:if(r.uint64Val&&r.uint64Val.length||(r.uint64Val=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.uint64Val.push(t.uint64());else r.uint64Val.push(t.uint64());break;default:t.skipType(7&o)}}return r},t}(),n.AttrValue=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.list=null,t.prototype.s=$util.newBuffer([]),t.prototype.i=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.f=0,t.prototype.b=!1,t.prototype.type=0,t.prototype.shape=null,t.prototype.tensor=null,t.prototype.placeholder="",t.prototype.func=null,Object.defineProperty(t.prototype,"value",{get:$util.oneOfGetter(e=["list","s","i","f","b","type","shape","tensor","placeholder","func"]),set:$util.oneOfSetter(e)}),t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.AttrValue;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.list=$root.tensorflow.AttrValue.ListValue.decode(t,t.uint32());break;case 2:r.s=t.bytes();break;case 3:r.i=t.int64();break;case 4:r.f=t.float();break;case 5:r.b=t.bool();break;case 6:r.type=t.int32();break;case 7:r.shape=$root.tensorflow.TensorShape.decode(t,t.uint32());break;case 8:r.tensor=$root.tensorflow.Tensor.decode(t,t.uint32());break;case 9:r.placeholder=t.string();break;case 10:r.func=$root.tensorflow.NameAttrList.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},t.ListValue=function(){function t(t){if(this.s=[],this.i=[],this.f=[],this.b=[],this.type=[],this.shape=[],this.tensor=[],this.func=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.s=$util.emptyArray,t.prototype.i=$util.emptyArray,t.prototype.f=$util.emptyArray,t.prototype.b=$util.emptyArray,t.prototype.type=$util.emptyArray,t.prototype.shape=$util.emptyArray,t.prototype.tensor=$util.emptyArray,t.prototype.func=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.AttrValue.ListValue;t.pos<n;){var o=t.uint32();switch(o>>>3){case 2:r.s&&r.s.length||(r.s=[]),r.s.push(t.bytes());break;case 3:if(r.i&&r.i.length||(r.i=[]),2==(7&o))for(var i=t.uint32()+t.pos;t.pos<i;)r.i.push(t.int64());else r.i.push(t.int64());break;case 4:if(r.f&&r.f.length||(r.f=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.f.push(t.float());else r.f.push(t.float());break;case 5:if(r.b&&r.b.length||(r.b=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.b.push(t.bool());else r.b.push(t.bool());break;case 6:if(r.type&&r.type.length||(r.type=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.type.push(t.int32());else r.type.push(t.int32());break;case 7:r.shape&&r.shape.length||(r.shape=[]),r.shape.push($root.tensorflow.TensorShape.decode(t,t.uint32()));break;case 8:r.tensor&&r.tensor.length||(r.tensor=[]),r.tensor.push($root.tensorflow.Tensor.decode(t,t.uint32()));break;case 9:r.func&&r.func.length||(r.func=[]),r.func.push($root.tensorflow.NameAttrList.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t}(),t}(),n.NameAttrList=function(){function t(t){if(this.attr={},t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.attr=$util.emptyObject,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n,r=void 0===e?t.len:t.pos+e,o=new $root.tensorflow.NameAttrList;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:o.name=t.string();break;case 2:t.skip().pos++,o.attr===$util.emptyObject&&(o.attr={}),n=t.string(),t.pos++,o.attr[n]=$root.tensorflow.AttrValue.decode(t,t.uint32());break;default:t.skipType(7&i)}}return o},t}(),n.NodeDef=function(){function t(t){if(this.input=[],this.attr={},t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.op="",t.prototype.input=$util.emptyArray,t.prototype.device="",t.prototype.attr=$util.emptyObject,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n,r=void 0===e?t.len:t.pos+e,o=new $root.tensorflow.NodeDef;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:o.name=t.string();break;case 2:o.op=t.string();break;case 3:o.input&&o.input.length||(o.input=[]),o.input.push(t.string());break;case 4:o.device=t.string();break;case 5:t.skip().pos++,o.attr===$util.emptyObject&&(o.attr={}),n=t.string(),t.pos++,o.attr[n]=$root.tensorflow.AttrValue.decode(t,t.uint32());break;default:t.skipType(7&i)}}return o},t}(),n.VersionDef=function(){function t(t){if(this.badConsumers=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.producer=0,t.prototype.minConsumer=0,t.prototype.badConsumers=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.VersionDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.producer=t.int32();break;case 2:r.minConsumer=t.int32();break;case 3:if(r.badConsumers&&r.badConsumers.length||(r.badConsumers=[]),2==(7&o))for(var i=t.uint32()+t.pos;t.pos<i;)r.badConsumers.push(t.int32());else r.badConsumers.push(t.int32());break;default:t.skipType(7&o)}}return r},t}(),n.GraphDef=function(){function t(t){if(this.node=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.node=$util.emptyArray,t.prototype.versions=null,t.prototype.library=null,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.GraphDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.node&&r.node.length||(r.node=[]),r.node.push($root.tensorflow.NodeDef.decode(t,t.uint32()));break;case 4:r.versions=$root.tensorflow.VersionDef.decode(t,t.uint32());break;case 2:r.library=$root.tensorflow.FunctionDefLibrary.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},t}(),n.CollectionDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.nodeList=null,t.prototype.bytesList=null,t.prototype.int64List=null,t.prototype.floatList=null,t.prototype.anyList=null,Object.defineProperty(t.prototype,"kind",{get:$util.oneOfGetter(e=["nodeList","bytesList","int64List","floatList","anyList"]),set:$util.oneOfSetter(e)}),t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.nodeList=$root.tensorflow.CollectionDef.NodeList.decode(t,t.uint32());break;case 2:r.bytesList=$root.tensorflow.CollectionDef.BytesList.decode(t,t.uint32());break;case 3:r.int64List=$root.tensorflow.CollectionDef.Int64List.decode(t,t.uint32());break;case 4:r.floatList=$root.tensorflow.CollectionDef.FloatList.decode(t,t.uint32());break;case 5:r.anyList=$root.tensorflow.CollectionDef.AnyList.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},t.NodeList=function(){function t(t){if(this.value=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.value=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef.NodeList;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.value&&r.value.length||(r.value=[]),r.value.push(t.string());break;default:t.skipType(7&o)}}return r},t}(),t.BytesList=function(){function t(t){if(this.value=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.value=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef.BytesList;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.value&&r.value.length||(r.value=[]),r.value.push(t.bytes());break;default:t.skipType(7&o)}}return r},t}(),t.Int64List=function(){function t(t){if(this.value=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.value=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef.Int64List;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:if(r.value&&r.value.length||(r.value=[]),2==(7&o))for(var i=t.uint32()+t.pos;t.pos<i;)r.value.push(t.int64());else r.value.push(t.int64());break;default:t.skipType(7&o)}}return r},t}(),t.FloatList=function(){function t(t){if(this.value=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.value=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef.FloatList;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:if(r.value&&r.value.length||(r.value=[]),2==(7&o))for(var i=t.uint32()+t.pos;t.pos<i;)r.value.push(t.float());else r.value.push(t.float());break;default:t.skipType(7&o)}}return r},t}(),t.AnyList=function(){function t(t){if(this.value=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.value=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef.AnyList;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.value&&r.value.length||(r.value=[]),r.value.push($root.tensorflow.Any.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t}(),t}(),n.SaverDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e,n;return t.prototype.filenameTensorName="",t.prototype.saveTensorName="",t.prototype.restoreOpName="",t.prototype.maxToKeep=0,t.prototype.sharded=!1,t.prototype.keepCheckpointEveryNHours=0,t.prototype.version=0,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.SaverDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.filenameTensorName=t.string();break;case 2:r.saveTensorName=t.string();break;case 3:r.restoreOpName=t.string();break;case 4:r.maxToKeep=t.int32();break;case 5:r.sharded=t.bool();break;case 6:r.keepCheckpointEveryNHours=t.float();break;case 7:r.version=t.int32();break;default:t.skipType(7&o)}}return r},t.CheckpointFormatVersion=(e={},(n=Object.create(e))[e[0]="LEGACY"]=0,n[e[1]="V1"]=1,n[e[2]="V2"]=2,n),t}(),n.TensorInfo=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.name="",t.prototype.cooSparse=null,t.prototype.dtype=0,t.prototype.tensorShape=null,Object.defineProperty(t.prototype,"encoding",{get:$util.oneOfGetter(e=["name","cooSparse"]),set:$util.oneOfSetter(e)}),t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.TensorInfo;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 4:r.cooSparse=$root.tensorflow.TensorInfo.CooSparse.decode(t,t.uint32());break;case 2:r.dtype=t.int32();break;case 3:r.tensorShape=$root.tensorflow.TensorShape.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},t.CooSparse=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.valuesTensorName="",t.prototype.indicesTensorName="",t.prototype.denseShapeTensorName="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.TensorInfo.CooSparse;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.valuesTensorName=t.string();break;case 2:r.indicesTensorName=t.string();break;case 3:r.denseShapeTensorName=t.string();break;default:t.skipType(7&o)}}return r},t}(),t}(),n.SignatureDef=function(){function t(t){if(this.inputs={},this.outputs={},t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.inputs=$util.emptyObject,t.prototype.outputs=$util.emptyObject,t.prototype.methodName="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n,r=void 0===e?t.len:t.pos+e,o=new $root.tensorflow.SignatureDef;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:t.skip().pos++,o.inputs===$util.emptyObject&&(o.inputs={}),n=t.string(),t.pos++,o.inputs[n]=$root.tensorflow.TensorInfo.decode(t,t.uint32());break;case 2:t.skip().pos++,o.outputs===$util.emptyObject&&(o.outputs={}),n=t.string(),t.pos++,o.outputs[n]=$root.tensorflow.TensorInfo.decode(t,t.uint32());break;case 3:o.methodName=t.string();break;default:t.skipType(7&i)}}return o},t}(),n.AssetFileDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.tensorInfo=null,t.prototype.filename="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.AssetFileDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.tensorInfo=$root.tensorflow.TensorInfo.decode(t,t.uint32());break;case 2:r.filename=t.string();break;default:t.skipType(7&o)}}return r},t}(),n.OpDef=function(){function t(t){if(this.inputArg=[],this.outputArg=[],this.attr=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.inputArg=$util.emptyArray,t.prototype.outputArg=$util.emptyArray,t.prototype.attr=$util.emptyArray,t.prototype.deprecation=null,t.prototype.summary="",t.prototype.description="",t.prototype.isCommutative=!1,t.prototype.isAggregate=!1,t.prototype.isStateful=!1,t.prototype.allowsUninitializedInput=!1,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.OpDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 2:r.inputArg&&r.inputArg.length||(r.inputArg=[]),r.inputArg.push($root.tensorflow.OpDef.ArgDef.decode(t,t.uint32()));break;case 3:r.outputArg&&r.outputArg.length||(r.outputArg=[]),r.outputArg.push($root.tensorflow.OpDef.ArgDef.decode(t,t.uint32()));break;case 4:r.attr&&r.attr.length||(r.attr=[]),r.attr.push($root.tensorflow.OpDef.AttrDef.decode(t,t.uint32()));break;case 8:r.deprecation=$root.tensorflow.OpDef.OpDeprecation.decode(t,t.uint32());break;case 5:r.summary=t.string();break;case 6:r.description=t.string();break;case 18:r.isCommutative=t.bool();break;case 16:r.isAggregate=t.bool();break;case 17:r.isStateful=t.bool();break;case 19:r.allowsUninitializedInput=t.bool();break;default:t.skipType(7&o)}}return r},t.ArgDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.description="",t.prototype.type=0,t.prototype.typeAttr="",t.prototype.numberAttr="",t.prototype.typeListAttr="",t.prototype.isRef=!1,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.OpDef.ArgDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 2:r.description=t.string();break;case 3:r.type=t.int32();break;case 4:r.typeAttr=t.string();break;case 5:r.numberAttr=t.string();break;case 6:r.typeListAttr=t.string();break;case 16:r.isRef=t.bool();break;default:t.skipType(7&o)}}return r},t}(),t.AttrDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.type="",t.prototype.defaultValue=null,t.prototype.description="",t.prototype.hasMinimum=!1,t.prototype.minimum=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.allowedValues=null,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.OpDef.AttrDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 2:r.type=t.string();break;case 3:r.defaultValue=$root.tensorflow.AttrValue.decode(t,t.uint32());break;case 4:r.description=t.string();break;case 5:r.hasMinimum=t.bool();break;case 6:r.minimum=t.int64();break;case 7:r.allowedValues=$root.tensorflow.AttrValue.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},t}(),t.OpDeprecation=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.version=0,t.prototype.explanation="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.OpDef.OpDeprecation;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.version=t.int32();break;case 2:r.explanation=t.string();break;default:t.skipType(7&o)}}return r},t}(),t}(),n.OpList=function(){function t(t){if(this.op=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.op=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.OpList;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.op&&r.op.length||(r.op=[]),r.op.push($root.tensorflow.OpDef.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t}(),n.MetaGraphDef=function(){function t(t){if(this.collectionDef={},this.signatureDef={},this.assetFileDef=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.metaInfoDef=null,t.prototype.graphDef=null,t.prototype.saverDef=null,t.prototype.collectionDef=$util.emptyObject,t.prototype.signatureDef=$util.emptyObject,t.prototype.assetFileDef=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n,r=void 0===e?t.len:t.pos+e,o=new $root.tensorflow.MetaGraphDef;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:o.metaInfoDef=$root.tensorflow.MetaGraphDef.MetaInfoDef.decode(t,t.uint32());break;case 2:o.graphDef=$root.tensorflow.GraphDef.decode(t,t.uint32());break;case 3:o.saverDef=$root.tensorflow.SaverDef.decode(t,t.uint32());break;case 4:t.skip().pos++,o.collectionDef===$util.emptyObject&&(o.collectionDef={}),n=t.string(),t.pos++,o.collectionDef[n]=$root.tensorflow.CollectionDef.decode(t,t.uint32());break;case 5:t.skip().pos++,o.signatureDef===$util.emptyObject&&(o.signatureDef={}),n=t.string(),t.pos++,o.signatureDef[n]=$root.tensorflow.SignatureDef.decode(t,t.uint32());break;case 6:o.assetFileDef&&o.assetFileDef.length||(o.assetFileDef=[]),o.assetFileDef.push($root.tensorflow.AssetFileDef.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return o},t.MetaInfoDef=function(){function t(t){if(this.tags=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.metaGraphVersion="",t.prototype.strippedOpList=null,t.prototype.anyInfo=null,t.prototype.tags=$util.emptyArray,t.prototype.tensorflowVersion="",t.prototype.tensorflowGitVersion="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.MetaGraphDef.MetaInfoDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.metaGraphVersion=t.string();break;case 2:r.strippedOpList=$root.tensorflow.OpList.decode(t,t.uint32());break;case 3:r.anyInfo=$root.tensorflow.Any.decode(t,t.uint32());break;case 4:r.tags&&r.tags.length||(r.tags=[]),r.tags.push(t.string());break;case 5:r.tensorflowVersion=t.string();break;case 6:r.tensorflowGitVersion=t.string();break;default:t.skipType(7&o)}}return r},t}(),t}(),n.SavedModel=function(){function t(t){if(this.metaGraphs=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.savedModelSchemaVersion=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.metaGraphs=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.SavedModel;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.savedModelSchemaVersion=t.int64();break;case 2:r.metaGraphs&&r.metaGraphs.length||(r.metaGraphs=[]),r.metaGraphs.push($root.tensorflow.MetaGraphDef.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t}(),n.FunctionDefLibrary=function(){function t(t){if(this.function=[],this.gradient=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.function=$util.emptyArray,t.prototype.gradient=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.FunctionDefLibrary;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.function&&r.function.length||(r.function=[]),r.function.push($root.tensorflow.FunctionDef.decode(t,t.uint32()));break;case 2:r.gradient&&r.gradient.length||(r.gradient=[]),r.gradient.push($root.tensorflow.GradientDef.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t}(),n.FunctionDef=function(){function t(t){if(this.attr={},this.nodeDef=[],this.ret={},t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.signature=null,t.prototype.attr=$util.emptyObject,t.prototype.nodeDef=$util.emptyArray,t.prototype.ret=$util.emptyObject,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n,r=void 0===e?t.len:t.pos+e,o=new $root.tensorflow.FunctionDef;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:o.signature=$root.tensorflow.OpDef.decode(t,t.uint32());break;case 5:t.skip().pos++,o.attr===$util.emptyObject&&(o.attr={}),n=t.string(),t.pos++,o.attr[n]=$root.tensorflow.AttrValue.decode(t,t.uint32());break;case 3:o.nodeDef&&o.nodeDef.length||(o.nodeDef=[]),o.nodeDef.push($root.tensorflow.NodeDef.decode(t,t.uint32()));break;case 4:t.skip().pos++,o.ret===$util.emptyObject&&(o.ret={}),n=t.string(),t.pos++,o.ret[n]=t.string();break;default:t.skipType(7&i)}}return o},t}(),n.GradientDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.functionName="",t.prototype.gradientFunc="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.GradientDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.functionName=t.string();break;case 2:r.gradientFunc=t.string();break;default:t.skipType(7&o)}}return r},t}(),n}();var compiled_api=$root,compiled_api_1=compiled_api.tensorflow;function getParamValue(t,e,n,r){var o=e.params[t];if(o&&void 0!==o.inputIndex){if("tensor"===o.type)return getTensor(e.inputNames[o.inputIndex],n,r);if("tensors"===o.type)return(0===o.inputIndex?0===o.inputParamLength?e.inputNames:e.inputNames.slice(o.inputIndex,-o.inputParamLength):e.inputNames.splice(o.inputIndex)).map(function(t){return getTensor(t,n,r)});var i=Array.prototype.slice.call(getTensor(e.inputNames.slice(o.inputIndex)[0],n,r).dataSync());return"number"===o.type?i[0]:i}return o&&o.value}function getTensor(t,e,n){var r=parseNodeName(t),o=r[0],i=r[1],a=n.currentContextIds.find(function(t){return!!e[getNodeNameWithContextId(o,t)]});return void 0!==a?e[getNodeNameWithContextId(o,a)][i]:void 0}function getNodeNameAndIndex(t,e){var n=parseNodeName(t),r=n[1];return[getNodeNameWithContextId(n[0],e&&e.currentContextId),r]}function getNodeNameWithContextId(t,e){return e?t+"-"+e:t}function parseNodeName(t){var e=t.lastIndexOf(":");return-1===e?[t,0]:[t.substring(0,e),Number(t.substring(e+1))]}function split$1(t,e){for(var n=[],r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}var arithmetic=[{tfOpName:"Add",dlOpName:"add",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BiasAdd",dlOpName:"add",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",dlOpName:"sub",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",dlOpName:"div",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",dlOpName:"div",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",dlOpName:"floorDiv",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",dlOpName:"mul",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",dlOpName:"maximum",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"}]},{tfOpName:"Minimum",dlOpName:"minimum",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"}]},{tfOpName:"Pow",dlOpName:"pow",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",dlOpName:"squaredDifference",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",dlOpName:"mod",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],arithmetic$1=Object.freeze({default:arithmetic}),basic_math=[{tfOpName:"Abs",dlOpName:"abs",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",dlOpName:"acos",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",dlOpName:"asin",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"atan",dlOpName:"atan",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",dlOpName:"ceil",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",dlOpName:"clipByValue",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"clip_value_min",dlParamName:"clipValueMin",type:"number"},{tfParamName:"clip_value_max",dlParamName:"clipValueMax",type:"number"}]},{tfOpName:"Cos",dlOpName:"cos",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",dlOpName:"cosh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",dlOpName:"elu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",dlOpName:"exp",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",dlOpName:"floor",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",dlOpName:"log",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",dlOpName:"neg",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",dlOpName:"relu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",dlOpName:"clipByValue",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{dlParamName:"clipValueMin",type:"number",defaultValue:0},{dlParamName:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",dlOpName:"selu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",dlOpName:"sigmoid",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",dlOpName:"sin",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",dlOpName:"sinh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",dlOpName:"sqrt",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",dlOpName:"rsqrt",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",dlOpName:"square",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",dlOpName:"tan",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",dlOpName:"tanh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",dlOpName:"sign",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",dlOpName:"round",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",dlOpName:"expm1",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",dlOpName:"log1p",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",dlOpName:"reciprocal",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",dlOpName:"reciprocal",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",dlOpName:"softplus",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",dlOpName:"asinh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",dlOpName:"acosh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",dlOpName:"atanh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",dlOpName:"erf",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],basicMath=Object.freeze({default:basic_math}),control=[{tfOpName:"LoopCond",dlOpName:"loopCond",category:"control",params:[{tfInputIndex:0,dlParamName:"pred",type:"tensor"}]},{tfOpName:"Switch",dlOpName:"switch",category:"control",params:[{tfInputIndex:0,dlParamName:"data",type:"tensor"},{tfInputIndex:1,dlParamName:"pred",type:"tensor"}]},{tfOpName:"Merge",dlOpName:"merge",category:"control",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"}]},{tfOpName:"Enter",dlOpName:"enter",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"frame_name",dlParamName:"frameName",type:"string"},{tfParamName:"is_constant",dlParamName:"isConstant",type:"bool"}]},{tfOpName:"Exit",dlOpName:"exit",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",dlOpName:"nextIteration",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",dlOpName:"tensorArray",category:"control",params:[{tfInputIndex:0,dlParamName:"size",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape",dlParamName:"elementShape",type:"shape"},{tfParamName:"dynamic_size",dlParamName:"dynamicSize",type:"bool"},{tfParamName:"clear_after_read",dlParamName:"clearAfterRead",type:"bool"},{tfParamName:"identical_element_shapes",dlParamName:"identicalElementShapes",type:"bool"},{tfParamName:"tensor_array_name",dlParamName:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",dlOpName:"tensorArrayWrite",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"index",type:"number"},{tfInputIndex:2,dlParamName:"tensor",type:"tensor"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",dlOpName:"tensorArrayRead",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"index",type:"number"},{tfInputIndex:2,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",dlOpName:"tensorArrayGather",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"indices",type:"number[]"},{tfInputIndex:2,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape",dlParamName:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",dlOpName:"tensorArrayScatter",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"indices",type:"number[]"},{tfInputIndex:2,dlParamName:"tensor",type:"number[]"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",dlOpName:"tensorArrayConcat",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape_except0",dlParamName:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",dlOpName:"tensorArraySplit",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"tensor",type:"tensor"},{tfInputIndex:2,dlParamName:"lengths",type:"number[]"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",dlOpName:"tensorArraySize",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",dlOpName:"tensorArrayClose",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"}]}],control$1=Object.freeze({default:control}),convolution=[{tfOpName:"AvgPool",dlOpName:"avgPool",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0},{tfParamName:"ksize",dlParamName:"kernelSize",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",dlOpName:"maxPool",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0},{tfParamName:"ksize",dlParamName:"kernelSize",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",dlOpName:"conv1d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"stride",dlParamName:"stride",type:"number"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NWC"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"dilation",dlParamName:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",dlOpName:"conv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"useCudnnOnGpu",dlParamName:"useCudnnOnGpu",type:"bool"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]},{tfOpName:"Conv2DBackpropInput",dlOpName:"conv2dTranspose",category:"convolution",params:[{tfInputIndex:2,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfInputIndex:0,dlParamName:"outputShape",type:"number[]"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",dlOpName:"depthwiseConv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"input",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",dlOpName:"depthwiseConv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"input",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]}],convolution$1=Object.freeze({default:convolution}),creation=[{tfOpName:"Fill",dlOpName:"fill",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfInputIndex:1,dlParamName:"value",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LinSpace",dlOpName:"linspace",category:"creation",params:[{tfInputIndex:0,dlParamName:"start",type:"number"},{tfInputIndex:1,dlParamName:"stop",type:"number"},{tfInputIndex:2,dlParamName:"num",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",dlOpName:"oneHot",category:"creation",params:[{tfInputIndex:0,dlParamName:"indices",type:"tensor"},{tfInputIndex:1,dlParamName:"depth",type:"number"},{tfInputIndex:2,dlParamName:"onValue",type:"number",defaultValue:1},{tfInputIndex:3,dlParamName:"offValue",type:"number",defaultValue:0},{tfParamName:"axis",dlParamName:"axis",type:"number",notSupported:!0},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",dlOpName:"ones",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",dlOpName:"onesLike",category:"creation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",dlOpName:"randomUniform",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"minval",dlParamName:"minval",type:"number",defaultValue:0},{tfParamName:"maxval",dlParamName:"maxval",type:"number",defaultValue:1},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"seed",dlParamName:"seed",type:"number",defaultValue:0},{tfParamName:"seed2",dlParamName:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfParamName:"T",dlParamName:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",dlOpName:"range",category:"creation",params:[{tfInputIndex:0,dlParamName:"start",type:"number"},{tfInputIndex:1,dlParamName:"stop",type:"number"},{tfInputIndex:2,dlParamName:"step",type:"number",defaultValue:0},{tfParamName:"Tidx",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"truncatedNormal",dlOpName:"truncatedNormal",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"means",dlParamName:"mean",type:"number",defaultValue:0},{tfParamName:"stddev",dlParamName:"stdDev",type:"number",defaultValue:1},{tfParamName:"seed",dlParamName:"seed",type:"number"},{tfParamName:"seed2",dlParamName:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"T",dlParamName:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",dlOpName:"zeros",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",dlOpName:"zerosLike",category:"creation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]}],creation$1=Object.freeze({default:creation}),graph=[{tfOpName:"PlaceholderWithDefault",dlOpName:"placeholder",category:"graph",params:[{tfInputIndex:0,dlParamName:"default",type:"tensor"},{tfParamName:"shape",dlParamName:"shape",type:"shape"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",dlOpName:"placeholder",category:"graph",params:[{tfParamName:"shape",dlParamName:"shape",type:"shape"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"Const",dlOpName:"const",category:"graph"},{tfOpName:"Identity",dlOpName:"identity",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Snapshot",dlOpName:"snapshot",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Rank",dlOpName:"rank",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Size",dlOpName:"size",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Shape",dlOpName:"shape",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Print",dlOpName:"print",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,tfInputParamLength:1,dlParamName:"data",type:"tensors"},{tfParamName:"message",dlParamName:"message",type:"string"},{tfParamName:"first_n",dlParamName:"firstN",type:"number",notSupprted:!0},{tfParamName:"summarize",dlParamName:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",dlOpName:"noop",category:"graph",params:[]},{tfOpName:"StopGradient",dlOpName:"stopGradient",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",dlOpName:"fakeQuantWithMinMaxVars",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"min",dlParamName:"min",type:"number"},{tfParamName:"max",dlParamName:"max",type:"number"}]}],graph$1=Object.freeze({default:graph}),image$1=[{tfOpName:"ResizeBilinear",dlOpName:"resizeBilinear",category:"image",params:[{tfInputIndex:0,dlParamName:"images",type:"tensor"},{tfInputIndex:1,dlParamName:"size",type:"number[]"},{tfParamName:"align_corners",dlParamName:"alignCorners",type:"bool"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",dlOpName:"resizeNearestNeighbor",category:"image",params:[{tfInputIndex:0,dlParamName:"images",type:"tensor"},{tfInputIndex:1,dlParamName:"size",type:"number[]"},{tfParamName:"align_corners",dlParamName:"alignCorners",type:"bool"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],image$2=Object.freeze({default:image$1}),logical=[{tfOpName:"Equal",dlOpName:"equal",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",dlOpName:"notEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",dlOpName:"greater",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",dlOpName:"greaterEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",dlOpName:"less",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",dlOpName:"lessEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",dlOpName:"logicalAnd",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",dlOpName:"logicalNot",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",dlOpName:"logicalOr",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",dlOpName:"where",category:"logical",params:[{tfInputIndex:0,dlParamName:"condition",type:"tensor"},{tfInputIndex:1,dlParamName:"a",type:"tensor"},{tfInputIndex:2,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],logical$1=Object.freeze({default:logical}),matrices=[{tfOpName:"MatMul",dlOpName:"matMul",category:"matrices",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"transpose_a",dlParamName:"transposeA",type:"bool",defaultValue:!1},{tfParamName:"transpose_b",dlParamName:"transposeB",type:"bool",defaultValue:!1},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",dlOpName:"transpose",category:"matrices",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"perm",dlParamName:"perm",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],matrices$1=Object.freeze({default:matrices}),normalization=[{tfOpName:"FusedBatchNorm",dlOpName:"batchNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"scale",type:"tensor"},{tfInputIndex:2,dlParamName:"offset",type:"tensor"},{tfInputIndex:3,dlParamName:"mean",type:"tensor"},{tfInputIndex:4,dlParamName:"variance",type:"tensor"},{tfParamName:"epsilon",dlParamName:"epsilon",type:"number",defaultValue:.001},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",dlOpName:"batchNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"scale",type:"tensor"},{tfInputIndex:2,dlParamName:"offset",type:"tensor"},{tfInputIndex:3,dlParamName:"mean",type:"tensor"},{tfInputIndex:4,dlParamName:"variance",type:"tensor"},{tfParamName:"epsilon",dlParamName:"epsilon",type:"number",defaultValue:.001},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",dlOpName:"localResponseNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"depth_radius",dlParamName:"radius",type:"number",defaultValue:5},{tfParamName:"bias",dlParamName:"bias",type:"number",defaultValue:1},{tfParamName:"alpha",dlParamName:"alpha",type:"number",defaultValue:1},{tfParamName:"beta",dlParamName:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",dlOpName:"softmax",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]}],normalization$1=Object.freeze({default:normalization}),reduction=[{tfOpName:"Max",dlOpName:"max",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Mean",dlOpName:"mean",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Min",dlOpName:"min",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Sum",dlOpName:"sum",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"All",dlOpName:"all",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Any",dlOpName:"any",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",dlOpName:"argMax",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"ArgMin",dlOpName:"argMin",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]}],reduction$1=Object.freeze({default:reduction}),slice_join=[{tfOpName:"ConcatV2",dlOpName:"concat",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:1,dlParamName:"tensors",type:"tensors"},{tfInputIndex:-1,dlParamName:"axis",type:"number"}]},{tfOpName:"Concat",dlOpName:"concat",category:"slice_join",params:[{tfInputIndex:1,tfInputParamLength:1,dlParamName:"tensors",type:"tensors"},{tfInputIndex:0,dlParamName:"axis",type:"number"}]},{tfOpName:"GatherV2",dlOpName:"gather",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"indices",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",dlOpName:"gather",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"indices",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0},{tfParamName:"validate_indices",dlParamName:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",dlOpName:"reverse",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"ReverseV2",dlOpName:"reverse",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"Slice",dlOpName:"slice",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"begin",type:"number[]"},{tfInputIndex:2,dlParamName:"size",type:"number[]"}]},{tfOpName:"StridedSlice",dlOpName:"stridedSlice",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"begin",type:"number[]"},{tfInputIndex:2,dlParamName:"end",type:"number[]"},{tfInputIndex:3,dlParamName:"strides",type:"number[]"},{tfParamName:"begin_mask",dlParamName:"beginMask",type:"number",defaultValue:0},{tfParamName:"end_mask",dlParamName:"endMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",dlOpName:"stack",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",dlOpName:"unstack",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0},{tfParamName:"num",dlParamName:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",dlOpName:"tile",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"reps",type:"number[]"}]},{tfOpName:"Split",dlOpName:"split",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"axis",type:"number",defaultValue:0},{tfInputIndex:1,dlParamName:"x",type:"tensor"},{tfParamName:"num_split",dlParamName:"numOrSizeSplits",type:"number",defaultValue:1}]}],sliceJoin=Object.freeze({default:slice_join}),transformation=[{tfOpName:"Cast",dlOpName:"cast",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"SrcT",dlParamName:"sdtype",type:"dtype",notSupported:!0},{tfParamName:"DstT",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",dlOpName:"expandDims",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,tfParamNameDeprecated:"dim",dlParamName:"axis",type:"number"}]},{tfOpName:"Pad",dlOpName:"pad",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"padding",type:"number[]"},{tfParamName:"constant_value",dlParamName:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",dlOpName:"pad",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"padding",type:"number[]"},{tfInputIndex:2,dlParamName:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",dlOpName:"reshape",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"shape",type:"number[]"}]},{tfOpName:"Squeeze",dlOpName:"squeeze",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"axis",tfParamNameDeprecated:"squeeze_dims",dlParamName:"axis",type:"number[]"}]}],transformation$1=Object.freeze({default:transformation}),CONTROL_FLOW_OPS=["Switch","Merge","Enter","Exit","NextIteration"],OperationMapper=function(){function t(){var t=[].concat.apply([],[arithmetic$1,basicMath,control$1,convolution$1,creation$1,logical$1,image$2,graph$1,matrices$1,normalization$1,reduction$1,sliceJoin,transformation$1].map(function(t){return t.default?t.default:t}));this.opMappers=t.reduce(function(t,e){return t[e.tfOpName]=e,t},{})}return Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),t.prototype.isControlFlow=function(t){return CONTROL_FLOW_OPS.some(function(e){return e===t.op})},t.prototype.transformGraph=function(t){var e=this,n=!1,r=[],o=t.node.reduce(function(t,o){return t[o.name]=e.mapNode(o),e.isControlFlow(o)&&(n=!0),"Placeholder"===o.op&&r.push(t[o.name]),t},{}),i=[],a=[];return Object.keys(o).forEach(function(t){var e=o[t];e.inputNames.forEach(function(t){var n=getNodeNameAndIndex(t)[0];e.inputs.push(o[n]),o[n].children.push(e)}),0===e.inputs.length&&i.push(e)}),Object.keys(o).forEach(function(t){var e=o[t];0===e.children.length&&a.push(e)}),{nodes:o,inputs:i,outputs:a,placeholders:r,withControlFlow:n}},t.prototype.mapNode=function(t){var e=this,n=this.opMappers[t.op];if(void 0===n)throw new Error("Tensorflow Op is not supported: "+t.op);var r={name:t.name,op:n.dlOpName,category:n.category,inputNames:(t.input||[]).map(function(t){return t.startsWith("^")?t.substr(1):t}),inputs:[],children:[],params:{}};return n.params&&(r.params=n.params.reduce(function(n,r){var o=r.tfInputIndex,i=r.tfInputParamLength,a=r.type,s=void 0;if(void 0===o)switch(r.type){case"string":void 0===(s=e.getStringParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getStringParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"number":void 0===(s=e.getNumberParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getNumberParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"number[]":void 0===(s=e.getNumericArrayParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getNumericArrayParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"bool":void 0===(s=e.getBoolParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getBoolParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"shape":void 0===(s=e.getTensorShapeParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getTensorShapeParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"dtype":void 0===(s=e.getDtypeParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getDtypeParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+r.type+" for op: "+t.op)}return n[r.dlParamName]={value:s,inputIndex:o,type:a,inputParamLength:i},n},{})),r},t.prototype.getStringParam=function(t,e,n,r){void 0===r&&(r=!1);var o=t[e];if(void 0!==o){var i=String.fromCharCode.apply(null,o.s);return r?i:i.toLowerCase()}return n},t.prototype.getBoolParam=function(t,e,n){var r=t[e];return r?r.b:n},t.prototype.getNumberParam=function(t,e,n){var r=t[e],o=r?void 0!==r.f?r.f:r.i:n;return"number"==typeof o?o:o.toInt()},t.prototype.getDtypeParam=function(t,e,n){var r=t[e];if(r&&r.type)switch(r.type){case compiled_api_1.DataType.DT_FLOAT:return"float32";case compiled_api_1.DataType.DT_INT32:return"int32";case compiled_api_1.DataType.DT_BOOL:return"bool";default:return n}return n},t.prototype.getTensorShapeParam=function(t,e,n){var r=t[e];return r&&r.shape?r.shape.dim.map(function(t){return t.size}):n},t.prototype.getNumericArrayParam=function(t,e,n){var r=t[e];return r?(r.list.f&&r.list.f.length?r.list.f:r.list.i).map(function(t){return"number"==typeof t?t:t.toInt()}):n},t}(),executeOp=function(t,e,n){switch(t.op){case"add":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.s)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"mod":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Gb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"mul":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Kb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"div":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Da)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"floorDiv":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Sa)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"sub":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Vc)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"minimum":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Eb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"maximum":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.zb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"pow":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.dc)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"squaredDifference":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Pc)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$1=function(t,e,n){switch(t.op){case"abs":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.p)(getParamValue("x",t,e,n))];case"acos":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.q)(getParamValue("x",t,e,n))];case"acosh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.r)(getParamValue("x",t,e,n))];case"asin":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.y)(getParamValue("x",t,e,n))];case"asinh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.z)(getParamValue("x",t,e,n))];case"atan":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.A)(getParamValue("x",t,e,n))];case"atanh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.C)(getParamValue("x",t,e,n))];case"ceil":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.L)(getParamValue("x",t,e,n))];case"cos":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.W)(getParamValue("x",t,e,n))];case"cosh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.X)(getParamValue("x",t,e,n))];case"elu":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ha)(getParamValue("x",t,e,n))];case"erf":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.La)(getParamValue("x",t,e,n))];case"exp":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ma)(getParamValue("x",t,e,n))];case"expm1":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Oa)(getParamValue("x",t,e,n))];case"floor":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ra)(getParamValue("x",t,e,n))];case"log":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.nb)(getParamValue("x",t,e,n))];case"log1p":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ob)(getParamValue("x",t,e,n))];case"neg":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ob)(getParamValue("x",t,e,n))];case"reciprocal":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lc)(getParamValue("x",t,e,n))];case"relu":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.mc)(getParamValue("x",t,e,n))];case"round":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.tc)(getParamValue("x",t,e,n))];case"selu":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.wc)(getParamValue("x",t,e,n))];case"sigmoid":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ac)(getParamValue("x",t,e,n))];case"sin":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Dc)(getParamValue("x",t,e,n))];case"sign":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Cc)(getParamValue("x",t,e,n))];case"sinh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ec)(getParamValue("x",t,e,n))];case"softplus":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Lc)(getParamValue("x",t,e,n))];case"sqrt":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Nc)(getParamValue("x",t,e,n))];case"square":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Oc)(getParamValue("x",t,e,n))];case"tanh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Zc)(getParamValue("x",t,e,n))];case"tan":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Yc)(getParamValue("x",t,e,n))];case"clipByValue":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.M)(getParamValue("x",t,e,n),getParamValue("clipValueMin",t,e,n),getParamValue("clipValueMax",t,e,n))];case"rsqrt":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Da)(Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vc)(1,"float32"),Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Nc)(getTensor(t.inputNames[0],e,n)))];default:throw TypeError("Node type "+t.op+" is not implemented")}},TensorArray=function(){function t(e,n,r,o,i,a,s){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=o,this.identicalElementShapes=i,this.dynamicSize=a,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.id=t.nextId++}return Object.defineProperty(t.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),t.prototype.clearAndClose=function(){this.tensors.forEach(function(t){return t.tensor.dispose()}),this.tensors=[],this.closed_=!0},t.prototype.size=function(){return this.tensors.length},t.prototype.read=function(t){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(t<0||t>=this.tensors.length)throw new Error("Tried to read from index "+t+", but array size is: "+this.tensors.length);var e=this.tensors[t];if(e.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+t+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor},t.prototype.readMany=function(t){var e=this;return t.map(function(t){return e.read(t)})},t.prototype.write=function(t,e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error("Tried to write to index "+t+", but array is not resizeable and size is: "+this.maxSize);var n=this.tensors[t]||{};if(e.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+t+",\n          because the value dtype is "+e.dtype+", but TensorArray dtype is "+this.dtype+".");if(0===this.size()&&0===this.elementShape.length&&(this.elementShape=e.shape),_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.rd.assertShapesMatch(this.elementShape,e.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+t+"."),n&&n.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+t+", because it has already been read.");if(n&&n.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+t+", because it has already been written.");n.tensor=e,n.written=!0,this.tensors[t]=n},t.prototype.writeMany=function(t,e){var n=this;if(t.length!==e.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+t.length+" is not the same as tensors size: "+e.length+".");t.map(function(t,r){return n.write(t,e[r])})},t.prototype.gather=function(t,e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+e);if(!t){t=[];for(var n=0;n<this.size();n++)t.push(n)}if(0===t.length)return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ad)([],[0].concat(this.elementShape));var r=this.readMany(t);return _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.rd.assertShapesMatch(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Sc)(r,0)},t.prototype.concat=function(t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+t);if(0===this.size())return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ad)([],[0].concat(this.elementShape));for(var e=[],n=0;n<this.size();n++)e.push(n);var r=this.readMany(e);return _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.rd.assertShapesMatch(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+r[0].shape+")"),Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.O)(r,0)},t.prototype.scatter=function(t,e){if(e.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+e.dtype);if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+t.length+" vs. "+e.shape[0]);var n=Math.max.apply(Math,t);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size ("+n+"  vs. "+this.maxSize+")");this.writeMany(t,Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.qd)(e,0))},t.prototype.split=function(t,e){var n=this;if(e.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+e.dtype);var r=0,o=t.map(function(t){return r+=t});if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        "+r+", and tensor's shape is: "+e.shape);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+t.length+"), and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:e.size/r,a=[];Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.id)(function(){e=e.reshape([1,r,i]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:o[s-1],0],l=[1,t[s],i];a[s]=Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Fc)(e,u,l).reshape(n.elementShape)}return a});for(var s=[],u=0;u<t.length;u++)s[u]=u;this.writeMany(s,a)},t.nextId=0,t}();function executeOp$2(t,e,n){return __awaiter(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,p,h,f,d,m,g,v,y,b,w,_,x,O,E,S,C,I,A,k,N,P,T,R,M,D,j,L;return __generator(this,function(z){switch(z.label){case 0:switch(t.op){case"loopCond":return[3,1];case"switch":return[3,2];case"merge":return[3,4];case"enter":return[3,5];case"exit":return[3,6];case"nextIteration":return[3,7];case"tensorArray":return[3,8];case"tensorArrayWrite":return[3,9];case"tensorArrayRead":return[3,10];case"tensorArrayGather":return[3,11];case"tensorArrayScatter":return[3,12];case"tensorArrayConcat":return[3,13];case"tensorArraySplit":return[3,14];case"tensorArraySize":return[3,15];case"tensorArrayClose":return[3,16]}return[3,17];case 1:return[2,[getParamValue("pred",t,e,n)]];case 2:return r=getParamValue("pred",t,e,n),o=getParamValue("data",t,e,n),[4,r.data()];case 3:return[2,z.sent()[0]?[void 0,o]:[o,void 0]];case 4:return[2,(i=t.inputNames.find(function(t){return void 0!==getTensor(t,e,n)}))?[getTensor(i,e,n)]:void 0];case 5:return a=getParamValue("frameName",t,e,n),s=getParamValue("tensor",t,e,n),n.enterFrame(a),[2,[s]];case 6:return u=getParamValue("tensor",t,e,n),n.exitFrame(),[2,[u]];case 7:return l=getParamValue("tensor",t,e,n),n.nextIteration(),[2,[l]];case 8:return c=getParamValue("size",t,e,n),p=getParamValue("dtype",t,e,n),h=getParamValue("elementShape",t,e,n),f=getParamValue("dynamicSize",t,e,n),d=getParamValue("clearAfterRead",t,e,n),m=getParamValue("identicalElementShapes",t,e,n),g=getParamValue("name",t,e,n),v=new TensorArray(g,p,c,h,m,f,d),n.addTensorArray(v),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vc)(v.id),Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vc)(1)]];case 9:return y=getParamValue("tensorArrayId",t,e,n),b=getParamValue("index",t,e,n),w=getParamValue("tensor",t,e,n),n.getTensorArray(y).write(b,w),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vc)(1)]];case 10:return _=getParamValue("tensorArrayId",t,e,n),x=getParamValue("index",t,e,n),[2,[n.getTensorArray(_).read(x)]];case 11:return O=getParamValue("tensorArrayId",t,e,n),E=getParamValue("indices",t,e,n),S=getParamValue("dtype",t,e,n),[2,[n.getTensorArray(O).gather(E,S)]];case 12:return C=getParamValue("tensorArrayId",t,e,n),I=getParamValue("indices",t,e,n),A=getParamValue("tensor",t,e,n),n.getTensorArray(C).scatter(I,A),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vc)(1)]];case 13:return k=getParamValue("tensorArrayId",t,e,n),N=n.getTensorArray(k),P=getParamValue("dtype",t,e,n),[2,[N.concat(P)]];case 14:return T=getParamValue("tensorArrayId",t,e,n),R=getParamValue("tensor",t,e,n),M=getParamValue("lengths",t,e,n),n.getTensorArray(T).split(M,R),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vc)(1)]];case 15:return D=getParamValue("tensorArrayId",t,e,n),j=n.getTensorArray(D),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vc)(j.size(),"int32")]];case 16:return L=getParamValue("tensorArrayId",t,e,n),n.getTensorArray(L).clearAndClose(),[2,[]];case 17:throw TypeError("Node type "+t.op+" is not implemented")}})})}var executeOp$3=function(t,e,n){switch(t.op){case"conv1d":var r=getParamValue("stride",t,e,n),o=getParamValue("pad",t,e,n),i=getParamValue("dataFormat",t,e,n).toUpperCase(),a=getParamValue("dilation",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.T)(getParamValue("x",t,e,n),getParamValue("filter",t,e,n),r,o,i,a)];case"conv2d":r=getParamValue("strides",t,e,n),o=getParamValue("pad",t,e,n),i=getParamValue("dataFormat",t,e,n).toUpperCase();var s=getParamValue("dilations",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.U)(getParamValue("x",t,e,n),getParamValue("filter",t,e,n),[r[1],r[2]],o,i,[s[0],s[1]])];case"conv2dTranspose":var u=getParamValue("outputShape",t,e,n);return r=getParamValue("strides",t,e,n),o=getParamValue("pad",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.V)(getParamValue("x",t,e,n),getParamValue("filter",t,e,n),u,[r[1],r[2]],o)];case"depthwiseConv2d":return r=getParamValue("strides",t,e,n),o=getParamValue("pad",t,e,n),s=getParamValue("dilations",t,e,n),i=getParamValue("dataFormat",t,e,n).toUpperCase(),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Aa)(getParamValue("input",t,e,n),getParamValue("filter",t,e,n),[r[1],r[2]],o,i,[s[0],s[1]])];case"avgPool":r=getParamValue("strides",t,e,n),o=getParamValue("pad",t,e,n);var l=getParamValue("kernelSize",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.D)(getParamValue("x",t,e,n),[l[1],l[2]],[r[1],r[2]],o)];case"maxPool":return r=getParamValue("strides",t,e,n),o=getParamValue("pad",t,e,n),l=getParamValue("kernelSize",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.yb)(getParamValue("x",t,e,n),[l[1],l[2]],[r[1],r[2]],o)];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$4=function(t,e,n){switch(t.op){case"fill":var r=getParamValue("shape",t,e,n),o=getParamValue("value",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qa)(r,o)];case"linspace":var i=getParamValue("start",t,e,n),a=getParamValue("stop",t,e,n),s=getParamValue("num",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lb)(i,a,s)];case"oneHot":var u=getParamValue("indices",t,e,n),l=getParamValue("depth",t,e,n),c=getParamValue("onValue",t,e,n),p=getParamValue("offValue",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Tb)(u,l,c,p)];case"ones":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ub)(getParamValue("shape",t,e,n),getParamValue("dtype",t,e,n))];case"onesLike":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Vb)(getParamValue("x",t,e,n))];case"randomUniform":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.jc)(getParamValue("shape",t,e,n),getParamValue("minval",t,e,n),getParamValue("maxval",t,e,n),getParamValue("dtype",t,e,n))];case"range":i=getParamValue("start",t,e,n);var h=getParamValue("stop",t,e,n),f=getParamValue("step",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.kc)(i,h,f,getParamValue("dtype",t,e,n))];case"truncatedNormal":r=getParamValue("shape",t,e,n);var d=getParamValue("mean",t,e,n),m=getParamValue("stdDev",t,e,n),g=getParamValue("seed",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.od)(r,d,m,getParamValue("dtype",t,e,n),g)];case"zeros":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.zd)(getParamValue("shape",t,e,n),getParamValue("dtype",t,e,n))];case"zerosLike":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ad)(getParamValue("x",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$5=function(t,e,n){switch(t.op){case"const":return e[t.name];case"placeholder":var r=getParamValue("default",t,e,n);return[getTensor(t.name,e,n)||r];case"identity":case"stopGradient":case"fakeQuantWithMinMaxVars":return[getParamValue("x",t,e,n)];case"snapshot":return[getParamValue("x",t,e,n).clone()];case"shape":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.bd)(getParamValue("x",t,e,n).shape,"int32")];case"size":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vc)(getParamValue("x",t,e,n).size,"int32")];case"rank":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vc)(getParamValue("x",t,e,n).rank,"int32")];case"noop":return[];case"print":var o=getParamValue("x",t,e,n),i=getParamValue("data",t,e,n),a=getParamValue("message",t,e,n),s=getParamValue("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(a);for(var u=0;u<i.length;u++)console.log(Array.prototype.slice.call(i[0].dataSync()).slice(0,s));return[o];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$6=function(t,e,n){switch(t.op){case"resizeBilinear":var r=getParamValue("images",t,e,n),o=getParamValue("size",t,e,n),i=getParamValue("alignCorners",t,e,n);return[_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.cb.resizeBilinear(r,[o[0],o[1]],i)];case"resizeNearestNeighbor":return r=getParamValue("images",t,e,n),o=getParamValue("size",t,e,n),i=getParamValue("alignCorners",t,e,n),[_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.cb.resizeNearestNeighbor(r,[o[0],o[1]],i)];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$7=function(t,e,n){switch(t.op){case"equal":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ja)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"notEqual":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Rb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"greater":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ya)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"greaterEqual":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Za)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"less":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.gb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"lessEqual":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"logicalAnd":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.rb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"logicalNot":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.sb)(getParamValue("a",t,e,n))];case"logicalOr":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.tb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"where":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.yd)(getParamValue("condition",t,e,n),getParamValue("a",t,e,n),getParamValue("b",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$8=function(t,e,n){switch(t.op){case"matMul":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.wb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n),getParamValue("transposeA",t,e,n),getParamValue("transposeB",t,e,n))];case"transpose":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.nd)(getParamValue("x",t,e,n),getParamValue("perm",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$9=function(t,e,n){switch(t.op){case"batchNormalization":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.F)(getParamValue("x",t,e,n),getParamValue("mean",t,e,n),getParamValue("variance",t,e,n),getParamValue("epsilon",t,e,n),getParamValue("scale",t,e,n),getParamValue("offset",t,e,n))];case"localResponseNormalization":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.mb)(getParamValue("x",t,e,n),getParamValue("radius",t,e,n),getParamValue("bias",t,e,n),getParamValue("alpha",t,e,n),getParamValue("beta",t,e,n))];case"softmax":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Kc)(getParamValue("x",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$10=function(t,e,n){switch(t.op){case"max":var r=getParamValue("axis",t,e,n),o=getParamValue("keepDims",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.xb)(getParamValue("x",t,e,n),r,o)];case"mean":return r=getParamValue("axis",t,e,n),o=getParamValue("keepDims",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Bb)(getParamValue("x",t,e,n),r,o)];case"min":return r=getParamValue("axis",t,e,n),o=getParamValue("keepDims",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Db)(getParamValue("x",t,e,n),r,o)];case"sum":return r=getParamValue("axis",t,e,n),o=getParamValue("keepDims",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Xc)(getParamValue("x",t,e,n),r,o)];case"all":return r=getParamValue("axis",t,e,n),o=getParamValue("keepDims",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.u)(getParamValue("x",t,e,n),r,o)];case"any":return r=getParamValue("axis",t,e,n),o=getParamValue("keepDims",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.v)(getParamValue("x",t,e,n),r,o)];case"argMax":return r=getParamValue("axis",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.w)(getParamValue("x",t,e,n),r)];case"argMin":return r=getParamValue("axis",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.x)(getParamValue("x",t,e,n),r)];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$11=function(t,e,n){switch(t.op){case"concat":var r=getParamValue("axis",t,e,n),o=getParamValue("tensors",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.O)(o,r)];case"gather":r=getParamValue("axis",t,e,n);var i=getParamValue("x",t,e,n),a=getParamValue("indices",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ua)(i,a,r)];case"reverse":return r=getParamValue("axis",t,e,n),i=getParamValue("x",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.oc)(i,r)];case"slice":var s=getParamValue("begin",t,e,n),u=getParamValue("size",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Fc)(getParamValue("x",t,e,n),s,u)];case"stridedSlice":s=getParamValue("begin",t,e,n);var l=getParamValue("end",t,e,n),c=getParamValue("strides",t,e,n),p=getParamValue("beginMask",t,e,n),h=getParamValue("endMask",t,e,n),f=getParamValue("x",t,e,n);if(1===s.length&&f.shape.length>1)for(var d=1;d<f.shape.length;d++)s.push(0),l.push(f.shape[d]),c.push(c[0]);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Uc)(f,s,l,c,p,h)];case"stack":return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.id)(function(){var r=getParamValue("axis",t,e,n),o=getParamValue("tensors",t,e,n),i=o[0].shape,a=o[0].squeeze().shape,s=o.map(function(t){var e=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.rd.arraysEqual(t.shape,i);if(!e&&!_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.rd.arraysEqual(t.squeeze().shape,a))throw new Error("the input tensors shape does not match");return e?t:t.reshape(i)});return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Sc)(s,r)]});case"unstack":return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.id)(function(){var r=getParamValue("axis",t,e,n),o=getParamValue("tensor",t,e,n);return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.qd)(o,r)});case"tile":var m=getParamValue("reps",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.jd)(getParamValue("x",t,e,n),m)];case"split":r=getParamValue("axis",t,e,n);var g=getParamValue("numOrSizeSplits",t,e,n);return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Mc)(getParamValue("x",t,e,n),g,r);default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$12=function(t,e,n){switch(t.op){case"cast":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.K)(getParamValue("x",t,e,n),getParamValue("dtype",t,e,n))];case"expandDims":var r=t.params.axis.value;return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Na)(getParamValue("x",t,e,n),r)];case"squeeze":return r=t.params.axis.value,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Rc)(getParamValue("x",t,e,n),r)];case"reshape":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.nc)(getParamValue("x",t,e,n),getParamValue("shape",t,e,n))];case"pad":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Yb)(getParamValue("x",t,e,n),split$1(getParamValue("padding",t,e,n),2),getParamValue("constantValue",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}};function executeOp$13(t,e,n){switch(t.category){case"arithmetic":return executeOp(t,e,n);case"basic_math":return executeOp$1(t,e,n);case"control":return executeOp$2(t,e,n);case"convolution":return executeOp$3(t,e,n);case"creation":return executeOp$4(t,e,n);case"image":return executeOp$6(t,e,n);case"graph":return executeOp$5(t,e,n);case"logical":return executeOp$7(t,e,n);case"matrices":return executeOp$8(t,e,n);case"normalization":return executeOp$9(t,e,n);case"reduction":return executeOp$10(t,e,n);case"slice_join":return executeOp$11(t,e,n);case"transformation":return executeOp$12(t,e,n);default:throw TypeError("Node type "+t.op+" is not implemented")}}var ExecutionContext=function(){function t(t,e){this.weightMap=t,this.tensorArrayMap=e,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return t.prototype.newFrame=function(t,e){return{id:t,frameName:e,iterationId:0}},Object.defineProperty(t.prototype,"currentContext",{get:function(){return this.contexts},set:function(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),t.prototype.generateCurrentContextIds=function(){for(var t=[],e=0;e<this.contexts.length-1;e++){var n=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(n))}t.push(""),this._currentContextIds=t},t.prototype.contextIdforContexts=function(t){return t?t.map(function(t){return 0===t.id&&0===t.iterationId?"":t.frameName+"-"+t.iterationId}).join("/"):""},t.prototype.enterFrame=function(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},t.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},t.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},t.prototype.getWeight=function(t){return this.weightMap[t]},t.prototype.addTensorArray=function(t){this.tensorArrayMap[t.id]=t},t.prototype.getTensorArray=function(t){return this.tensorArrayMap[t]},t}(),GraphExecutor=function(){function t(t){this.graph=t,this.compiledOrder=[],this._weightMap={},this.placeholders=t.placeholders,this._outputs=t.outputs,this.compile()}return Object.defineProperty(t.prototype,"weightMap",{get:function(){return this._weightMap},set:function(t){var e=Object.keys(t).map(function(e){return t[e].map(function(t){return t.id})});this.weightIds=[].concat.apply([],e),this._weightMap=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this.placeholders.map(function(t){return{name:t.name,shape:t.params.shape?t.params.shape.value:void 0,dtype:t.params.dtype?t.params.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this._outputs.map(function(t){return{name:t.name,shape:t.params.shape?t.params.shape.value:void 0,dtype:t.params.dtype?t.params.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this.placeholders.map(function(t){return t.name})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this.outputs.map(function(t){return t.name})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isControlFlowModel",{get:function(){return this.graph.withControlFlow},enumerable:!0,configurable:!0}),t.prototype.compile=function(){if(!this.graph.withControlFlow)for(var t=this.graph.inputs.slice(),e={};t.length>0;){var n=t.pop();e[n.name]=!0,this.compiledOrder.push(n),n.children.forEach(function(n){!e[n.name]&&n.inputNames.every(function(t){var n=getNodeNameAndIndex(t)[0];return e[n]})&&t.push(n)})}},t.prototype.execute=function(t,e){var n=this;this.checkInput(t),this.checkInputShapeAndType(t);var r={};return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.id)(function(){var o=new ExecutionContext(n._weightMap,r),i=n.compiledOrder.reduce(function(t,e){return t[e.name]=executeOp$13(e,t,o),t},__assign({},n.weightMap,t));return n.findOutputs(i,o,e)})},t.prototype.executeAsync=function(t,e){return __awaiter(this,void 0,void 0,function(){var n,r,o,i,a,s,u=this;return __generator(this,function(l){switch(l.label){case 0:return this.checkInput(t),this.checkInputShapeAndType(t),n=new ExecutionContext(this._weightMap,{}),[4,this.executeWithControlFlow(t,n)];case 1:return r=l.sent(),o=this.findOutputs(r,n,e),i=Object.keys(o).map(function(t){return o[t].id}),a=Object.keys(t).map(function(e){return t[e].map(function(t){return t.id})}),s=[].concat.apply([],a),Object.keys(r).forEach(function(t){r[t].forEach(function(t){t&&-1===i.indexOf(t.id)&&-1===s.indexOf(t.id)&&-1===u.weightIds.indexOf(t.id)&&t.dispose()})}),[2,o]}})})},t.prototype.executeWithControlFlow=function(t,e){return __awaiter(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l;return __generator(this,function(c){switch(c.label){case 0:n=this.graph.inputs.map(function(t){return{node:t,contexts:e.currentContext}}),r=__assign({},this.weightMap,t),o={},c.label=1;case 1:return n.length>0?(i=n.pop(),e.currentContext=i.contexts,a="","enter"===i.node.op&&getParamValue("isConstant",i.node,r,e)&&(a=getNodeNameAndIndex(i.node.name,e)[0]),s=executeOp$13(i.node,r,e),a||(a=getNodeNameAndIndex(i.node.name,e)[0]),u=r,l=a,[4,s]):[3,3];case 2:return u[l]=c.sent(),i.node.children.forEach(function(t){var i=getNodeNameAndIndex(t.name,e)[0];o[i]||("merge"===t.op?t.inputNames.some(function(t){return!!getTensor(t,r,e)})&&(o[i]=!0,n.push({contexts:e.currentContext,node:t})):t.inputNames.every(function(t){return!!getTensor(t,r,e)})&&(o[i]=!0,n.push({contexts:e.currentContext,node:t})))}),[3,1];case 3:return[2,r]}})})},t.prototype.findOutputs=function(t,e,n){return!n||n instanceof Array||(n=[n]),(n||this.graph.outputs.map(function(t){return t.name})).reduce(function(n,r){return n[r]=getTensor(r,t,e),n},{})},t.prototype.dispose=function(){var t=this;Object.keys(this.weightMap).forEach(function(e){return t.weightMap[e].forEach(function(t){return t.dispose()})})},t.prototype.checkInputShapeAndType=function(t){this.placeholders.forEach(function(e){var n=t[e.name][0];if(e.params.shape&&e.params.shape.value){var r=e.params.shape.value,o=r.length===n.shape.length&&n.shape.every(function(t,e){return-1===r[e]||r[e]===t});_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.rd.assert(o,"The shape of dict['"+e.name+"'] provided in model.execute(dict) must be ["+r+"], but was ["+n.shape+"]")}e.params.dtype&&e.params.dtype.value&&_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.rd.assert(n.dtype===e.params.dtype.value,"The dtype of dict['"+e.name+"'] provided in model.execute(dict) must be "+e.params.dtype.value+", but was "+n.dtype)})},t.prototype.checkInput=function(t){var e=this,n=Object.keys(t),r=[],o=[];if(this.inputNodes.forEach(function(t){-1===n.indexOf(t)&&r.push(t)}),n.forEach(function(t){-1===e.inputNodes.indexOf(t)&&o.push(t)}),r.length>0)throw new Error("The dict provided in model.execute(dict) has the keys ["+n+"], but is missing the required keys: ["+r+"].");if(o.length>0)throw new Error("The dict provided in model.execute(dict) has unused keys: ["+o+"]. Please provide only the following keys: ["+this.inputNodes+"].")},t}(),FrozenModel=function(){function t(t,e,n){this.modelUrl=t,this.weightManifestUrl=e,this.requestOption=n,this.version="n/a",this.pathPrefix=this.getPathPrefix()}return Object.defineProperty(t.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),t.prototype.getPathPrefix=function(){var t=parse(this.weightManifestUrl),e=t.pathname.split("/");return e.splice(-1),t.pathname=e.join("/"),format(t)+"/"},t.prototype.loadRemoteProtoFile=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,r,o;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,fetch(this.modelUrl,this.requestOption)];case 1:return t=i.sent(),n=(e=compiled_api_1.GraphDef).decode,r=Uint8Array.bind,[4,t.arrayBuffer()];case 2:return[2,n.apply(e,[new(r.apply(Uint8Array,[void 0,i.sent()]))])];case 3:throw o=i.sent(),new Error(this.modelUrl+" not found. "+o);case 4:return[2]}})})},t.prototype.loadWeightManifest=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n;return __generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch(this.weightManifestUrl,this.requestOption)];case 1:return t=r.sent(),e=this,[4,t.clone().json()];case 2:return e.weightManifest=r.sent(),[3,4];case 3:throw n=r.sent(),new Error(this.weightManifestUrl+" not found. "+n);case 4:return[2]}})})},t.prototype.load=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,r;return __generator(this,function(o){switch(o.label){case 0:return t=this.loadRemoteProtoFile(),e=this.loadWeightManifest(),[4,Promise.all([t,e])];case 1:return n=o.sent()[0],this.version=n.versions.producer+"."+n.versions.minConsumer,[4,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.db.loadWeights(this.weightManifest,this.pathPrefix,void 0,this.requestOption)];case 2:return r=o.sent(),this.executor=new GraphExecutor(OperationMapper.Instance.transformGraph(n)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),[2,!0]}})})},t.prototype.predict=function(t,e){return this.execute(t,this.outputNodes)},t.prototype.constructTensorMap=function(t){var e=t instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.m?[t]:t;if(e.length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the frozen model has "+this.inputNodes.length+" placeholders, while there are "+e.length+" input tensors.");return this.inputNodes.reduce(function(t,n,r){return t[n]=e[r],t},{})},t.prototype.execute=function(t,e){if(e=e||this.outputNodes,(t instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.m||Array.isArray(t))&&(t=this.constructTensorMap(t)),this.executor.isControlFlowModel)throw new Error("The model contains control flow ops, please use executeAsync method");var n=this.executor.execute(this.convertTensorMapToTensorsMap(t),e),r=Object.keys(n);return Array.isArray(e)&&e.length>1?e.map(function(t){return n[t]}):n[r[0]]},t.prototype.executeAsync=function(t,e){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(o){switch(o.label){case 0:if(!this.executor.isControlFlowModel)throw new Error("The model does not contain control flow ops, please use execute method for better performance.");return e=e||this.outputNodes,(t instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.m||Array.isArray(t))&&(t=this.constructTensorMap(t)),[4,this.executor.executeAsync(this.convertTensorMapToTensorsMap(t),e)];case 1:return n=o.sent(),r=Object.keys(n),[2,Array.isArray(e)&&e.length>1?e.map(function(t){return n[t]}):n[r[0]]]}})})},t.prototype.convertTensorMapToTensorsMap=function(t){return Object.keys(t).reduce(function(e,n){return e[n]=[t[n]],e},{})},t.prototype.dispose=function(){this.executor.dispose()},t}();function loadFrozenModel(t,e,n){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(o){switch(o.label){case 0:return[4,(r=new FrozenModel(t,e,n)).load()];case 1:return o.sent(),[2,r]}})})}var version="0.5.2"},vAyL:function(t,e,n){"use strict";n.r(e),n.d(e,"range",function(){return o}),n.d(e,"dispatch",function(){return i});var r=n(null);function o(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),new r.a(function(r){var o=0,a=t;if(n)return n.schedule(i,0,{index:o,count:e,start:t,subscriber:r});for(;;){if(o++>=e){r.complete();break}if(r.next(a++),r.closed)break}})}function i(t){var e=t.start,n=t.index,r=t.subscriber;n>=t.count?r.complete():(r.next(e),r.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}},vLqr:function(t,e,n){"use strict";var r=n("Q1FS");function o(t){t.subscriber.error(t.error)}e.throwError=function(t,e){return new r.Observable(e?function(n){return e.schedule(o,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}},w1o2:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=n("FWf1"),i=n("zB/H"),a=n("Q1FS"),s=n("ds6q");e.groupBy=function(t,e,n,r){return function(o){return o.lift(new u(t,e,n,r))}};var u=function(){function t(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),l=function(t){function e(e,n,r,o,i){var a=t.call(this,e)||this;return a.keySelector=n,a.elementSelector=r,a.durationSelector=o,a.subjectSelector=i,a.groups=null,a.attemptedToUnsubscribe=!1,a.count=0,a}return r(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups=new Map);var r,o=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(t){this.error(t)}else r=t;if(!o){o=this.subjectSelector?this.subjectSelector():new s.Subject,n.set(e,o);var i=new p(e,o,this);if(this.destination.next(i),this.durationSelector){var a=void 0;try{a=this.durationSelector(new p(e,o))}catch(t){return void this.error(t)}this.add(a.subscribe(new c(e,o,this)))}}o.closed||o.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(o.Subscriber),c=function(t){function e(e,n,r){var o=t.call(this,n)||this;return o.key=e,o.group=n,o.parent=r,o}return r(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(o.Subscriber),p=function(t){function e(e,n,r){var o=t.call(this)||this;return o.key=e,o.groupSubject=n,o.refCountSubscription=r,o}return r(e,t),e.prototype._subscribe=function(t){var e=new i.Subscription,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new h(n)),e.add(r.subscribe(t)),e},e}(a.Observable);e.GroupedObservable=p;var h=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return r(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(i.Subscription)},w5QO:function(t,e,n){"use strict";e.noop=function(){}},xHZb:function(t,e,n){"use strict";var r=n("IEvo");e.queue=new(n("H2PQ").QueueScheduler)(r.QueueAction)},xKqS:function(t,e,n){"use strict";var r=n("aJGj"),o=n("I65S"),i=n("vLqr");e.Notification=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return o.of(this.value);case"E":return i.throwError(this.error);case"C":return r.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},xXU7:function(t,e,n){"use strict";var r=n(null),o=n("T1DM"),i=n(null);function a(t,e){var n;return void 0===t&&(t=0),void 0===e&&(e=o.async),n=t,(Object(i.a)(n)||!(n-parseFloat(n)+1>=0)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=o.async),new r.a(function(n){return n.add(e.schedule(s,t,{subscriber:n,counter:0,period:t})),n})}function s(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}n.d(e,"interval",function(){return a})},yFcd:function(t,e,n){"use strict";var r=n("Q1FS");e.scalar=function(t){var e=new r.Observable(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}},yRPT:function(t,e,n){"use strict";e.isArrayLike=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},yoF8:function(t,e,n){"use strict";e.identity=function(t){return t}},"zB/H":function(t,e,n){"use strict";var r=n("mbIT"),o=n("GMZp"),i=n("pshJ"),a=n("MC6w"),s=n("24jU"),u=n("LBXl");function l(t){return t.reduce(function(t,e){return t.concat(e instanceof u.UnsubscriptionError?e.errors:e)},[])}e.Subscription=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,c=this._parents,p=this._unsubscribe,h=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,d=c?c.length:0;n;)n.remove(this),n=++f<d&&c[f]||null;if(i.isFunction(p)&&a.tryCatch(p).call(this)===s.errorObject&&(e=!0,t=t||(s.errorObject.e instanceof u.UnsubscriptionError?l(s.errorObject.e.errors):[s.errorObject.e])),r.isArray(h))for(f=-1,d=h.length;++f<d;){var m=h[f];if(o.isObject(m)&&a.tryCatch(m.unsubscribe).call(m)===s.errorObject){e=!0,t=t||[];var g=s.errorObject.e;g instanceof u.UnsubscriptionError?t=t.concat(l(g.errors)):t.push(g)}}if(e)throw new u.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}()},zUnb:function(t,e,n){"use strict";n.r(e);var r={};n.d(r,"version",function(){return Ny}),n.d(r,"setBackend",function(){return Sf.zc}),n.d(r,"getBackend",function(){return Sf.Va}),n.d(r,"disposeVariables",function(){return Sf.Ca}),n.d(r,"memory",function(){return Sf.Cb}),n.d(r,"version_core",function(){return Sf.wd}),n.d(r,"nextFrame",function(){return Sf.Pb}),n.d(r,"environment",function(){return Sf.Ia}),n.d(r,"io",function(){return Sf.db}),n.d(r,"serialization",function(){return Sf.yc}),n.d(r,"test_util",function(){return Sf.hd}),n.d(r,"util",function(){return Sf.rd}),n.d(r,"webgl",function(){return Sf.xd}),n.d(r,"AdadeltaOptimizer",function(){return Sf.a}),n.d(r,"AdagradOptimizer",function(){return Sf.b}),n.d(r,"AdamOptimizer",function(){return Sf.c}),n.d(r,"AdamaxOptimizer",function(){return Sf.d}),n.d(r,"MomentumOptimizer",function(){return Sf.g}),n.d(r,"Optimizer",function(){return Sf.h}),n.d(r,"RMSPropOptimizer",function(){return Sf.i}),n.d(r,"SGDOptimizer",function(){return Sf.l}),n.d(r,"Tensor",function(){return Sf.m}),n.d(r,"TensorBuffer",function(){return Sf.n}),n.d(r,"variable",function(){return Sf.ud}),n.d(r,"Variable",function(){return Sf.o}),n.d(r,"Rank",function(){return Sf.j}),n.d(r,"Reduction",function(){return Sf.k}),n.d(r,"ENV",function(){return Sf.e}),n.d(r,"Environment",function(){return Sf.f}),n.d(r,"doc",function(){return Sf.Fa}),n.d(r,"image",function(){return Sf.cb}),n.d(r,"linalg",function(){return Sf.kb}),n.d(r,"losses",function(){return Sf.vb}),n.d(r,"op",function(){return Sf.Wb}),n.d(r,"batchNormalization2d",function(){return Sf.G}),n.d(r,"batchNormalization3d",function(){return Sf.H}),n.d(r,"batchNormalization4d",function(){return Sf.I}),n.d(r,"batchNormalization",function(){return Sf.F}),n.d(r,"concat",function(){return Sf.O}),n.d(r,"concat1d",function(){return Sf.P}),n.d(r,"concat2d",function(){return Sf.Q}),n.d(r,"concat3d",function(){return Sf.R}),n.d(r,"concat4d",function(){return Sf.S}),n.d(r,"conv1d",function(){return Sf.T}),n.d(r,"conv2d",function(){return Sf.U}),n.d(r,"depthwiseConv2d",function(){return Sf.Aa}),n.d(r,"separableConv2d",function(){return Sf.xc}),n.d(r,"conv2dTranspose",function(){return Sf.V}),n.d(r,"matMul",function(){return Sf.wb}),n.d(r,"dot",function(){return Sf.Ga}),n.d(r,"outerProduct",function(){return Sf.Xb}),n.d(r,"reverse",function(){return Sf.oc}),n.d(r,"reverse1d",function(){return Sf.pc}),n.d(r,"reverse2d",function(){return Sf.qc}),n.d(r,"reverse3d",function(){return Sf.rc}),n.d(r,"reverse4d",function(){return Sf.sc}),n.d(r,"maxPool",function(){return Sf.yb}),n.d(r,"avgPool",function(){return Sf.D}),n.d(r,"slice",function(){return Sf.Fc}),n.d(r,"slice1d",function(){return Sf.Gc}),n.d(r,"slice2d",function(){return Sf.Hc}),n.d(r,"slice3d",function(){return Sf.Ic}),n.d(r,"slice4d",function(){return Sf.Jc}),n.d(r,"abs",function(){return Sf.p}),n.d(r,"acos",function(){return Sf.q}),n.d(r,"acosh",function(){return Sf.r}),n.d(r,"asin",function(){return Sf.y}),n.d(r,"asinh",function(){return Sf.z}),n.d(r,"atan",function(){return Sf.A}),n.d(r,"atanh",function(){return Sf.C}),n.d(r,"ceil",function(){return Sf.L}),n.d(r,"clipByValue",function(){return Sf.M}),n.d(r,"cos",function(){return Sf.W}),n.d(r,"cosh",function(){return Sf.X}),n.d(r,"erf",function(){return Sf.La}),n.d(r,"exp",function(){return Sf.Ma}),n.d(r,"expm1",function(){return Sf.Oa}),n.d(r,"floor",function(){return Sf.Ra}),n.d(r,"log",function(){return Sf.nb}),n.d(r,"log1p",function(){return Sf.ob}),n.d(r,"logSigmoid",function(){return Sf.pb}),n.d(r,"neg",function(){return Sf.Ob}),n.d(r,"reciprocal",function(){return Sf.lc}),n.d(r,"round",function(){return Sf.tc}),n.d(r,"rsqrt",function(){return Sf.uc}),n.d(r,"sigmoid",function(){return Sf.Ac}),n.d(r,"sign",function(){return Sf.Cc}),n.d(r,"sin",function(){return Sf.Dc}),n.d(r,"sinh",function(){return Sf.Ec}),n.d(r,"softplus",function(){return Sf.Lc}),n.d(r,"sqrt",function(){return Sf.Nc}),n.d(r,"square",function(){return Sf.Oc}),n.d(r,"step",function(){return Sf.Tc}),n.d(r,"tan",function(){return Sf.Yc}),n.d(r,"tanh",function(){return Sf.Zc}),n.d(r,"all",function(){return Sf.u}),n.d(r,"any",function(){return Sf.v}),n.d(r,"argMax",function(){return Sf.w}),n.d(r,"argMin",function(){return Sf.x}),n.d(r,"logSumExp",function(){return Sf.qb}),n.d(r,"max",function(){return Sf.xb}),n.d(r,"mean",function(){return Sf.Bb}),n.d(r,"min",function(){return Sf.Db}),n.d(r,"moments",function(){return Sf.Ib}),n.d(r,"sum",function(){return Sf.Xc}),n.d(r,"equal",function(){return Sf.Ja}),n.d(r,"equalStrict",function(){return Sf.Ka}),n.d(r,"greater",function(){return Sf.Ya}),n.d(r,"greaterEqual",function(){return Sf.Za}),n.d(r,"greaterEqualStrict",function(){return Sf.ab}),n.d(r,"greaterStrict",function(){return Sf.bb}),n.d(r,"less",function(){return Sf.gb}),n.d(r,"lessEqual",function(){return Sf.hb}),n.d(r,"lessEqualStrict",function(){return Sf.ib}),n.d(r,"lessStrict",function(){return Sf.jb}),n.d(r,"notEqual",function(){return Sf.Rb}),n.d(r,"notEqualStrict",function(){return Sf.Sb}),n.d(r,"add",function(){return Sf.s}),n.d(r,"addStrict",function(){return Sf.t}),n.d(r,"atan2",function(){return Sf.B}),n.d(r,"div",function(){return Sf.Da}),n.d(r,"divStrict",function(){return Sf.Ea}),n.d(r,"floorDiv",function(){return Sf.Sa}),n.d(r,"maximum",function(){return Sf.zb}),n.d(r,"maximumStrict",function(){return Sf.Ab}),n.d(r,"minimum",function(){return Sf.Eb}),n.d(r,"minimumStrict",function(){return Sf.Fb}),n.d(r,"mod",function(){return Sf.Gb}),n.d(r,"modStrict",function(){return Sf.Hb}),n.d(r,"mul",function(){return Sf.Kb}),n.d(r,"mulStrict",function(){return Sf.Lb}),n.d(r,"pow",function(){return Sf.dc}),n.d(r,"powStrict",function(){return Sf.ec}),n.d(r,"squaredDifference",function(){return Sf.Pc}),n.d(r,"squaredDifferenceStrict",function(){return Sf.Qc}),n.d(r,"sub",function(){return Sf.Vc}),n.d(r,"subStrict",function(){return Sf.Wc}),n.d(r,"sigmoidCrossEntropyWithLogits",function(){return Sf.Bc}),n.d(r,"elu",function(){return Sf.Ha}),n.d(r,"leakyRelu",function(){return Sf.fb}),n.d(r,"prelu",function(){return Sf.fc}),n.d(r,"relu",function(){return Sf.mc}),n.d(r,"selu",function(){return Sf.wc}),n.d(r,"logicalAnd",function(){return Sf.rb}),n.d(r,"logicalNot",function(){return Sf.sb}),n.d(r,"logicalOr",function(){return Sf.tb}),n.d(r,"logicalXor",function(){return Sf.ub}),n.d(r,"where",function(){return Sf.yd}),n.d(r,"buffer",function(){return Sf.J}),n.d(r,"toPixels",function(){return Sf.ld}),n.d(r,"cast",function(){return Sf.K}),n.d(r,"clone",function(){return Sf.N}),n.d(r,"cumsum",function(){return Sf.Y}),n.d(r,"expandDims",function(){return Sf.Na}),n.d(r,"eye",function(){return Sf.Pa}),n.d(r,"fromPixels",function(){return Sf.Ta}),n.d(r,"multinomial",function(){return Sf.Nb}),n.d(r,"oneHot",function(){return Sf.Tb}),n.d(r,"pad",function(){return Sf.Yb}),n.d(r,"pad1d",function(){return Sf.Zb}),n.d(r,"pad2d",function(){return Sf.ac}),n.d(r,"pad3d",function(){return Sf.bc}),n.d(r,"pad4d",function(){return Sf.cc}),n.d(r,"print",function(){return Sf.gc}),n.d(r,"rand",function(){return Sf.hc}),n.d(r,"randomNormal",function(){return Sf.ic}),n.d(r,"randomUniform",function(){return Sf.jc}),n.d(r,"reshape",function(){return Sf.nc}),n.d(r,"split",function(){return Sf.Mc}),n.d(r,"squeeze",function(){return Sf.Rc}),n.d(r,"stack",function(){return Sf.Sc}),n.d(r,"tile",function(){return Sf.jd}),n.d(r,"truncatedNormal",function(){return Sf.od}),n.d(r,"unstack",function(){return Sf.qd}),n.d(r,"fill",function(){return Sf.Qa}),n.d(r,"linspace",function(){return Sf.lb}),n.d(r,"ones",function(){return Sf.Ub}),n.d(r,"range",function(){return Sf.kc}),n.d(r,"scalar",function(){return Sf.vc}),n.d(r,"tensor",function(){return Sf.ad}),n.d(r,"tensor1d",function(){return Sf.bd}),n.d(r,"tensor2d",function(){return Sf.cd}),n.d(r,"tensor3d",function(){return Sf.dd}),n.d(r,"tensor4d",function(){return Sf.ed}),n.d(r,"tensor5d",function(){return Sf.fd}),n.d(r,"tensor6d",function(){return Sf.gd}),n.d(r,"zeros",function(){return Sf.zd}),n.d(r,"onesLike",function(){return Sf.Vb}),n.d(r,"zerosLike",function(){return Sf.Ad}),n.d(r,"transpose",function(){return Sf.nd}),n.d(r,"softmax",function(){return Sf.Kc}),n.d(r,"localResponseNormalization",function(){return Sf.mb}),n.d(r,"norm",function(){return Sf.Qb}),n.d(r,"gather",function(){return Sf.Ua}),n.d(r,"unsortedSegmentSum",function(){return Sf.pd}),n.d(r,"basicLSTMCell",function(){return Sf.E}),n.d(r,"multiRNNCell",function(){return Sf.Mb}),n.d(r,"movingAverage",function(){return Sf.Jb}),n.d(r,"stridedSlice",function(){return Sf.Uc}),n.d(r,"train",function(){return Sf.md}),n.d(r,"tidy",function(){return Sf.id}),n.d(r,"keep",function(){return Sf.eb}),n.d(r,"dispose",function(){return Sf.Ba}),n.d(r,"time",function(){return Sf.kd}),n.d(r,"grad",function(){return Sf.Wa}),n.d(r,"valueAndGrad",function(){return Sf.sd}),n.d(r,"grads",function(){return Sf.Xa}),n.d(r,"valueAndGrads",function(){return Sf.td}),n.d(r,"variableGrads",function(){return Sf.vd}),n.d(r,"customGrad",function(){return Sf.Z}),n.d(r,"constraints",function(){return gd}),n.d(r,"initializers",function(){return vm}),n.d(r,"layers",function(){return Sy}),n.d(r,"metrics",function(){return Cy}),n.d(r,"regularizers",function(){return Iy}),n.d(r,"CallbackList",function(){return Lm}),n.d(r,"CustomCallback",function(){return Fm}),n.d(r,"Callback",function(){return Ay}),n.d(r,"SymbolicTensor",function(){return Am}),n.d(r,"Model",function(){return Lg}),n.d(r,"input",function(){return Ug}),n.d(r,"loadModel",function(){return Vg}),n.d(r,"model",function(){return Bg}),n.d(r,"sequential",function(){return Fg}),n.d(r,"RNN",function(){return iy}),n.d(r,"Sequential",function(){return zg}),n.d(r,"LayerVariable",function(){return Em}),n.d(r,"version_layers",function(){return _g}),n.d(r,"FrozenModel",function(){return ky.a}),n.d(r,"loadFrozenModel",function(){return ky.b}),n.d(r,"version_converter",function(){return ky.c});var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function s(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t}function c(t){return"function"==typeof t}var p=!1,h={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){p=t},get useDeprecatedSynchronousErrorHandling(){return p}};function f(t){setTimeout(function(){throw t})}var d={closed:!0,next:function(t){},error:function(t){if(h.useDeprecatedSynchronousErrorHandling)throw t;f(t)},complete:function(){}},m=Array.isArray||function(t){return t&&"number"==typeof t.length};function g(t){return null!=t&&"object"==typeof t}var v,y={e:{}};function b(){try{return v.apply(this,arguments)}catch(t){return y.e=t,y}}function w(t){return v=t,b}function _(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}_.prototype=Object.create(Error.prototype);var x=_,O=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,s=r?r.length:0;n;)n.remove(this),n=++a<s&&r[a]||null;if(c(o)&&w(o).call(this)===y&&(e=!0,t=t||(y.e instanceof x?E(y.e.errors):[y.e])),m(i))for(a=-1,s=i.length;++a<s;){var u=i[a];if(g(u)&&w(u.unsubscribe).call(u)===y){e=!0,t=t||[];var l=y.e;l instanceof x?t=t.concat(E(l.errors)):t.push(l)}}if(e)throw new x(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function E(t){return t.reduce(function(t,e){return t.concat(e instanceof x?e.errors:e)},[])}var S="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",C=function(t){function e(e,n,r){var o,i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,i._parentSubscription=null,arguments.length){case 0:i.destination=d;break;case 1:if(!e){i.destination=d;break}if("object"==typeof e){if((o=e)instanceof C||"_addParentTeardownLogic"in o&&o[S]){var a=e[S]();i.syncErrorThrowable=a.syncErrorThrowable,i.destination=a,a._addParentTeardownLogic(i)}else i.syncErrorThrowable=!0,i.destination=new I(i,e);break}default:i.syncErrorThrowable=!0,i.destination=new I(i,e,n,r)}return i}return i(e,t),e.prototype[S]=function(){return this},e.create=function(t,n,r){var o=new e(t,n,r);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t),this._unsubscribeParentSubscription())},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete(),this._unsubscribeParentSubscription())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._addParentTeardownLogic=function(t){t!==this&&(this._parentSubscription=this.add(t))},e.prototype._unsubscribeParentSubscription=function(){null!==this._parentSubscription&&this._parentSubscription.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this._parentSubscription=null,this},e}(O),I=function(t){function e(e,n,r,o){var i,a=t.call(this)||this;a._parentSubscriber=e;var s=a;return c(n)?i=n:n&&(i=n.next,r=n.error,o=n.complete,n!==d&&(c((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=i,a._error=r,a._complete=o,a}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;h.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=h.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):f(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;f(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};h.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),h.useDeprecatedSynchronousErrorHandling)throw t;f(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!h.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return h.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(f(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(C),A="function"==typeof Symbol&&Symbol.observable||"@@observable";function k(){}function N(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return P(t)}function P(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:k}var T=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,o=function(t,e,n){if(t){if(t instanceof C)return t;if(t[S])return t[S]()}return t||e||n?new C(t,e,n):new C(d)}(t,e,n);if(r?r.call(o,this.source):o._addParentTeardownLogic(this.source||h.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),h.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){h.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=R(e))(function(e,r){var o;o=n.subscribe(function(e){try{t(e)}catch(t){r(t),o&&o.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[A]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:P(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=R(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function R(t){if(t||(t=h.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function M(t){return t&&"function"==typeof t.schedule}var D=function(t){function e(e,n,r){var o=t.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=r,o.index=0,o}return i(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(C),j=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}},L=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,f),e}},z=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),B=function(t){return function(e){for(var n=t[z]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}},F=function(t){return function(e){var n=t[A]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},V=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function U(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var W=function(t){if(t instanceof T)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[A])return F(t);if(V(t))return j(t);if(U(t))return L(t);if(t&&"function"==typeof t[z])return B(t);var e=g(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function q(t,e,n,r,o){if(void 0===o&&(o=new D(t,n,r)),!o.closed)return W(e)(o)}var H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(C);function G(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new $(t,e))}}var $=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new K(t,this.project,this.thisArg))},t}(),K=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(C);function Q(t,e){return new T(e?function(n){var r=new O,o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r}:j(t))}function X(t,e){if(!e)return t instanceof T?t:new T(W(t));if(null!=t){if(function(t){return t&&"function"==typeof t[A]}(t))return function(t,e){return new T(e?function(n){var r=new O;return r.add(e.schedule(function(){var o=t[A]();r.add(o.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:F(t))}(t,e);if(U(t))return function(t,e){return new T(e?function(n){var r=new O;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:L(t))}(t,e);if(V(t))return Q(t,e);if(function(t){return t&&"function"==typeof t[z]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new T(e?function(n){var r,o=new O;return o.add(function(){r&&"function"==typeof r.return&&r.return()}),o.add(e.schedule(function(){r=t[z](),o.add(e.schedule(function(){if(!n.closed){var t,e;try{var o=r.next();t=o.value,e=o.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),o}:B(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function Y(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(Y(function(n,r){return X(t(n,r)).pipe(G(function(t,o){return e(n,t,r,o)}))},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new Z(t,n))})}var Z=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new J(t,this.project,this.concurrent))},t}(),J=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var o=t.call(this,e)||this;return o.project=n,o.concurrent=r,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new D(this,void 0,void 0);this.add(r),q(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(H);function tt(t){return t}function et(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Y(tt,t)}function nt(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}nt.prototype=Object.create(Error.prototype);var rt=nt,ot=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(O),it=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return i(e,t),e}(C),at=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i(e,t),e.prototype[S]=function(){return new it(this)},e.prototype.lift=function(t){var e=new st(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new rt;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new rt;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new rt;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new rt;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new rt;return this.hasError?(t.error(this.thrownError),O.EMPTY):this.isStopped?(t.complete(),O.EMPTY):(this.observers.push(t),new ot(this,t))},e.prototype.asObservable=function(){var t=new T;return t.source=this,t},e.create=function(t,e){return new st(t,e)},e}(T),st=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):O.EMPTY},e}(at);function ut(){return function(t){return t.lift(new lt(t))}}var lt=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new ct(t,n),o=e.subscribe(r);return r.closed||(r.connection=n.connect()),o},t}(),ct=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(C),pt=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new O).add(this.source.subscribe(new ft(this.getSubject(),this))),t.closed?(this._connection=null,t=O.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return ut()(this)},e}(T).prototype,ht={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:pt._subscribe},_isComplete:{value:pt._isComplete,writable:!0},getSubject:{value:pt.getSubject},connect:{value:pt.connect},refCount:{value:pt.refCount}},ft=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(it);function dt(){return new at}function mt(t){return{providedIn:t.providedIn||null,factory:t.factory,value:void 0}}var gt=function(){function t(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==e?mt({providedIn:e.providedIn||"root",factory:e.factory}):void 0}return t.prototype.toString=function(){return"InjectionToken "+this._desc},t}(),vt="__parameters__";function yt(t,e,n){var r=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var r=t.apply(void 0,l(e));for(var o in r)this[o]=r[o]}}}(e);function o(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof o)return r.apply(this,e),this;var i=new((t=o).bind.apply(t,l([void 0],e)));return a.annotation=i,a;function a(t,e,n){for(var r=t.hasOwnProperty(vt)?t[vt]:Object.defineProperty(t,vt,{value:[]})[vt];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(i),t}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}var bt=new gt("AnalyzeForEntryComponents");Function;var wt="undefined"!=typeof window&&window,_t="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,xt="undefined"!=typeof global&&global||wt||_t,Ot=Promise.resolve(0),Et=null;function St(){if(!Et){var t=xt.Symbol;if(t&&t.iterator)Et=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Et=r)}}return Et}function Ct(t){"undefined"==typeof Zone?Ot.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function It(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function At(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(At).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function kt(t){return t.__forward_ref__=kt,t.toString=function(){return At(this())},t}function Nt(t){return"function"==typeof t&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===kt?t():t}var Pt=yt("Inject",function(t){return{token:t}}),Tt=yt("Optional"),Rt=yt("Self"),Mt=yt("SkipSelf"),Dt="__source",jt=new Object,Lt=jt,zt=new gt("INJECTOR"),Bt=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=jt),e===jt)throw new Error("NullInjectorError: No provider for "+At(t)+"!");return e},t}(),Ft=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new Xt(t,e):new Xt(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=jt,t.NULL=new Bt,t.ngInjectableDef=mt({providedIn:"any",factory:function(){return ne(zt)}}),t}(),Vt=function(t){return t},Ut=[],Wt=Vt,qt=function(){return Array.prototype.slice.call(arguments)},Ht={},Gt=function(t){for(var e in t)if(t[e]===Ht)return e;throw Error("!prop")}({provide:String,useValue:Ht}),$t=Ft.NULL,Kt=/\n/gm,Qt="\u0275",Xt=function(){function t(t,e,n){void 0===e&&(e=$t),void 0===n&&(n=null),this.parent=e,this.source=n;var r=this._records=new Map;r.set(Ft,{token:Ft,fn:Vt,deps:Ut,value:this,useNew:!1}),r.set(zt,{token:zt,fn:Vt,deps:Ut,value:this,useNew:!1}),function t(e,n){if(n)if((n=Nt(n))instanceof Array)for(var r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw Jt("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Jt("Unexpected provider",n);var o=Nt(n.provide),i=function(t){var e=function(t){var e=Ut,n=t.deps;if(n&&n.length){e=[];for(var r=0;r<n.length;r++){var o=6;if((u=Nt(n[r]))instanceof Array)for(var i=0,a=u;i<a.length;i++){var s=a[i];s instanceof Tt||s==Tt?o|=1:s instanceof Mt||s==Mt?o&=-3:s instanceof Rt||s==Rt?o&=-5:u=s instanceof Pt?s.token:Nt(s)}e.push({token:u,options:o})}}else if(t.useExisting){var u;e=[{token:u=Nt(t.useExisting),options:6}]}else if(!(n||Gt in t))throw Jt("'deps' required",t);return e}(t),n=Vt,r=Ut,o=!1,i=Nt(t.provide);if(Gt in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)o=!0,n=Nt(t.useClass);else{if("function"!=typeof i)throw Jt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);o=!0,n=i}return{deps:e,fn:n,useNew:o,value:r}}(n);if(!0===n.multi){var a=e.get(o);if(a){if(a.fn!==qt)throw Yt(o)}else e.set(o,a={token:n.provide,deps:[],useNew:!1,fn:qt,value:Ut});a.deps.push({token:o=n,options:6})}var s=e.get(o);if(s&&s.fn==qt)throw Yt(o);e.set(o,i)}}(r,t)}return t.prototype.get=function(t,e,n){void 0===n&&(n=0);var r=this._records.get(t);try{return function t(e,n,r,o,i,a){try{return function(e,n,r,o,i,a){var s,u;if(!n||4&a)2&a||(u=o.get(e,i,0));else{if((u=n.value)==Wt)throw Error(Qt+"Circular dependency");if(u===Ut){n.value=Wt;var c=n.useNew,p=n.fn,h=n.deps,f=Ut;if(h.length){f=[];for(var d=0;d<h.length;d++){var m=h[d],g=m.options,v=2&g?r.get(m.token):void 0;f.push(t(m.token,v,r,v||4&g?o:$t,1&g?null:Ft.THROW_IF_NOT_FOUND,0))}}n.value=u=c?new((s=p).bind.apply(s,l([void 0],f))):p.apply(void 0,f)}}return u}(e,n,r,o,i,a)}catch(t){throw t instanceof Error||(t=new Error(t)),(t.ngTempTokenPath=t.ngTempTokenPath||[]).unshift(e),n&&n.value==Wt&&(n.value=Ut),t}}(t,r,this._records,this.parent,e,n)}catch(e){var o=e.ngTempTokenPath;throw t[Dt]&&o.unshift(t[Dt]),e.message=Zt("\n"+e.message,o,this.source),e.ngTokenPath=o,e.ngTempTokenPath=null,e}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(At(n))}),"StaticInjector["+t.join(", ")+"]"},t}();function Yt(t){return Jt("Cannot mix multi providers and regular providers",t)}function Zt(t,e,n){void 0===n&&(n=null),t=t&&"\n"===t.charAt(0)&&t.charAt(1)==Qt?t.substr(2):t;var r=At(e);if(e instanceof Array)r=e.map(At).join(" -> ");else if("object"==typeof e){var o=[];for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];o.push(i+":"+("string"==typeof a?JSON.stringify(a):At(a)))}r="{"+o.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+r+"]: "+t.replace(Kt,"\n  ")}function Jt(t,e){return new Error(Zt(t,e))}var te=void 0;function ee(t){var e=te;return te=t,e}function ne(t,e){if(void 0===e&&(e=0),void 0===te)throw new Error("inject() must be called from an injection context");if(null===te){var n=t.ngInjectableDef;if(n&&"root"==n.providedIn)return void 0===n.value?n.value=n.factory():n.value;if(8&e)return null;throw new Error("Injector: NOT_FOUND ["+At(t)+"]")}return te.get(t,8&e?null:void 0,e)}function re(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var o=void 0,i=0,a=0;a<r.length;a++){var s=r[a];s instanceof Tt||"Optional"===s.ngMetadataName?i|=8:s instanceof Mt||"SkipSelf"===s.ngMetadataName?i|=4:s instanceof Rt||"Self"===s.ngMetadataName?i|=2:o=s instanceof Pt?s.token:s}e.push(ne(o,i))}else e.push(ne(r))}return e}String;var oe=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({}),ie=new function(t){this.full="6.1.0",this.major="6.1.0".split(".")[0],this.minor="6.1.0".split(".")[1],this.patch="6.1.0".split(".").slice(2).join(".")}("6.1.0"),ae="ngDebugContext",se="ngOriginalError",ue="ngErrorLogger";function le(t){return t[ae]}function ce(t){return t[se]}function pe(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,l(e))}var he=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[ue]||pe}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)},t.prototype._findContext=function(t){return t?le(t)?le(t):this._findContext(ce(t)):null},t.prototype._findOriginalError=function(t){for(var e=ce(t);e&&ce(e);)e=ce(e);return e},t}(),fe=new gt("The presence of this token marks an injector as being the root injector."),de={},me={},ge=[],ve=void 0;function ye(){return void 0===ve&&(ve=new Bt),ve}var be=function(){function t(t,e,n){var r=this;this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this.destroyed=!1,xe([t],function(t){return r.processInjectorType(t,new Set)}),e&&xe(e,function(t){return r.processProvider(t)}),this.records.set(zt,_e(void 0,this)),this.isRootInjector=this.records.has(fe),this.injectorDefTypes.forEach(function(t){return r.get(t)})}return t.prototype.destroy=function(){this.assertNotDestroyed(),this.destroyed=!0;try{this.onDestroy.forEach(function(t){return t.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}},t.prototype.get=function(t,e,n){void 0===e&&(e=Lt),void 0===n&&(n=0),this.assertNotDestroyed();var r,o=ee(this);try{if(!(4&n)){var i=this.records.get(t);if(void 0===i){var a=("function"==typeof(r=t)||"object"==typeof r&&r instanceof gt)&&t.ngInjectableDef||void 0;void 0!==a&&this.injectableDefInScope(a)&&(i=we(t),this.records.set(t,i))}if(void 0!==i)return this.hydrate(t,i)}return 2&n&&ye(),this.parent.get(t,e)}finally{ee(o)}},t.prototype.assertNotDestroyed=function(){if(this.destroyed)throw new Error("Injector has already been destroyed.")},t.prototype.processInjectorType=function(t,e){var n=this,r=(t=Nt(t)).ngInjectorDef,o=null==r&&t.ngModule||void 0,i=void 0===o?t:o,a=void 0!==o&&t.providers||ge;if(void 0!==o&&(r=o.ngInjectorDef),null!=r){if(e.has(i))throw new Error("Circular dependency: type "+At(i)+" ends up importing itself.");if(this.injectorDefTypes.add(i),this.records.set(i,_e(r.factory)),null!=r.imports){e.add(i);try{xe(r.imports,function(t){return n.processInjectorType(t,e)})}finally{e.delete(i)}}null!=r.providers&&xe(r.providers,function(t){return n.processProvider(t)}),xe(a,function(t){return n.processProvider(t)})}},t.prototype.processProvider=function(t){var e=Oe(t=Nt(t))?t:Nt(t.provide),n=function(t){var e=Nt(t),n=de,r=void 0;if(Oe(t))return we(t);if(e=Nt(t.provide),Gt in t)n=t.useValue;else if(t.useExisting)r=function(){return ne(t.useExisting)};else if(t.useFactory)r=function(){return t.useFactory.apply(t,l(re(t.deps||[])))};else{var o=t.useClass||e;if(!t.deps)return we(o);r=function(){return new(o.bind.apply(o,l([void 0],re(t.deps))))}}return _e(r,n)}(t);if(Oe(t)||!0!==t.multi){var r=this.records.get(e);if(r&&void 0!==r.multi)throw new Error("Mixed multi-provider for "+At(e))}else{var o=this.records.get(e);if(o){if(void 0===o.multi)throw new Error("Mixed multi-provider for "+e+".")}else(o=_e(void 0,de,!0)).factory=function(){return re(o.multi)},this.records.set(e,o);e=t,o.multi.push(t)}this.records.set(e,n)},t.prototype.hydrate=function(t,e){if(e.value===me)throw new Error("Circular dep for "+At(t));var n;return e.value===de&&(e.value=me,e.value=e.factory()),"object"==typeof e.value&&e.value&&"object"==typeof(n=e.value)&&null!=n&&n.ngOnDestroy&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value},t.prototype.injectableDefInScope=function(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||"root"===t.providedIn&&this.isRootInjector:this.injectorDefTypes.has(t.providedIn))},t}();function we(t){var e=t.ngInjectableDef;if(void 0===e){if(t instanceof gt)throw new Error("Token "+At(t)+" is missing an ngInjectableDef definition.");return _e(function(){return new t})}return _e(e.factory)}function _e(t,e,n){return void 0===e&&(e=de),void 0===n&&(n=!1),{factory:t,value:e,multi:n?[]:void 0}}function xe(t,e){t.forEach(function(t){return Array.isArray(t)?xe(t,e):e(t)})}function Oe(t){return"function"==typeof t}function Ee(t){return!!t&&"function"==typeof t.then}var Se=new gt("Application Initializer"),Ce=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var o=this.appInits[r]();Ee(o)&&e.push(o)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},t}(),Ie=new gt("AppId");function Ae(){return""+ke()+ke()+ke()}function ke(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Ne=new gt("Platform Initializer"),Pe=new gt("Platform ID"),Te=new gt("appBootstrapListener"),Re=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t}();function Me(){throw new Error("Runtime compiler is not loaded")}var De=function(){function t(){}return t.prototype.compileModuleSync=function(t){throw Me()},t.prototype.compileModuleAsync=function(t){throw Me()},t.prototype.compileModuleAndAllComponentsSync=function(t){throw Me()},t.prototype.compileModuleAndAllComponentsAsync=function(t){throw Me()},t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t.prototype.getModuleId=function(t){},t}(),je=function(){},Le=function(){},ze=function(){};function Be(t){var e=Error("No component factory found for "+At(t)+". Did you add it to @NgModule.entryComponents?");return e[Ue]=t,e}var Fe,Ve,Ue="ngComponent",We=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw Be(t)},t}(),qe=function(){function t(){}return t.NULL=new We,t}(),He=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var r=0;r<t.length;r++){var o=t[r];this._factories.set(o.componentType,o)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw Be(t);return new Ge(e,this._ngModule)},t}(),Ge=function(t){function e(e,n){var r=t.call(this)||this;return r.factory=e,r.ngModule=n,r.selector=e.selector,r.componentType=e.componentType,r.ngContentSelectors=e.ngContentSelectors,r.inputs=e.inputs,r.outputs=e.outputs,r}return i(e,t),e.prototype.create=function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)},e}(ze),$e=function(){},Ke=function(){},Qe=function(){var t=xt.wtf;return!(!t||!(Fe=t.trace)||(Ve=Fe.events,0))}();function Xe(t,e){return null}var Ye=Qe?function(t,e){return void 0===e&&(e=null),Ve.createScope(t,e)}:function(t,e){return Xe},Ze=Qe?function(t,e){return Fe.leaveScope(t,e),e}:function(t,e){return e},Je=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return i(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,r){var o,i=function(t){return null},a=function(){return null};e&&"object"==typeof e?(o=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(i=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(o=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(i=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(a=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var s=t.prototype.subscribe.call(this,o,i,a);return e instanceof O&&e.add(s),s},e}(at),tn=function(){function t(t){var e,n=t.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Je(!1),this.onMicrotaskEmpty=new Je(!1),this.onStable=new Je(!1),this.onError=new Je(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,n,r,o,i,a){try{return on(e),t.invokeTask(r,o,i,a)}finally{an(e)}},onInvoke:function(t,n,r,o,i,a,s){try{return on(e),t.invoke(r,o,i,a,s)}finally{an(e)}},onHasTask:function(t,n,r,o){t.hasTask(r,o),n===r&&("microTask"==o.change?(e.hasPendingMicrotasks=o.microTask,rn(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:function(t,n,r,o){return t.handleError(r,o),e.runOutsideAngular(function(){return e.onError.emit(o)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,r){var o=this._inner,i=o.scheduleEventTask("NgZoneEvent: "+r,t,nn,en,en);try{return o.runTask(i,e,n)}finally{o.cancelTask(i)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function en(){}var nn={};function rn(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function on(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function an(t){t._nesting--,rn(t)}var sn,un=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Je,this.onMicrotaskEmpty=new Je,this.onStable=new Je,this.onError=new Je}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),ln=function(){function t(t){var e=this;this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents(),t.run(function(){e.taskTrackingZone=Zone.current.get("TaskTrackingZone")})}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){tn.assertNotInAngularZone(),Ct(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;if(this.isStable())Ct(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}},t.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,isPeriodic:t.data.isPeriodic,delay:t.data.delay,creationLocation:t.creationLocation,xhr:t.data.target}}):[]},t.prototype.addCallback=function(t,e,n){var r=this,o=-1;e&&e>0&&(o=setTimeout(function(){r._callbacks=r._callbacks.filter(function(t){return t.timeoutId!==o}),t(r._didWork,r.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:n})},t.prototype.whenStable=function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),cn=function(){function t(){this._applications=new Map,pn.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),pn.findTestabilityInTree(this,t,e)},t.ctorParameters=function(){return[]},t}(),pn=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),hn=!0,fn=!1,dn=new gt("AllowMultipleToken");function mn(){return fn=!0,hn}var gn=function(t,e){this.name=t,this.token=e};function vn(t,e,n){void 0===n&&(n=[]);var r="Platform: "+e,o=new gt(r);return function(e){void 0===e&&(e=[]);var i=yn();if(!i||i.injector.get(dn,!1))if(t)t(n.concat(e).concat({provide:o,useValue:!0}));else{var a=n.concat(e).concat({provide:o,useValue:!0});!function(t){if(sn&&!sn.destroyed&&!sn.injector.get(dn,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");sn=t.get(bn);var e=t.get(Ne,null);e&&e.forEach(function(t){return t()})}(Ft.create({providers:a,name:r}))}return function(t){var e=yn();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(o)}}function yn(){return sn&&!sn.destroyed?sn:null}var bn=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,r=this,o="noop"===(n=e?e.ngZone:void 0)?new un:("zone.js"===n?void 0:n)||new tn({enableLongStackTrace:mn()}),i=[{provide:tn,useValue:o}];return o.run(function(){var e=Ft.create({providers:i,parent:r.injector,name:t.moduleType.name}),n=t.create(e),a=n.injector.get(he,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return xn(r._modules,n)}),o.runOutsideAngular(function(){return o.onError.subscribe({next:function(t){a.handleError(t)}})}),function(t,e,o){try{var i=((a=n.injector.get(Ce)).runInitializers(),a.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return Ee(i)?i.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):i}catch(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}var a}(a,o)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var r=this.injector.get(je),o=wn({},e);return r.createCompiler([o]).compileModuleAsync(t).then(function(t){return n.bootstrapModuleFactory(t,o)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(_n);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+At(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function wn(t,e){return Array.isArray(e)?e.reduce(wn,t):a({},t,e)}var _n=function(){function t(t,e,n,r,o,i){var a=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=o,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=mn(),this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run(function(){a.tick()})}});var s=new T(function(t){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular(function(){t.next(a._stable),t.complete()})}),u=new T(function(t){var e;a._zone.runOutsideAngular(function(){e=a._zone.onStable.subscribe(function(){tn.assertNotInAngularZone(),Ct(function(){a._stable||a._zone.hasPendingMacrotasks||a._zone.hasPendingMicrotasks||(a._stable=!0,t.next(!0))})})});var n=a._zone.onUnstable.subscribe(function(){tn.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,o=t[t.length-1];return M(o)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof o&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof T?t[0]:et(n)(Q(t,r))}(s,u.pipe(function(t){return ut()((e=dt,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,ht);return r.source=t,r.subjectFactory=n,r})(t));var e}))}return t.prototype.bootstrap=function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof ze?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var o=n instanceof Ge?null:this._injector.get($e),i=n.create(Ft.NULL,[],e||n.selector,o);i.onDestroy(function(){r._unloadComponent(i)});var a=i.injector.get(ln,null);return a&&i.injector.get(cn).registerApplication(i.location.nativeElement,a),this._loadComponent(i),mn()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i},t.prototype.tick=function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=t._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(t){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(t)})}finally{this._runningTick=!1,Ze(n)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;xn(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Te,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),xn(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=Ye("ApplicationRef#tick()"),t}();function xn(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var On=function(){},En=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({}),Sn=function(t){this.nativeElement=t},Cn=function(){},In=function(){function t(){this.dirty=!0,this._results=[],this.changes=new Je,this.length=0}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[St()]=function(){return this._results[St()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,n){var r=Array.isArray(n)?t(n):n;return e.concat(r)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),An=function(){},kn={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Nn=function(){function t(t,e){this._compiler=t,this._config=e||kn}return t.prototype.load=function(t){return this._compiler instanceof De?this.loadFactory(t):this.loadAndCompile(t)},t.prototype.loadAndCompile=function(t){var e=this,r=u(t.split("#"),2),o=r[0],i=r[1];return void 0===i&&(i="default"),n("crnd")(o).then(function(t){return t[i]}).then(function(t){return Pn(t,o,i)}).then(function(t){return e._compiler.compileModuleAsync(t)})},t.prototype.loadFactory=function(t){var e=u(t.split("#"),2),r=e[0],o=e[1],i="NgFactory";return void 0===o&&(o="default",i=""),n("crnd")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(function(t){return t[o+i]}).then(function(t){return Pn(t,r,o)})},t}();function Pn(t,e,n){if(!t)throw new Error("Cannot find '"+n+"' in '"+e+"'");return t}var Tn=function(){},Rn=function(){},Mn=function(){},Dn=function(){function t(t,e,n){this._debugContext=n,this.nativeNode=t,e&&e instanceof jn?e.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),jn=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.properties={},o.attributes={},o.classes={},o.styles={},o.childNodes=[],o.nativeElement=e,o}return i(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,r=this,o=this.childNodes.indexOf(t);-1!==o&&((n=this.childNodes).splice.apply(n,l([o+1,0],e)),e.forEach(function(t){t.parent&&t.parent.removeChild(t),t.parent=r}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return function t(e,n,r){e.childNodes.forEach(function(e){e instanceof jn&&(n(e)&&r.push(e),t(e,n,r))})}(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return function t(e,n,r){e instanceof jn&&e.childNodes.forEach(function(e){n(e)&&r.push(e),e instanceof jn&&t(e,n,r)})}(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(Dn),Ln=new Map;function zn(t){return Ln.get(t)||null}function Bn(t){Ln.set(t.nativeNode,t)}function Fn(t,e){var n=Wn(t),r=Wn(e);return n&&r?function(t,e,n){for(var r=t[St()](),o=e[St()]();;){var i=r.next(),a=o.next();if(i.done&&a.done)return!0;if(i.done||a.done)return!1;if(!n(i.value,a.value))return!1}}(t,e,Fn):!(n||!t||"object"!=typeof t&&"function"!=typeof t||r||!e||"object"!=typeof e&&"function"!=typeof e)||It(t,e)}var Vn=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),Un=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function Wn(t){return!!qn(t)&&(Array.isArray(t)||!(t instanceof Map)&&St()in t)}function qn(t){return null!==t&&("function"==typeof t||"object"==typeof t)}var Hn=function(){function t(){}return t.prototype.supports=function(t){return Wn(t)},t.prototype.create=function(t){return new $n(t)},t}(),Gn=function(t,e){return e},$n=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Gn}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,r=0,o=null;e||n;){var i=!n||e&&e.currentIndex<Yn(n,r,o)?e:n,a=Yn(i,r,o),s=i.currentIndex;if(i===n)r--,n=n._nextRemoved;else if(e=e._next,null==i.previousIndex)r++;else{o||(o=[]);var u=a-r,l=s-r;if(u!=l){for(var c=0;c<u;c++){var p=c<o.length?o[c]:o[c]=0,h=p+c;l<=h&&h<u&&(o[c]=p+1)}o[i.previousIndex]=l-u}}a!==s&&t(i,a,s)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!Wn(t))throw new Error("Error trying to diff '"+At(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,r,o,i=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)o=this._trackByFn(s,r=t[s]),null!==i&&It(i.trackById,o)?(a&&(i=this._verifyReinsertion(i,r,o,s)),It(i.item,r)||this._addIdentityChange(i,r)):(i=this._mismatch(i,r,o,s),a=!0),i=i._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r=t[St()](),o=void 0;!(o=r.next()).done;)e(o.value)}(t,function(t){o=e._trackByFn(n,t),null!==i&&It(i.trackById,o)?(a&&(i=e._verifyReinsertion(i,t,o,n)),It(i.item,t)||e._addIdentityChange(i,t)):(i=e._mismatch(i,t,o,n),a=!0),i=i._next,n++}),this.length=n;return this._truncate(i),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,r){var o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(It(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(It(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,r)):t=this._addAfter(new Kn(e,n),o,r),t},t.prototype._verifyReinsertion=function(t,e,n,r){var o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==o?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,o=t._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Xn),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Xn),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),Kn=function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Qn=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&It(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),Xn=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Qn,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function Yn(t,e,n){var r=t.previousIndex;if(null===r)return r;var o=0;return n&&r<n.length&&(o=n[r]),r+e+o}var Zn=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||qn(t)},t.prototype.create=function(){return new Jn},t}(),Jn=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||qn(t)))throw new Error("Error trying to diff '"+At(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var o=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,o=n._next;return r&&(r._next=o),o&&(o._prev=r),n._next=null,n._prev=null,n}var i=new tr(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){It(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),tr=function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},er=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new Mt,new Tt]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'")},t.ngInjectableDef=mt({providedIn:"root",factory:function(){return new t([new Hn])}}),t}(),nr=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new Mt,new Tt]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t}(),rr=[new Zn],or=new er([new Hn]),ir=new nr(rr),ar=vn(null,"core",[{provide:Pe,useValue:"unknown"},{provide:bn,deps:[Ft]},{provide:cn,deps:[]},{provide:Re,deps:[]}]),sr=new gt("LocaleId");function ur(){return or}function lr(){return ir}function cr(t){return t||"en-US"}var pr=function(t){},hr=function(){function t(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return t.prototype.getInertBodyElement_XHR=function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(t){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(null);var n=e.response.body;return n.removeChild(n.firstChild),n},t.prototype.getInertBodyElement_DOMParser=function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(t){return null}},t.prototype.getInertBodyElement_InertDocument=function(t){var e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},t.prototype.stripCustomNsAttrs=function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var o=t.firstChild;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling},t}(),fr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,dr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function mr(t){return(t=String(t)).match(fr)||t.match(dr)?t:(mn()&&console.warn("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}function gr(t){var e,n,r={};try{for(var o=s(t.split(",")),i=o.next();!i.done;i=o.next())r[i.value]=!0}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}function vr(){for(var t,e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o={};try{for(var i=s(n),a=i.next();!a.done;a=i.next()){var u=a.value;for(var l in u)u.hasOwnProperty(l)&&(o[l]=!0)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return o}var yr,br=gr("area,br,col,hr,img,wbr"),wr=gr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),_r=gr("rp,rt"),xr=vr(_r,wr),Or=vr(br,vr(wr,gr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vr(_r,gr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),xr),Er=gr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Sr=gr("srcset"),Cr=vr(Er,Sr,gr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),Ir=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild;e;)if(e.nodeType===Node.ELEMENT_NODE?this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var n=this.checkClobberedElement(e,e.nextSibling);if(n){e=n;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")},t.prototype.startElement=function(t){var e=t.nodeName.toLowerCase();if(Or.hasOwnProperty(e)){this.buf.push("<"),this.buf.push(e);for(var n,r=t.attributes,o=0;o<r.length;o++){var i=r.item(o),a=i.name,s=a.toLowerCase();if(Cr.hasOwnProperty(s)){var u=i.value;Er[s]&&(u=mr(u)),Sr[s]&&(n=u,u=(n=String(n)).split(",").map(function(t){return mr(t.trim())}).join(", ")),this.buf.push(" ",a,'="',Nr(u),'"')}else this.sanitizedSomething=!0}this.buf.push(">")}else this.sanitizedSomething=!0},t.prototype.endElement=function(t){var e=t.nodeName.toLowerCase();Or.hasOwnProperty(e)&&!br.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(Nr(t))},t.prototype.checkClobberedElement=function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e},t}(),Ar=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,kr=/([^\#-~ |!])/g;function Nr(t){return t.replace(/&/g,"&amp;").replace(Ar,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(kr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Pr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Tr=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Rr=/^url\(([^)]+)\)$/,Mr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({}),Dr=function(){};function jr(t,e,n){var r=t.state,o=1792&r;return o===e?(t.state=-1793&r|n,t.initIndex=-1,!0):o===n}function Lr(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function zr(t,e){return t.nodes[e]}function Br(t,e){return t.nodes[e]}function Fr(t,e){return t.nodes[e]}function Vr(t,e){return t.nodes[e]}function Ur(t,e){return t.nodes[e]}var Wr={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function qr(t,e,n,r){var o="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";return r&&(o+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return Hr(n,e),n}(o,t)}function Hr(t,e){t[ae]=e,t[ue]=e.logError.bind(e)}function Gr(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}var $r=function(){},Kr=new Map;function Qr(t){var e=Kr.get(t);return e||(e=At(t)+"_"+Kr.size,Kr.set(t,e)),e}var Xr="$$undefined",Yr="$$empty";function Zr(t){return{id:Xr,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var Jr=0;function to(t,e,n,r){return!(!(2&t.state)&&It(t.oldValues[e.bindingIndex+n],r))}function eo(t,e,n,r){return!!to(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function no(t,e,n,r){var o=t.oldValues[e.bindingIndex+n];if(1&t.state||!Fn(o,r)){var i=e.bindings[n].name;throw qr(Wr.createDebugContext(t,e.nodeIndex),i+": "+o,i+": "+r,0!=(1&t.state))}}function ro(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function oo(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function io(t,e,n,r){try{return ro(33554432&t.def.nodes[e].flags?Br(t,e).componentView:t),Wr.handleEvent(t,e,n,r)}catch(e){t.root.errorHandler.handleError(e)}}function ao(t){return t.parent?Br(t.parent,t.parentNodeDef.nodeIndex):null}function so(t){return t.parent?t.parentNodeDef.parent:null}function uo(t,e){switch(201347067&e.flags){case 1:return Br(t,e.nodeIndex).renderElement;case 2:return zr(t,e.nodeIndex).renderText}}function lo(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function co(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function po(t){return 1<<t%32}function ho(t){var e={},n=0,r={};return t&&t.forEach(function(t){var o=u(t,2),i=o[0],a=o[1];"number"==typeof i?(e[i]=a,n|=po(i)):r[i]=a}),{matchedQueries:e,references:r,matchedQueryIds:n}}function fo(t,e){return t.map(function(t){var n,r,o;return Array.isArray(t)?(o=(n=u(t,2))[0],r=n[1]):(o=0,r=t),r&&("function"==typeof r||"object"==typeof r)&&e&&Object.defineProperty(r,Dt,{value:e,configurable:!0}),{flags:o,token:r,tokenKey:Qr(r)}})}function mo(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===oe.Native?Br(t,n.renderParent.nodeIndex).renderElement:void 0:e}var go=new WeakMap;function vo(t){var e=go.get(t);return e||((e=t(function(){return $r})).factory=t,go.set(t,e)),e}function yo(t,e,n,r,o){3===e&&(n=t.renderer.parentNode(uo(t,t.def.lastRenderRootNode))),bo(t,e,0,t.def.nodes.length-1,n,r,o)}function bo(t,e,n,r,o,i,a){for(var s=n;s<=r;s++){var u=t.def.nodes[s];11&u.flags&&_o(t,u,e,o,i,a),s+=u.childCount}}function wo(t,e,n,r,o,i){for(var a=t;a&&!lo(a);)a=a.parent;for(var s=a.parent,u=so(a),l=u.nodeIndex+u.childCount,c=u.nodeIndex+1;c<=l;c++){var p=s.def.nodes[c];p.ngContentIndex===e&&_o(s,p,n,r,o,i),c+=p.childCount}if(!s.parent){var h=t.root.projectableNodes[e];if(h)for(c=0;c<h.length;c++)xo(t,h[c],n,r,o,i)}}function _o(t,e,n,r,o,i){if(8&e.flags)wo(t,e.ngContent.index,n,r,o,i);else{var a=uo(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&xo(t,a,n,r,o,i),32&e.bindingFlags&&xo(Br(t,e.nodeIndex).componentView,a,n,r,o,i)):xo(t,a,n,r,o,i),16777216&e.flags)for(var s=Br(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)yo(s[u],n,r,o,i);1&e.flags&&!e.element.name&&bo(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,o,i)}}function xo(t,e,n,r,o,i){var a=t.renderer;switch(n){case 1:a.appendChild(r,e);break;case 2:a.insertBefore(r,e,o);break;case 3:a.removeChild(r,e);break;case 0:i.push(e)}}var Oo=/^:([^:]+):(.+)$/;function Eo(t){if(":"===t[0]){var e=t.match(Oo);return[e[1],e[2]]}return["",t]}function So(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function Co(t,e,n,r,o,i,a,s,l,c,p,h){var f;void 0===a&&(a=[]),c||(c=$r);var d=ho(n),m=d.matchedQueries,g=d.references,v=d.matchedQueryIds,y=null,b=null;i&&(y=(f=u(Eo(i),2))[0],b=f[1]),s=s||[];for(var w=new Array(s.length),_=0;_<s.length;_++){var x=u(s[_],3),O=x[0],E=x[2],S=u(Eo(x[1]),2),C=S[0],I=S[1],A=void 0,k=void 0;switch(15&O){case 4:k=E;break;case 1:case 8:A=E}w[_]={flags:O,ns:C,name:I,nonMinifiedName:I,securityContext:A,suffix:k}}l=l||[];var N=new Array(l.length);for(_=0;_<l.length;_++){var P=u(l[_],2);N[_]={type:0,target:P[0],eventName:P[1],propName:null}}var T=(a=a||[]).map(function(t){var e=u(t,2),n=e[1],r=u(Eo(e[0]),2);return[r[0],r[1],n]});return h=function(t){if(t&&t.id===Xr){var e=null!=t.encapsulation&&t.encapsulation!==oe.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+Jr++:Yr}return t&&t.id===Yr&&(t=null),t||null}(h),p&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:m,matchedQueryIds:v,references:g,ngContentIndex:r,childCount:o,bindings:w,bindingFlags:So(w),outputs:N,element:{ns:y,name:b,attrs:T,template:null,componentProvider:null,componentView:p||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:c||$r},provider:null,text:null,query:null,ngContent:null}}function Io(t,e,n){var r,o=n.element,i=t.root.selectorOrNode,a=t.renderer;if(t.parent||!i){r=o.name?a.createElement(o.name,o.ns):a.createComment("");var s=mo(t,e,n);s&&a.appendChild(s,r)}else r=a.selectRootElement(i);if(o.attrs)for(var l=0;l<o.attrs.length;l++){var c=u(o.attrs[l],3);a.setAttribute(r,c[1],c[2],c[0])}return r}function Ao(t,e,n,r){for(var o=0;o<n.outputs.length;o++){var i=n.outputs[o],a=ko(t,n.nodeIndex,(p=i.eventName,(c=i.target)?c+":"+p:p)),s=i.target,u=t;"component"===i.target&&(s=null,u=e);var l=u.renderer.listen(s||r,i.eventName,a);t.disposables[n.outputIndex+o]=l}var c,p}function ko(t,e,n){return function(r){return io(t,e,n,r)}}function No(t,e,n,r){if(!eo(t,e,n,r))return!1;var o=e.bindings[n],i=Br(t,e.nodeIndex),a=i.renderElement,s=o.name;switch(15&o.flags){case 1:!function(t,e,n,r,o,i){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,i):i;s=null!=s?s.toString():null;var u=t.renderer;null!=i?u.setAttribute(n,o,s,r):u.removeAttribute(n,o,r)}(t,o,a,o.ns,s,r);break;case 2:!function(t,e,n,r){var o=t.renderer;r?o.addClass(e,n):o.removeClass(e,n)}(t,a,s,r);break;case 4:!function(t,e,n,r,o){var i=t.root.sanitizer.sanitize(Mr.STYLE,o);if(null!=i){i=i.toString();var a=e.suffix;null!=a&&(i+=a)}else i=null;var s=t.renderer;null!=i?s.setStyle(n,r,i):s.removeStyle(n,r)}(t,o,a,s,r);break;case 8:!function(t,e,n,r,o){var i=e.securityContext,a=i?t.root.sanitizer.sanitize(i,o):o;t.renderer.setProperty(n,r,a)}(33554432&e.flags&&32&o.flags?i.componentView:t,o,a,s,r)}return!0}var Po=new Object,To=Qr(Ft),Ro=Qr(zt),Mo=Qr($e);function Do(t,e,n,r){return n=Nt(n),{index:-1,deps:fo(r,At(e)),flags:t,token:e,value:n}}function jo(t,e,n){void 0===n&&(n=Ft.THROW_IF_NOT_FOUND);var r,o,i=ee(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var a=e.tokenKey;switch(a){case To:case Ro:case Mo:return t}var s=t._def.providersByKey[a];if(s){var u=t._providers[s.index];return void 0===u&&(u=t._providers[s.index]=Lo(t,s)),u===Po?void 0:u}if(e.token.ngInjectableDef&&(r=t,null!=(o=e.token.ngInjectableDef).providedIn&&(function(t,e){return t._def.modules.indexOf(o.providedIn)>-1}(r)||"root"===o.providedIn&&r._def.isRoot))){var l=t._providers.length;return t._def.providersByKey[e.tokenKey]={flags:5120,value:e.token.ngInjectableDef.factory,deps:[],index:l,token:e.token},t._providers[l]=Po,t._providers[l]=Lo(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{ee(i)}}function Lo(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var r=n.length;switch(r){case 0:return new e;case 1:return new e(jo(t,n[0]));case 2:return new e(jo(t,n[0]),jo(t,n[1]));case 3:return new e(jo(t,n[0]),jo(t,n[1]),jo(t,n[2]));default:for(var o=new Array(r),i=0;i<r;i++)o[i]=jo(t,n[i]);return new(e.bind.apply(e,l([void 0],o)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var r=n.length;switch(r){case 0:return e();case 1:return e(jo(t,n[0]));case 2:return e(jo(t,n[0]),jo(t,n[1]));case 3:return e(jo(t,n[0]),jo(t,n[1]),jo(t,n[2]));default:for(var o=Array(r),i=0;i<r;i++)o[i]=jo(t,n[i]);return e.apply(void 0,l(o))}}(t,e.value,e.deps);break;case 2048:n=jo(t,e.deps[0]);break;case 256:n=e.value}return n===Po||null==n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?Po:n}function zo(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,Uo(n,e),Wr.dirtyParentQueries(r),Fo(r),r}function Bo(t,e,n){var r=e?uo(e,e.def.lastRenderRootNode):t.renderElement;yo(n,2,n.renderer.parentNode(r),n.renderer.nextSibling(r),void 0)}function Fo(t){yo(t,3,null,null,void 0)}function Vo(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Uo(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var Wo=new Object;function qo(t,e,n,r,o,i){return new Ho(t,e,n,r,o,i)}var Ho=function(t){function e(e,n,r,o,i,a){var s=t.call(this)||this;return s.selector=e,s.componentType=n,s._inputs=o,s._outputs=i,s.ngContentSelectors=a,s.viewDefFactory=r,s}return i(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){if(!r)throw new Error("ngModule should be provided");var o=vo(this.viewDefFactory),i=o.nodes[0].element.componentProvider.nodeIndex,a=Wr.createRootView(t,e||[],n,o,r,Wo),s=Fr(a,i).instance;return n&&a.renderer.setAttribute(Br(a,0).renderElement,"ng-version",ie.full),new Go(a,new Xo(a),s)},e}(ze),Go=function(t){function e(e,n,r){var o=t.call(this)||this;return o._view=e,o._viewRef=n,o._component=r,o._elDef=o._view.def.nodes[0],o.hostView=n,o.changeDetectorRef=n,o.instance=r,o}return i(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new Sn(Br(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new ti(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(Le);function $o(t,e,n){return new Ko(t,e,n)}var Ko=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new Sn(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new ti(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=so(t),t=t.parent;return t?new ti(t,e):new ti(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=zo(this._data,t);Wr.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new Xo(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r},t.prototype.createComponent=function(t,e,n,r,o){var i=n||this.parentInjector;o||t instanceof Ge||(o=i.get($e));var a=t.create(i,r,void 0,o);return this.insert(a.hostView,e),a},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,o,i,a=t;return o=a._view,i=(n=this._data).viewContainer._embeddedViews,null!==(r=e)&&void 0!==r||(r=i.length),o.viewContainerParent=this._view,Vo(i,r,o),function(t,e){var n=ao(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,e.parentNodeDef)}}(n,o),Wr.dirtyParentQueries(o),Bo(n,r>0?i[r-1]:null,o),a.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,o,i,a,s=this._embeddedViews.indexOf(t._view);return o=e,a=(i=(n=this._data).viewContainer._embeddedViews)[r=s],Uo(i,r),null==o&&(o=i.length),Vo(i,o,a),Wr.dirtyParentQueries(a),Fo(a),Bo(n,o>0?i[o-1]:null,a),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=zo(this._data,t);e&&Wr.destroyView(e)},t.prototype.detach=function(t){var e=zo(this._data,t);return e?new Xo(e):null},t}();function Qo(t){return new Xo(t)}var Xo=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return yo(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){ro(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{Wr.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){Wr.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Wr.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,Fo(this._view),Wr.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}();function Yo(t,e){return new Zo(t,e)}var Zo=function(t){function e(e,n){var r=t.call(this)||this;return r._parentView=e,r._def=n,r}return i(e,t),e.prototype.createEmbeddedView=function(t){return new Xo(Wr.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new Sn(Br(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(Tn);function Jo(t,e){return new ti(t,e)}var ti=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=Ft.THROW_IF_NOT_FOUND),Wr.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:Qr(t)},e)},t}();function ei(t,e){var n=t.def.nodes[e];if(1&n.flags){var r=Br(t,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return zr(t,n.nodeIndex).renderText;if(20240&n.flags)return Fr(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+e)}function ni(t){return new ri(t.renderer)}var ri=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=u(Eo(e),2),r=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,r),r},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t),o=0;o<e.length;o++)this.delegate.insertBefore(n,e[o],r)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var r=u(Eo(e),2),o=r[0],i=r[1];null!=n?this.delegate.setAttribute(t,i,n,o):this.delegate.removeAttribute(t,i,o)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}();function oi(t,e,n,r){return new ii(t,e,n,r)}var ii=function(){function t(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),r=0;r<e.providers.length;r++){var o=e.providers[r];4096&o.flags||void 0===n[r]&&(n[r]=Lo(t,o))}}(this)}return t.prototype.get=function(t,e,n){void 0===e&&(e=Ft.THROW_IF_NOT_FOUND),void 0===n&&(n=0);var r=0;return 4&n?r|=1:2&n&&(r|=4),jo(this,{token:t,tokenKey:Qr(t),flags:r},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(qe)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+At(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(t,e){for(var n=t._def,r=new Set,o=0;o<n.providers.length;o++)if(131072&n.providers[o].flags){var i=t._providers[o];if(i&&i!==Po){var a=i.ngOnDestroy;"function"!=typeof a||r.has(i)||(a.apply(i),r.add(i))}}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),ai=Qr(function(){}),si=Qr(function(){}),ui=Qr(Sn),li=Qr(Rn),ci=Qr(Tn),pi=Qr(Mn),hi=Qr(Ft),fi=Qr(zt);function di(t,e,n,r,o,i,a,s){var l=[];if(a)for(var c in a){var p=u(a[c],2);l[p[0]]={flags:8,name:c,nonMinifiedName:p[1],ns:null,securityContext:null,suffix:null}}var h=[];if(s)for(var f in s)h.push({type:1,propName:f,target:null,eventName:s[f]});return function(t,e,n,r,o,i,a,s,u){var l=ho(n),c=l.matchedQueries,p=l.references,h=l.matchedQueryIds;u||(u=[]),s||(s=[]),i=Nt(i);var f=fo(a,At(o));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:h,references:p,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:So(s),outputs:u,element:null,provider:{token:o,value:i,deps:f},text:null,query:null,ngContent:null}}(t,e|=16384,n,r,o,o,i,l,h)}function mi(t,e){return bi(t,e)}function gi(t,e){for(var n=t;n.parent&&!lo(n);)n=n.parent;return wi(n.parent,so(n),!0,e.provider.value,e.provider.deps)}function vi(t,e){var n=wi(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var r=0;r<e.outputs.length;r++){var o=e.outputs[r],i=n[o.propName].subscribe(yi(t,e.parent.nodeIndex,o.eventName));t.disposables[e.outputIndex+r]=i.unsubscribe.bind(i)}return n}function yi(t,e,n){return function(r){return io(t,e,n,r)}}function bi(t,e){var n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return wi(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,o){var i=o.length;switch(i){case 0:return r();case 1:return r(xi(t,e,n,o[0]));case 2:return r(xi(t,e,n,o[0]),xi(t,e,n,o[1]));case 3:return r(xi(t,e,n,o[0]),xi(t,e,n,o[1]),xi(t,e,n,o[2]));default:for(var a=Array(i),s=0;s<i;s++)a[s]=xi(t,e,n,o[s]);return r.apply(void 0,l(a))}}(t,e.parent,n,r.value,r.deps);case 2048:return xi(t,e.parent,n,r.deps[0]);case 256:return r.value}}function wi(t,e,n,r,o){var i=o.length;switch(i){case 0:return new r;case 1:return new r(xi(t,e,n,o[0]));case 2:return new r(xi(t,e,n,o[0]),xi(t,e,n,o[1]));case 3:return new r(xi(t,e,n,o[0]),xi(t,e,n,o[1]),xi(t,e,n,o[2]));default:for(var a=new Array(i),s=0;s<i;s++)a[s]=xi(t,e,n,o[s]);return new(r.bind.apply(r,l([void 0],a)))}}var _i={};function xi(t,e,n,r,o){if(void 0===o&&(o=Ft.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var i=t;2&r.flags&&(o=null);var a=r.tokenKey;a===pi&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);for(var s=t;s;){if(e)switch(a){case ai:return ni(Oi(s,e,n));case si:return Oi(s,e,n).renderer;case ui:return new Sn(Br(s,e.nodeIndex).renderElement);case li:return Br(s,e.nodeIndex).viewContainer;case ci:if(e.element.template)return Br(s,e.nodeIndex).template;break;case pi:return Qo(Oi(s,e,n));case hi:case fi:return Jo(s,e);default:var u=(n?e.element.allProviders:e.element.publicProviders)[a];if(u){var l=Fr(s,u.nodeIndex);return l||(l={instance:bi(s,u)},s.nodes[u.nodeIndex]=l),l.instance}}n=lo(s),e=so(s),s=s.parent,4&r.flags&&(s=null)}var c=i.root.injector.get(r.token,_i);return c!==_i||o===_i?c:i.root.ngModule.injector.get(r.token,o)}function Oi(t,e,n){var r;if(n)r=Br(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!lo(r);)r=r.parent;return r}function Ei(t,e,n,r,o,i){if(32768&n.flags){var a=Br(t,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(e.instance[n.bindings[r].name]=o,524288&n.flags){i=i||{};var s=Vn.unwrap(t.oldValues[n.bindingIndex+r]);i[n.bindings[r].nonMinifiedName]=new Un(s,o,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=o,i}function Si(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0,o=0;o<n.length;o++){var i=n[o],a=i.parent;for(!a&&i.flags&e&&Ii(t,o,i.flags&e,r++),0==(i.childFlags&e)&&(o+=i.childCount);a&&1&a.flags&&o===a.nodeIndex+a.childCount;)a.directChildFlags&e&&(r=Ci(t,a,e,r)),a=a.parent}}function Ci(t,e,n,r){for(var o=e.nodeIndex+1;o<=e.nodeIndex+e.childCount;o++){var i=t.def.nodes[o];i.flags&n&&Ii(t,o,i.flags&n,r++),o+=i.childCount}return r}function Ii(t,e,n,r){var o=Fr(t,e);if(o){var i=o.instance;i&&(Wr.setCurrentNode(t,e),1048576&n&&Lr(t,512,r)&&i.ngAfterContentInit(),2097152&n&&i.ngAfterContentChecked(),4194304&n&&Lr(t,768,r)&&i.ngAfterViewInit(),8388608&n&&i.ngAfterViewChecked(),131072&n&&i.ngOnDestroy())}}function Ai(t){for(var e=t.def.nodeMatchedQueries;t.parent&&co(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.nodeIndex+n.childCount,o=0;o<=r;o++)67108864&(i=t.def.nodes[o]).flags&&536870912&i.flags&&(i.query.filterId&e)===i.query.filterId&&Ur(t,o).setDirty(),!(1&i.flags&&o+i.childCount<n.nodeIndex)&&67108864&i.childFlags&&536870912&i.childFlags||(o+=i.childCount)}if(134217728&t.def.nodeFlags)for(o=0;o<t.def.nodes.length;o++){var i;134217728&(i=t.def.nodes[o]).flags&&536870912&i.flags&&Ur(t,o).setDirty(),o+=i.childCount}}function ki(t,e){var n=Ur(t,e.nodeIndex);if(n.dirty){var r,o=void 0;if(67108864&e.flags){var i=e.parent.parent;o=Ni(t,i.nodeIndex,i.nodeIndex+i.childCount,e.query,[]),r=Fr(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(o=Ni(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(o);for(var a=e.query.bindings,s=!1,u=0;u<a.length;u++){var l=a[u],c=void 0;switch(l.bindingType){case 0:c=n.first;break;case 1:c=n,s=!0}r[l.propName]=c}s&&n.notifyOnChanges()}}function Ni(t,e,n,r,o){for(var i=e;i<=n;i++){var a=t.def.nodes[i],s=a.matchedQueries[r.id];if(null!=s&&o.push(Pi(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=Br(t,i);if((a.childMatchedQueries&r.filterId)===r.filterId&&(Ni(t,i+1,i+a.childCount,r,o),i+=a.childCount),16777216&a.flags)for(var l=u.viewContainer._embeddedViews,c=0;c<l.length;c++){var p=l[c],h=ao(p);h&&h===u&&Ni(p,0,p.def.nodes.length-1,r,o)}var f=u.template._projectedViews;if(f)for(c=0;c<f.length;c++){var d=f[c];Ni(d,0,d.def.nodes.length-1,r,o)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(i+=a.childCount)}return o}function Pi(t,e,n){if(null!=n)switch(n){case 1:return Br(t,e.nodeIndex).renderElement;case 0:return new Sn(Br(t,e.nodeIndex).renderElement);case 2:return Br(t,e.nodeIndex).template;case 3:return Br(t,e.nodeIndex).viewContainer;case 4:return Fr(t,e.nodeIndex).instance}}function Ti(t,e,n){var r=mo(t,e,n);r&&wo(t,n.ngContent.index,1,r,null,void 0)}function Ri(t,e,n){for(var r=new Array(n.length-1),o=1;o<n.length;o++)r[o-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[o]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Mi(t,e,n){var r,o=t.renderer;r=o.createText(n.text.prefix);var i=mo(t,e,n);return i&&o.appendChild(i,r),{renderText:r}}function Di(t,e){return(null!=t?t.toString():"")+e.suffix}function ji(t,e,n,r){for(var o=0,i=0,a=0,s=0,u=0,l=null,c=null,p=!1,h=!1,f=null,d=0;d<e.length;d++){var m=e[d];if(m.nodeIndex=d,m.parent=l,m.bindingIndex=o,m.outputIndex=i,m.renderParent=c,a|=m.flags,u|=m.matchedQueryIds,m.element){var g=m.element;g.publicProviders=l?l.element.publicProviders:Object.create(null),g.allProviders=g.publicProviders,p=!1,h=!1,m.element.template&&(u|=m.element.template.nodeMatchedQueries)}if(zi(l,m,e.length),o+=m.bindings.length,i+=m.outputs.length,!c&&3&m.flags&&(f=m),20224&m.flags){p||(p=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);var v=0!=(32768&m.flags);0==(8192&m.flags)||v?l.element.publicProviders[Qr(m.provider.token)]=m:(h||(h=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[Qr(m.provider.token)]=m),v&&(l.element.componentProvider=m)}if(l?(l.childFlags|=m.flags,l.directChildFlags|=m.flags,l.childMatchedQueries|=m.matchedQueryIds,m.element&&m.element.template&&(l.childMatchedQueries|=m.element.template.nodeMatchedQueries)):s|=m.flags,m.childCount>0)l=m,Li(m)||(c=m);else for(;l&&d===l.nodeIndex+l.childCount;){var y=l.parent;y&&(y.childFlags|=l.childFlags,y.childMatchedQueries|=l.childMatchedQueries),c=(l=y)&&Li(l)?l.renderParent:l}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||$r,updateRenderer:r||$r,handleEvent:function(t,n,r,o){return e[n].element.handleEvent(t,r,o)},bindingCount:o,outputCount:i,lastRenderRootNode:f}}function Li(t){return 0!=(1&t.flags)&&null===t.element.name}function zi(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.nodeIndex+"!")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+e.nodeIndex+"!");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.nodeIndex+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.nodeIndex+"!")}if(e.childCount){var o=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=o&&e.nodeIndex+e.childCount>o)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.nodeIndex+"!")}}function Bi(t,e,n,r){var o=Ui(t.root,t.renderer,t,e,n);return Wi(o,t.component,r),qi(o),o}function Fi(t,e,n){var r=Ui(t,t.renderer,null,null,e);return Wi(r,n,n),qi(r),r}function Vi(t,e,n,r){var o,i=e.element.componentRendererType;return o=i?t.root.rendererFactory.createRenderer(r,i):t.root.renderer,Ui(t.root,o,t,e.element.componentProvider,n)}function Ui(t,e,n,r,o){var i=new Array(o.nodes.length),a=o.outputCount?new Array(o.outputCount):null;return{def:o,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:i,state:13,root:t,renderer:e,oldValues:new Array(o.bindingCount),disposables:a,initIndex:-1}}function Wi(t,e,n){t.component=e,t.context=n}function qi(t){var e;lo(t)&&(e=Br(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,r=t.nodes,o=0;o<n.nodes.length;o++){var i=n.nodes[o];Wr.setCurrentNode(t,o);var a=void 0;switch(201347067&i.flags){case 1:var s=Io(t,e,i),u=void 0;if(33554432&i.flags){var l=vo(i.element.componentView);u=Wr.createComponentView(t,i,l,s)}Ao(t,u,i,s),a={renderElement:s,componentView:u,viewContainer:null,template:i.element.template?Yo(t,i):void 0},16777216&i.flags&&(a.viewContainer=$o(t,i,a));break;case 2:a=Mi(t,e,i);break;case 512:case 1024:case 2048:case 256:(a=r[o])||4096&i.flags||(a={instance:mi(t,i)});break;case 16:a={instance:gi(t,i)};break;case 16384:(a=r[o])||(a={instance:vi(t,i)}),32768&i.flags&&Wi(Br(t,i.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new In;break;case 8:Ti(t,e,i),a=void 0}r[o]=a}Ji(t,Zi.CreateViewNodes),ra(t,201326592,268435456,0)}function Hi(t){Ki(t),Wr.updateDirectives(t,1),ta(t,Zi.CheckNoChanges),Wr.updateRenderer(t,1),Ji(t,Zi.CheckNoChanges),t.state&=-97}function Gi(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,jr(t,0,256),Ki(t),Wr.updateDirectives(t,0),ta(t,Zi.CheckAndUpdate),ra(t,67108864,536870912,0);var e=jr(t,256,512);Si(t,2097152|(e?1048576:0)),Wr.updateRenderer(t,0),Ji(t,Zi.CheckAndUpdate),ra(t,134217728,536870912,0),Si(t,8388608|((e=jr(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,jr(t,768,1024)}function $i(t,e,n,r,o,i,a,s,u,c,p,h,f){return 0===n?function(t,e,n,r,o,i,a,s,u,l,c,p){switch(201347067&e.flags){case 1:return function(t,e,n,r,o,i,a,s,u,l,c,p){var h=e.bindings.length,f=!1;return h>0&&No(t,e,0,n)&&(f=!0),h>1&&No(t,e,1,r)&&(f=!0),h>2&&No(t,e,2,o)&&(f=!0),h>3&&No(t,e,3,i)&&(f=!0),h>4&&No(t,e,4,a)&&(f=!0),h>5&&No(t,e,5,s)&&(f=!0),h>6&&No(t,e,6,u)&&(f=!0),h>7&&No(t,e,7,l)&&(f=!0),h>8&&No(t,e,8,c)&&(f=!0),h>9&&No(t,e,9,p)&&(f=!0),f}(t,e,n,r,o,i,a,s,u,l,c,p);case 2:return function(t,e,n,r,o,i,a,s,u,l,c,p){var h=!1,f=e.bindings,d=f.length;if(d>0&&eo(t,e,0,n)&&(h=!0),d>1&&eo(t,e,1,r)&&(h=!0),d>2&&eo(t,e,2,o)&&(h=!0),d>3&&eo(t,e,3,i)&&(h=!0),d>4&&eo(t,e,4,a)&&(h=!0),d>5&&eo(t,e,5,s)&&(h=!0),d>6&&eo(t,e,6,u)&&(h=!0),d>7&&eo(t,e,7,l)&&(h=!0),d>8&&eo(t,e,8,c)&&(h=!0),d>9&&eo(t,e,9,p)&&(h=!0),h){var m=e.text.prefix;d>0&&(m+=Di(n,f[0])),d>1&&(m+=Di(r,f[1])),d>2&&(m+=Di(o,f[2])),d>3&&(m+=Di(i,f[3])),d>4&&(m+=Di(a,f[4])),d>5&&(m+=Di(s,f[5])),d>6&&(m+=Di(u,f[6])),d>7&&(m+=Di(l,f[7])),d>8&&(m+=Di(c,f[8])),d>9&&(m+=Di(p,f[9]));var g=zr(t,e.nodeIndex).renderText;t.renderer.setValue(g,m)}return h}(t,e,n,r,o,i,a,s,u,l,c,p);case 16384:return function(t,e,n,r,o,i,a,s,u,l,c,p){var h=Fr(t,e.nodeIndex),f=h.instance,d=!1,m=void 0,g=e.bindings.length;return g>0&&to(t,e,0,n)&&(d=!0,m=Ei(t,h,e,0,n,m)),g>1&&to(t,e,1,r)&&(d=!0,m=Ei(t,h,e,1,r,m)),g>2&&to(t,e,2,o)&&(d=!0,m=Ei(t,h,e,2,o,m)),g>3&&to(t,e,3,i)&&(d=!0,m=Ei(t,h,e,3,i,m)),g>4&&to(t,e,4,a)&&(d=!0,m=Ei(t,h,e,4,a,m)),g>5&&to(t,e,5,s)&&(d=!0,m=Ei(t,h,e,5,s,m)),g>6&&to(t,e,6,u)&&(d=!0,m=Ei(t,h,e,6,u,m)),g>7&&to(t,e,7,l)&&(d=!0,m=Ei(t,h,e,7,l,m)),g>8&&to(t,e,8,c)&&(d=!0,m=Ei(t,h,e,8,c,m)),g>9&&to(t,e,9,p)&&(d=!0,m=Ei(t,h,e,9,p,m)),m&&f.ngOnChanges(m),65536&e.flags&&Lr(t,256,e.nodeIndex)&&f.ngOnInit(),262144&e.flags&&f.ngDoCheck(),d}(t,e,n,r,o,i,a,s,u,l,c,p);case 32:case 64:case 128:return function(t,e,n,r,o,i,a,s,u,l,c,p){var h=e.bindings,f=!1,d=h.length;if(d>0&&eo(t,e,0,n)&&(f=!0),d>1&&eo(t,e,1,r)&&(f=!0),d>2&&eo(t,e,2,o)&&(f=!0),d>3&&eo(t,e,3,i)&&(f=!0),d>4&&eo(t,e,4,a)&&(f=!0),d>5&&eo(t,e,5,s)&&(f=!0),d>6&&eo(t,e,6,u)&&(f=!0),d>7&&eo(t,e,7,l)&&(f=!0),d>8&&eo(t,e,8,c)&&(f=!0),d>9&&eo(t,e,9,p)&&(f=!0),f){var m=Vr(t,e.nodeIndex),g=void 0;switch(201347067&e.flags){case 32:g=new Array(h.length),d>0&&(g[0]=n),d>1&&(g[1]=r),d>2&&(g[2]=o),d>3&&(g[3]=i),d>4&&(g[4]=a),d>5&&(g[5]=s),d>6&&(g[6]=u),d>7&&(g[7]=l),d>8&&(g[8]=c),d>9&&(g[9]=p);break;case 64:g={},d>0&&(g[h[0].name]=n),d>1&&(g[h[1].name]=r),d>2&&(g[h[2].name]=o),d>3&&(g[h[3].name]=i),d>4&&(g[h[4].name]=a),d>5&&(g[h[5].name]=s),d>6&&(g[h[6].name]=u),d>7&&(g[h[7].name]=l),d>8&&(g[h[8].name]=c),d>9&&(g[h[9].name]=p);break;case 128:var v=n;switch(d){case 1:g=v.transform(n);break;case 2:g=v.transform(r);break;case 3:g=v.transform(r,o);break;case 4:g=v.transform(r,o,i);break;case 5:g=v.transform(r,o,i,a);break;case 6:g=v.transform(r,o,i,a,s);break;case 7:g=v.transform(r,o,i,a,s,u);break;case 8:g=v.transform(r,o,i,a,s,u,l);break;case 9:g=v.transform(r,o,i,a,s,u,l,c);break;case 10:g=v.transform(r,o,i,a,s,u,l,c,p)}}m.value=g}return f}(t,e,n,r,o,i,a,s,u,l,c,p);default:throw"unreachable"}}(t,e,r,o,i,a,s,u,c,p,h,f):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var r=!1,o=0;o<n.length;o++)No(t,e,o,n[o])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){for(var r=e.bindings,o=!1,i=0;i<n.length;i++)eo(t,e,i,n[i])&&(o=!0);if(o){var a="";for(i=0;i<n.length;i++)a+=Di(n[i],r[i]);a=e.text.prefix+a;var s=zr(t,e.nodeIndex).renderText;t.renderer.setValue(s,a)}return o}(t,e,n);case 16384:return function(t,e,n){for(var r=Fr(t,e.nodeIndex),o=r.instance,i=!1,a=void 0,s=0;s<n.length;s++)to(t,e,s,n[s])&&(i=!0,a=Ei(t,r,e,s,n[s],a));return a&&o.ngOnChanges(a),65536&e.flags&&Lr(t,256,e.nodeIndex)&&o.ngOnInit(),262144&e.flags&&o.ngDoCheck(),i}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var r=e.bindings,o=!1,i=0;i<n.length;i++)eo(t,e,i,n[i])&&(o=!0);if(o){var a=Vr(t,e.nodeIndex),s=void 0;switch(201347067&e.flags){case 32:s=n;break;case 64:for(s={},i=0;i<n.length;i++)s[r[i].name]=n[i];break;case 128:var u=n[0],c=n.slice(1);s=u.transform.apply(u,l(c))}a.value=s}return o}(t,e,n);default:throw"unreachable"}}(t,e,r)}function Ki(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var o=Br(t,n).template._projectedViews;if(o)for(var i=0;i<o.length;i++){var a=o[i];a.state|=32,oo(a,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Qi(t,e,n,r,o,i,a,s,u,l,c,p,h){return 0===n?function(t,e,n,r,o,i,a,s,u,l,c,p){var h=e.bindings.length;h>0&&no(t,e,0,n),h>1&&no(t,e,1,r),h>2&&no(t,e,2,o),h>3&&no(t,e,3,i),h>4&&no(t,e,4,a),h>5&&no(t,e,5,s),h>6&&no(t,e,6,u),h>7&&no(t,e,7,l),h>8&&no(t,e,8,c),h>9&&no(t,e,9,p)}(t,e,r,o,i,a,s,u,l,c,p,h):function(t,e,n){for(var r=0;r<n.length;r++)no(t,e,r,n[r])}(t,e,r),!1}function Xi(t,e){if(Ur(t,e.nodeIndex).dirty)throw qr(Wr.createDebugContext(t,e.nodeIndex),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function Yi(t){if(!(128&t.state)){if(ta(t,Zi.Destroy),Ji(t,Zi.Destroy),Si(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=ao(t);if(e){var n=e.template._projectedViews;n&&(Uo(n,n.indexOf(t)),Wr.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(Br(t,n).renderElement):2&r.flags?t.renderer.destroyNode(zr(t,n).renderText):(67108864&r.flags||134217728&r.flags)&&Ur(t,n).destroy()}}(t),lo(t)&&t.renderer.destroy(),t.state|=128}}var Zi=function(t){return t[t.CreateViewNodes=0]="CreateViewNodes",t[t.CheckNoChanges=1]="CheckNoChanges",t[t.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate=3]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",t[t.Destroy=5]="Destroy",t}({});function Ji(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var o=n.nodes[r];33554432&o.flags?ea(Br(t,r).componentView,e):0==(33554432&o.childFlags)&&(r+=o.childCount)}}function ta(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var o=n.nodes[r];if(16777216&o.flags)for(var i=Br(t,r).viewContainer._embeddedViews,a=0;a<i.length;a++)ea(i[a],e);else 0==(16777216&o.childFlags)&&(r+=o.childCount)}}function ea(t,e){var n=t.state;switch(e){case Zi.CheckNoChanges:0==(128&n)&&(12==(12&n)?Hi(t):64&n&&na(t,Zi.CheckNoChangesProjectedViews));break;case Zi.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Hi(t):64&n&&na(t,e));break;case Zi.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Gi(t):64&n&&na(t,Zi.CheckAndUpdateProjectedViews));break;case Zi.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Gi(t):64&n&&na(t,e));break;case Zi.Destroy:Yi(t);break;case Zi.CreateViewNodes:qi(t)}}function na(t,e){ta(t,e),Ji(t,e)}function ra(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var o=t.def.nodes.length,i=0;i<o;i++){var a=t.def.nodes[i];if(a.flags&e&&a.flags&n)switch(Wr.setCurrentNode(t,a.nodeIndex),r){case 0:ki(t,a);break;case 1:Xi(t,a)}a.childFlags&e&&a.childFlags&n||(i+=a.childCount)}}var oa=!1;function ia(t,e,n,r,o,i){return Fi(sa(t,o,o.injector.get(On),e,n),r,i)}function aa(t,e,n,r,o,i){var a=o.injector.get(On),s=sa(t,o,new Va(a),e,n),u=va(r);return Ba(Ca.create,Fi,null,[s,u,i])}function sa(t,e,n,r,o){var i=e.injector.get(Dr),a=e.injector.get(he);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:o,sanitizer:i,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:a}}function ua(t,e,n,r){var o=va(n);return Ba(Ca.create,Bi,null,[t,e,o,r])}function la(t,e,n,r){return n=fa.get(e.element.componentProvider.provider.token)||va(n),Ba(Ca.create,Vi,null,[t,e,n,r])}function ca(t,e,n,r){return oi(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===pa.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var r=pa.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(function(t){ha.forEach(function(r,o){o.ngInjectableDef.providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var r=t.providers[e];n&&(r.flags|=4096);var o=pa.get(r.token);o&&(r.flags=-3841&r.flags|o.flags,r.deps=fo(o.deps),r.value=o.value)}if(ha.size>0){var i=new Set(t.modules);ha.forEach(function(e,r){if(i.has(r.ngInjectableDef.providedIn)){var o={token:r,flags:e.flags|(n?4096:0),deps:fo(e.deps),value:e.value,index:t.providers.length};t.providers.push(o),t.providersByKey[Qr(r)]=o}})}}(t=t.factory(function(){return $r})),t):t}(r))}var pa=new Map,ha=new Map,fa=new Map;function da(t){pa.set(t.token,t),"function"==typeof t.token&&t.token.ngInjectableDef&&"function"==typeof t.token.ngInjectableDef.providedIn&&ha.set(t.token,t)}function ma(t,e){var n=vo(vo(e.viewDefFactory).nodes[0].element.componentView);fa.set(t,n)}function ga(){pa.clear(),ha.clear(),fa.clear()}function va(t){if(0===pa.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var o=t.nodes[r];1&o.flags&&(n=o),n&&3840&o.flags&&pa.has(o.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return $r});for(var n=0;n<e.length;n++)r(t,e[n]);return t;function r(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){var o=r.provider,i=pa.get(o.token);i&&(r.flags=-3841&r.flags|i.flags,o.deps=fo(i.deps),o.value=i.value)}}}}function ya(t,e,n,r,o,i,a,s,u,l,c,p,h){var f=t.def.nodes[e];return $i(t,f,n,r,o,i,a,s,u,l,c,p,h),224&f.flags?Vr(t,e).value:void 0}function ba(t,e,n,r,o,i,a,s,u,l,c,p,h){var f=t.def.nodes[e];return Qi(t,f,n,r,o,i,a,s,u,l,c,p,h),224&f.flags?Vr(t,e).value:void 0}function wa(t){return Ba(Ca.detectChanges,Gi,null,[t])}function _a(t){return Ba(Ca.checkNoChanges,Hi,null,[t])}function xa(t){return Ba(Ca.destroy,Yi,null,[t])}var Oa,Ea,Sa,Ca=function(t){return t[t.create=0]="create",t[t.detectChanges=1]="detectChanges",t[t.checkNoChanges=2]="checkNoChanges",t[t.destroy=3]="destroy",t[t.handleEvent=4]="handleEvent",t}({});function Ia(t,e){Ea=t,Sa=e}function Aa(t,e,n,r){return Ia(t,e),Ba(Ca.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function ka(t,e){if(128&t.state)throw Gr(Ca[Oa]);return Ia(t,Da(t,0)),t.def.updateDirectives(function(t,n,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var a=t.def.nodes[n];return 0===e?Pa(t,a,r,o):Ta(t,a,r,o),16384&a.flags&&Ia(t,Da(t,n)),224&a.flags?Vr(t,a.nodeIndex).value:void 0},t)}function Na(t,e){if(128&t.state)throw Gr(Ca[Oa]);return Ia(t,ja(t,0)),t.def.updateRenderer(function(t,n,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var a=t.def.nodes[n];return 0===e?Pa(t,a,r,o):Ta(t,a,r,o),3&a.flags&&Ia(t,ja(t,n)),224&a.flags?Vr(t,a.nodeIndex).value:void 0},t)}function Pa(t,e,n,r){if($i.apply(void 0,l([t,e,n],r))){var o=1===n?r[0]:r;if(16384&e.flags){for(var i={},a=0;a<e.bindings.length;a++){var s=e.bindings[a],u=o[a];8&s.flags&&(i[(f=s.nonMinifiedName,"ng-reflect-"+(f=f.replace(/[$@]/g,"_").replace(Ra,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()})))]=Ma(u))}var c=e.parent,p=Br(t,c.nodeIndex).renderElement;if(c.element.name)for(var h in i)null!=(u=i[h])?t.renderer.setAttribute(p,h,u):t.renderer.removeAttribute(p,h);else t.renderer.setValue(p,"bindings="+JSON.stringify(i,null,2))}}var f}function Ta(t,e,n,r){Qi.apply(void 0,l([t,e,n],r))}var Ra=/([A-Z])/g;function Ma(t){try{return null!=t?t.toString().slice(0,30):t}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function Da(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function ja(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var La=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,r=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=so(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return Br(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return Jo(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){za(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&za(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=function(t){for(;t&&!lo(t);)t=t.parent;return t.parent?Br(t.parent,so(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?uo(this.view,this.nodeDef):uo(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var i=function(t,e){for(var n=-1,r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(e,n),a=-1;e.factory(function(){var e;return++a===i?(e=t.error).bind.apply(e,l([t],r)):$r}),a<i&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,l(r)))},t}();function za(t,e,n){for(var r in e.references)n[r]=Pi(t,e,e.references[r])}function Ba(t,e,n,r){var o=Oa,i=Ea,a=Sa;try{Oa=t;var s=e.apply(n,r);return Ea=i,Sa=a,Oa=o,s}catch(t){if(le(t)||!Ea)throw t;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Hr(t,e),t}(t,Fa())}}function Fa(){return Ea?new La(Ea,Sa):null}var Va=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new Ua(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),Ua=function(){function t(t){this.delegate=t,this.data=this.delegate.data}return t.prototype.destroyNode=function(t){!function(t){Ln.delete(t.nativeNode)}(zn(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),r=Fa();if(r){var o=new jn(n,null,r);o.name=t,Bn(o)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=Fa();return n&&Bn(new Dn(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=Fa();return n&&Bn(new Dn(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=zn(t),r=zn(e);n&&r&&n instanceof jn&&n.addChild(r),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var r=zn(t),o=zn(e),i=zn(n);r&&o&&r instanceof jn&&r.insertBefore(i,o),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=zn(t),r=zn(e);n&&r&&n instanceof jn&&n.removeChild(r),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t){var e=this.delegate.selectRootElement(t),n=Fa();return n&&Bn(new jn(e,null,n)),e},t.prototype.setAttribute=function(t,e,n,r){var o=zn(t);o&&o instanceof jn&&(o.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){var r=zn(t);r&&r instanceof jn&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=zn(t);n&&n instanceof jn&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=zn(t);n&&n instanceof jn&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){var o=zn(t);o&&o instanceof jn&&(o.styles[e]=n),this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){var r=zn(t);r&&r instanceof jn&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var r=zn(t);r&&r instanceof jn&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if("string"!=typeof t){var r=zn(t);r&&r.listeners.push(new function(t,e){this.name=t,this.callback=e}(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}(),Wa=function(t){function e(e,n,r){var o=t.call(this)||this;return o.moduleType=e,o._bootstrapComponents=n,o._ngModuleDefFactory=r,o}return i(e,t),e.prototype.create=function(t){!function(){if(!oa){oa=!0;var t=mn()?{setCurrentNode:Ia,createRootView:aa,createEmbeddedView:ua,createComponentView:la,createNgModuleRef:ca,overrideProvider:da,overrideComponentView:ma,clearOverrides:ga,checkAndUpdateView:wa,checkNoChangesView:_a,destroyView:xa,createDebugContext:function(t,e){return new La(t,e)},handleEvent:Aa,updateDirectives:ka,updateRenderer:Na}:{setCurrentNode:function(){},createRootView:ia,createEmbeddedView:Bi,createComponentView:Vi,createNgModuleRef:oi,overrideProvider:$r,overrideComponentView:$r,clearOverrides:$r,checkAndUpdateView:Gi,checkNoChangesView:Hi,destroyView:Yi,createDebugContext:function(t,e){return new La(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?ya:ba,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?ya:ba,t)}};Wr.setCurrentNode=t.setCurrentNode,Wr.createRootView=t.createRootView,Wr.createEmbeddedView=t.createEmbeddedView,Wr.createComponentView=t.createComponentView,Wr.createNgModuleRef=t.createNgModuleRef,Wr.overrideProvider=t.overrideProvider,Wr.overrideComponentView=t.overrideComponentView,Wr.clearOverrides=t.clearOverrides,Wr.checkAndUpdateView=t.checkAndUpdateView,Wr.checkNoChangesView=t.checkNoChangesView,Wr.destroyView=t.destroyView,Wr.resolveDep=xi,Wr.createDebugContext=t.createDebugContext,Wr.handleEvent=t.handleEvent,Wr.updateDirectives=t.updateDirectives,Wr.updateRenderer=t.updateRenderer,Wr.dirtyParentQueries=Ai}}();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),r={};for(var o in t.providersByKey)r[o]=t.providersByKey[o];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(vo(this._ngModuleDefFactory));return Wr.createNgModuleRef(this.moduleType,t||Ft.NULL,this._bootstrapComponents,e)},e}(Ke);function qa(t,e,n){t!=e&&Ga(n)}function Ha(t,e){null==t&&Ga(e)}function Ga(t){throw new Error("ASSERTION ERROR: "+t)}var $a=16,Ka=0,Qa=1,Xa=2,Ya=3,Za=4,Ja=5,ts=6,es=7,ns=8,rs=9,os=10,is=11,as=14;function ss(t,e,n){t.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentInit),t.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,t.afterContentChecked))}function us(t,e,n){t.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewInit),t.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,t.afterViewChecked))}function ls(t,e,n){null!=t.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,t.onDestroy)}function cs(t,e,n){16&t[Za]&&(ps(t[es],e.initHooks,e.checkHooks,n),t[Za]&=-17)}function ps(t,e,n,r){var o=r?e:n;o&&hs(t,o)}function hs(t,e){for(var n=0;n<e.length;n+=2)e[n+1].call(t[e[n]])}"undefined"==typeof ngDevMode&&("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global);var fs=0,ds=4,ms="ngProjectAs";function gs(t){return!!t.listen}var vs={createRenderer:function(t,e){return document}};function ys(t,e){Ha(t,"should be called with a node"),qa(t.tNode.type,e,"should be a "+function(t){return 1==t?"Projection":0==t?"Container":2==t?"View":3==t?"Element":"<unknown>"}(e))}function bs(t){return Array.isArray(t)?t[0]:t}function ws(t){if(2===t.tNode.type){var e=t.data;return e[Xa]?e[Xa][Ja]:null}return t.tNode.next?t.view[t.tNode.next.index]:null}function _s(t){return t.tNode.child?bs((2===t.tNode.type?t.data:t.view)[t.tNode.child.index]):null}function xs(t){if(-1===t.tNode.index&&2===t.tNode.type){var e=t.data[as];return-1===e?null:t.view[e].dynamicLContainerNode}var n=t.tNode.parent;return bs(n?t.view[n.index]:t.view[Ja])}var Os=[];function Es(t){for(var e=t[Ja];2===e.tNode.type;)ngDevMode&&Ha(t[Qa],"lViewData.parent"),e=(t=t[Qa])[Ja];return ngDevMode&&ys(e,3),ngDevMode&&Ha(e.data,"node.data"),e}function Ss(t,e,n,r,o){0===t?gs(e)?e.insertBefore(n,r,o):n.insertBefore(r,o,!0):1===t?gs(e)?e.removeChild(n,r):n.removeChild(r):2===t&&(ngDevMode&&ngDevMode.rendererDestroyNode++,e.destroyNode(r))}function Cs(t){if(-1===t[Ka].childIndex)return null;var e=t[t[Ka].childIndex];return e.data?e.data:e.dynamicLContainerNode.data}function Is(t,e){var n;return(n=t[Ja])&&2===n.tNode.type?xs(n).data:t[Qa]===e?null:t[Qa]}function As(t){if(t[Ka]){var e=t;!function(t){var e=t[Ka].cleanup;if(null!=e){for(var n=0;n<e.length-1;n+=2)"string"==typeof e[n]?(bs(t[e[n+1]]).native.removeEventListener(e[n],t[ns][e[n+2]],e[n+3]),n+=2):"number"==typeof e[n]?(0,t[ns][e[n]])():e[n].call(t[ns][e[n+1]]);t[ns]=null}}(e),function(t){var e,n=t[Ka];null!=n&&null!=(e=n.destroyHooks)&&hs(t[es],e)}(e),(r=(n=e)[Ka]&&n[Ka].pipeDestroyHooks)&&hs(n,r),-1===e[Ka].id&&gs(e[is])&&(ngDevMode&&ngDevMode.rendererDestroy++,e[is].destroy())}var n,r}var ks,Ns,Ps,Ts,Rs,Ms,Ds,js,Ls,zs="__ngHostLNode__",Bs=Promise.resolve(null),Fs=[0,0],Vs=new Array($a).fill(null),Us=!1,Ws=!0;function qs(t,e){var n=js;return Ls=t&&t[es],Rs=t&&t[Ka],Ds=t&&1==(1&t[Za]),Ws=t&&Rs.firstTemplatePass,ks=t&&t[is],null!=e&&(Ps=e,Ts=!0),js=t,Ms=t&&t[Ya],n}function Hs(t,e){e||(Us||ps(Ls,Rs.viewHooks,Rs.viewCheckHooks,Ds),js[Za]&=-6),js[Za]|=16,js[ts]=-1,qs(t,null)}function Gs(){Us||cs(js,Rs,Ds),function(t){for(var e=Cs(js);null!==e;e=e[Xa])if(e.length<$a&&null===e[fs])for(var n=e,r=0;r<n[ds].length;r++){var o=n[ds][r],i=o.data;ngDevMode&&Ha(i[Ka],"TView must be allocated"),Xs(o,i[Ka],i[rs],2)}}(),Us||ps(Ls,Rs.contentHooks,Rs.contentCheckHooks,Ds),Rs.firstTemplatePass=Ws=!1,$s(Rs.hostBindings),function(t){if(null!=t.contentQueries)for(var e=0;e<t.contentQueries.length;e+=2){var n=t.contentQueries[e];t.directives[n].contentQueriesRefresh(n,t.contentQueries[e+1])}}(Rs),function(t){if(null!=t)for(var e=0;e<t.length;e+=2)ou(t[e],t[e+1])}(Rs.components)}function $s(t){if(null!=t)for(var e=Rs.directives,n=0;n<t.length;n+=2){var r=t[n],o=e[r];o.hostBindings&&o.hostBindings(r,t[n+1])}}function Ks(t,e,n,r,o){return[e,js,null,null,25|r,null,-1,null,null,n,js&&js[os],t,o||null,null,-1,null]}function Qs(t,e,n,r,o,i){var a=Ts?Ps:Ps&&xs(Ps),s=a&&a.view===js?a.tNode:null,u=(Ts?Ms:Ps&&Ps.queries)||a&&a.queries&&a.queries.child(),l=null!=i,c=function(t,e,n,r,o,i){return{native:r,view:js,nodeInjector:n?n.nodeInjector:null,data:o,queries:i,tNode:null,dynamicLContainerNode:null}}(0,0,a,n,l?i:null,u);if(-1===t||2===e)c.tNode=(i?i[Ka].node:null)||ru(e,t,null,null,s,null);else{var p=t+$a;ngDevMode&&pu(p);var h=Rs.data;if(js[p]=c,p>=h.length){var f=h[p]=ru(e,p,r,o,s,null);if(!Ts&&Ps){var d=Ps.tNode;d.next=f,d.dynamicContainerNode&&(d.dynamicContainerNode.next=f)}}c.tNode=h[p],Ts&&(Ms=null,(null==Ps.tNode.child&&Ps.view===js||2===Ps.tNode.type)&&(Ps.tNode.child=c.tNode))}if(2==(2&e)&&l){var m=i;ngDevMode&&null!=m[Ja]&&Ga("lViewData[HOST_NODE] should not have been initialized"),m[Ja]=c,Ws&&(m[Ka].node=c.tNode)}return Ps=c,Ts=!0,c}function Xs(t,e,n,r){var o,i=Ts,a=Ps;if(null==t.data[Qa]&&t.data[rs]&&!e.template)au(t.data[rs]);else try{Ts=!0,Ps=null,o=qs(t.data,t),tu(),e.template(r,n),2&r?Gs():t.data[Ka].firstTemplatePass=Ws=!1}finally{Hs(o,1==(1&r)),Ts=i,Ps=a}return t}function Ys(t,e,n,r){var o=qs(e,t);try{Ns.begin&&Ns.begin(),r?(tu(),r(Zs(e),n),Gs()):(Us||(cs(js,Rs,Ds),ps(Ls,Rs.contentHooks,Rs.contentCheckHooks,Ds)),$s(Fs),ou(0,$a))}finally{Ns.end&&Ns.end(),Hs(o)}}function Zs(t){return 1&t[Za]?3:2}var Js=null;function tu(){Js=null}function eu(t,e,n,r,o){return ngDevMode&&ngDevMode.tView++,{id:t,template:e,viewQuery:o,node:null,data:Vs.slice(),childIndex:-1,bindingStartIndex:-1,directives:null,firstTemplatePass:!0,initHooks:null,checkHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,pipeDestroyHooks:null,cleanup:null,hostBindings:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof n?n():n,pipeRegistry:"function"==typeof r?r():r,currentMatches:null}}function nu(t,e){ngDevMode&&cu(-1),Ns=t;var n,r=t.createRenderer(null,null),o="string"==typeof e?gs(r)?r.selectRootElement(e):r.querySelector(e):e;if(ngDevMode&&!o)throw new Error("Renderer: "+("string"==typeof e?"Host node with selector not found:":"Host node is required:")+" ["+("function"==typeof(n=e)?n.name||n:"string"==typeof n?n:null==n?"":""+n)+"]");return o}function ru(t,e,n,r,o,i){return ngDevMode&&ngDevMode.tNode++,{type:t,index:e,flags:0,tagName:n,attrs:r,localNames:null,initialInputs:void 0,inputs:void 0,outputs:void 0,tViews:i,next:null,child:null,parent:o,dynamicContainerNode:null,detached:null,stylingTemplate:null,projection:null}}function ou(t,e){ngDevMode&&cu(e);var n=js[e];ngDevMode&&ys(n,3),ngDevMode&&Ha(n.data,"Component's host node should have an LViewData attached.");var r=n.data;iu(r)&&6&r[Za]&&(ngDevMode&&cu(t,Ls),lu(r,n,Ls[t]))}function iu(t){return 8==(8&t[Za])}function au(t){for(var e=0;e<t.components.length;e++){var n=t.components[e],r=hu(n);ngDevMode&&Ha(r.data,"Component host node should be attached to an LView"),Ys(r,su(n),n)}}function su(t){ngDevMode&&Ha(t,"component");for(var e=hu(t).view;e[Qa];)e=e[Qa];return e}function uu(t){var e=hu(t);ngDevMode&&Ha(e.data,"Component host node should be attached to an LViewData instance."),lu(e.data,e,t)}function lu(t,e,n){var r=qs(t,e),o=t[Ka],i=o.template,a=o.viewQuery;try{tu(),function(e,n,r){e&&1&t[Za]&&e(1,r)}(a,0,n),i(Zs(t),n),Gs(),function(t,e){t&&t(2,e)}(a,n)}finally{Hs(r)}}function cu(t,e){null==e&&(e=js),function(t,e){t>=(e?e.length:0)&&Ga("index expected to be a valid data index")}(t,e||js)}function pu(t,e){null==e&&(e=js),qa(e.length,t,"index "+t+" expected to be at the end of arr (length "+e.length+")")}function hu(t){ngDevMode&&Ha(t,"expecting component got null");var e=t[zs];return ngDevMode&&Ha(t,"object is not a component"),e}var fu=Bs;function du(t){return{components:[],scheduler:t,clean:fu}}var mu=function(){function t(t,e){this._view=t,this._appRef=null,this._viewContainerRef=null,this._lViewNode=null,this.context=e}return t.prototype._setComponentContext=function(t,e){this._view=t,this.context=e},Object.defineProperty(t.prototype,"destroyed",{get:function(){return 32==(32&this._view[Za])},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){var t,e;this._viewContainerRef&&iu(this._view)&&(this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),this._viewContainerRef=null),gs(e=(t=this._view)[is])&&e.destroyNode&&function(e,n,r,o,i,a){for(var s=t[Ja],u=-1;s;){var l=null,c=s.tNode.type;if(3===c)Ss(2,o,null,s.native,a),s.dynamicLContainerNode&&Ss(2,o,null,s.dynamicLContainerNode.native,a);else if(0===c){Ss(2,o,null,s.native,a);var p=s,h=p.dynamicLContainerNode?p.dynamicLContainerNode.data:p.data;(l=h[ds].length?_s(h[ds][0]):null)&&(a=p.dynamicLContainerNode?p.dynamicLContainerNode.native:p.native)}else if(1===c){var f=Es(s.view),d=f.tNode.projection[s.tNode.projection];Os[++u]=s,l=d?f.data[Qa][d.index]:null}else l=_s(s);if(null===l)for(null===(l=ws(s))&&8192&s.tNode.flags&&(l=ws(Os[u--]));s&&!l;){if(null===(s=xs(s))||s===n)return null;s.tNode.next||0!==c||(a=s.native),l=ws(s)}s=l}}(0,t[Ja],0,e),function(t){if(-1===t[Ka].childIndex)return As(t);for(var e=Cs(t);e;){var n=null;if(e.length>=$a?e[Ka].childIndex>-1&&(n=Cs(e)):e[ds].length&&(n=e[ds][0].data),null==n){for(;e&&!e[Xa]&&e!==t;)As(e),e=Is(e,t);As(e||t),n=e&&e[Xa]}e=n}}(t),t[Za]|=32},t.prototype.onDestroy=function(t){var e,n;n=t,function(t){return t[ns]||(t[ns]=[])}(e=this._view).push(n),e[Ka].firstTemplatePass&&function(t){return t[Ka].cleanup||(t[Ka].cleanup=[])}(e).push(e[ns].length-1,null)},t.prototype.markForCheck=function(){!function(t){for(var e=t;null!=e[Qa];)e[Za]|=4,e=e[Qa];var n,r;e[Za]|=4,ngDevMode&&Ha(e[rs],"rootContext"),(n=e[rs]).clean==Bs&&(n.clean=new Promise(function(t){return r=t}),n.scheduler(function(){au(n),r(null),n.clean=Bs}))}(this._view)},t.prototype.detach=function(){this._view[Za]&=-9},t.prototype.reattach=function(){this._view[Za]|=8},t.prototype.detectChanges=function(){uu(this.context)},t.prototype.checkNoChanges=function(){!function(t){Us=!0;try{uu(t)}finally{Us=!1}}(this.context)},t.prototype.attachToViewContainerRef=function(t){this._viewContainerRef=t},t.prototype.detachFromAppRef=function(){this._appRef=null},t.prototype.attachToAppRef=function(t){this._appRef=t},t}(),gu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.resolveComponentFactory=function(t){return ngDevMode&&(void 0===e&&(e="Type passed in is not ComponentType, it does not have 'ngComponentDef' property."),t.ngComponentDef||Ga(e)),new wu(t.ngComponentDef);var e},e}(qe);function vu(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var yu=new gt("ROOT_CONTEXT_TOKEN",{providedIn:"root",factory:function(){return du(ne(bu))}}),bu=new gt("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return requestAnimationFrame.bind(window)}}),wu=function(t){function e(e){var n=t.call(this)||this;return n.componentDef=e,n.componentType=e.type,n.selector=e.selectors[0][0],n.ngContentSelectors=[],n}return i(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){return vu(this.componentDef.inputs)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return vu(this.componentDef.outputs)},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){var o,i,a=void 0===n,s=r?r.injector.get(On):vs,u=a?(o=this.selector,gs(i=s.createRenderer(null,this.componentDef.rendererType)||ks)?i.createElement(o,Js):null===Js?i.createElement(o):i.createElementNS(Js,o)):nu(s,n),l=r&&!a?r.injector.get(yu):du(requestAnimationFrame.bind(window)),c=Ks(s.createRenderer(u,this.componentDef.rendererType),eu(-1,null,null,null,null),l,this.componentDef.onPush?4:2);c[os]=r&&r.injector||null;var p,h,f=qs(c,null);try{if(s.begin&&s.begin(),h=function(t,e,n,r){Ts=!1,Ps=null;var o,i=Qs(0,3,e,null,null,Ks(ks,(o=n.template).ngPrivateData||(o.ngPrivateData=eu(-1,o,n.directiveDefs,n.pipeDefs,n.viewQuery)),null,n.onPush?4:2,r));return Ws&&(i.tNode.flags=4096,n.diPublic&&n.diPublic(n),Rs.directives=[n]),i}(0,u,this.componentDef),l.components.push(p=function(t,e,n){if(ngDevMode&&qa(js[ts],-1,"directives should be created before any bindings"),ngDevMode&&qa(Ts,!0,"previousOrParentNode should be a parent"),Object.defineProperty(e,zs,{enumerable:!1,value:Ps}),null==Ls&&(js[es]=Ls=[]),ngDevMode&&pu(t,Ls),Ls[t]=e,Ws){var r=Ps.tNode.flags;0==(4095&r)?Ps.tNode.flags=t<<14|4096&r|1:(ngDevMode&&4095==(4095&r)&&Ga("Reached the max number of directives"),Ps.tNode.flags++)}else{var o=n.diPublic;o&&o(n)}return null!=n.attributes&&3==Ps.tNode.type&&function(t,e){for(var n=gs(ks),r=0;r<e.length;){var o=e[r];if(1===o)break;if(o===ms)r+=2;else if(ngDevMode&&ngDevMode.rendererSetAttribute++,0===o){var i=e[r+1],a=e[r+2],s=e[r+3];n?ks.setAttribute(t,a,s,i):t.setAttributeNS(i,a,s),r+=4}else s=e[r+1],n?ks.setAttribute(t,o,s):t.setAttribute(o,s),r+=2}}(Ps.native,n.attributes),e}(0,this.componentDef.factory(),this.componentDef)),function(t,e,n){t&&null!=t.changeDetectorRef&&t.changeDetectorRef._setComponentContext(h.data,p)}(h.nodeInjector),function(t,e){var n=hu(t),r=n.view[Ka];(function(t,e,n,r){ngDevMode&&qa(r.firstTemplatePass,!0,"Should only be called on first template pass"),e&&(r.initHooks||(r.initHooks=[])).push(0,e),n&&((r.initHooks||(r.initHooks=[])).push(0,n),(r.checkHooks||(r.checkHooks=[])).push(0,n))})(0,e.onInit,e.doCheck,r),function(t,e){if(e.firstTemplatePass)for(var n=t>>14,r=n+(4095&t),o=n;o<r;o++){var i=e.directives[o];ss(i,e,o),us(i,e,o),ls(i,e,o)}}(n.tNode.flags,r)}(p,this.componentDef),e)for(var d=0,m=h.tNode.projection=[],g=0;g<e.length;g++){for(var v=e[g],y=null,b=null,w=0;w<v.length;w++){var _=Qs(++d,3,v[w],null,null);b?b.next=_.tNode:y=_.tNode,b=_.tNode}m.push(y)}Xs(h,h.data[Ka],p,1),h.data[Za]&=-2}finally{qs(f,null),s.end&&s.end()}var x=new _u(this.componentType,p,c,t,u);return a&&(x.hostView._lViewNode.tNode.child=h.tNode),x},e}(ze),_u=function(t){function e(e,n,r,o,i){var a=t.call(this)||this;return a.destroyCbs=[],a.instance=n,a.hostView=a.changeDetectorRef=new mu(r,n),a.hostView._lViewNode=Qs(-1,2,null,null,null,r),a.injector=o,a.location=new Sn(i),a.componentType=e,a}return i(e,t),e.prototype.destroy=function(){ngDevMode&&Ha(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null},e.prototype.onDestroy=function(t){ngDevMode&&Ha(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.push(t)},e}(Le),xu={provide:qe,useFactory:function(){return new gu},deps:[]},Ou=function(t){function e(e,n){var r=t.call(this)||this;r._bootstrapComponents=[],r.destroyCbs=[];var o=e.ngModuleDef;return ngDevMode&&Ha(o,"NgModule '"+At(e)+"' is not a subtype of 'NgModuleType'."),r._bootstrapComponents=o.bootstrap,r.injector=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),e=e||ye(),new be(t,n,e)}(e,n,[xu,{provide:$e,useValue:r}]),r.instance=r.injector.get(e),r.componentFactoryResolver=new gu,r}return i(e,t),e.prototype.destroy=function(){ngDevMode&&Ha(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null},e.prototype.onDestroy=function(t){ngDevMode&&Ha(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.push(t)},e}($e);!function(t){function e(e){var n=t.call(this)||this;return n.moduleType=e,n}i(e,t),e.prototype.create=function(t){return new Ou(this.moduleType,t)}}(Ke);var Eu=function(){},Su=function(){function t(){}return t.prototype.ngOnInit=function(){},t}(),Cu=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new rt;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(at),Iu=new T(function(t){return t.complete()});function Au(t){return t?function(t){return new T(function(e){return t.schedule(function(){return e.complete()})})}(t):Iu}function ku(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r,o=t[t.length-1];switch(M(o)?t.pop():o=void 0,t.length){case 0:return Au(o);case 1:return o?Q(t,o):(n=t[0],(r=new T(function(t){t.next(n),t.complete()}))._isScalar=!0,r.value=n,r);default:return Q(t,o)}}function Nu(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}Nu.prototype=Object.create(Error.prototype);var Pu=Nu;function Tu(t,e){return function(n){return n.lift(new Ru(t,e))}}var Ru=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Mu(t,this.predicate,this.thisArg))},t}(),Mu=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.count=0,o}return i(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(C);function Du(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Du.prototype=Object.create(Error.prototype);var ju=Du,Lu=function(){function t(t){if(this.total=t,this.total<0)throw new ju}return t.prototype.call=function(t,e){return e.subscribe(new zu(t,this.total))},t}(),zu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return i(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(C);function Bu(t){return void 0===t&&(t=null),function(e){return e.lift(new Fu(t))}}var Fu=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new Vu(t,this.defaultValue))},t}(),Vu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return i(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(C),Uu=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new Wu(t,this.nextOrObserver,this.error,this.complete))},t}(),Wu=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i._tapNext=k,i._tapError=k,i._tapComplete=k,i._tapError=r||k,i._tapComplete=o||k,c(n)?(i._context=i,i._tapNext=n):n&&(i._context=n,i._tapNext=n.next||k,i._tapError=n.error||k,i._tapComplete=n.complete||k),i}return i(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(C),qu=function(t){return void 0===t&&(t=Hu),e={hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}},function(t){return t.lift(new Uu(e,void 0,void 0))};var e};function Hu(){return new Pu}function Gu(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Tu(function(e,n){return t(e,n,r)}):tt,function(t){return t.lift(new Lu(1))},n?Bu(e):qu(function(){return new Pu}))}}function $u(t,e){return function(n){return n.lift(new Ku(t,e,n))}}var Ku=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new Qu(t,this.predicate,this.thisArg,this.source))},t}(),Qu=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.source=o,i.index=0,i.thisArg=r||i,i}return i(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(C);function Xu(t,e){return Y(t,e,1)}function Yu(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Zu(t,e,n))}}var Zu=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new Ju(t,this.accumulator,this.seed,this.hasSeed))},t}(),Ju=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i.accumulator=n,i._seed=r,i.hasSeed=o,i.index=0,i}return i(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(C);function tl(t){return function(e){return 0===t?Au():e.lift(new el(t))}}var el=function(){function t(t){if(this.total=t,this.total<0)throw new ju}return t.prototype.call=function(t,e){return e.subscribe(new nl(t,this.total))},t}(),nl=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return i(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,o=0;o<n;o++){var i=e++%n;t.next(r[i])}t.complete()},e}(C);function rl(t){return function(e){var n=new ol(t),r=e.lift(n);return n.caught=r}}var ol=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new il(t,this.selector,this.caught))},t}(),il=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.selector=n,o.caught=r,o}return i(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var r=new D(this,void 0,void 0);this.add(r),q(this,n,void 0,void 0,r)}},e}(H);function al(){return et(1)}function sl(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Tu(function(e,n){return t(e,n,r)}):tt,tl(1),n?Bu(e):qu(function(){return new Pu}))}}var ul=function(){},ll=new gt("Location Initialized"),cl=function(){},pl=new gt("appBaseHref"),hl=function(){function t(e){var n=this;this._subject=new Je,this._platformStrategy=e;var r=this._platformStrategy.getBaseHref();this._baseHref=t.stripTrailingSlash(fl(r)),this._platformStrategy.onPopState(function(t){n._subject.emit({url:n.path(!0),pop:!0,state:t.state,type:t.type})})}return t.prototype.path=function(t){return void 0===t&&(t=!1),this.normalize(this._platformStrategy.path(t))},t.prototype.isCurrentPathEqualTo=function(e,n){return void 0===n&&(n=""),this.path()==this.normalize(e+t.normalizeQueryParams(n))},t.prototype.normalize=function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,fl(e)))},t.prototype.prepareExternalUrl=function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)},t.prototype.go=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n=null),this._platformStrategy.pushState(n,"",t,e)},t.prototype.replaceState=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n=null),this._platformStrategy.replaceState(n,"",t,e)},t.prototype.forward=function(){this._platformStrategy.forward()},t.prototype.back=function(){this._platformStrategy.back()},t.prototype.subscribe=function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})},t.normalizeQueryParams=function(t){return t&&"?"!==t[0]?"?"+t:t},t.joinWithSlash=function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e},t.stripTrailingSlash=function(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)},t}();function fl(t){return t.replace(/\/index.html$/,"")}var dl=function(t){function e(e,n){var r=t.call(this)||this;return r._platformLocation=e,r._baseHref="",null!=n&&(r._baseHref=n),r}return i(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e},e.prototype.prepareExternalUrl=function(t){var e=hl.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e},e.prototype.pushState=function(t,e,n,r){var o=this.prepareExternalUrl(n+hl.normalizeQueryParams(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,e,o)},e.prototype.replaceState=function(t,e,n,r){var o=this.prepareExternalUrl(n+hl.normalizeQueryParams(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,o)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(cl),ml=function(t){function e(e,n){var r=t.call(this)||this;if(r._platformLocation=e,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=n,r}return i(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.prepareExternalUrl=function(t){return hl.joinWithSlash(this._baseHref,t)},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.pathname+hl.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?""+e+n:e},e.prototype.pushState=function(t,e,n,r){var o=this.prepareExternalUrl(n+hl.normalizeQueryParams(r));this._platformLocation.pushState(t,e,o)},e.prototype.replaceState=function(t,e,n,r){var o=this.prepareExternalUrl(n+hl.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,o)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(cl),gl=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],vl={},yl=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),bl=new gt("UseV4Plurals"),wl=function(){},_l=function(t){function e(e,n){var r=t.call(this)||this;return r.locale=e,r.deprecatedPluralFn=n,r}return i(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return function(t){var e=t.toLowerCase().replace(/_/g,"-"),n=vl[e];if(n)return n;var r=e.split("-")[0];if(n=vl[r])return n;if("en"===r)return gl;throw new Error('Missing locale data for the locale "'+t+'".')}(t)[18]}(e||this.locale)(t)){case yl.Zero:return"zero";case yl.One:return"one";case yl.Two:return"two";case yl.Few:return"few";case yl.Many:return"many";default:return"other"}},e}(wl),xl=function(){},Ol=new gt("DocumentToken"),El="browser",Sl="server";function Cl(t){return t===El}var Il=function(){function t(){}return t.ngInjectableDef=mt({providedIn:"root",factory:function(){return new Al(ne(Ol),window)}}),t}(),Al=function(){function t(t,e){this.document=t,this.window=e,this.offset=function(){return[0,0]}}return t.prototype.setOffset=function(t){this.offset=Array.isArray(t)?function(){return t}:t},t.prototype.getScrollPosition=function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]},t.prototype.scrollToPosition=function(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])},t.prototype.scrollToAnchor=function(t){if(this.supportScrollRestoration()){var e=this.document.querySelector("#"+t);if(e)return void this.scrollToElement(e);var n=this.document.querySelector("[name='"+t+"']");if(n)return void this.scrollToElement(n)}},t.prototype.setHistoryScrollRestoration=function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}},t.prototype.scrollToElement=function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(n-o[0],r-o[1])},t.prototype.supportScrollRestoration=function(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}},t}(),kl=null;function Nl(){return kl}var Pl,Tl={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Rl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ml={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};xt.Node&&(Pl=xt.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var Dl,jl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){var t;t=new e,kl||(kl=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var r;(r=t)[e].apply(r,l(n))},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return Tl},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return Pl.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var r=this.getStyle(t,e)||"";return n?r==n:r.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var o=n.item(r);e.set(o.name,o.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,r){t.setAttributeNS(e,n,r)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||""},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute("href")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Ml.hasOwnProperty(e)&&(e=Ml[e]))}return Rl[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=Ll||(Ll=document.querySelector("base"))?Ll.getAttribute("href"):null;return null==n?null:(e=n,Dl||(Dl=document.createElement("a")),Dl.setAttribute("href",e),"/"===Dl.pathname.charAt(0)?Dl.pathname:"/"+Dl.pathname)},e.prototype.resetBaseElement=function(){Ll=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return function(t,e){var n,r;e=encodeURIComponent(e);try{for(var o=s(t.split(";")),i=o.next();!i.done;i=o.next()){var a=i.value,l=a.indexOf("="),c=u(-1==l?[a,""]:[a.slice(0,l),a.slice(l+1)],2),p=c[1];if(c[0].trim()===e)return decodeURIComponent(p)}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null}(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],o=0;o<r.length;o++)if(null!=e.getStyle(n,r[o]+"AnimationName")){e._animationPrefix="-"+r[o].toLowerCase()+"-";break}var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(i).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=i[t])})}catch(t){e._animationPrefix=null,e._transitionEnd=null}return e}return i(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}())),Ll=null,zl=Ol;function Bl(){return!!window.history.pushState}var Fl=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}return i(e,t),e.prototype._init=function(){this.location=Nl().getLocation(),this._history=Nl().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return Nl().getBaseHref(this._doc)},e.prototype.onPopState=function(t){Nl().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){Nl().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){Bl()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){Bl()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:Pt,args:[zl]}]}]},e}(ul),Vl=new gt("TRANSITION_ID"),Ul=[{provide:Se,useFactory:function(t,e,n){return function(){n.get(Ce).donePromise.then(function(){var n=Nl();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return n.getAttribute(e,"ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[Vl,zl,Ft],multi:!0}],Wl=function(){function t(){}return t.init=function(){var e;e=new t,pn=e},t.prototype.addToWindow=function(t){xt.getAngularTestability=function(e,n){void 0===n&&(n=!0);var r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},xt.getAllAngularTestabilities=function(){return t.getAllTestabilities()},xt.getAllAngularRootElements=function(){return t.getAllRootElements()},xt.frameworkStabilizers||(xt.frameworkStabilizers=[]),xt.frameworkStabilizers.push(function(t){var e=xt.getAllAngularTestabilities(),n=e.length,r=!1,o=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(o)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?Nl().isShadowRoot(e)?this.findTestabilityInTree(t,Nl().getHost(e),!0):this.findTestabilityInTree(t,Nl().parentElement(e),!0):null},t}();function ql(t,e){"undefined"!=typeof COMPILED&&COMPILED||((xt.ng=xt.ng||{})[t]=e)}var Hl={ApplicationRef:_n,NgZone:tn};function Gl(t){return zn(t)}var $l=new gt("EventManagerPlugins"),Kl=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var o=n[r];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error("No event manager plugin found for event "+t)},t}(),Ql=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var r=Nl().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target "+r+" for event "+e);return this.addEventListener(r,e,n)},t}(),Xl=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),Yl=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return i(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return Nl().remove(t)})},e}(Xl),Zl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Jl=/%COMP%/g,tc="_nghost-%COMP%",ec="_ngcontent-%COMP%";function nc(t,e,n){for(var r=0;r<e.length;r++){var o=e[r];Array.isArray(o)?nc(t,o,n):(o=o.replace(Jl,t),n.push(o))}return n}function rc(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var oc=function(){function t(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new ic(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case oe.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new lc(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case oe.Native:case oe.ShadowDom:return new cc(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=nc(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),ic=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(Zl[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t){var e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error('The selector "'+t+'" did not match any elements');return e.textContent="",e},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,r){if(r){e=r+":"+e;var o=Zl[r];o?t.setAttributeNS(o,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var r=Zl[n];r?t.removeAttributeNS(r,e):t.removeAttribute(n+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,r){r&En.DashCase?t.style.setProperty(e,n,r&En.Important?"important":""):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&En.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,n){sc(e,"property"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return sc(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,rc(n)):this.eventManager.addEventListener(t,e,rc(n))},t}(),ac="@".charCodeAt(0);function sc(t,e){if(t.charCodeAt(0)===ac)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var uc,lc=function(t){function e(e,n,r){var o=t.call(this,e)||this;o.component=r;var i=nc(r.id,r.styles,[]);return n.addStyles(i),o.contentAttr=ec.replace(Jl,r.id),o.hostAttr=tc.replace(Jl,r.id),o}return i(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,n){var r=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,r,this.contentAttr,""),r},e}(ic),cc=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;i.sharedStylesHost=n,i.hostEl=r,i.component=o,i.shadowRoot=o.encapsulation===oe.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),i.sharedStylesHost.addHost(i.shadowRoot);for(var a=nc(o.id,o.styles,[]),s=0;s<a.length;s++){var u=document.createElement("style");u.textContent=a[s],i.shadowRoot.appendChild(u)}return i}return i(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,r){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,r)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(ic),pc="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},hc=pc("addEventListener"),fc=pc("removeEventListener"),dc={},mc="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[pc("BLACK_LISTED_EVENTS")]&&(uc={});var gc=function(t){return!!uc&&uc.hasOwnProperty(t)},vc=function(t){var e=dc[t.type];if(e){var n=this[e];if(n){var r=[t];if(1===n.length)return(a=n[0]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r);for(var o=n.slice(),i=0;i<o.length&&!0!==t[mc];i++){var a;(a=o[i]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r)}}}},yc=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.ngZone=n,r&&function(t){return t===Sl}(r)||o.patchEvent(),o}return i(e,t),e.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[mc]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var r=this,o=n;if(!t[hc]||tn.isInAngularZone()&&!gc(e))t.addEventListener(e,o,!1);else{var i=dc[e];i||(i=dc[e]=pc("ANGULAR"+e+"FALSE"));var a=t[i],s=a&&a.length>0;a||(a=t[i]=[]);var u=gc(e)?Zone.root:Zone.current;if(0===a.length)a.push({zone:u,handler:o});else{for(var l=!1,c=0;c<a.length;c++)if(a[c].handler===o){l=!0;break}l||a.push({zone:u,handler:o})}s||t[hc](e,vc,!1)}return function(){return r.removeEventListener(t,e,o)}},e.prototype.removeEventListener=function(t,e,n){var r=t[fc];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);var o=dc[e],i=o&&t[o];if(!i)return t.removeEventListener.apply(t,[e,n,!1]);for(var a=!1,s=0;s<i.length;s++)if(i[s].handler===n){a=!0,i.splice(s,1);break}a?0===i.length&&r.apply(t,[e,vc,!1]):t.removeEventListener.apply(t,[e,n,!1])},e}(Ql),bc={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},wc=new gt("HammerGestureConfig"),_c=new gt("HammerLoader"),xc=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t,this.options);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),Oc=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i._config=n,i.console=r,i.loader=o,i}return i(e,t),e.prototype.supports=function(t){return!(!bc.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+t+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},e.prototype.addEventListener=function(t,e,n){var r=this,o=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){var i=!1,a=function(){i=!0};return this.loader().then(function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(a=function(){});i||(a=r.addEventListener(t,e,n))}).catch(function(){r.console.warn('The "'+e+'" event cannot be bound because the custom Hammer.JS loader failed.'),a=function(){}}),function(){a()}}return o.runOutsideAngular(function(){var i=r._config.buildHammer(t),a=function(t){o.runGuarded(function(){n(t)})};return i.on(e,a),function(){return i.off(e,a)}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},e}(Ql),Ec=["alt","control","meta","shift"],Sc={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},Cc=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.supports=function(t){return null!=e.parseEventName(t)},e.prototype.addEventListener=function(t,n,r){var o=e.parseEventName(n),i=e.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Nl().onAndCancel(t,o.domEventName,i)})},e.parseEventName=function(t){var n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;var o=e._normalizeKey(n.pop()),i="";if(Ec.forEach(function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),i+=t+".")}),i+=o,0!=n.length||0===o.length)return null;var a={};return a.domEventName=r,a.fullKey=i,a},e.getEventFullKey=function(t){var e="",n=Nl().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Ec.forEach(function(r){r!=n&&(0,Sc[r])(t)&&(e+=r+".")}),e+=n},e.eventCallback=function(t,n,r){return function(o){e.getEventFullKey(o)===t&&r.runGuarded(function(){return n(o)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},e}(Ql),Ic=function(){},Ac=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return i(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case Mr.NONE:return e;case Mr.HTML:return e instanceof Nc?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){var n=null;try{yr=yr||new hr(t);var r=e?String(e):"";n=yr.getInertBodyElement(r);var o=5,i=r;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,r=i,i=n.innerHTML,n=yr.getInertBodyElement(r)}while(r!==i);var a=new Ir,s=a.sanitizeChildren(Pr(n)||n);return mn()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),s}finally{if(n)for(var u=Pr(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}(this._doc,String(e)));case Mr.STYLE:return e instanceof Pc?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";var e=t.match(Rr);return e&&mr(e[1])===e[1]||t.match(Tr)&&function(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var o=t.charAt(r);"'"===o&&n?e=!e:'"'===o&&e&&(n=!n)}return e&&n}(t)?t:(mn()&&console.warn("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}(e));case Mr.SCRIPT:if(e instanceof Tc)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case Mr.URL:return e instanceof Mc||e instanceof Rc?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),mr(String(e)));case Mr.RESOURCE_URL:if(e instanceof Mc)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof kc)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new Nc(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new Pc(t)},e.prototype.bypassSecurityTrustScript=function(t){return new Tc(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new Rc(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new Mc(t)},e}(Ic),kc=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),Nc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(kc),Pc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"Style"},e}(kc),Tc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"Script"},e}(kc),Rc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"URL"},e}(kc),Mc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(kc),Dc=vn(ar,"browser",[{provide:Pe,useValue:El},{provide:Ne,useValue:function(){jl.makeCurrent(),Wl.init()},multi:!0},{provide:ul,useClass:Fl,deps:[zl]},{provide:zl,useFactory:function(){return document},deps:[]}]);function jc(){return new he}var Lc=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return t.withServerTransition=function(e){return{ngModule:t,providers:[{provide:Ie,useValue:e.appId},{provide:Vl,useExisting:Ie},Ul]}},t}();"undefined"!=typeof window&&window;var zc=function(t,e){this.id=t,this.url=e},Bc=function(t){function e(e,n,r,o){void 0===r&&(r="imperative"),void 0===o&&(o=null);var i=t.call(this,e,n)||this;return i.navigationTrigger=r,i.restoredState=o,i}return i(e,t),e.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},e}(zc),Fc=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o}return i(e,t),e.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},e}(zc),Vc=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.reason=r,o}return i(e,t),e.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},e}(zc),Uc=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.error=r,o}return i(e,t),e.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},e}(zc),Wc=function(t){function e(e,n,r,o){var i=t.call(this,e,n)||this;return i.urlAfterRedirects=r,i.state=o,i}return i(e,t),e.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(zc),qc=function(t){function e(e,n,r,o){var i=t.call(this,e,n)||this;return i.urlAfterRedirects=r,i.state=o,i}return i(e,t),e.prototype.toString=function(){return"GuardsCheckStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(zc),Hc=function(t){function e(e,n,r,o,i){var a=t.call(this,e,n)||this;return a.urlAfterRedirects=r,a.state=o,a.shouldActivate=i,a}return i(e,t),e.prototype.toString=function(){return"GuardsCheckEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+", shouldActivate: "+this.shouldActivate+")"},e}(zc),Gc=function(t){function e(e,n,r,o){var i=t.call(this,e,n)||this;return i.urlAfterRedirects=r,i.state=o,i}return i(e,t),e.prototype.toString=function(){return"ResolveStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(zc),$c=function(t){function e(e,n,r,o){var i=t.call(this,e,n)||this;return i.urlAfterRedirects=r,i.state=o,i}return i(e,t),e.prototype.toString=function(){return"ResolveEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(zc),Kc=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadStart(path: "+this.route.path+")"},t}(),Qc=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadEnd(path: "+this.route.path+")"},t}(),Xc=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ChildActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Yc=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ChildActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Zc=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Jc=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),tp=function(){function t(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}return t.prototype.toString=function(){return"Scroll(anchor: '"+this.anchor+"', position: '"+(this.position?this.position[0]+", "+this.position[1]:null)+"')"},t}(),ep=function(){},np="primary",rp=function(){function t(t){this.params=t||{}}return t.prototype.has=function(t){return this.params.hasOwnProperty(t)},t.prototype.get=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null},t.prototype.getAll=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]},Object.defineProperty(t.prototype,"keys",{get:function(){return Object.keys(this.params)},enumerable:!0,configurable:!0}),t}();function op(t){return new rp(t)}function ip(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var o={},i=0;i<r.length;i++){var a=r[i],s=t[i];if(a.startsWith(":"))o[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}var ap=function(t,e){this.routes=t,this.module=e};function sp(t,e){void 0===e&&(e="");for(var n=0;n<t.length;n++){var r=t[n];up(r,lp(e,r))}}function up(t,e){if(!t)throw new Error("\n      Invalid configuration of route '"+e+"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");if(Array.isArray(t))throw new Error("Invalid configuration of route '"+e+"': Array cannot be specified");if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==np)throw new Error("Invalid configuration of route '"+e+"': a componentless route without children or loadChildren cannot have a named outlet set");if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '"+e+"': redirectTo and children cannot be used together");if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': redirectTo and loadChildren cannot be used together");if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': children and loadChildren cannot be used together");if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '"+e+"': redirectTo and component cannot be used together");if(t.path&&t.matcher)throw new Error("Invalid configuration of route '"+e+"': path and matcher cannot be used together");if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '"+e+"'. One of the following must be provided: component, redirectTo, children or loadChildren");if(void 0===t.path&&void 0===t.matcher)throw new Error("Invalid configuration of route '"+e+"': routes must have either a path or a matcher specified");if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error("Invalid configuration of route '"+e+"': path cannot start with a slash");if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error("Invalid configuration of route '{path: \""+e+'", redirectTo: "'+t.redirectTo+"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.");if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '"+e+"': pathMatch can only be set to 'prefix' or 'full'");t.children&&sp(t.children,e)}function lp(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:t+"/"+e.path:"":t}function cp(t){var e=t.children&&t.children.map(cp),n=e?a({},t,{children:e}):a({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==np&&(n.component=ep),n}function pp(t,e){var n,r=Object.keys(t),o=Object.keys(e);if(r.length!=o.length)return!1;for(var i=0;i<r.length;i++)if(t[n=r[i]]!==e[n])return!1;return!0}function hp(t){return Array.prototype.concat.apply([],t)}function fp(t){return t.length>0?t[t.length-1]:null}function dp(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function mp(t){return t.pipe(et(),$u(function(t){return!0===t}))}function gp(t){return(e=t)&&"function"==typeof e.subscribe?t:Ee(t)?X(Promise.resolve(t)):ku(t);var e}function vp(t,e,n){return n?function(t,e){return pp(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!_p(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(function(n){return e[n]===t[n]})}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,o){if(n.segments.length>o.length)return!!_p(a=n.segments.slice(0,o.length),o)&&!r.hasChildren();if(n.segments.length===o.length){if(!_p(n.segments,o))return!1;for(var i in r.children){if(!n.children[i])return!1;if(!t(n.children[i],r.children[i]))return!1}return!0}var a=o.slice(0,n.segments.length),s=o.slice(n.segments.length);return!!_p(n.segments,a)&&!!n.children[np]&&e(n.children[np],r,s)}(e,n,n.segments)}(t.root,e.root)}var yp=function(){function t(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}return Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=op(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return Sp.serialize(this)},t}(),bp=function(){function t(t,e){var n=this;this.segments=t,this.children=e,this.parent=null,dp(e,function(t,e){return t.parent=n})}return t.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(t.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return Cp(this)},t}(),wp=function(){function t(t,e){this.path=t,this.parameters=e}return Object.defineProperty(t.prototype,"parameterMap",{get:function(){return this._parameterMap||(this._parameterMap=op(this.parameters)),this._parameterMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return Tp(this)},t}();function _p(t,e){return t.length===e.length&&t.every(function(t,n){return t.path===e[n].path})}function xp(t,e){var n=[];return dp(t.children,function(t,r){r===np&&(n=n.concat(e(t,r)))}),dp(t.children,function(t,r){r!==np&&(n=n.concat(e(t,r)))}),n}var Op=function(){},Ep=function(){function t(){}return t.prototype.parse=function(t){var e=new Lp(t);return new yp(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())},t.prototype.serialize=function(t){var e,n;return"/"+function t(e,n){if(!e.hasChildren())return Cp(e);if(n){var r=e.children[np]?t(e.children[np],!1):"",o=[];return dp(e.children,function(e,n){n!==np&&o.push(n+":"+t(e,!1))}),o.length>0?r+"("+o.join("//")+")":r}var i=xp(e,function(n,r){return r===np?[t(e.children[np],!1)]:[r+":"+t(n,!1)]});return Cp(e)+"/("+i.join("//")+")"}(t.root,!0)+(e=t.queryParams,(n=Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return Ap(t)+"="+Ap(e)}).join("&"):Ap(t)+"="+Ap(n)})).length?"?"+n.join("&"):"")+("string"==typeof t.fragment?"#"+encodeURI(t.fragment):"")},t}(),Sp=new Ep;function Cp(t){return t.segments.map(function(t){return Tp(t)}).join("/")}function Ip(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ap(t){return Ip(t).replace(/%3B/gi,";")}function kp(t){return Ip(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Np(t){return decodeURIComponent(t)}function Pp(t){return Np(t.replace(/\+/g,"%20"))}function Tp(t){return""+kp(t.path)+(e=t.parameters,Object.keys(e).map(function(t){return";"+kp(t)+"="+kp(e[t])}).join(""));var e}var Rp=/^[^\/()?;=#]+/;function Mp(t){var e=t.match(Rp);return e?e[0]:""}var Dp=/^[^=?&#]+/,jp=/^[^?&#]+/,Lp=function(){function t(t){this.url=t,this.remaining=t}return t.prototype.parseRootSegment=function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bp([],{}):new bp([],this.parseChildren())},t.prototype.parseQueryParams=function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t},t.prototype.parseFragment=function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null},t.prototype.parseChildren=function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[np]=new bp(t,e)),n},t.prototype.parseSegment=function(){var t=Mp(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");return this.capture(t),new wp(Np(t),this.parseMatrixParams())},t.prototype.parseMatrixParams=function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=Mp(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=Mp(this.remaining);r&&this.capture(n=r)}t[Np(e)]=Np(n)}},t.prototype.parseQueryParam=function(t){var e,n=(e=this.remaining.match(Dp))?e[0]:"";if(n){this.capture(n);var r="";if(this.consumeOptional("=")){var o=function(t){var e=t.match(jp);return e?e[0]:""}(this.remaining);o&&this.capture(r=o)}var i=Pp(n),a=Pp(r);if(t.hasOwnProperty(i)){var s=t[i];Array.isArray(s)||(t[i]=s=[s]),s.push(a)}else t[i]=a}},t.prototype.parseParens=function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Mp(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '"+this.url+"'");var o=void 0;n.indexOf(":")>-1?(o=n.substr(0,n.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=np);var i=this.parseChildren();e[o]=1===Object.keys(i).length?i[np]:new bp([],i),this.consumeOptional("//")}return e},t.prototype.peekStartsWith=function(t){return this.remaining.startsWith(t)},t.prototype.consumeOptional=function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)},t.prototype.capture=function(t){if(!this.consumeOptional(t))throw new Error('Expected "'+t+'".')},t}(),zp=function(t){this.segmentGroup=t||null},Bp=function(t){this.urlTree=t};function Fp(t){return new T(function(e){return e.error(new zp(t))})}function Vp(t){return new T(function(e){return e.error(new Bp(t))})}function Up(t){return new T(function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '"+t+"'"))})}var Wp=function(){function t(t,e,n,r,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=t.get($e)}return t.prototype.apply=function(){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,np).pipe(G(function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)})).pipe(rl(function(e){if(e instanceof Bp)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof zp)throw t.noMatchError(e);throw e}))},t.prototype.match=function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,np).pipe(G(function(n){return e.createUrlTree(n,t.queryParams,t.fragment)})).pipe(rl(function(t){if(t instanceof zp)throw e.noMatchError(t);throw t}))},t.prototype.noMatchError=function(t){return new Error("Cannot match any routes. URL Segment: '"+t.segmentGroup+"'")},t.prototype.createUrlTree=function(t,e,n){var r,o=t.segments.length>0?new bp([],((r={})[np]=t,r)):t;return new yp(o,e,n)},t.prototype.expandSegmentGroup=function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(G(function(t){return new bp([],t)})):this.expandSegment(t,n,e,n.segments,r,!0)},t.prototype.expandChildren=function(t,e,n){var r=this;return function(n,o){if(0===Object.keys(n).length)return ku({});var i=[],a=[],s={};return dp(n,function(n,o){var u,l,c=(u=o,l=n,r.expandSegmentGroup(t,e,l,u)).pipe(G(function(t){return s[o]=t}));o===np?i.push(c):a.push(c)}),ku.apply(null,i.concat(a)).pipe(al(),sl(),G(function(){return s}))}(n.children)},t.prototype.expandSegment=function(t,e,n,r,o,i){var a=this;return ku.apply(void 0,l(n)).pipe(G(function(s){return a.expandSegmentAgainstRoute(t,e,n,s,r,o,i).pipe(rl(function(t){if(t instanceof zp)return ku(null);throw t}))}),al(),Gu(function(t){return!!t}),rl(function(t,n){if(t instanceof Pu||"EmptyError"===t.name){if(a.noLeftoversInUrl(e,r,o))return ku(new bp([],{}));throw new zp(e)}throw t}))},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.expandSegmentAgainstRoute=function(t,e,n,r,o,i,a){return $p(r)!==i?Fp(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,o,i):Fp(e)},t.prototype.expandSegmentAgainstRouteUsingRedirect=function(t,e,n,r,o,i){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,o,i)},t.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(t,e,n,r){var o=this,i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Vp(i):this.lineralizeSegments(n,i).pipe(Y(function(n){var i=new bp(n,{});return o.expandSegment(t,i,e,n,r,!1)}))},t.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(t,e,n,r,o,i){var a=this,s=qp(e,r,o),u=s.consumedSegments,l=s.lastChild,c=s.positionalParamSegments;if(!s.matched)return Fp(e);var p=this.applyRedirectCommands(u,r.redirectTo,c);return r.redirectTo.startsWith("/")?Vp(p):this.lineralizeSegments(r,p).pipe(Y(function(r){return a.expandSegment(t,e,n,r.concat(o.slice(l)),i,!1)}))},t.prototype.matchSegmentAgainstRoute=function(t,e,n,r){var o=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(G(function(t){return n._loadedConfig=t,new bp(r,{})})):ku(new bp(r,{}));var i=qp(e,n,r),u=i.consumedSegments,l=i.lastChild;if(!i.matched)return Fp(e);var c=r.slice(l);return this.getChildConfig(t,n).pipe(Y(function(t){var n=t.module,r=t.routes,i=function(t,e,n,r){return n.length>0&&function(t,e,n){return r.some(function(n){return Gp(t,e,n)&&$p(n)!==np})}(t,n)?{segmentGroup:Hp(new bp(e,function(t,e){var n,r,o={};o[np]=e;try{for(var i=s(t),a=i.next();!a.done;a=i.next()){var u=a.value;""===u.path&&$p(u)!==np&&(o[$p(u)]=new bp([],{}))}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o}(r,new bp(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return r.some(function(n){return Gp(t,e,n)})}(t,n)?{segmentGroup:Hp(new bp(t.segments,function(t,e,n,r){var o,i,u={};try{for(var l=s(n),c=l.next();!c.done;c=l.next()){var p=c.value;Gp(t,e,p)&&!r[$p(p)]&&(u[$p(p)]=new bp([],{}))}}catch(t){o={error:t}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}return a({},r,u)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,u,c,r),l=i.segmentGroup,p=i.slicedSegments;return 0===p.length&&l.hasChildren()?o.expandChildren(n,r,l).pipe(G(function(t){return new bp(u,t)})):0===r.length&&0===p.length?ku(new bp(u,{})):o.expandSegment(n,l,r,p,np,!0).pipe(G(function(t){return new bp(u.concat(t.segments),t.children)}))}))},t.prototype.getChildConfig=function(t,e){var n=this;return e.children?ku(new ap(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?ku(e._loadedConfig):function(t,e){var n=e.canLoad;return n&&0!==n.length?mp(X(n).pipe(G(function(n){var r=t.get(n);return gp(r.canLoad?r.canLoad(e):r(e))}))):ku(!0)}(t.injector,e).pipe(Y(function(r){return r?n.configLoader.load(t.injector,e).pipe(G(function(t){return e._loadedConfig=t,t})):function(t){return new T(function(e){return e.error(((n=Error("NavigationCancelingError: Cannot load children because the guard of the route \"path: '"+t.path+"'\" returned false")).ngNavigationCancelingError=!0,n));var n})}(e)})):ku(new ap([],t))},t.prototype.lineralizeSegments=function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return ku(n);if(r.numberOfChildren>1||!r.children[np])return Up(t.redirectTo);r=r.children[np]}},t.prototype.applyRedirectCommands=function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)},t.prototype.applyRedirectCreatreUrlTree=function(t,e,n,r){var o=this.createSegmentGroup(t,e.root,n,r);return new yp(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)},t.prototype.createQueryParams=function(t,e){var n={};return dp(t,function(t,r){if("string"==typeof t&&t.startsWith(":")){var o=t.substring(1);n[r]=e[o]}else n[r]=t}),n},t.prototype.createSegmentGroup=function(t,e,n,r){var o=this,i=this.createSegments(t,e.segments,n,r),a={};return dp(e.children,function(e,i){a[i]=o.createSegmentGroup(t,e,n,r)}),new bp(i,a)},t.prototype.createSegments=function(t,e,n,r){var o=this;return e.map(function(e){return e.path.startsWith(":")?o.findPosParam(t,e,r):o.findOrReturn(e,n)})},t.prototype.findPosParam=function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '"+t+"'. Cannot find '"+e.path+"'.");return r},t.prototype.findOrReturn=function(t,e){var n,r,o=0;try{for(var i=s(e),a=i.next();!a.done;a=i.next()){var u=a.value;if(u.path===t.path)return e.splice(o),u;o++}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return t},t}();function qp(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(e.matcher||ip)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Hp(t){if(1===t.numberOfChildren&&t.children[np]){var e=t.children[np];return new bp(t.segments.concat(e.segments),e.children)}return t}function Gp(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function $p(t){return t.outlet||np}var Kp=function(){function t(t){this._root=t}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),t.prototype.parent=function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null},t.prototype.children=function(t){var e=Qp(t,this._root);return e?e.children.map(function(t){return t.value}):[]},t.prototype.firstChild=function(t){var e=Qp(t,this._root);return e&&e.children.length>0?e.children[0].value:null},t.prototype.siblings=function(t){var e=Xp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(function(t){return t.value}).filter(function(e){return e!==t})},t.prototype.pathFromRoot=function(t){return Xp(t,this._root).map(function(t){return t.value})},t}();function Qp(t,e){var n,r;if(t===e.value)return e;try{for(var o=s(e.children),i=o.next();!i.done;i=o.next()){var a=Qp(t,i.value);if(a)return a}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null}function Xp(t,e){var n,r;if(t===e.value)return[e];try{for(var o=s(e.children),i=o.next();!i.done;i=o.next()){var a=Xp(t,i.value);if(a.length)return a.unshift(e),a}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return[]}var Yp=function(){function t(t,e){this.value=t,this.children=e}return t.prototype.toString=function(){return"TreeNode("+this.value+")"},t}();function Zp(t){var e={};return t&&t.children.forEach(function(t){return e[t.value.outlet]=t}),e}var Jp=function(t){function e(e,n){var r=t.call(this,e)||this;return r.snapshot=n,ih(r,e),r}return i(e,t),e.prototype.toString=function(){return this.snapshot.toString()},e}(Kp);function th(t,e){var n=function(t,e){var n=new rh([],{},{},"",{},np,e,null,t.root,-1,{});return new oh("",new Yp(n,[]))}(t,e),r=new Cu([new wp("",{})]),o=new Cu({}),i=new Cu({}),a=new Cu({}),s=new Cu(""),u=new eh(r,o,a,s,i,np,e,n.root);return u.snapshot=n.root,new Jp(new Yp(u,[]),n)}var eh=function(){function t(t,e,n,r,o,i,a,s){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=o,this.outlet=i,this.component=a,this._futureSnapshot=s}return Object.defineProperty(t.prototype,"routeConfig",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=this.params.pipe(G(function(t){return op(t)}))),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(G(function(t){return op(t)}))),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},t}();function nh(t,e){void 0===e&&(e="emptyOnly");var n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var o=n[r],i=n[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function(t){return t.reduce(function(t,e){return{params:a({},t.params,e.params),data:a({},t.data,e.data),resolve:a({},t.resolve,e._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var rh=function(){function t(t,e,n,r,o,i,a,s,u,l,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=o,this.outlet=i,this.component=a,this.routeConfig=s,this._urlSegment=u,this._lastPathIndex=l,this._resolve=c}return Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=op(this.params)),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=op(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"Route(url:'"+this.url.map(function(t){return t.toString()}).join("/")+"', path:'"+(this.routeConfig?this.routeConfig.path:"")+"')"},t}(),oh=function(t){function e(e,n){var r=t.call(this,n)||this;return r.url=e,ih(r,n),r}return i(e,t),e.prototype.toString=function(){return ah(this._root)},e}(Kp);function ih(t,e){e.value._routerState=t,e.children.forEach(function(e){return ih(t,e)})}function ah(t){var e=t.children.length>0?" { "+t.children.map(ah).join(", ")+" } ":"";return""+t.value+e}function sh(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,pp(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),pp(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!pp(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),pp(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function uh(t,e){var n,r;return pp(t.params,e.params)&&_p(n=t.url,r=e.url)&&n.every(function(t,e){return pp(t.parameters,r[e].parameters)})&&!(!t.parent!=!e.parent)&&(!t.parent||uh(t.parent,e.parent))}function lh(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ch(t,e,n,r,o){var i={};return r&&dp(r,function(t,e){i[e]=Array.isArray(t)?t.map(function(t){return""+t}):""+t}),new yp(n.root===t?e:function t(e,n,r){var o={};return dp(e.children,function(e,i){o[i]=e===n?r:t(e,n,r)}),new bp(e.segments,o)}(n.root,t,e),i,o)}var ph=function(){function t(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&lh(n[0]))throw new Error("Root segment cannot have matrix parameters");var r=n.find(function(t){return"object"==typeof t&&null!=t&&t.outlets});if(r&&r!==fp(n))throw new Error("{outlets:{}} has to be the last command")}return t.prototype.toRoot=function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]},t}(),hh=function(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n};function fh(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[np]:""+t}function dh(t,e,n){if(t||(t=new bp([],{})),0===t.segments.length&&t.hasChildren())return mh(t,e,n);var r=function(t,e,n){for(var r=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};o<t.segments.length;){if(r>=n.length)return i;var a=t.segments[o],s=fh(n[r]),u=r<n.length-1?n[r+1]:null;if(o>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!bh(s,u,a))return i;r+=2}else{if(!bh(s,{},a))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(t,e,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var i=new bp(t.segments.slice(0,r.pathIndex),{});return i.children[np]=new bp(t.segments.slice(r.pathIndex),t.children),mh(i,0,o)}return r.match&&0===o.length?new bp(t.segments,{}):r.match&&!t.hasChildren()?gh(t,e,n):r.match?mh(t,0,o):gh(t,e,n)}function mh(t,e,n){if(0===n.length)return new bp(t.segments,{});var r=function(t){var e,n;return"object"!=typeof t[0]?((e={})[np]=t,e):void 0===t[0].outlets?((n={})[np]=t,n):t[0].outlets}(n),o={};return dp(r,function(n,r){null!==n&&(o[r]=dh(t.children[r],e,n))}),dp(t.children,function(t,e){void 0===r[e]&&(o[e]=t)}),new bp(t.segments,o)}function gh(t,e,n){for(var r=t.segments.slice(0,e),o=0;o<n.length;){if("object"==typeof n[o]&&void 0!==n[o].outlets){var i=vh(n[o].outlets);return new bp(r,i)}if(0===o&&lh(n[0]))r.push(new wp(t.segments[e].path,n[0])),o++;else{var a=fh(n[o]),s=o<n.length-1?n[o+1]:null;a&&s&&lh(s)?(r.push(new wp(a,yh(s))),o+=2):(r.push(new wp(a,{})),o++)}}return new bp(r,{})}function vh(t){var e={};return dp(t,function(t,n){null!==t&&(e[n]=gh(new bp([],{}),0,t))}),e}function yh(t){var e={};return dp(t,function(t,n){return e[n]=""+t}),e}function bh(t,e,n){return t==n.path&&pp(e,n.parameters)}var wh=function(t){this.path=t,this.route=this.path[this.path.length-1]},_h=function(t,e){this.component=t,this.route=e},xh=function(){function t(t,e,n,r){this.future=t,this.curr=e,this.moduleInjector=n,this.forwardEvent=r,this.canActivateChecks=[],this.canDeactivateChecks=[]}return t.prototype.initialize=function(t){var e=this.future._root;this.setupChildRouteGuards(e,this.curr?this.curr._root:null,t,[e.value])},t.prototype.checkGuards=function(){var t=this;return this.isDeactivating()||this.isActivating()?this.runCanDeactivateChecks().pipe(Y(function(e){return e?t.runCanActivateChecks():ku(!1)})):ku(!0)},t.prototype.resolveData=function(t){var e=this;return this.isActivating()?X(this.canActivateChecks).pipe(Xu(function(n){return e.runResolve(n.route,t)}),function(t,e){return arguments.length>=2?function(n){return N(Yu(t,e),tl(1),Bu(e))(n)}:function(e){return N(Yu(function(e,n,r){return t(e,n,r+1)}),tl(1))(e)}}(function(t,e){return t})):ku(null)},t.prototype.isDeactivating=function(){return 0!==this.canDeactivateChecks.length},t.prototype.isActivating=function(){return 0!==this.canActivateChecks.length},t.prototype.setupChildRouteGuards=function(t,e,n,r){var o=this,i=Zp(e);t.children.forEach(function(t){o.setupRouteGuards(t,i[t.value.outlet],n,r.concat([t.value])),delete i[t.value.outlet]}),dp(i,function(t,e){return o.deactivateRouteAndItsChildren(t,n.getContext(e))})},t.prototype.setupRouteGuards=function(t,e,n,r){var o=t.value,i=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(i&&o.routeConfig===i.routeConfig){var s=this.shouldRunGuardsAndResolvers(i,o,o.routeConfig.runGuardsAndResolvers);s?this.canActivateChecks.push(new wh(r)):(o.data=i.data,o._resolvedData=i._resolvedData),this.setupChildRouteGuards(t,e,o.component?a?a.children:null:n,r),s&&this.canDeactivateChecks.push(new _h(a.outlet.component,i))}else i&&this.deactivateRouteAndItsChildren(e,a),this.canActivateChecks.push(new wh(r)),this.setupChildRouteGuards(t,null,o.component?a?a.children:null:n,r)},t.prototype.shouldRunGuardsAndResolvers=function(t,e,n){switch(n){case"always":return!0;case"paramsOrQueryParamsChange":return!uh(t,e)||!pp(t.queryParams,e.queryParams);case"paramsChange":default:return!uh(t,e)}},t.prototype.deactivateRouteAndItsChildren=function(t,e){var n=this,r=Zp(t),o=t.value;dp(r,function(t,r){n.deactivateRouteAndItsChildren(t,o.component?e?e.children.getContext(r):null:e)}),this.canDeactivateChecks.push(new _h(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))},t.prototype.runCanDeactivateChecks=function(){var t=this;return X(this.canDeactivateChecks).pipe(Y(function(e){return t.runCanDeactivate(e.component,e.route)}),$u(function(t){return!0===t}))},t.prototype.runCanActivateChecks=function(){var t=this;return X(this.canActivateChecks).pipe(Xu(function(e){return mp(X([t.fireChildActivationStart(e.route.parent),t.fireActivationStart(e.route),t.runCanActivateChild(e.path),t.runCanActivate(e.route)]))}),$u(function(t){return!0===t}))},t.prototype.fireActivationStart=function(t){return null!==t&&this.forwardEvent&&this.forwardEvent(new Zc(t)),ku(!0)},t.prototype.fireChildActivationStart=function(t){return null!==t&&this.forwardEvent&&this.forwardEvent(new Xc(t)),ku(!0)},t.prototype.runCanActivate=function(t){var e=this,n=t.routeConfig?t.routeConfig.canActivate:null;return n&&0!==n.length?mp(X(n).pipe(G(function(n){var r=e.getToken(n,t);return gp(r.canActivate?r.canActivate(t,e.future):r(t,e.future)).pipe(Gu())}))):ku(!0)},t.prototype.runCanActivateChild=function(t){var e=this,n=t[t.length-1];return mp(X(t.slice(0,t.length-1).reverse().map(function(t){return e.extractCanActivateChild(t)}).filter(function(t){return null!==t})).pipe(G(function(t){return mp(X(t.guards).pipe(G(function(r){var o=e.getToken(r,t.node);return gp(o.canActivateChild?o.canActivateChild(n,e.future):o(n,e.future)).pipe(Gu())})))})))},t.prototype.extractCanActivateChild=function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null},t.prototype.runCanDeactivate=function(t,e){var n=this,r=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return r&&0!==r.length?X(r).pipe(Y(function(r){var o=n.getToken(r,e);return gp(o.canDeactivate?o.canDeactivate(t,e,n.curr,n.future):o(t,e,n.curr,n.future)).pipe(Gu())})).pipe($u(function(t){return!0===t})):ku(!0)},t.prototype.runResolve=function(t,e){return this.resolveNode(t._resolve,t).pipe(G(function(n){return t._resolvedData=n,t.data=a({},t.data,nh(t,e).resolve),null}))},t.prototype.resolveNode=function(t,e){var n=this,r=Object.keys(t);if(0===r.length)return ku({});if(1===r.length){var o=r[0];return this.getResolver(t[o],e).pipe(G(function(t){var e;return(e={})[o]=t,e}))}var i={};return X(r).pipe(Y(function(r){return n.getResolver(t[r],e).pipe(G(function(t){return i[r]=t,t}))})).pipe(sl(),G(function(){return i}))},t.prototype.getResolver=function(t,e){var n=this.getToken(t,e);return gp(n.resolve?n.resolve(e,this.future):n(e,this.future))},t.prototype.getToken=function(t,e){var n=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(n?n.module.injector:this.moduleInjector).get(t)},t}(),Oh=function(){},Eh=function(){function t(t,e,n,r,o,i){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=i}return t.prototype.recognize=function(){try{var t=Ih(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,np),n=new rh([],Object.freeze({}),Object.freeze(a({},this.urlTree.queryParams)),this.urlTree.fragment,{},np,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Yp(n,e),o=new oh(this.url,r);return this.inheritParamsAndData(o._root),ku(o)}catch(t){return new T(function(e){return e.error(t)})}},t.prototype.inheritParamsAndData=function(t){var e=this,n=t.value,r=nh(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(function(t){return e.inheritParamsAndData(t)})},t.prototype.processSegmentGroup=function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)},t.prototype.processChildren=function(t,e){var n,r=this,o=xp(e,function(e,n){return r.processSegmentGroup(t,e,n)});return n={},o.forEach(function(t){var e=n[t.value.outlet];if(e){var r=e.url.map(function(t){return t.toString()}).join("/"),o=t.value.url.map(function(t){return t.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+r+"' and '"+o+"'.")}n[t.value.outlet]=t.value}),o.sort(function(t,e){return t.value.outlet===np?-1:e.value.outlet===np?1:t.value.outlet.localeCompare(e.value.outlet)}),o},t.prototype.processSegment=function(t,e,n,r){var o,i;try{for(var a=s(t),u=a.next();!u.done;u=a.next()){var l=u.value;try{return this.processSegmentAgainstRoute(l,e,n,r)}catch(t){if(!(t instanceof Oh))throw t}}}catch(t){o={error:t}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}if(this.noLeftoversInUrl(e,n,r))return[];throw new Oh},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.processSegmentAgainstRoute=function(t,e,n,r){if(t.redirectTo)throw new Oh;if((t.outlet||np)!==r)throw new Oh;var o,i=[],s=[];if("**"===t.path){var u=n.length>0?fp(n).parameters:{};o=new rh(n,u,Object.freeze(a({},this.urlTree.queryParams)),this.urlTree.fragment,Nh(t),r,t.component,t,Sh(e),Ch(e)+n.length,Ph(t))}else{var l=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Oh;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(e.matcher||ip)(n,t,e);if(!r)throw new Oh;var o={};dp(r.posParams,function(t,e){o[e]=t.path});var i=r.consumed.length>0?a({},o,r.consumed[r.consumed.length-1].parameters):o;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:i}}(e,t,n);i=l.consumedSegments,s=n.slice(l.lastChild),o=new rh(i,l.parameters,Object.freeze(a({},this.urlTree.queryParams)),this.urlTree.fragment,Nh(t),r,t.component,t,Sh(e),Ch(e)+i.length,Ph(t))}var c=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),p=Ih(e,i,s,c,this.relativeLinkResolution),h=p.segmentGroup,f=p.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return[new Yp(o,d)]}if(0===c.length&&0===f.length)return[new Yp(o,[])];var m=this.processSegment(c,h,f,np);return[new Yp(o,m)]},t}();function Sh(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function Ch(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ih(t,e,n,r,o){if(n.length>0&&function(t,e,n){return r.some(function(n){return Ah(t,e,n)&&kh(n)!==np})}(t,n)){var i=new bp(e,function(t,e,n,r){var o,i,a={};a[np]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;try{for(var u=s(n),l=u.next();!l.done;l=u.next()){var c=l.value;if(""===c.path&&kh(c)!==np){var p=new bp([],{});p._sourceSegment=t,p._segmentIndexShift=e.length,a[kh(c)]=p}}}catch(t){o={error:t}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return a}(t,e,r,new bp(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return r.some(function(n){return Ah(t,e,n)})}(t,n)){var u=new bp(t.segments,function(t,e,n,r,o,i){var u,l,c={};try{for(var p=s(r),h=p.next();!h.done;h=p.next()){var f=h.value;if(Ah(t,n,f)&&!o[kh(f)]){var d=new bp([],{});d._sourceSegment=t,d._segmentIndexShift="legacy"===i?t.segments.length:e.length,c[kh(f)]=d}}}catch(t){u={error:t}}finally{try{h&&!h.done&&(l=p.return)&&l.call(p)}finally{if(u)throw u.error}}return a({},o,c)}(t,e,n,r,t.children,o));return u._sourceSegment=t,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:n}}var l=new bp(t.segments,t.children);return l._sourceSegment=t,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:n}}function Ah(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function kh(t){return t.outlet||np}function Nh(t){return t.data||{}}function Ph(t){return t.resolve||{}}var Th=function(){},Rh=function(){function t(){}return t.prototype.shouldDetach=function(t){return!1},t.prototype.store=function(t,e){},t.prototype.shouldAttach=function(t){return!1},t.prototype.retrieve=function(t){return null},t.prototype.shouldReuseRoute=function(t,e){return t.routeConfig===e.routeConfig},t}(),Mh=new gt("ROUTES"),Dh=function(){function t(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}return t.prototype.load=function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(G(function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var o=r.create(t);return new ap(hp(o.injector.get(Mh)).map(cp),o)}))},t.prototype.loadModuleFactory=function(t){var e=this;return"string"==typeof t?X(this.loader.load(t)):gp(t()).pipe(Y(function(t){return t instanceof Ke?ku(t):X(e.compiler.compileModuleAsync(t))}))},t}(),jh=function(){},Lh=function(){function t(){}return t.prototype.shouldProcessUrl=function(t){return!0},t.prototype.extract=function(t){return t},t.prototype.merge=function(t,e){return t},t}();function zh(t){throw t}function Bh(t,e,n){return e.parse("/")}function Fh(t,e){return ku(null)}var Vh=function(){function t(t,e,n,r,o,i,a,s){var u=this;this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=s,this.navigations=new Cu(null),this.navigationId=0,this.events=new at,this.errorHandler=zh,this.malformedUriErrorHandler=Bh,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Fh,afterPreactivation:Fh},this.urlHandlingStrategy=new Lh,this.routeReuseStrategy=new Rh,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get($e),this.resetConfig(s),this.currentUrlTree=new yp(new bp([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.configLoader=new Dh(i,a,function(t){return u.triggerEvent(new Kc(t))},function(t){return u.triggerEvent(new Qc(t))}),this.routerState=th(this.currentUrlTree,this.rootComponentType),this.processNavigations()}return t.prototype.resetRootComponentType=function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType},t.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},t.prototype.setUpLocationChangeListener=function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(e){var n=t.parseUrl(e.url),r="popstate"===e.type?"popstate":"hashchange",o=e.state&&e.state.navigationId?{navigationId:e.state.navigationId}:null;setTimeout(function(){t.scheduleNavigation(n,r,o,{replaceUrl:!0})},0)}))},Object.defineProperty(t.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),t.prototype.triggerEvent=function(t){this.events.next(t)},t.prototype.resetConfig=function(t){sp(t),this.config=t.map(cp),this.navigated=!1,this.lastSuccessfulId=-1},t.prototype.ngOnDestroy=function(){this.dispose()},t.prototype.dispose=function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)},t.prototype.createUrlTree=function(t,e){void 0===e&&(e={});var n=e.relativeTo,r=e.queryParams,o=e.fragment,i=e.preserveQueryParams,s=e.queryParamsHandling,u=e.preserveFragment;mn()&&i&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var c=n||this.routerState.root,p=u?this.currentUrlTree.fragment:o,h=null;if(s)switch(s){case"merge":h=a({},this.currentUrlTree.queryParams,r);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=r||null}else h=i?this.currentUrlTree.queryParams:r||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,o){if(0===n.length)return ch(e.root,e.root,e,r,o);var i=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ph(!0,0,t);var e=0,n=!1,r=t.reduce(function(t,r,o){if("object"==typeof r&&null!=r){if(r.outlets){var i={};return dp(r.outlets,function(t,e){i[e]="string"==typeof t?t.split("/"):t}),l(t,[{outlets:i}])}if(r.segmentPath)return l(t,[r.segmentPath])}return"string"!=typeof r?l(t,[r]):0===o?(r.split("/").forEach(function(r,o){0==o&&"."===r||(0==o&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):l(t,[r])},[]);return new ph(n,e,r)}(n);if(i.toRoot())return ch(e.root,new bp([],{}),e,r,o);var a=function(t,n,r){if(t.isAbsolute)return new hh(e.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new hh(r.snapshot._urlSegment,!0,0);var o=lh(t.commands[0])?0:1;return function(e,n,i){for(var a=r.snapshot._urlSegment,s=r.snapshot._lastPathIndex+o,u=t.numberOfDoubleDots;u>s;){if(u-=s,!(a=a.parent))throw new Error("Invalid number of '../'");s=a.segments.length}return new hh(a,!1,s-u)}()}(i,0,t),s=a.processChildren?mh(a.segmentGroup,a.index,i.commands):dh(a.segmentGroup,a.index,i.commands);return ch(a.segmentGroup,s,e,r,o)}(c,this.currentUrlTree,t,h,p)},t.prototype.navigateByUrl=function(t,e){void 0===e&&(e={skipLocationChange:!1});var n=t instanceof yp?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)},t.prototype.navigate=function(t,e){return void 0===e&&(e={skipLocationChange:!1}),function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains "+n+" segment at index "+e)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)},t.prototype.serializeUrl=function(t){return this.urlSerializer.serialize(t)},t.prototype.parseUrl=function(t){var e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e},t.prototype.isActive=function(t,e){if(t instanceof yp)return vp(this.currentUrlTree,t,e);var n=this.parseUrl(t);return vp(this.currentUrlTree,n,e)},t.prototype.removeEmptyProps=function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return null!==r&&void 0!==r&&(e[n]=r),e},{})},t.prototype.processNavigations=function(){var t=this;this.navigations.pipe(Xu(function(e){return e?(t.executeScheduledNavigation(e),e.promise.catch(function(){})):ku(null)})).subscribe(function(){})},t.prototype.scheduleNavigation=function(t,e,n,r){var o=this.navigations.value;if(o&&"imperative"!==e&&"imperative"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"hashchange"==e&&"popstate"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"popstate"==e&&"hashchange"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);var i=null,a=null,s=new Promise(function(t,e){i=t,a=e}),u=++this.navigationId;return this.navigations.next({id:u,source:e,state:n,rawUrl:t,extras:r,resolve:i,reject:a,promise:s}),s.catch(function(t){return Promise.reject(t)})},t.prototype.executeScheduledNavigation=function(t){var e=this,n=t.id,r=t.rawUrl,o=t.extras,i=t.resolve,a=t.reject,s=t.source,u=t.state,l=this.urlHandlingStrategy.extract(r),c=!this.navigated||l.toString()!==this.currentUrlTree.toString();("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(r)?("eager"!==this.urlUpdateStrategy||o.skipLocationChange||this.setBrowserUrl(r,!!o.replaceUrl,n),this.events.next(new Bc(n,this.serializeUrl(l),s,u)),Promise.resolve().then(function(t){return e.runNavigate(l,r,!!o.skipLocationChange,!!o.replaceUrl,n,null)}).then(i,a)):c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)?(this.events.next(new Bc(n,this.serializeUrl(l),s,u)),Promise.resolve().then(function(t){return e.runNavigate(l,r,!1,!1,n,th(l,e.rootComponentType).snapshot)}).then(i,a)):(this.rawUrlTree=r,i(null))},t.prototype.runNavigate=function(t,e,n,r,o,i){var a=this;return o!==this.navigationId?(this.events.next(new Vc(o,this.serializeUrl(t),"Navigation ID "+o+" is not equal to the current navigation id "+this.navigationId)),Promise.resolve(!1)):new Promise(function(u,l){var c,p=(i?ku({appliedUrl:t,snapshot:i}):new Wp(a.ngModule.injector,a.configLoader,a.urlSerializer,t,a.config).apply().pipe(Y(function(e){return function(t,e,n,r,o,i){return void 0===o&&(o="emptyOnly"),void 0===i&&(i="legacy"),new Eh(t,e,n,r,o,i).recognize()}(a.rootComponentType,a.config,e,a.serializeUrl(e),a.paramsInheritanceStrategy,a.relativeLinkResolution).pipe(G(function(n){return a.events.next(new Wc(o,a.serializeUrl(t),a.serializeUrl(e),n)),{appliedUrl:e,snapshot:n}}))}))).pipe(Y(function(i){return"boolean"==typeof i?ku(i):a.hooks.beforePreactivation(i.snapshot,{navigationId:o,appliedUrlTree:t,rawUrlTree:e,skipLocationChange:n,replaceUrl:r}).pipe(G(function(){return i}))})).pipe(G(function(t){if("boolean"==typeof t)return t;var e=t.appliedUrl,n=t.snapshot;return(c=new xh(n,a.routerState.snapshot,a.ngModule.injector,function(t){return a.triggerEvent(t)})).initialize(a.rootContexts),{appliedUrl:e,snapshot:n}})).pipe(Y(function(e){if("boolean"==typeof e||a.navigationId!==o)return ku(!1);var n=e.appliedUrl,r=e.snapshot;return a.triggerEvent(new qc(o,a.serializeUrl(t),a.serializeUrl(n),r)),c.checkGuards().pipe(G(function(e){return a.triggerEvent(new Hc(o,a.serializeUrl(t),a.serializeUrl(n),r,e)),{appliedUrl:n,snapshot:r,shouldActivate:e}}))})).pipe(Y(function(e){return"boolean"==typeof e||a.navigationId!==o?ku(!1):e.shouldActivate&&c.isActivating()?(a.triggerEvent(new Gc(o,a.serializeUrl(t),a.serializeUrl(e.appliedUrl),e.snapshot)),c.resolveData(a.paramsInheritanceStrategy).pipe(G(function(){return a.triggerEvent(new $c(o,a.serializeUrl(t),a.serializeUrl(e.appliedUrl),e.snapshot)),e}))):ku(e)})).pipe(Y(function(i){return"boolean"==typeof i||a.navigationId!==o?ku(!1):a.hooks.afterPreactivation(i.snapshot,{navigationId:o,appliedUrlTree:t,rawUrlTree:e,skipLocationChange:n,replaceUrl:r}).pipe(G(function(){return i}))})).pipe(G(function(t){if("boolean"==typeof t||a.navigationId!==o)return!1;var e,n,r,i=t.appliedUrl,u=t.shouldActivate;return u?{appliedUrl:i,state:(r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){(l=r.value)._futureSnapshot=n.value;var o=function(e,n,r){return n.children.map(function(n){var o,i;try{for(var a=s(r.children),u=a.next();!u.done;u=a.next()){var l=u.value;if(e.shouldReuseRoute(l.value.snapshot,n.value))return t(e,n,l)}}catch(t){o={error:t}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return t(e,n)})}(e,n,r);return new Yp(l,o)}var i=e.retrieve(n.value);if(i){var a=i.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(var r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,a),a}var u,l=new eh(new Cu((u=n.value).url),new Cu(u.params),new Cu(u.queryParams),new Cu(u.fragment),new Cu(u.data),u.outlet,u.component,u);return o=n.children.map(function(n){return t(e,n)}),new Yp(l,o)}(a.routeReuseStrategy,(e=t.snapshot)._root,(n=a.routerState)?n._root:void 0),new Jp(r,e)),shouldActivate:u}:{appliedUrl:i,state:null,shouldActivate:u}}));a.activateRoutes(p,a.routerState,a.currentUrlTree,o,t,e,n,r,u,l)})},t.prototype.activateRoutes=function(t,e,n,r,o,i,a,s,u,l){var c,p=this;t.forEach(function(t){if("boolean"!=typeof t&&t.shouldActivate&&r===p.navigationId&&t.state){var n=t.state;p.currentUrlTree=t.appliedUrl,p.rawUrlTree=p.urlHandlingStrategy.merge(p.currentUrlTree,i),p.routerState=n,"deferred"!==p.urlUpdateStrategy||a||p.setBrowserUrl(p.rawUrlTree,s,r),new Uh(p.routeReuseStrategy,n,e,function(t){return p.triggerEvent(t)}).activate(p.rootContexts),c=!0}else c=!1}).then(function(){c?(p.navigated=!0,p.lastSuccessfulId=r,p.events.next(new Fc(r,p.serializeUrl(o),p.serializeUrl(p.currentUrlTree))),u(!0)):(p.resetUrlToCurrentUrlTree(),p.events.next(new Vc(r,p.serializeUrl(o),"")),u(!1))},function(t){if((a=t)&&a.ngNavigationCancelingError)p.navigated=!0,p.resetStateAndUrl(e,n,i),p.events.next(new Vc(r,p.serializeUrl(o),t.message)),u(!1);else{p.resetStateAndUrl(e,n,i),p.events.next(new Uc(r,p.serializeUrl(o),t));try{u(p.errorHandler(t))}catch(t){l(t)}}var a})},t.prototype.setBrowserUrl=function(t,e,n){var r=this.urlSerializer.serialize(t);this.location.isCurrentPathEqualTo(r)||e?this.location.replaceState(r,"",{navigationId:n}):this.location.go(r,"",{navigationId:n})},t.prototype.resetStateAndUrl=function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()},t.prototype.resetUrlToCurrentUrlTree=function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})},t}(),Uh=function(){function t(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}return t.prototype.activate=function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),sh(this.futureState.root),this.activateChildRoutes(e,n,t)},t.prototype.deactivateChildRoutes=function(t,e,n){var r=this,o=Zp(e);t.children.forEach(function(t){var e=t.value.outlet;r.deactivateRoutes(t,o[e],n),delete o[e]}),dp(o,function(t,e){r.deactivateRouteAndItsChildren(t,n)})},t.prototype.deactivateRoutes=function(t,e,n){var r=t.value,o=e?e.value:null;if(r===o)if(r.component){var i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else o&&this.deactivateRouteAndItsChildren(e,n)},t.prototype.deactivateRouteAndItsChildren=function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)},t.prototype.detachAndStoreRouteSubtree=function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),o=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:o})}},t.prototype.deactivateRouteAndOutlet=function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var o=Zp(t),i=t.value.component?r.children:e;dp(o,function(t,e){return n.deactivateRouteAndItsChildren(t,i)}),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}},t.prototype.activateChildRoutes=function(t,e,n){var r=this,o=Zp(e);t.children.forEach(function(t){r.activateRoutes(t,o[t.value.outlet],n),r.forwardEvent(new Jc(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Yc(t.value.snapshot))},t.prototype.activateRoutes=function(t,e,n){var r=t.value,o=e?e.value:null;if(sh(r),r===o)if(r.component){var i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component)if(i=n.getOrCreateContext(r.outlet),this.routeReuseStrategy.shouldAttach(r.snapshot)){var a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),i.children.onOutletReAttached(a.contexts),i.attachRef=a.componentRef,i.route=a.route.value,i.outlet&&i.outlet.attach(a.componentRef,a.route.value),Wh(a.route)}else{var s=function(t){for(var e=r.snapshot.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(),u=s?s.module.componentFactoryResolver:null;i.route=r,i.resolver=u,i.outlet&&i.outlet.activateWith(r,u),this.activateChildRoutes(t,null,i.children)}else this.activateChildRoutes(t,null,n)},t}();function Wh(t){sh(t.value),t.children.forEach(Wh)}var qh=function(){return function(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Hh,this.attachRef=null}}(),Hh=function(){function t(){this.contexts=new Map}return t.prototype.onChildOutletCreated=function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)},t.prototype.onChildOutletDestroyed=function(t){var e=this.getContext(t);e&&(e.outlet=null)},t.prototype.onOutletDeactivated=function(){var t=this.contexts;return this.contexts=new Map,t},t.prototype.onOutletReAttached=function(t){this.contexts=t},t.prototype.getOrCreateContext=function(t){var e=this.getContext(t);return e||(e=new qh,this.contexts.set(t,e)),e},t.prototype.getContext=function(t){return this.contexts.get(t)||null},t}(),Gh=function(){function t(t,e,n,r,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Je,this.deactivateEvents=new Je,this.name=r||np,t.onChildOutletCreated(this.name,this)}return t.prototype.ngOnDestroy=function(){this.parentContexts.onChildOutletDestroyed(this.name)},t.prototype.ngOnInit=function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}},Object.defineProperty(t.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRouteData",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),t.prototype.detach=function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t},t.prototype.attach=function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)},t.prototype.deactivate=function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}},t.prototype.activateWith=function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,o=new $h(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,o),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)},t}(),$h=function(){function t(t,e,n){this.route=t,this.childContexts=e,this.parent=n}return t.prototype.get=function(t,e){return t===eh?this.route:t===Hh?this.childContexts:this.parent.get(t,e)},t}(),Kh=function(){},Qh=function(){function t(){}return t.prototype.preload=function(t,e){return e().pipe(rl(function(){return ku(null)}))},t}(),Xh=function(){function t(){}return t.prototype.preload=function(t,e){return ku(null)},t}(),Yh=function(){function t(t,e,n,r,o){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=new Dh(e,n,function(e){return t.triggerEvent(new Kc(e))},function(e){return t.triggerEvent(new Qc(e))})}return t.prototype.setUpPreloading=function(){var t=this;this.subscription=this.router.events.pipe(Tu(function(t){return t instanceof Fc}),Xu(function(){return t.preload()})).subscribe(function(){})},t.prototype.preload=function(){var t=this.injector.get($e);return this.processRoutes(t,this.router.config)},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.processRoutes=function(t,e){var n,r,o=[];try{for(var i=s(e),a=i.next();!a.done;a=i.next()){var u=a.value;if(u.loadChildren&&!u.canLoad&&u._loadedConfig){var l=u._loadedConfig;o.push(this.processRoutes(l.module,l.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children))}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return X(o).pipe(et(),G(function(t){}))},t.prototype.preloadConfig=function(t,e){var n=this;return this.preloadingStrategy.preload(e,function(){return n.loader.load(t.injector,e).pipe(Y(function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)}))})},t}(),Zh=function(){function t(t,e,n){void 0===n&&(n={}),this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={}}return t.prototype.init=function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()},t.prototype.createScrollEvents=function(){var t=this;return this.router.events.subscribe(function(e){e instanceof Bc?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Fc&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))})},t.prototype.consumeScrollEvents=function(){var t=this;return this.router.events.subscribe(function(e){e instanceof tp&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))})},t.prototype.scheduleScrollEvent=function(t,e){this.router.triggerEvent(new tp(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))},t.prototype.ngOnDestroy=function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()},t}(),Jh=new gt("ROUTER_CONFIGURATION"),tf=new gt("ROUTER_FORROOT_GUARD"),ef=[hl,{provide:Op,useClass:Ep},{provide:Vh,useFactory:lf,deps:[_n,Op,Hh,hl,Ft,Cn,De,Mh,Jh,[jh,new Tt],[Th,new Tt]]},Hh,{provide:eh,useFactory:cf,deps:[Vh]},{provide:Cn,useClass:Nn},Yh,Xh,Qh,{provide:Jh,useValue:{enableTracing:!1}}];function nf(){return new gn("Router",Vh)}var rf=function(){function t(t,e){}return t.forRoot=function(e,n){return{ngModule:t,providers:[ef,uf(e),{provide:tf,useFactory:sf,deps:[[Vh,new Tt,new Mt]]},{provide:Jh,useValue:n||{}},{provide:cl,useFactory:af,deps:[ul,[new Pt(pl),new Tt],Jh]},{provide:Zh,useFactory:of,deps:[Vh,Il,Jh]},{provide:Kh,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Xh},{provide:gn,multi:!0,useFactory:nf},[pf,{provide:Se,multi:!0,useFactory:hf,deps:[pf]},{provide:df,useFactory:ff,deps:[pf]},{provide:Te,multi:!0,useExisting:df}]]}},t.forChild=function(e){return{ngModule:t,providers:[uf(e)]}},t}();function of(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Zh(t,e,n)}function af(t,e,n){return void 0===n&&(n={}),n.useHash?new dl(t,e):new ml(t,e)}function sf(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function uf(t){return[{provide:bt,multi:!0,useValue:t},{provide:Mh,multi:!0,useValue:t}]}function lf(t,e,n,r,o,i,a,s,u,l,c){void 0===u&&(u={});var p=new Vh(null,e,n,r,o,i,a,hp(s));if(l&&(p.urlHandlingStrategy=l),c&&(p.routeReuseStrategy=c),u.errorHandler&&(p.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(p.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){var h=Nl();p.events.subscribe(function(t){h.logGroup("Router Event: "+t.constructor.name),h.log(t.toString()),h.log(t),h.logGroupEnd()})}return u.onSameUrlNavigation&&(p.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(p.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(p.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(p.relativeLinkResolution=u.relativeLinkResolution),p}function cf(t){return t.routerState.root}var pf=function(){function t(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new at}return t.prototype.appInitializer=function(){var t=this;return this.injector.get(ll,Promise.resolve(null)).then(function(){var e=null,n=new Promise(function(t){return e=t}),r=t.injector.get(Vh),o=t.injector.get(Jh);if(t.isLegacyDisabled(o)||t.isLegacyEnabled(o))e(!0);else if("disabled"===o.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if("enabled"!==o.initialNavigation)throw new Error("Invalid initialNavigation options: '"+o.initialNavigation+"'");r.hooks.afterPreactivation=function(){return t.initNavigation?ku(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()}return n})},t.prototype.bootstrapListener=function(t){var e=this.injector.get(Jh),n=this.injector.get(Yh),r=this.injector.get(Zh),o=this.injector.get(Vh),i=this.injector.get(_n);t===i.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),o.resetRootComponentType(i.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())},t.prototype.isLegacyEnabled=function(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation},t.prototype.isLegacyDisabled=function(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation},t}();function hf(t){return t.appInitializer.bind(t)}function ff(t){return t.bootstrapListener.bind(t)}var df=new gt("Router Initializer"),mf=Zr({encapsulation:2,styles:[],data:{}});function gf(t){return ji(0,[(t()(),Co(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),di(1,212992,null,0,Gh,[Hh,Rn,qe,[8,null],Mn],null,null)],function(t,e){t(e,1,0)},null)}var vf=qo("ng-component",ep,function(t){return ji(0,[(t()(),Co(0,0,null,null,1,"ng-component",[],null,null,null,gf,mf)),di(1,49152,null,0,ep,[],null,null)],null,null)},{},{},[]),yf=function(){function t(){}return t.prototype.ngOnInit=function(){},t}(),bf=Zr({encapsulation:0,styles:[[""]],data:{}});function wf(t){return ji(0,[(t()(),Co(0,0,null,null,20,"footer",[["class","footer footer-default"]],null,null,null,null,null)),(t()(),Co(1,0,null,null,19,"div",[["class","container"]],null,null,null,null,null)),(t()(),Co(2,0,null,null,16,"nav",[["class","float-left"]],null,null,null,null,null)),(t()(),Co(3,0,null,null,15,"ul",[],null,null,null,null,null)),(t()(),Co(4,0,null,null,2,"li",[],null,null,null,null,null)),(t()(),Co(5,0,null,null,1,"a",[["href","/"]],null,null,null,null,null)),(t()(),Ri(-1,null,[" Alberto Casta\xf1o "])),(t()(),Co(7,0,null,null,3,"li",[],null,null,null,null,null)),(t()(),Co(8,0,null,null,2,"button",[["class","btn btn-link btn-linkedin"],["onclick","location.href='https://www.linkedin.com/in/alberto-casta%C3%B1o-4aa710b6/'"]],null,null,null,null,null)),(t()(),Co(9,0,null,null,0,"i",[["class","fa fa-linkedin-square"]],null,null,null,null,null)),(t()(),Ri(-1,null,[" Connect "])),(t()(),Co(11,0,null,null,3,"li",[],null,null,null,null,null)),(t()(),Co(12,0,null,null,2,"button",[["class","btn btn-link btn-github"],["onclick","location.href='https://github.com/bertocast'"]],null,null,null,null,null)),(t()(),Co(13,0,null,null,0,"i",[["class","fa fa-github"]],null,null,null,null,null)),(t()(),Ri(-1,null,[" Connect "])),(t()(),Co(15,0,null,null,3,"li",[],null,null,null,null,null)),(t()(),Co(16,0,null,null,2,"button",[["class","btn btn-link btn-medium"],["onclick","location.href='https://medium.com/@bertocast'"]],null,null,null,null,null)),(t()(),Co(17,0,null,null,0,"i",[["class","fa fa-medium"]],null,null,null,null,null)),(t()(),Ri(-1,null,[" Connect "])),(t()(),Co(19,0,null,null,1,"div",[["class","copyright float-right"]],null,null,null,null,null)),(t()(),Ri(-1,null,[" \xa9 2018 "]))],null,null)}var _f=function(){function t(){}return t.prototype.ngOnInit=function(){},t}(),xf=Zr({encapsulation:0,styles:[['.tim-row[_ngcontent-%COMP%]{margin-bottom:20px;padding-top:50px}.presentation-page[_ngcontent-%COMP%]{overflow-x:hidden}.tim-white-buttons[_ngcontent-%COMP%]{background-color:#777}.title[_ngcontent-%COMP%]{margin-top:30px;min-height:32px}.title.text-center[_ngcontent-%COMP%]{margin-bottom:50px}.tim-typo[_ngcontent-%COMP%]{padding-left:25%;margin-bottom:40px;position:relative;width:100%}.tim-typo[_ngcontent-%COMP%]   .tim-note[_ngcontent-%COMP%]{bottom:5px;color:#c0c1c2;display:block;font-weight:400;font-size:13px;line-height:15px;left:0;margin-left:20px;position:absolute;width:260px}.tim-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}#typography[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], #typography[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], #typography[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], #typography[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], #typography[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], #typography[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:0}.switch[_ngcontent-%COMP%]{margin-right:20px}#navbar-full[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]{border-radius:0!important;margin-bottom:15px;z-index:2}.space[_ngcontent-%COMP%]{height:130px;display:block}.space-110[_ngcontent-%COMP%]{height:110px;display:block}.space-50[_ngcontent-%COMP%]{height:50px;display:block}.space-70[_ngcontent-%COMP%]{height:70px;display:block}.navigation-example[_ngcontent-%COMP%]   .img-src[_ngcontent-%COMP%]{background-attachment:scroll}.tim-container[_ngcontent-%COMP%]   .noUi-horizontal[_ngcontent-%COMP%]{margin:30px 0}.navigation-example[_ngcontent-%COMP%]{background-position:center center;background-size:cover;margin-top:0;min-height:740px}#notifications[_ngcontent-%COMP%]{background-color:#fff;display:block;width:100%;position:relative}#notifications[_ngcontent-%COMP%]   .alert-danger[_ngcontent-%COMP%]{margin-bottom:0}.tim-note[_ngcontent-%COMP%]{text-transform:capitalize}#buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:0 0 15px}.space-100[_ngcontent-%COMP%]{height:100px;display:block;width:100%}.be-social[_ngcontent-%COMP%]{padding-bottom:20px;margin:0 auto 40px}.txt-white[_ngcontent-%COMP%]{color:#fff}.txt-gray[_ngcontent-%COMP%]{color:#ddd!important}.parallax[_ngcontent-%COMP%]{width:100%;height:570px;display:block;background-attachment:fixed;background-repeat:no-repeat;background-size:cover;background-position:center center}.logo-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{overflow:hidden;border-radius:50%;border:1px solid #333;width:50px;float:left}.logo-container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{font-size:16px;line-height:18px;float:left;margin-left:10px;margin-top:7px;color:#fff;width:70px;height:40px;text-align:left}.navbar-default[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#999}.navbar-transparent[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#fff}.logo-container[_ngcontent-%COMP%]   .brand-material[_ngcontent-%COMP%]{font-size:18px;margin-top:15px;height:25px;width:auto}.logo-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.navbar-small[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#333}.fixed-section[_ngcontent-%COMP%]{top:90px;max-height:71vh;overflow:scroll;border-bottom:1px solid rgba(220,220,220,.8)}.fixed-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.fixed-section[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px;padding:2px;display:block;color:#666}.fixed-section[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#0bf}.fixed-section.float[_ngcontent-%COMP%]{position:fixed;top:100px;width:200px;margin-top:0}.parallax[_ngcontent-%COMP%]   .parallax-image[_ngcontent-%COMP%]{width:100%;overflow:hidden;position:absolute}.parallax[_ngcontent-%COMP%]   .parallax-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width:768px){.parallax[_ngcontent-%COMP%]   .parallax-image[_ngcontent-%COMP%]{width:100%;height:640px;overflow:hidden}.parallax[_ngcontent-%COMP%]   .parallax-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:auto}}.separator[_ngcontent-%COMP%]{content:"Separator";color:#fff;display:block;width:100%;padding:20px}.separator-line[_ngcontent-%COMP%]{background-color:#eee;height:1px;width:100%;display:block}.separator.separator-gray[_ngcontent-%COMP%]{background-color:#eee}.social-buttons-demo[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:10px 5px 7px 1px}.img-container[_ngcontent-%COMP%]{width:100%;overflow:hidden}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .lightbox[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.lightbox[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{overflow:hidden}.lightbox[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:0}@media screen and (min-width:991px){.lightbox[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{width:960px}}@media (max-width:991px){.fixed-section.affix[_ngcontent-%COMP%]{position:relative;margin-bottom:100px}}@media (max-width:768px){.btn[_ngcontent-%COMP%], .btn-morphing[_ngcontent-%COMP%]{margin-bottom:10px}.parallax[_ngcontent-%COMP%]   .motto[_ngcontent-%COMP%]{top:170px;margin-top:0;font-size:60px;width:270px}}.logo-container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%], .logo-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%], .presentation[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%], .presentation[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .presentation[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%]:after{transition:all .2s}#images[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:30px}#javascriptComponents[_ngcontent-%COMP%]{padding-bottom:0}#javascriptComponents[_ngcontent-%COMP%]   .btn-raised[_ngcontent-%COMP%]{margin:10px 0}.layers-container[_ngcontent-%COMP%]{display:block;margin-top:50px;position:relative}.layers-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:auto;top:0;left:0;text-align:center}.section-black[_ngcontent-%COMP%]{background-color:#333}.animate[_ngcontent-%COMP%]{transition:1.5s ease-in-out;-moz-transition:1.5s ease-in-out;-webkit-transition:1.5s ease-in-out}.navbar-transparent.navbar-small[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#fff}.navbar-default.navbar-small[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#333}.sharing-area[_ngcontent-%COMP%]{margin-top:80px}.sharing-area[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:15px 4px 0;color:#fff}.sharing-area[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;position:relative;top:2px;margin-right:5px}#navbar[_ngcontent-%COMP%]{margin-bottom:-20px}.sharing-area[_ngcontent-%COMP%]   .btn-twitter[_ngcontent-%COMP%], .sharing-area[_ngcontent-%COMP%]   .btn-twitter[_ngcontent-%COMP%]:active:focus{background-color:#55acee}.sharing-area[_ngcontent-%COMP%]   .btn-facebook[_ngcontent-%COMP%], .sharing-area[_ngcontent-%COMP%]   .btn-facebook[_ngcontent-%COMP%]:active:focus{background-color:#3b5998}.sharing-area[_ngcontent-%COMP%]   .btn-google-plus[_ngcontent-%COMP%], .sharing-area[_ngcontent-%COMP%]   .btn-google-plus[_ngcontent-%COMP%]:active:focus{background-color:#dd4b39}.sharing-area[_ngcontent-%COMP%]   .btn-github[_ngcontent-%COMP%], .sharing-area[_ngcontent-%COMP%]   .btn-github[_ngcontent-%COMP%]:active:focus{background-color:#333}.section-notifications[_ngcontent-%COMP%], .section-thin[_ngcontent-%COMP%]{padding:0}.section-navbars[_ngcontent-%COMP%]{padding-top:0}#navbar[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]{border-radius:0}.section-tabs[_ngcontent-%COMP%]{background:#eee}.section-pagination[_ngcontent-%COMP%]{padding-bottom:0}.section-download[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:50px}.section-examples[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.section-examples[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-top:30px}.components-page[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%], .tutorial-page[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]{height:400px;padding-top:100px;background-size:cover;background-position:center center}.components-page[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .tutorial-page[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff}@media (max-width:830px){.main-raised[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}}.components-page[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0}.components-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]:after{background:rgba(132,13,121,.88);background:linear-gradient(45deg,rgba(132,13,121,.88) 0,rgba(208,44,180,.31) 100%);background:-webkit-linear-gradient(135deg,rgba(132,13,121,.88) 0,rgba(208,44,180,.31) 100%)}.components-page[_ngcontent-%COMP%]   .page-header.header-filter[_ngcontent-%COMP%]:before{display:none}.components-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{position:relative;z-index:10}.components-page[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding-top:0}.components-page[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.components-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{height:100vh!important;min-height:auto!important}.section-components[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:60px;margin-bottom:5px}.section-components[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:35px}.section-components[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{height:560px;position:relative}.section-components[_ngcontent-%COMP%]   .components-macbook[_ngcontent-%COMP%]{width:auto;left:-100px;top:0;height:100%;position:absolute}.section-components[_ngcontent-%COMP%]   .coloured-card-btn-img[_ngcontent-%COMP%], .section-components[_ngcontent-%COMP%]   .coloured-card-img[_ngcontent-%COMP%], .section-components[_ngcontent-%COMP%]   .pin-btn-img[_ngcontent-%COMP%], .section-components[_ngcontent-%COMP%]   .share-btn-img[_ngcontent-%COMP%], .section-components[_ngcontent-%COMP%]   .social-img[_ngcontent-%COMP%], .section-components[_ngcontent-%COMP%]   .table-img[_ngcontent-%COMP%]{position:absolute;box-shadow:0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12),0 5px 5px -3px rgba(0,0,0,.2)}.section-components[_ngcontent-%COMP%]   .coloured-card-img[_ngcontent-%COMP%]{left:90%;top:11%;height:90px;border-radius:2px}.section-components[_ngcontent-%COMP%]   .social-img[_ngcontent-%COMP%]{left:70%;top:67%;height:40px}.section-components[_ngcontent-%COMP%]   .coloured-card-btn-img[_ngcontent-%COMP%]{left:35%;top:2%;height:125px;border-radius:6px}.section-components[_ngcontent-%COMP%]   .table-img[_ngcontent-%COMP%]{left:-13%;top:27%;height:175px;border-radius:2px}.section-components[_ngcontent-%COMP%]   .pin-btn-img[_ngcontent-%COMP%]{left:0;top:68%;height:25px;border-radius:3px}.section-components[_ngcontent-%COMP%]   .share-btn-img[_ngcontent-%COMP%]{left:3%;top:-3%;height:25px}.section-content[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]{margin-top:100px}.section-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:5px}.section-content[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] + .description[_ngcontent-%COMP%]{margin-top:0}.section-content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:35px}.section-content[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{max-width:900px;position:relative}.section-content[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .ipad-img[_ngcontent-%COMP%]{width:100%;transition:-webkit-transform .6s .9s;transition:transform .6s .9s;transition:transform .6s .9s,-webkit-transform .6s .9s;z-index:2}.section-content[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .area-img[_ngcontent-%COMP%], .section-content[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .info-img[_ngcontent-%COMP%]{position:absolute;box-shadow:0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12),0 5px 5px -3px rgba(0,0,0,.2);opacity:0;transform:translate3D(0,100px,0);-webkit-transform:translate3D(0,100px,0)}.section-content[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .area-img[_ngcontent-%COMP%]{top:10%;left:60%;height:300px;width:250px;z-index:2;transition:all 1s ease-out 0s}.section-content[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .info-img[_ngcontent-%COMP%]{top:50%;left:0;height:200px;width:300px;transition:all 1s ease-out 0s}.animated[_ngcontent-%COMP%]{transform:translate3D(0,0,0)!important;-webkit-transform:translate3D(0,0,0)!important;opacity:1!important}@-webkit-keyframes Floatingy{from,to{-webkit-transform:translate(0,0)}65%{-webkit-transform:translate(50px,0)}}@-webkit-keyframes Floatingx{from,to{-webkit-transform:translate(50px,0)}65%{-webkit-transform:translate(0,0)}}.coloured-card-btn-img[_ngcontent-%COMP%], .coloured-card-img[_ngcontent-%COMP%], .pin-btn-img[_ngcontent-%COMP%], .share-btn-img[_ngcontent-%COMP%], .social-img[_ngcontent-%COMP%], .table-img[_ngcontent-%COMP%]{-webkit-animation-iteration-count:infinite;-webkit-animation-timing-function:ease-in-out;-moz-animation-iteration-count:infinite;-moz-animation-timing-function:ease-in-out;-webkit-animation-name:Floatingy;-moz-animation-name:Floatingy;float:left}.table-img[_ngcontent-%COMP%]{-webkit-animation-duration:14s;-moz-animation-duration:14s;-webkit-animation-name:Floatingx;-moz-animation-name:Floatingx}.coloured-card-img[_ngcontent-%COMP%]{-webkit-animation-duration:10s;-moz-animation-duration:10s;-webkit-animation-name:Floatingx;-moz-animation-name:Floatingx}.coloured-card-btn-img[_ngcontent-%COMP%]{-webkit-animation-duration:18s;-moz-animation-duration:18s}.pin-btn-img[_ngcontent-%COMP%]{-webkit-animation-duration:15s;-moz-animation-duration:15s}.share-btn-img[_ngcontent-%COMP%]{-webkit-animation-duration:11s;-moz-animation-duration:11s}.social-img[_ngcontent-%COMP%]{-webkit-animation-duration:16s;-moz-animation-duration:16s;-webkit-animation-name:Floatingx;-moz-animation-name:Floatingx}.animated[_ngcontent-%COMP%]{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.animated.infinite[_ngcontent-%COMP%]{-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.animated.hinge[_ngcontent-%COMP%]{-webkit-animation-duration:2s;animation-duration:2s}.animated.bounceIn[_ngcontent-%COMP%], .animated.bounceOut[_ngcontent-%COMP%], .animated.flipOutX[_ngcontent-%COMP%], .animated.flipOutY[_ngcontent-%COMP%]{-webkit-animation-duration:.75s;animation-duration:.75s}@-webkit-keyframes bounce{20%,53%,80%,from,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}40%,43%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-30px,0);transform:translate3d(0,-30px,0)}70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-15px,0);transform:translate3d(0,-15px,0)}90%{-webkit-transform:translate3d(0,-4px,0);transform:translate3d(0,-4px,0)}}@keyframes bounce{20%,53%,80%,from,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}40%,43%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-30px,0);transform:translate3d(0,-30px,0)}70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-15px,0);transform:translate3d(0,-15px,0)}90%{-webkit-transform:translate3d(0,-4px,0);transform:translate3d(0,-4px,0)}}.bounce[_ngcontent-%COMP%]{-webkit-animation-name:bounce;animation-name:bounce;-webkit-transform-origin:center bottom;transform-origin:center bottom}@-webkit-keyframes flash{50%,from,to{opacity:1}25%,75%{opacity:0}}@keyframes flash{50%,from,to{opacity:1}25%,75%{opacity:0}}.flash[_ngcontent-%COMP%]{-webkit-animation-name:flash;animation-name:flash}']],data:{}});function Of(t){return ji(0,[(t()(),Co(0,0,null,null,90,"div",[["class","landing-page sidebar-collapse"]],null,null,null,null,null)),(t()(),Co(1,0,null,null,8,"div",[["class","page-header header-filter"],["data-parallax","true"],["style","background-image: url('../../assets/img/profile_city.jpg')"]],null,null,null,null,null)),(t()(),Co(2,0,null,null,7,"div",[["class","container"]],null,null,null,null,null)),(t()(),Co(3,0,null,null,6,"div",[["class","row"]],null,null,null,null,null)),(t()(),Co(4,0,null,null,5,"div",[["class","col-md-6"]],null,null,null,null,null)),(t()(),Co(5,0,null,null,1,"h1",[["class","title"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Discover the power of deep learning"])),(t()(),Co(7,0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),Ri(-1,null,["Go through some examples of what deep learning is able to do. From generating new text from scratch to classifying images."])),(t()(),Co(9,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Co(10,0,null,null,78,"div",[["class","main main-raised"]],null,null,null,null,null)),(t()(),Co(11,0,null,null,77,"div",[["class","container"]],null,null,null,null,null)),(t()(),Co(12,0,null,null,35,"div",[["class","section text-center"]],null,null,null,null,null)),(t()(),Co(13,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(t()(),Co(14,0,null,null,4,"div",[["class","col-md-8 ml-auto mr-auto"]],null,null,null,null,null)),(t()(),Co(15,0,null,null,1,"h2",[["class","title"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Neural Networks"])),(t()(),Co(17,0,null,null,1,"h5",[["class","description"]],null,null,null,null,null)),(t()(),Ri(-1,null,["This is the paragraph where I should write more details about deep learning and neural networks, keep my audience engaged by providing meaningful information. By this time, the user is curious, otherwise he wouldn't scroll to get here."])),(t()(),Co(19,0,null,null,28,"div",[["class","features"]],null,null,null,null,null)),(t()(),Co(20,0,null,null,27,"div",[["class","row"]],null,null,null,null,null)),(t()(),Co(21,0,null,null,8,"div",[["class","col-md-4"]],null,null,null,null,null)),(t()(),Co(22,0,null,null,7,"div",[["class","info"]],null,null,null,null,null)),(t()(),Co(23,0,null,null,2,"div",[["class","icon icon-info"]],null,null,null,null,null)),(t()(),Co(24,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),Ri(-1,null,["chat"])),(t()(),Co(26,0,null,null,1,"h4",[["class","info-title"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Text"])),(t()(),Co(28,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Ri(-1,null,["A well trained AI can write the second part of Don Quijote!"])),(t()(),Co(30,0,null,null,8,"div",[["class","col-md-4"]],null,null,null,null,null)),(t()(),Co(31,0,null,null,7,"div",[["class","info"]],null,null,null,null,null)),(t()(),Co(32,0,null,null,2,"div",[["class","icon icon-success"]],null,null,null,null,null)),(t()(),Co(33,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),Ri(-1,null,["camera"])),(t()(),Co(35,0,null,null,1,"h4",[["class","info-title"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Images"])),(t()(),Co(37,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Ri(-1,null,["Convolution neural networks can outperform humans in image related tasks."])),(t()(),Co(39,0,null,null,8,"div",[["class","col-md-4"]],null,null,null,null,null)),(t()(),Co(40,0,null,null,7,"div",[["class","info"]],null,null,null,null,null)),(t()(),Co(41,0,null,null,2,"div",[["class","icon icon-danger"]],null,null,null,null,null)),(t()(),Co(42,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),Ri(-1,null,["volume_up"])),(t()(),Co(44,0,null,null,1,"h4",[["class","info-title"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Speech"])),(t()(),Co(46,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Ri(-1,null,["Have you heard about Google Assistant?"])),(t()(),Co(48,0,null,null,13,"div",[["class","section text-center"],["id","about-me"]],null,null,null,null,null)),(t()(),Co(49,0,null,null,1,"h2",[["class","title"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Who am I?"])),(t()(),Co(51,0,null,null,10,"div",[["class","card card-plain"]],null,null,null,null,null)),(t()(),Co(52,0,null,null,1,"div",[["class","col-md-6 ml-auto mr-auto"]],null,null,null,null,null)),(t()(),Co(53,0,null,null,0,"img",[["alt","Thumbnail Image"],["class","img-raised rounded-circle img-fluid"],["src","../../assets/img/faces/0.jpg"]],null,null,null,null,null)),(t()(),Co(54,0,null,null,4,"h4",[["class","card-title"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Alberto Casta\xf1o "])),(t()(),Co(56,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Co(57,0,null,null,1,"small",[["class","card-description text-muted"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Artificial Intelligence engineer"])),(t()(),Co(59,0,null,null,2,"div",[["class","card-body"]],null,null,null,null,null)),(t()(),Co(60,0,null,null,1,"p",[["class","card-description"]],null,null,null,null,null)),(t()(),Ri(-1,null,["I'm an artificial intelligence and deep learning enthusiastic."])),(t()(),Co(62,0,null,null,26,"div",[["class","section section-contacts"]],null,null,null,null,null)),(t()(),Co(63,0,null,null,25,"div",[["class","row"]],null,null,null,null,null)),(t()(),Co(64,0,null,null,24,"div",[["class","col-md-8 ml-auto mr-auto"]],null,null,null,null,null)),(t()(),Co(65,0,null,null,1,"h2",[["class","text-center title"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Contact me"])),(t()(),Co(67,0,null,null,1,"h4",[["class","text-center description"]],null,null,null,null,null)),(t()(),Ri(-1,null,["I will get back to you in a couple of hours."])),(t()(),Co(69,0,null,null,19,"form",[["class","contact-form"]],null,null,null,null,null)),(t()(),Co(70,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(t()(),Co(71,0,null,null,4,"div",[["class","col-md-6"]],null,null,null,null,null)),(t()(),Co(72,0,null,null,3,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),Co(73,0,null,null,1,"label",[["class","bmd-label-floating"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Your Name"])),(t()(),Co(75,0,null,null,0,"input",[["class","form-control"],["type","text"]],null,null,null,null,null)),(t()(),Co(76,0,null,null,4,"div",[["class","col-md-6"]],null,null,null,null,null)),(t()(),Co(77,0,null,null,3,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),Co(78,0,null,null,1,"label",[["class","bmd-label-floating"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Your Email"])),(t()(),Co(80,0,null,null,0,"input",[["class","form-control"],["type","email"]],null,null,null,null,null)),(t()(),Co(81,0,null,null,3,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),Co(82,0,null,null,1,"label",[["class","bmd-label-floating"],["for","exampleMessage"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Your Message"])),(t()(),Co(84,0,null,null,0,"textarea",[["class","form-control"],["id","exampleMessage"],["rows","4"],["type","text"]],null,null,null,null,null)),(t()(),Co(85,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(t()(),Co(86,0,null,null,2,"div",[["class","col-md-4 ml-auto mr-auto text-center"]],null,null,null,null,null)),(t()(),Co(87,0,null,null,1,"button",[["class","btn btn-primary btn-raised"]],null,null,null,null,null)),(t()(),Ri(-1,null,[" Send Message "])),(t()(),Co(89,0,null,null,1,"app-footer",[],null,null,null,wf,bf)),di(90,114688,null,0,yf,[],null,null)],function(t,e){t(e,90,0)},null)}var Ef=qo("app-home",_f,function(t){return ji(0,[(t()(),Co(0,0,null,null,1,"app-home",[],null,null,null,Of,xf)),di(1,114688,null,0,_f,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Sf=n("Re/O"),Cf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function If(t,e){function n(){this.constructor=t}Cf(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Af=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function kf(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function Nf(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var Pf=1e-7;function Tf(){return Pf}var Rf=0;function Mf(){return Rf++}var Df={};function jf(t){return void 0===t&&(t=""),t in Df||(Df[t]=0),Df[t]+=1,t+Df[t].toString()}var Lf={float32:{},int32:{}},zf="float32";function Bf(t,e){return void 0===e&&(e=zf),null==Lf[e][t]&&(Lf[e][t]=Object(Sf.vc)(t,e),Object(Sf.eb)(Lf[e][t])),Lf[e][t]}var Ff=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return If(e,t),e}(Error),Vf=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return If(e,t),e}(Error),Uf=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return If(e,t),e}(Error),Wf=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return If(e,t),e}(Error),qf=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return If(e,t),e}(Error);function Hf(t,e){if(Array.isArray(t)){for(var n=[],r=0;r<e;r++)n=n.concat(t);return n}return(n=new Array(e)).fill(t),n}function Gf(t,e){if(!t)throw new qf(e)}function $f(t,e){for(var n=0,r=0,o=t;r<o.length;r++)o[r]===e&&n++;return n}function Kf(t){return 1===t.length?t[0]:t}function Qf(t){return Array.isArray(t)?t:[t]}function Xf(t){var e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==e[0]?e:"private"+e}function Yf(t){return t.length<=1?t:-1===t.indexOf("_")?t:t.replace(/[_]+(\w|$)/g,function(t,e){return e.toUpperCase()})}!function(t){If(function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r},t)}(Error);var Zf={};function Jf(t){return null===t||void 0===t?null:{className:t.getClassName(),config:t.getConfig()}}function td(t,e,n,r){if(void 0===e&&(e={}),void 0===n&&(n={}),void 0===r&&(r="object"),"string"==typeof t){var o=void 0;if(t in n)o=n[t];else if(t in Zf)o=Zf[t];else if(null==(o=e[t]))throw new Uf("Unknown "+r+": "+t);return o}var i=t;if(null==i.className||null==i.config)throw new Uf(r+": Improper config format: "+JSON.stringify(i)+".\n'className' and 'config' must set.");var a,s,u,l=i.className,c=void 0,p=void 0;if(l in n?(c=(a=n.get(l))[0],p=a[1]):l in Zf?(c=(s=Zf.className)[0],p=s[1]):l in e&&(c=(u=e[l])[0],p=u[1]),null==c)throw new Uf("Unknown "+r+": "+l);if(null!=p){for(var h={},f=0,d=Object.keys(Zf);f<d.length;f++)h[w=d[f]]=Zf[w];for(var m=0,g=Object.keys(n);m<g.length;m++)h[w=g[m]]=n[w];i.config.customObjects=h;for(var v=Af({},Zf),y=0,b=Object.keys(n);y<b.length;y++){var w=b[y];Zf[w]=n[w]}var _=p(c,i.config);return Zf=Af({},v),_}v=Af({},Zf);for(var x=0,O=Object.keys(n);x<O.length;x++)Zf[w=O[x]]=n[w];return _=new c(i.config),Zf=Af({},v),_}function ed(t,e){return-1*function(t,e){return t<e?-1:t>e?1:0}(t,e)}function nd(t){if(null==t)return t;for(var e=[],n=0,r=t;n<r.length;n++){var o=r[n];-1===e.indexOf(o)&&e.push(o)}return e}function rd(t){if(null==t)throw new Uf("Invalid value in obj: "+JSON.stringify(t));for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function od(t,e,n){if(null!=n&&t.indexOf(n)<0)throw new Uf(n+" is not a valid "+e+".  Valid values are "+t+" or null/undefined.")}function id(t,e,n,r){return void 0===n&&(n=0),void 0===r&&(r=1/0),Gf(n>=0),Gf(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(function(t){return typeof t===e})}function ad(t,e){return Object(Sf.id)(function(){return Object(Sf.Nc)(Object(Sf.Xc)(Object(Sf.Lb)(t,t),e,!0))})}var sd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.getConfig=function(){return{}},e}(Sf.yc.Serializable),ud=function(t){function e(e){var n=t.call(this)||this;return n.defaultMaxValue=2,n.defaultAxis=0,n.maxValue=null!=e.maxValue?e.maxValue:n.defaultMaxValue,n.axis=null!=e.axis?e.axis:n.defaultAxis,n}return If(e,t),e.prototype.apply=function(t){var e=this;return Object(Sf.id)(function(){var n=ad(t,e.axis),r=Object(Sf.M)(n,0,e.maxValue);return Object(Sf.Kb)(t,Object(Sf.Da)(r,Object(Sf.s)(Bf(Tf()),n)))})},e.prototype.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},e.className="MaxNorm",e}(sd);Sf.yc.SerializationMap.register(ud);var ld=function(t){function e(e){var n=t.call(this)||this;return n.defaultAxis=0,n.axis=null!=e.axis?e.axis:n.defaultAxis,n}return If(e,t),e.prototype.apply=function(t){var e=this;return Object(Sf.id)(function(){return Object(Sf.Da)(t,Object(Sf.s)(Bf(Tf()),ad(t,e.axis)))})},e.prototype.getConfig=function(){return{axis:this.axis}},e.className="UnitNorm",e}(sd);Sf.yc.SerializationMap.register(ld);var cd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.apply=function(t){return Object(Sf.mc)(t)},e.className="NonNeg",e}(sd);Sf.yc.SerializationMap.register(cd);var pd=function(t){function e(e){var n=t.call(this)||this;return n.defaultMinValue=0,n.defaultMaxValue=1,n.defaultRate=1,n.defaultAxis=0,n.minValue=null!=e.minValue?e.minValue:n.defaultMinValue,n.maxValue=null!=e.maxValue?e.maxValue:n.defaultMaxValue,n.rate=null!=e.rate?e.rate:n.defaultRate,n.axis=null!=e.axis?e.axis:n.defaultAxis,n}return If(e,t),e.prototype.apply=function(t){var e=this;return Object(Sf.id)(function(){var n=ad(t,e.axis),r=Object(Sf.s)(Object(Sf.Kb)(Bf(e.rate),Object(Sf.M)(n,e.minValue,e.maxValue)),Object(Sf.Kb)(Bf(1-e.rate),n));return Object(Sf.Kb)(t,Object(Sf.Da)(r,Object(Sf.s)(Bf(Tf()),n)))})},e.prototype.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},e.className="MinMaxNorm",e}(sd);Sf.yc.SerializationMap.register(pd);var hd={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function fd(t){return Jf(t)}function dd(t,e){return void 0===e&&(e={}),td(t,Sf.yc.SerializationMap.getMap().classNameMap,e,"constraint")}function md(t){return null==t?null:"string"==typeof t?dd({className:t in hd?hd[t]:t,config:{}}):t instanceof sd?t:dd(t)}var gd=Object.freeze({maxNorm:function(t){return new ud(t)},unitNorm:function(t){return new ld(t)},nonNeg:function(){return new cd},minMaxNorm:function(t){return new pd(t)}}),vd=new Map,yd=["channelsFirst","channelsLast"];function bd(t){od(yd,"DataFormat",t)}var wd=["valid","same","causal"];function _d(t){od(wd,"PaddingMode",t)}var xd=["max","avg"],Od=[],Ed="/";function Sd(t,e){Od.push(t);try{var n=e();return Od.pop(),n}catch(t){throw Od.pop(),t}}function Cd(t){if(!kd(t))throw new Error("Not a valid tensor name: '"+t+"'");return(0===Od.length?"":Od.join(Ed)+Ed)+t}function Id(t){if(!kd(t))throw new Error("Not a valid tensor name: '"+t+"'");vd.has(t)||vd.set(t,0);var e=vd.get(t);if(vd.set(t,vd.get(t)+1),e>0){var n=t+"_"+e;return vd.set(n,1),n}return t}var Ad=new RegExp(/^[A-Za-z][A-Za-z0-9\._\/]*$/);function kd(t){return!!t.match(Ad)}function Nd(t){return t===parseInt(t.toString(),10)}function Pd(t,e,n){null==e&&(e=0),null==n&&(n=t.length);for(var r=1,o=e;o<n;++o)r*=t[o];return r}function Td(t){return t=Array.isArray(t)?new Float32Array(t):t,Object(Sf.bd)(t)}function Rd(t){return Object(Sf.Db)(Td(t)).dataSync()[0]}function Md(t){return Object(Sf.xb)(Td(t)).dataSync()[0]}function Dd(t,e){if(e<t)throw new Uf("end ("+e+") < begin ("+t+") is forbidden.");for(var n=[],r=t;r<e;++r)n.push(r);return n}function jd(t,e){return t.asType(e)}function Ld(t,e){void 0===e&&(e=-1);var n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),t.reshape(n)}function zd(t,e,n){return Object(Sf.id)(function(){switch(t.rank){case 1:return Object(Sf.Gc)(t,e,n);case 2:return Object(Sf.Hc)(t,[e,0],[n,t.shape[1]]);case 3:return Object(Sf.Ic)(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Object(Sf.Jc)(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);default:throw new Uf("sliceAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}})}function Bd(t,e,n){return Object(Sf.id)(function(){switch(t.rank){case 1:return Object(Sf.Gc)(t,e,n);case 2:return Object(Sf.Hc)(t,[0,e],[t.shape[0],n]);case 3:return Object(Sf.Ic)(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Object(Sf.Jc)(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new Uf("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function Fd(t,e,n,r){return Object(Sf.id)(function(){switch(t.rank){case 1:return Object(Sf.Gc)(t,e,n);case 2:switch(r){case 1:return zd(t,e,n);case 2:return Bd(t,e,n);default:throw new Uf("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return zd(t,e,n);case 2:return Object(Sf.Ic)(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return Bd(t,e,n);default:throw new Uf("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return zd(t,e,n);case 2:return Object(Sf.Jc)(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Object(Sf.Jc)(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return Bd(t,e,n);default:throw new Uf("The axis is not within the rank of the tensor "+r)}default:throw new Uf("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function Vd(t,e){var n;return void 0===e&&(e=-1),e<0&&(e=0!==(n=t[0].rank)?n:0),e===t[0].rank&&(e=-1),Object(Sf.O)(t,e)}function Ud(t,e){switch(t.rank){case 1:return Object(Sf.P)([t,e]);case 2:return Object(Sf.Q)([t,e],0);case 3:return Object(Sf.R)([t,e],0);case 4:return Object(Sf.S)([t,e],0);default:throw new Uf("concatAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}}function Wd(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new Uf("The length of input n ("+e.length+") does not match the number of dimensions in input x ("+t.rank+")");return Object(Sf.jd)(t,e)}function qd(t,e,n,r,o){return void 0===e&&(e=0),void 0===n&&(n=1),Object(Sf.ic)(t,e,n,r,o)}function Hd(t,e){if(2!==e.rank)throw new Wf("dot support for y other than rank 2 is not yet implemented: y shape = "+e.shape);if(2===t.rank)return Object(Sf.wb)(t,e);if(3===t.rank){var n=t.shape[0],r=t.shape[1];return t=t.reshape([n*r,t.shape[2]]),Object(Sf.wb)(t,e).reshape([n,r,e.shape[1]])}throw new Wf("dot support for x of rank "+t.rank+" is not yet implemented: x shape = "+t.shape)}function Gd(t,e,n){return Object(Sf.id)(function(){return e=Array.isArray(e)?Object(Sf.bd)(e,"int32"):e.toInt(),Object(Sf.Ua)(t,e,n)})}function $d(t){return Object(Sf.Lb)(t,t)}function Kd(t,e,n){return Object(Sf.id)(function(){if(null==n&&(n="channelsLast"),bd(n),1!==e.rank&&e.rank!==t.rank)throw new Uf("Unexpected bias dimensions: "+e.rank+"; expected it to be 1 or "+t.rank);var r,o=e.shape;if(5===t.rank)"channelsFirst"===n?r=t.add(e.reshape(1===o.length?[1,o[0],1,1,1]:[1,o[3],o[0],o[1],o[2]])):"channelsLast"===n&&(r=t.add(e.reshape(1===o.length?[1,1,1,1,o[0]]:[1].concat(o))));else if(4===t.rank)"channelsFirst"===n?r=t.add(e.reshape(1===o.length?[1,o[0],1,1]:[1,o[2],o[0],o[1]])):"channelsLast"===n&&(r=t.add(e.reshape(1===o.length?[1,1,1,o[0]]:[1].concat(o))));else if(3===t.rank)"channelsFirst"===n?r=t.add(e.reshape(1===o.length?[1,o[0],1]:[1,o[1],o[0]])):"channelsLast"===n&&(r=t.add(e.reshape(1===o.length?[1,1,o[0]]:[1].concat(o))));else{if(!(t.rank<3))throw new Uf("Unsupported input rank by biasAdd: "+t.rank);r=t.add(e)}return r})}function Qd(t,e,n,r){return Object(Sf.id)(function(){if(null!=n&&!Sf.rd.arraysEqual(t.shape,n))throw new Wf("Non-default noise shape is not implemented yet: "+JSON.stringify(n));if(null!=r)throw new Wf("seed is not implemented for dropout yet.");var o=Object(Sf.Tc)(Object(Sf.s)(Object(Sf.Ob)(e),Object(Sf.jc)(t.shape,0,1,"float32")));return o=Object(Sf.Kb)(Object(Sf.Da)(Bf(1),Object(Sf.Vc)(Bf(1),e)),o),Object(Sf.Kb)(t,o)})}function Xd(t,e,n){return void 0===n&&(n=!1),n?t():e()}var Yd=["fanIn","fanOut","fanAvg"],Zd=["normal","uniform"],Jd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.fromConfigUsesCustomObjects=function(){return!1},e.prototype.getConfig=function(){return{}},e}(Sf.yc.Serializable),tm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.apply=function(t,e){return Object(Sf.zd)(t,e)},e.className="Zeros",e}(Jd);Sf.yc.SerializationMap.register(tm);var em=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.apply=function(t,e){return Object(Sf.Ub)(t,e)},e.className="Ones",e}(Jd);Sf.yc.SerializationMap.register(em);var nm=function(t){function e(e){var n=t.call(this)||this;if("object"!=typeof e)throw new Uf("Expected argument of type ConstantConfig but got "+e);if(void 0===e.value)throw new Uf("config must have value set but got "+e);return n.value=e.value,n}return If(e,t),e.prototype.apply=function(t,e){var n=this;return Object(Sf.id)(function(){return Object(Sf.Kb)(Object(Sf.vc)(n.value),Object(Sf.Ub)(t,e))})},e.prototype.getConfig=function(){return{value:this.value}},e.className="Constant",e}(Jd);Sf.yc.SerializationMap.register(nm);var rm=function(t){function e(e){var n=t.call(this)||this;return n.DEFAULT_MINVAL=-.05,n.DEFAULT_MAXVAL=.05,n.minval=e.minval||n.DEFAULT_MINVAL,n.maxval=e.maxval||n.DEFAULT_MAXVAL,n.seed=e.seed,n}return If(e,t),e.prototype.apply=function(t,e){return Object(Sf.jc)(t,this.minval,this.maxval,e)},e.prototype.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},e.className="RandomUniform",e}(Jd);Sf.yc.SerializationMap.register(rm);var om=function(t){function e(e){var n=t.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=e.mean||n.DEFAULT_MEAN,n.stddev=e.stddev||n.DEFAULT_STDDEV,n.seed=e.seed,n}return If(e,t),e.prototype.apply=function(t,e){if("bool"===e)throw new Wf("randomNormal does not support dType bool.");return qd(t,this.mean,this.stddev,e,this.seed)},e.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},e.className="RandomNormal",e}(Jd);Sf.yc.SerializationMap.register(om);var im=function(t){function e(e){var n=t.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=e.mean||n.DEFAULT_MEAN,n.stddev=e.stddev||n.DEFAULT_STDDEV,n.seed=e.seed,n}return If(e,t),e.prototype.apply=function(t,e){if("bool"===e)throw new Wf("truncatedNormal does not support dType bool.");return Object(Sf.od)(t,this.mean,this.stddev,e,this.seed)},e.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},e.className="TruncatedNormal",e}(Jd);Sf.yc.SerializationMap.register(im);var am=function(t){function e(e){var n=t.call(this)||this;return n.gain=null!=e.gain?Object(Sf.vc)(e.gain):Bf(1),n}return If(e,t),e.prototype.apply=function(t,e){var n=this;return Object(Sf.id)(function(){if(2!==t.length||t[0]!==t[1])throw new Uf("Identity matrix initializer can only be used for 2D square matrices.");return Object(Sf.Kb)(n.gain,Object(Sf.Pa)(t[0]))})},e.prototype.getConfig=function(){return{gain:this.gain.get()}},e.className="Identity",e}(Jd);Sf.yc.SerializationMap.register(am);var sm=function(t){function e(e){var n=t.call(this)||this;if(e.scale<0)throw new Uf("scale must be a positive float. Got: "+e.scale);return n.scale=null==e.scale?1:e.scale,n.mode=e.mode,od(Yd,"FanMode",n.mode),n.distribution=e.distribution,od(Zd,"Distribution",n.distribution),n.seed=e.seed,n}return If(e,t),e.prototype.apply=function(t,e){var n=function(t,e){var n,r;if(void 0===e&&(e="channelsLast"),bd(e),2===t.length)n=t[0],r=t[1];else if(-1!==[3,4,5].indexOf(t.length))if("channelsFirst"===e){var o=Pd(t,2);n=t[1]*o,r=t[0]*o}else"channelsLast"===e&&(o=Pd(t,0,t.length-2),n=t[t.length-2]*o,r=t[t.length-1]*o);else{var i=Pd(t);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}(t),r=n[0],o=n[1],i=this.scale;if(i/="fanIn"===this.mode?Math.max(1,r):"fanOut"===this.mode?Math.max(1,o):Math.max(1,(r+o)/2),"normal"===this.distribution){var a=Math.sqrt(i);if("bool"===e)throw new Wf(this.getClassName()+" does not support dType bool.");return Object(Sf.od)(t,0,a,e,this.seed)}var s=Math.sqrt(3*i);return Object(Sf.jc)(t,-s,s,e)},e.prototype.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},e.className="VarianceScaling",e}(Jd);Sf.yc.SerializationMap.register(sm);var um=function(t){function e(e){return t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})||this}return If(e,t),e.prototype.getClassName=function(){return sm.className},e}(sm),lm=function(t){function e(e){return t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})||this}return If(e,t),e.prototype.getClassName=function(){return sm.className},e}(sm),cm=function(t){function e(e){return t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})||this}return If(e,t),e.prototype.getClassName=function(){return sm.className},e}(sm),pm=function(t){function e(e){return t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})||this}return If(e,t),e.prototype.getClassName=function(){return sm.className},e}(sm),hm=function(t){function e(e){var n=t.call(this)||this;if(n.DEFAULT_GAIN=1,n.gain=null==e.gain?n.DEFAULT_GAIN:e.gain,n.seed=e.seed,null!=n.seed)throw new Wf("Random seed is not implemented for Orthogonal Initializer yet.");return n}return If(e,t),e.prototype.apply=function(t,e){var n=this;return Object(Sf.id)(function(){if(2!==t.length)throw new Wf("The Orthogonal Initializer does not support non-2D shapes yet.");t[0]*t[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 ("+t[0]*t[1]+") elements: Slowness may result.");var e=qd(t[0]>t[1]?[t[1],t[0]]:t,0,1,"float32"),r=Sf.kb.gramSchmidt(e);return t[0]>t[1]&&(r=r.transpose()),Object(Sf.Kb)(Bf(n.gain),r)})},e.prototype.getConfig=function(){return{gain:this.gain,seed:this.seed}},e.className="Orthogonal",e}(Jd);Sf.yc.SerializationMap.register(hm);var fm={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",identity:"Identity",leCunNormal:"LeCunNormal",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function dm(t,e){return void 0===e&&(e={}),td(t,Sf.yc.SerializationMap.getMap().classNameMap,e,"initializer")}function mm(t){return Jf(t)}function gm(t){if("string"==typeof t){var e=t in fm?fm[t]:t;return"GlorotUniform"===e?new um:"GlorotNormal"===e?new lm:"HeNormal"===e?new cm:"LeCunNormal"===e?new pm:dm({className:e,config:{}})}return t instanceof Jd?t:dm(t)}var vm=Object.freeze({zeros:function(){return new tm},ones:function(){return new em},constant:function(t){return new nm(t)},randomUniform:function(t){return new rm(t)},randomNormal:function(t){return new om(t)},truncatedNormal:function(t){return new im(t)},identity:function(t){return new am(t)},varianceScaling:function(t){return new sm(t)},glorotUniform:function(t){return new um(t)},glorotNormal:function(t){return new lm(t)},heNormal:function(t){return new cm(t)},leCunNormal:function(t){return new pm(t)},orthogonal:function(t){return new hm(t)}});function ym(t){return Array.isArray(t)&&Array.isArray(t[0])}function bm(t){return 0===t.length?[]:Array.isArray(t[0])?t:[t]}function wm(t){var e;if(Array.isArray(t)){if(1!==t.length)throw new Uf("Expected Tensor length to be 1; got "+t.length);e=t[0]}else e=t;return e}function _m(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(1===t.length)return(t=t)[0];throw new Uf("Expected exactly 1 Shape; got "+t.length)}return t}function xm(t){for(var e=0,n=0,r=t;n<r.length;n++){var o=r[n];e+=0===o.shape.length?1:o.shape.reduce(function(t,e){return t*e})}return e}var Om="Variable",Em=function(){function t(t,e,n,r,o){void 0===e&&(e="float32"),void 0===n&&(n=Om),void 0===r&&(r=!0),void 0===o&&(o=null),this.dtype=null==e?"float32":e,this.shape=t.shape,this.id=Mf(),this.originalName=Cd(n=null==n?Om:n),this.name=Id(this.originalName),this.trainable=r,this.constraint=o,this.val=Object(Sf.ud)(t,this.trainable,this.name,this.dtype)}return t.prototype.read=function(){return this.val},t.prototype.write=function(t){return function(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}(this.val,t),this.val.assign(t),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val)),this},t}();function Sm(t){return t.map(function(t){return t.read()})}function Cm(t){t.map(function(t){t[0].write(t[1])})}var Im=function(t){this.dtype=t.dtype,this.shape=t.shape,this.ndim=null!=t.shape?t.shape.length:t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}},Am=function(t,e,n,r,o,i,a){this.dtype=t,this.shape=e,this.sourceLayer=n,this.inputs=r,this.callArgs=o,this.outputTensorIndex=a,this.id=Mf(),null!=i&&(this.originalName=Cd(i),this.name=Id(this.originalName)),this.rank=e.length},km=0,Nm=function(){function t(t,e){this.callArgs=e,this.id=km++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(var n=0,r=t.inboundLayers;n<r.length;n++){var o=r[n];null!=o&&o.outboundNodes.push(this)}t.outboundLayer.inboundNodes.push(this)}return t.prototype.getConfig=function(){for(var t=[],e=0,n=this.inboundLayers;e<n.length;e++){var r=n[e];t.push(null!=r?r.name:null)}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},t}(),Pm=0,Tm=function(t){function e(e){var n=t.call(this)||this;n._callHook=null,n._addedWeightNames=[],n._stateful=!1,n.id=Pm++,n.activityRegularizer=null,n.inputSpec=null,n.supportsMasking=!1,n._trainableWeights=[],n._nonTrainableWeights=[],n._losses=[],n._updates=[],n._built=!1,n.inboundNodes=[],n.outboundNodes=[];var r=e.name;if(!r){var o=n.getClassName();r=Xf(o)+"_"+jf(o)}if(n.name=r,n.trainable=null==e.trainable||e.trainable,n.updatable=null==e.updatable||e.updatable,null!=e.inputShape||null!=e.batchInputShape){var i=void 0;if(null!=e.batchInputShape)i=e.batchInputShape;else if(null!=e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),i=[a].concat(e.inputShape)}n.batchInputShape=i;var s=e.dtype;null==s&&(s=e.inputDType),null==s&&(s="float32"),n.dtype=s}return n.initialWeights=null!=e.weights?e.weights:null,n}return If(e,t),e.nodeKey=function(t,e){return t.name+"_ib-"+e.toString()},e.prototype.getNodeAtIndex=function(t,e){if(0===this.inboundNodes.length)throw new Vf("The layer has never been called and thus has no defined "+e+".");if(this.inboundNodes.length<=t)throw new Uf("Asked to get "+e+" at node "+t+", but the layer has only "+this.inboundNodes.length+" inbound nodes.");return this.inboundNodes[t]},e.prototype.getInputAt=function(t){return Kf(this.getNodeAtIndex(t,"input").inputTensors)},e.prototype.getOutputAt=function(t){return Kf(this.getNodeAtIndex(t,"output").outputTensors)},Object.defineProperty(e.prototype,"input",{get:function(){if(this.inboundNodes.length>1)throw new Ff("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new Ff("Layer "+this.name+" is not connected, no input to return.");return Kf(this.getNodeAtIndex(0,"input").inputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){if(0===this.inboundNodes.length)throw new Ff("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new Ff("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return Kf(this.getNodeAtIndex(0,"output").outputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"losses",{get:function(){return this._losses},enumerable:!0,configurable:!0}),e.prototype.calculateLosses=function(){return this.losses.map(function(t){return t()})},Object.defineProperty(e.prototype,"updates",{get:function(){return this._updates},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"built",{get:function(){return this._built},set:function(t){this._built=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.trainable?this._trainableWeights:[]},set:function(t){this._trainableWeights=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this._nonTrainableWeights:this._trainableWeights.concat(this._nonTrainableWeights)},set:function(t){this._nonTrainableWeights=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateful",{get:function(){return this._stateful},enumerable:!0,configurable:!0}),e.prototype.assertInputCompatibility=function(t){if(t=Qf(t),null!=this.inputSpec&&0!==this.inputSpec.length){var e=Qf(this.inputSpec);if(t.length!==e.length)throw new Uf("Layer "+this.name+" expects "+e.length+" inputs, but it received "+t.length+" input tensors. Input received: "+t);for(var n=0;n<t.length;n++){var r=t[n],o=e[n];if(null!=o){var i=r.rank;if(null!=o.ndim&&i!==o.ndim)throw new Uf("Input "+n+" is incompatible with layer "+this.name+": expected ndim="+o.ndim+", found ndim="+i);if(null!=o.maxNDim&&i>o.maxNDim)throw new Uf("Input "+n+" is incompatible with layer "+this.name+": expected max_ndim="+o.maxNDim+", found ndim="+i);if(null!=o.minNDim&&i<o.minNDim)throw new Uf("Input "+n+" is incompatible with layer "+this.name+": expected min_ndim="+o.minNDim+", found ndim="+i+".");if(null!=o.dtype&&r.dtype!==o.dtype)throw new Uf("Input "+n+" is incompatible with layer "+this.name+" : expected dtype="+o.dtype+", found dtype="+r.dtype+".");if(o.axes){var a=r.shape;for(var s in o.axes){var u=Number(s),l=o.axes[s];if(null!=l&&-1===[l,null].indexOf(u>=0?a[u]:a[a.length+u]))throw new Uf("Input "+n+" is incompatible with layer "+this.name+": expected axis "+u+" of input shape to have value "+l+" but got shape "+a+".")}}if(null!=o.shape)for(var c=0;c<o.shape.length;++c){var p=o.shape[c],h=r.shape[c];if(null!=p&&null!=h&&p!==h)throw new Uf("Input "+n+" is incompatible with layer "+this.name+": expected shape="+o.shape+", found shape=${xShape}.")}}}}},e.prototype.call=function(t,e){return t},e.prototype.invokeCallHook=function(t,e){null!=this._callHook&&this._callHook(t,e)},e.prototype.setCallHook=function(t){this._callHook=t},e.prototype.clearCallHook=function(){this._callHook=null},e.prototype.apply=function(t,e){var n=this;e=e||{};for(var r=Qf(t),o=!0,i=0,a=r;i<a.length;i++)if(!(a[i]instanceof Am)){o=!1;break}for(var s=!0,u=0,l=r;u<l.length;u++)if(l[u]instanceof Am){s=!1;break}if(o===s)throw new Uf("Arguments to apply() must be all SymbolicTensors or all Tensors");return Sd(this.name,function(){if(!n.built){n.assertInputCompatibility(t);for(var o=[],i=0,a=Qf(t);i<a.length;i++)o.push(a[i].shape);n.build(Kf(o)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights)}if(n.assertInputCompatibility(t),s){for(var u=[],l=0,c=Qf(d=n.call(t,e));l<c.length;l++){var p=c[l];-1!==r.indexOf(p)&&(p=p.clone()),u.push(p)}if(d=Kf(u),null!=n.activityRegularizer)throw new Wf("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return d}var h=function(t){for(var e=[],n=0,r=t=Qf(t);n<r.length;n++)e.push(r[n].shape);return Kf(e)}(t),f=n.computeOutputShape(h),d=void 0,m="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(t)?h[0]:h),d=null!=f&&f.length>0&&Array.isArray(f[0])?f.map(function(r,o){return new Am(m,r,n,Qf(t),e,n.name,o)}):new Am(m,f,n,Qf(t),e,n.name),n.addInboundNode(t,d,null,null,h,f,e),null!=n.activityRegularizer)throw new Wf("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return d})},e.prototype.warnOnIncompatibleInputShape=function(t){if(null!=this.batchInputShape)if(t.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(t)+") does not match that of the batchInputShape ("+JSON.stringify(this.batchInputShape)+") of the layer "+this.name);else{var e=!1;this.batchInputShape.forEach(function(n,r){null!=n&&null!=t[r]&&t[r]!==n&&(e=!0)}),e&&console.warn("The shape of the input tensor ("+JSON.stringify(t)+") does not match the expectation of layer "+this.name+": "+JSON.stringify(this.batchInputShape))}},Object.defineProperty(e.prototype,"outputShape",{get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Ff("The layer "+this.name+" has never been called and thus has no defined output shape.");for(var t=[],e=0,n=this.inboundNodes;e<n.length;e++){var r=JSON.stringify(n[e].outputShapes);-1===t.indexOf(r)&&t.push(r)}if(1===t.length){var o=this.inboundNodes[0].outputShapes;return Array.isArray(o)&&Array.isArray(o[0])&&1===o.length?o[0]:o}throw new Ff("The layer "+this.name+' has multiple inbound nodes with different output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')},enumerable:!0,configurable:!0}),e.prototype.countParams=function(){if(!this.built)throw new Vf("You tried to call countParams() on "+this.name+", but the layer is not built yet. Build it first by calling build(batchInputShape).");return xm(this.weights)},e.prototype.build=function(t){this.built=!0},e.prototype.getWeights=function(t){return void 0===t&&(t=!1),Sm(t?this.trainableWeights:this.weights)},e.prototype.setWeights=function(t){var e=this;Object(Sf.id)(function(){var n=e.weights;if(n.length!==t.length)throw new Uf('You called setWeights(weights) on layer "'+e.name+'" with a weight list of length '+t.length+", but the layer was expecting "+n.length+" weights. Provided weights: "+t+"...");if(0!==n.length){for(var r=[],o=Sm(n),i=0;i<o.length;++i){var a=o[i],s=n[i],u=t[i];if(!Sf.rd.arraysEqual(a.shape,u.shape))throw new Uf("Layer weight shape "+a.shape+" not compatible with provided weight shape "+u.shape);r.push([s,u])}Cm(r)}})},e.prototype.addWeight=function(t,e,n,r,o,i,a){if(-1!==this._addedWeightNames.indexOf(t))throw new Uf("Duplicate weight name "+t+" for layer "+this.name);this._addedWeightNames.push(t),null==n&&(n="float32");var s=new Em(r.apply(e,n),n,t,i,a);return null!=o&&this.addLoss(function(){return o.apply(s.read())}),null==i&&(i=!0),i?this._trainableWeights.push(s):this._nonTrainableWeights.push(s),s},e.prototype.addLoss=function(t){var e;null==t||Array.isArray(t)&&0===t.length||(t=Qf(t),void 0!==this._losses&&null!==this._losses&&(e=this.losses).push.apply(e,t))},e.prototype.computeOutputShape=function(t){return t},e.prototype.computeMask=function(t,e){var n=this;if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError("Layer "+this.name+" does not support masking,but was passed an inputMask.");e.forEach(function(t){if(null!=t)throw new TypeError("Layer "+n.name+" does not support masking,but was passed an inputMask.")})}return null}return e},e.prototype.addInboundNode=function(t,e,n,r,o,i,a){void 0===a&&(a=null);var s=Qf(t);e=Qf(e),n=Qf(n),r=Qf(r),o=bm(o),i=bm(i);for(var u=[],l=[],c=[],p=0,h=s;p<h.length;p++){var f=h[p];u.push(f.sourceLayer),l.push(f.nodeIndex),c.push(f.tensorIndex)}new Nm({outboundLayer:this,inboundLayers:u,nodeIndices:l,tensorIndices:c,inputTensors:s,outputTensors:e,inputMasks:n,outputMasks:r,inputShapes:o,outputShapes:i},a);for(var d=0;d<e.length;d++)e[d].sourceLayer=this,e[d].nodeIndex=this.inboundNodes.length-1,e[d].tensorIndex=d},e.prototype.getConfig=function(){var t={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(t.batchInputShape=this.batchInputShape),null!=this.dtype&&(t.dtype=this.dtype),t},e}(Sf.yc.Serializable),Rm=function(t){function e(e){var n=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:jf("input").toString()})||this;if(null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),n.trainable=!1,n.built=!0,n.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new Uf("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var r=e.batchInputShape;if(null==r){if(null==e.inputShape)throw new Uf("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");r=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new Uf("Cannot specify batchSize if batchInputShape isspecified when creating an InputLayer.");var o=e.dtype||"float32";n.batchInputShape=r,n.dtype=o,n.inputSpec=[{shape:r}];var i=new Am(n.dtype,n.batchInputShape,n,[],{},n.name);return i.nodeIndex=0,i.tensorIndex=0,new Nm({outboundLayer:n,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[r],outputShapes:[r]}),n}return If(e,t),e.prototype.apply=function(t,e){throw new Uf("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)},e.prototype.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},e.className="InputLayer",e}(Tm);function Mm(t){if(null==t.batchShape&&null==t.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=t.batchShape&&null!=t.shape)throw new Uf("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var e=t.batchShape;null!=t.shape&&null==e&&(e=[null].concat(t.shape));var n=t.dtype;return null==n&&(n="float32"),new Rm({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function Dm(t){return kf(this,void 0,void 0,function(){var e,n,r,o,i,a,s,u;return Nf(this,function(l){switch(l.label){case 0:if(null==t)return[2];for(o in e=[],n=[],r=[],t)"number"!=typeof(i=t[o])&&(e.push((a=i).data()),n.push(o),r.push(a));return[4,Promise.all(e)];case 1:for(s=l.sent(),u=0;u<s.length;++u)t[n[u]]=s[u][0];return Object(Sf.Ba)(r),[2]}})})}Sf.yc.SerializationMap.register(Rm);var jm=function(){function t(){this.validationData=null}return t.prototype.setParams=function(t){this.params=t},t.prototype.onEpochBegin=function(t,e){return kf(this,void 0,void 0,function(){return Nf(this,function(t){return[2]})})},t.prototype.onEpochEnd=function(t,e){return kf(this,void 0,void 0,function(){return Nf(this,function(t){return[2]})})},t.prototype.onBatchBegin=function(t,e){return kf(this,void 0,void 0,function(){return Nf(this,function(t){return[2]})})},t.prototype.onBatchEnd=function(t,e){return kf(this,void 0,void 0,function(){return Nf(this,function(t){return[2]})})},t.prototype.onTrainBegin=function(t){return kf(this,void 0,void 0,function(){return Nf(this,function(t){return[2]})})},t.prototype.onTrainEnd=function(t){return kf(this,void 0,void 0,function(){return Nf(this,function(t){return[2]})})},t.prototype.setModel=function(t){},t}(),Lm=function(){function t(t,e){void 0===e&&(e=10),null==t&&(t=[]),this.callbacks=t,this.queueLength=e}return t.prototype.append=function(t){this.callbacks.push(t)},t.prototype.setParams=function(t){for(var e=0,n=this.callbacks;e<n.length;e++)n[e].setParams(t)},t.prototype.setModel=function(t){for(var e=0,n=this.callbacks;e<n.length;e++)n[e].setModel(t)},t.prototype.onEpochBegin=function(t,e){return kf(this,void 0,void 0,function(){var n,r;return Nf(this,function(o){switch(o.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,o.label=1;case 1:return n<r.length?[4,r[n].onEpochBegin(t,e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.onEpochEnd=function(t,e){return kf(this,void 0,void 0,function(){var n,r;return Nf(this,function(o){switch(o.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,o.label=1;case 1:return n<r.length?[4,r[n].onEpochEnd(t,e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.onBatchBegin=function(t,e){return kf(this,void 0,void 0,function(){var n,r;return Nf(this,function(o){switch(o.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,o.label=1;case 1:return n<r.length?[4,r[n].onBatchBegin(t,e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.onBatchEnd=function(t,e){return kf(this,void 0,void 0,function(){var n,r;return Nf(this,function(o){switch(o.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,o.label=1;case 1:return n<r.length?[4,r[n].onBatchEnd(t,e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.onTrainBegin=function(t){return kf(this,void 0,void 0,function(){var e,n;return Nf(this,function(r){switch(r.label){case 0:null==t&&(t={}),e=0,n=this.callbacks,r.label=1;case 1:return e<n.length?[4,n[e].onTrainBegin(t)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},t.prototype.onTrainEnd=function(t){return kf(this,void 0,void 0,function(){var e,n;return Nf(this,function(r){switch(r.label){case 0:null==t&&(t={}),e=0,n=this.callbacks,r.label=1;case 1:return e<n.length?[4,n[e].onTrainEnd(t)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},t}(),zm=function(t){function e(){return t.call(this)||this}return If(e,t),e.prototype.onEpochBegin=function(t,e){return kf(this,void 0,void 0,function(){return Nf(this,function(t){return this.seen=0,this.totals={},[2]})})},e.prototype.onBatchEnd=function(t,e){return kf(this,void 0,void 0,function(){var t,n,r,o,i=this;return Nf(this,function(a){for(o in null==e&&(e={}),this.seen+=t=null==e.size?0:e.size,n=function(n){var o=e[n];if("number"==typeof o)r.totals.hasOwnProperty(n)||(r.totals[n]=0),r.totals[n]=r.totals[n]+o*t;else{var a=void 0;n in r.totals?a=r.totals[n]:r.totals[n]=Bf(0),r.totals[n]=Object(Sf.id)(function(){return Object(Sf.s)(i.totals[n],Object(Sf.Kb)(o,Bf(t)))}),null!=a&&a.dispose()}},r=this,e)n(o);return[2]})})},e.prototype.onEpochEnd=function(t,e){return kf(this,void 0,void 0,function(){var t,n,r,o,i=this;return Nf(this,function(a){if(null!=e)for(t=function(t){if(null==n.totals[t])return"continue";"number"==typeof n.totals[t]?e[t]=n.totals[t]/n.seen:Object(Sf.id)(function(){e[t]=Object(Sf.Kb)(Object(Sf.Da)(Bf(1),Bf(i.seen)),i.totals[t]),i.totals[t].dispose(),Object(Sf.eb)(e[t])})},n=this,r=0,o=this.params.metrics;r<o.length;r++)t(o[r]);return[2]})})},e}(jm),Bm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.onTrainBegin=function(t){return kf(this,void 0,void 0,function(){return Nf(this,function(t){return this.epoch=[],this.history={},[2]})})},e.prototype.onEpochEnd=function(t,e){return kf(this,void 0,void 0,function(){var n;return Nf(this,function(r){for(n in null==e&&(e={}),this.epoch.push(t),e)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(e[n]);return[2]})})},e.prototype.syncData=function(){return kf(this,void 0,void 0,function(){var t,e,n,r,o,i,a,s;return Nf(this,function(u){switch(u.label){case 0:for(r in t=[],e=[],n=[],this.history)for(o=this.history[r],i=0;i<o.length;++i)"number"!=typeof o[i]&&(t.push(o[i].data()),e.push(r),n.push(i));return[4,Promise.all(t)];case 1:for(a=u.sent(),s=0;s<a.length;++s)this.history[e[s]][n[s]].dispose(),this.history[e[s]][n[s]]=a[s][0];return[2]}})})},e}(jm),Fm=function(t){function e(e){var n=t.call(this)||this;return n.trainBegin=e.onTrainBegin,n.trainEnd=e.onTrainEnd,n.epochBegin=e.onEpochBegin,n.epochEnd=e.onEpochEnd,n.batchBegin=e.onBatchBegin,n.batchEnd=e.onBatchEnd,n}return If(e,t),e.prototype.onEpochBegin=function(t,e){return kf(this,void 0,void 0,function(){return Nf(this,function(n){switch(n.label){case 0:return null==this.epochBegin?[3,3]:[4,Dm(e)];case 1:return n.sent(),[4,this.epochBegin(t,e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.onEpochEnd=function(t,e){return kf(this,void 0,void 0,function(){return Nf(this,function(n){switch(n.label){case 0:return null==this.epochEnd?[3,3]:[4,Dm(e)];case 1:return n.sent(),[4,this.epochEnd(t,e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.onBatchBegin=function(t,e){return kf(this,void 0,void 0,function(){return Nf(this,function(n){switch(n.label){case 0:return null==this.batchBegin?[3,3]:[4,Dm(e)];case 1:return n.sent(),[4,this.batchBegin(t,e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.onBatchEnd=function(t,e){return kf(this,void 0,void 0,function(){return Nf(this,function(n){switch(n.label){case 0:return null==this.batchEnd?[3,3]:[4,Dm(e)];case 1:return n.sent(),[4,this.batchEnd(t,e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.onTrainBegin=function(t){return kf(this,void 0,void 0,function(){return Nf(this,function(e){switch(e.label){case 0:return null==this.trainBegin?[3,3]:[4,Dm(t)];case 1:return e.sent(),[4,this.trainBegin(t)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},e.prototype.onTrainEnd=function(t){return kf(this,void 0,void 0,function(){return Nf(this,function(e){switch(e.label){case 0:return null==this.trainEnd?[3,3]:[4,Dm(t)];case 1:return e.sent(),[4,this.trainEnd(t)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},e}(jm);function Vm(t,e){return Object(Sf.id)(function(){var n=Object(Sf.Xc)($d(t),e,!0),r=Object(Sf.Kb)(Object(Sf.vc)(Tf()),Object(Sf.Vb)(t)),o=Object(Sf.Nc)(Object(Sf.zb)(n,r));return Object(Sf.Da)(t,o)})}function Um(t,e){return Object(Sf.id)(function(){return Object(Sf.Bb)($d(Object(Sf.Vc)(e,t)),-1)})}function Wm(t,e){return Object(Sf.id)(function(){return Object(Sf.Bb)(Object(Sf.p)(Object(Sf.Vc)(e,t)),-1)})}function qm(t,e){return Object(Sf.id)(function(){var n=Object(Sf.Vc)(t,e),r=Object(Sf.M)(Object(Sf.p)(t),Tf(),Number.MAX_VALUE),o=Object(Sf.p)(Object(Sf.Da)(n,r));return Object(Sf.Kb)(Bf(100),Object(Sf.Bb)(o,-1))})}function Hm(t,e){return Object(Sf.id)(function(){var n=Bf(1),r=Object(Sf.M)(e,Tf(),Number.MAX_VALUE),o=Object(Sf.nb)(Object(Sf.s)(n,r)),i=Object(Sf.M)(t,Tf(),Number.MAX_VALUE),a=Object(Sf.nb)(Object(Sf.s)(n,i));return Object(Sf.Bb)($d(Object(Sf.Vc)(o,a)),-1)})}function Gm(t,e){return Object(Sf.id)(function(){var n=Bf(0),r=Bf(1),o=Object(Sf.zb)(n,Object(Sf.Vc)(r,Object(Sf.Kb)(t,e)));return Object(Sf.Bb)($d(o),-1)})}function $m(t,e){return Object(Sf.id)(function(){var n=Bf(0),r=Bf(1),o=Object(Sf.zb)(n,Object(Sf.Vc)(r,Object(Sf.Kb)(t,e)));return Object(Sf.Bb)(o,-1)})}function Km(t,e){return Object(Sf.id)(function(){var n=Bf(0),r=Bf(1),o=Object(Sf.Xc)(Object(Sf.Kb)(t,e),-1),i=Object(Sf.xb)(Object(Sf.Kb)(Object(Sf.Vc)(r,t),e),-1);return Object(Sf.zb)(n,Object(Sf.s)(r,Object(Sf.Vc)(i,o)))})}function Qm(t,e){return Object(Sf.id)(function(){var n=Bf(Math.log(2)),r=Object(Sf.Vc)(e,t),o=Object(Sf.Vc)(Object(Sf.s)(r,Object(Sf.Lc)(Object(Sf.Kb)(Bf(-2),r))),n);return Object(Sf.Bb)(o,-1)})}function Xm(t,e,n){return void 0===n&&(n=!1),Object(Sf.id)(function(){if(n)e=Object(Sf.Kc)(e);else{var r=Object(Sf.Xc)(e,e.shape.length-1,!0);e=Object(Sf.Da)(e,r)}return e=Object(Sf.M)(e,Tf(),1-Tf()),Object(Sf.Ob)(Object(Sf.Xc)(Object(Sf.Kb)(t.toFloat(),Object(Sf.nb)(e)),e.shape.length-1))})}function Ym(t,e,n){return void 0===n&&(n=!1),Object(Sf.id)(function(){var r=Object(Sf.Ra)(function(t){var e=[Pd(t.shape)];return t.reshape(e)}(t)).toInt(),o=e.shape;return Xm(Object(Sf.Tb)(r,o[o.length-1]).reshape(o),e,n)})}function Zm(t,e){return Object(Sf.id)(function(){var n;return n=Object(Sf.M)(e,Tf(),1-Tf()),n=Object(Sf.nb)(Object(Sf.Da)(n,Object(Sf.Vc)(Object(Sf.Vb)(n),n))),Object(Sf.Bb)(function(t,e){return Object(Sf.id)(function(){var n=Object(Sf.zb)(e,Object(Sf.Ad)(e)),r=Object(Sf.Kb)(e,t),o=Object(Sf.nb)(Object(Sf.s)(Bf(1),Object(Sf.Ma)(Object(Sf.Ob)(Object(Sf.p)(e)))));return Object(Sf.s)(Object(Sf.Vc)(n,r),o)})}(t,n),-1)})}function Jm(t,e){return Object(Sf.id)(function(){var n=Object(Sf.M)(t,Tf(),1),r=Object(Sf.M)(e,Tf(),1);return Object(Sf.Xc)(Object(Sf.Kb)(t,Object(Sf.nb)(Object(Sf.Da)(n,r))),-1)})}function tg(t,e){return Object(Sf.id)(function(){var n=Object(Sf.nb)(Object(Sf.s)(Bf(Tf()),e));return Object(Sf.Bb)(Object(Sf.Vc)(e,Object(Sf.Kb)(t,n)),-1)})}function eg(t,e){return Object(Sf.id)(function(){var n=Vm(t,-1),r=Vm(e,-1),o=Object(Sf.Kb)(n,r);return Object(Sf.Ob)(Object(Sf.Xc)(o,-1))})}function ng(t){var e={meanSquaredError:Um,meanAbsoluteError:Wm,meanAbsolutePercentageError:qm,meanSquaredLogarithmicError:Hm,squaredHinge:Gm,hinge:$m,categoricalHinge:Km,logcosh:Qm,categoricalCrossentropy:Xm,sparseCategoricalCrossentropy:Ym,binaryCrossentropy:Zm,kullbackLeiblerDivergence:Jm,poisson:tg,cosineProximity:eg};if("string"==typeof t){if(t in e)return e[t];throw new Uf("Unknown loss "+t)}return t}function rg(t,e){return Object(Sf.id)(function(){var n=Object(Sf.Kb)(Bf(.5),Object(Sf.Vb)(e)),r=jd(Object(Sf.Ya)(e,n),t.dtype);return Object(Sf.Bb)(Object(Sf.Ja)(t,r),-1)})}function og(t,e){return Object(Sf.id)(function(){return jd(Object(Sf.Ja)(Object(Sf.w)(t,-1),Object(Sf.w)(e,-1)),"float32")})}function ig(t,e){return Zm(t,e)}function ag(t,e){throw new Wf}var sg=Um,ug=Um,lg=Wm,cg=Wm,pg=qm,hg=qm,fg=Xm,dg=eg,mg=Ym;function gg(t,e,n){void 0===n&&(n=console.log);for(var r="",o=0;o<t.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=t[o]).slice(0,e[o]),r+=" ".repeat(e[o]-r.length);n(r)}function vg(t,e,n){var r;try{r=JSON.stringify(t.outputShape)}catch(t){r="multiple"}gg([t.name+" ("+t.getClassName()+")",r,t.countParams().toString()],e,n)}function yg(t,e,n,r){var o;try{o=JSON.stringify(t.outputShape)}catch(t){o="multiple"}for(var i=[],a=0,s=t.inboundNodes;a<s.length;a++){var u=s[a];if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(var l=0;l<u.inboundLayers.length;++l)i.push(u.inboundLayers[l].name+"["+u.nodeIndices[l]+"]["+u.tensorIndices[l]+"]")}var c=t.name,p=t.getClassName(),h=0===i.length?"":i[0];for(gg([c+" ("+p+")",o,t.countParams().toString(),h],e,r),l=1;l<i.length;++l)gg(["","","",i[l]],e,r)}function bg(t,e){return void 0===e&&(e={}),td(t,Sf.yc.SerializationMap.getMap().classNameMap,e,"layer")}function wg(t,e,n){return("inboundNodes"===t||"outputLayers"===t||"inputLayers"===t)&&0===e&&"string"==typeof n}var _g="0.7.1";function xg(t,e,n,r){if(!n.startsWith("2."))throw new Uf("Unsupported Keras version in weights being loaded: "+n);return e}function Og(t,e,n){var r=function(t){switch(t){case"float32":return"float32";default:throw new Uf("Invalid dtype: "+t)}}(t);return Sf.m.make(e,{values:0===e.length?n:Sf.rd.flatten(n)},r)}var Eg,Sg,Cg=function(t){function e(n){var r=t.call(this,{})||this;if(r.containerNodes=new Set,r.name=n.name,null==r.name){var o=r.getClassName().toLowerCase();r.name=jf(o)}if(r.supportsMasking=!1,r.trainable=!0,r.updatable=!0,r.inputs=Array.isArray(n.inputs)?n.inputs.slice():[n.inputs],r.outputs=Array.isArray(n.outputs)?n.outputs.slice():[n.outputs],nd(r.inputs).length!==r.inputs.length)throw new Uf("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+r.inputs.map(function(t){return t.name}));nd(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+r.outputs.map(function(t){return t.name})),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[];for(var i=0,a=r.outputs;i<a.length;i++){var s=(C=a[i]).sourceLayer,u=C.nodeIndex,l=C.tensorIndex;r.outputLayers.push(s),r.outputLayersNodeIndices.push(u),r.outputLayersTensorIndices.push(l)}for(var c=0,p=r.inputs;c<p.length;c++)s=(C=p[c]).sourceLayer,l=C.tensorIndex,Gf(0===(u=C.nodeIndex),"input layer has >1 nodes"),Gf(0===l,"input layer has >1 tensors"),r.inputLayers.push(s),r.inputLayersNodeIndices.push(u),r.inputLayersTensorIndices.push(l);r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var h=0;h<r.inputLayers.length;h++){if(!((s=r.inputLayers[h])instanceof Rm))throw new TypeError("Input layers to a Model must be InputLayer objects. Received inputs: "+n.inputs+". Input "+h+" (0-based) originates from layer type "+s.getClassName()+".");r.inputNames.push(s.name),r.feedInputShapes.push(s.batchInputShape),r.feedInputNames.push(s.name)}for(var f=0,d=r.outputLayers;f<d.length;f++)r.outputNames.push((s=d[f]).name);r.internalInputShapes=r.inputs.map(function(t){return t.shape}),r.internalOutputShapes=r.outputs.map(function(t){return t.shape});for(var m={},g={},v={},y={},b={},w=[],_=function(t,n,o,i,a,s){null!=i&&null!=a&&null!=s||(i=t.sourceLayer,a=t.nodeIndex,s=t.tensorIndex);var u=i.inboundNodes[a];if(-1!==o.indexOf(u))throw new Vf("The tensor "+t.name+' at layer "'+i.name+'" is part of a cycle.');if(-1===n.indexOf(u)){r.containerNodes.add(e.nodeKey(i,a)),i.id in b||(b[i.id]=Object.keys(b).length),-1===o.indexOf(u)&&o.push(u);for(var l=u.inboundLayers.length,c=0;c<l;c++)_(u.inputTensors[c],n,o,u.inboundLayers[c],u.nodeIndices[c],u.tensorIndices[c]);for(n.push(u);o.indexOf(u)>=0;)o.splice(o.indexOf(u),1);w.push(u)}},x=[],O=[],E=0,S=r.outputs;E<S.length;E++){var C=S[E];_(C,x,O)}for(var I=0,A=w.slice().reverse();I<A.length;I++){g[($=A[I]).id]=$,$.id in m||(m[$.id]=0);var k=m[$.id];for(k=Math.max(k,null==v[$.outboundLayer.id]?0:v[$.outboundLayer.id]),v[$.outboundLayer.id]=k,y[$.outboundLayer.id]=$.outboundLayer,m[$.id]=k,h=0;h<$.inboundLayers.length;h++){var N=$.inboundLayers[h].inboundNodes[u=$.nodeIndices[h]];m[N.id]=Math.max(k+1,null==m[N.id]?0:m[N.id]),g[N.id]=N}}var P={};for(var T in m)(k=m[T])in P||(P[k]=[]),P[k].push(g[T]);var R={};for(var M in v)(k=v[M])in R||(R[k]=[]),R[k].push(y[M]);var D=Object.keys(R).map(function(t){return parseInt(t,10)}).sort(ed);r.layers=[];for(var j=0,L=D;j<L.length;j++){var z=R[k=L[j]];z.sort(function(t,e){var n=b[t.id],r=b[e.id];return n<r?-1:n>r?1:0});for(var B=0,F=z;B<F.length;B++)r.layers.push(s=F[B])}r.layersByDepth=R,D=Object.keys(P).map(function(t){return parseInt(t,10)}).sort(ed);for(var V=r.inputs.slice(),U=[],W=0,q=D;W<q.length;W++)for(var H=0,G=P[k=q[W]];H<G.length;H++){var $;if(null!=(s=($=G[H]).outboundLayer)){for(var K=0,Q=$.inputTensors;K<Q.length;K++)if(-1===V.indexOf(C=Q[K]))throw new Vf("Graph disconnected: cannot obtain value for tensor "+C+' at layer "'+s.name+'". The following previous layers were accessed without issue: '+U);for(var X=0,Y=$.outputTensors;X<Y.length;X++)V.push(C=Y[X]);U.push(s.name)}}r.nodesByDepth=P;for(var Z=r.layers.map(function(t){return t.name}),J=function(t){var e=Z.filter(function(e){return e===t}).length;if(1!==e)throw new Vf('The name "'+t+'" is used '+e+" times in the model. All layer names should be unique. Layer names: "+JSON.stringify(Z))},tt=0,et=Z;tt<et.length;tt++)J(et[tt]);return r.outboundNodes=[],r.inboundNodes=[],new Nm({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map(function(t){return null}),outputMasks:r.outputs.map(function(t){return null}),inputShapes:r.inputs.map(function(t){return t.shape}),outputShapes:r.outputs.map(function(t){return t.shape})}),r.built=!0,r}return If(e,t),Object.defineProperty(e.prototype,"trainableWeights",{get:function(){if(this._trainableWeights.length>0)throw new Uf("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];for(var t=[],e=0,n=this.layers;e<n.length;e++)t=t.concat(n[e].trainableWeights);return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){for(var t=[],e=0,n=this.layers;e<n.length;e++){var r=n[e];t.push.apply(t,r.nonTrainableWeights)}if(!this.trainable){for(var o=[],i=0,a=this.layers;i<a.length;i++)o.push.apply(o,(r=a[i]).trainableWeights);return o.concat(t)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),e.prototype.loadWeights=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1),n?function(t,e){for(var n={},r=0,o=0,i=e;o<i.length;o++)for(var a=0,s=i[o].weights;a<s.length;a++){var u=s[a];if(null!=n[u.originalName])throw new Uf("Duplicate weight name: "+u.originalName);n[u.originalName]=u,r++}var l=[];for(var c in t)l.push([n[c],t[c]]),delete n[c];var p=[];for(var h in n)p.push(h);if(p.length>0)throw new Uf(p.length+" of "+r+" weights are not set: "+p);Cm(l)}(t,this.layers):function(t,e,n){void 0===n&&(n=!1);for(var r=t.keras_version,o=e.map(function(t){return t.name}),i={},a=0,s=e;a<s.length;a++)null!=(y=s[a]).name&&(null==i[y.name]&&(i[y.name]=[]),i[y.name].push(y));for(var u=t.weights,l=[],c=0;c<o.length;++c){var p=o[c],h=u[p];null==h&&(h=[]);for(var f=[],d=0;d<h.length;++d){var m=h[d];f.push(new Em(Og(m.dtype,m.shape,m.value)))}for(var g=0,v=i[p];g<v.length;g++){var y,b=(y=v[g]).weights;if((f=xg(0,f,r)).length!==b.length){if(!n)throw new Uf("Layer #"+c+' (named "'+y.name+'") expects '+b.length+" weight(s), but the saved weights have "+f.length+" element(s).");console.warn("Skipping loading of weights of layer "+y.name+" due to mismatch in number of weights: ("+f.length+" vs "+b.length+").")}for(var w=0;w<f.length;++w)!n||Sf.rd.arraysEqual(b[w].shape,f[w].shape)?l.push([b[w],f[w].read()]):console.warn("Skipping loading of weights for layer "+y.name+" due to mismatch in shape ("+b[w].shape+" vs "+f[w].shape+")")}}Cm(l)}(t,this.layers,e)},e.prototype.updatedConfig=function(){var t=this.getConfig();return{className:this.getClassName(),config:t,kerasVersion:"tfjs-layers "+_g,backend:"TensorFlow.js"}},e.prototype.toJSON=function(t,e){void 0===e&&(e=!0);var n=function t(e,n){if(null===e||void 0===e)return null;if("string"==typeof e)return Xf(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var r=[],o=e.length,i=0;i<o;++i){var a=e[i];wg(n,i,a)?r.push(a):r.push(t(a,n))}return r}for(var s={},u=0,l=Object.keys(e);u<l.length;u++){var c=l[u],p=e[c];s[Xf(c)]="name"!==c&&"className"!==c||"string"!=typeof p?t(p,c):p}return s}(this.updatedConfig());return e?JSON.stringify(n):n},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){var r;return t=Qf(t),r="mask"in e?Qf(e.mask):Hf(null,t.length),n.runInternalGraph(t,r)[0]})},e.prototype.computeMask=function(t,e){var n=this;return Object(Sf.id)(function(){var r;return t=Qf(t),r=null==e?Hf(null,t.length):Qf(e),n.runInternalGraph(t,r)[1]})},e.prototype.computeOutputShape=function(t){var e=bm(t);if(e.length!==this.inputLayers.length)throw new Uf("Invalid inputShape argument "+t+": model has "+this.inputLayers.length+" tensor inputs.");for(var n={},r=0;r<e.length;r++){var o=this.inputLayers[r];n[b=o.name+"_0_0"]=e[r]}var i=Object.keys(this.nodesByDepth).map(function(t){return parseInt(t,10)}).sort(ed);if(i.length>1)for(var a=0,s=i;a<s.length;a++)for(var u=0,l=this.nodesByDepth[s[a]];u<l.length;u++){var c=l[u];if(o=c.outboundLayer,-1===this.inputLayers.map(function(t){return t.id}).indexOf(o.id)){for(var p=[],h=0;h<c.inboundLayers.length;h++){var f=c.tensorIndices[h],d=n[b=c.inboundLayers[h].name+"_"+c.nodeIndices[h]+"_"+f];p.push(d)}var m=bm(o.computeOutputShape(Kf(p))),g=o.inboundNodes.indexOf(c);for(h=0;h<m.length;h++)n[b=o.name+"_"+g+"_"+h]=m[h]}}var v=[],y=[];for(r=0;r<this.outputLayers.length;r++){var b=(o=this.outputLayers[r]).name+"_"+(g=this.outputLayersNodeIndices[r])+"_"+(f=this.outputLayersTensorIndices[r]);y.push(b)}for(r=0;r<y.length;r++){var w=y[r];Gf(w in n),v.push(n[w])}return Kf(v)},e.prototype.runInternalGraph=function(t,e){null==e&&(e=Hf(null,t.length));for(var n={},r=0;r<this.inputs.length;++r){var o=this.inputs[r],i=t[r],a=e[r];n[o.id]=[i,a]}for(var s=0,u=Object.keys(this.nodesByDepth).map(function(t){return parseInt(t,10)}).sort(ed);s<u.length;s++)for(var l=0,c=this.nodesByDepth[u[s]];l<c.length;l++){for(var p=c[l],h=p.outboundLayer,f=p.inputTensors,d=p.outputTensors,m=new Array,g=0,v=f;g<v.length;g++)(o=v[g]).id in n&&m.push(n[o.id]);if(m.length===f.length){var y={},b=void 0,w=void 0,_=void 0,x=void 0;if(null!=p.callArgs&&(y=p.callArgs),1===m.length){var O=m[0],E=O[0],S=O[1];null==y.mask&&(y.mask=S),_=Qf(h.call(E,y)),x=Qf(h.computeMask(E,S)),b=[E],w=[S]}else b=m.map(function(t){return t[0]}),w=m.map(function(t){return t[1]}),null==y.mask&&(y.mask=w),_=Qf(h.call(b,y)),x=Qf(h.computeMask(b,w));if(h.activityRegularizer)throw new Wf("Model invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(r=0;r<d.length;++r)n[(o=d[r]).id]=[i=_[r],a=x[r]]}}for(var C=[],I=[],A=[],k=0,N=this.outputs;k<N.length;k++){Gf((o=N[k]).id in n,"Could not compute output "+o.name+" : "+o.id);var P=n[o.id],T=P[0];a=P[1],A.push(T.shape),C.push(T),I.push(a)}return[C,I,A]},e.prototype.buildNodeConversionMap=function(t){for(var n,r={},o=0,i=this.layers;o<i.length;o++){var a=i[o];n=a instanceof e?1:0;for(var s=0;s<a.inboundNodes.length;s++){var u=e.nodeKey(a,s);u in this.containerNodes&&(r[u]=n,n+=1)}}return r},e.prototype.getLayer=function(t,e){if(null!=e){if(this.layers.length<=e)throw new Uf("Was asked to retrieve layer at index "+e+", but model only has "+this.layers.length+" layer(s).");return this.layers[e]}if(null==t)throw new Uf("Provide either a layer name or layer index");for(var n=0,r=this.layers;n<r.length;n++){var o=r[n];if(o.name===t)return o}throw new Uf("No such layer: "+t)},e.prototype.calculateLosses=function(){var t=this;return Object(Sf.id)(function(){for(var n=[],r=0,o=t.layers;r<o.length;r++)for(var i=o[r],a=0;a<i.inboundNodes.length;++a){var s=e.nodeKey(i,a);t.containerNodes.has(s)&&n.push.apply(n,i.calculateLosses())}return n})},e.prototype.getConfig=function(){for(var t={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[],o=0,i=this.layers;o<i.length;o++){for(var a=(b=i[o]).getClassName(),s=b.getConfig(),u=[],l=0;l<b.inboundNodes.length;l++){var c=b.inboundNodes[l],p=e.nodeKey(b,l),h={};if(this.containerNodes.has(p)){if(c.callArgs)try{JSON.stringify(c.callArgs),h=c.callArgs}catch(t){console.warn("Layer "+b.name+" was passed non-serializable keyword arguments: "+c.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),h={}}if(c.inboundLayers.length>0){for(var f=[],d=0;d<c.inboundLayers.length;d++){var m=c.inboundLayers[d],g=c.nodeIndices[d],v=c.tensorIndices[d];null!==(_=n[e.nodeKey(m,g)])&&void 0!==_||(_=0),f.push([m.name,_,v,h])}u.push(f)}}}r.push({name:b.name,className:a,config:s,inboundNodes:u})}t.layers=r;var y=[];for(d=0;d<this.inputLayers.length;d++){var b=this.inputLayers[d];p=e.nodeKey(b,g=this.inputLayersNodeIndices[d]),this.containerNodes.has(p)&&(null!==(_=n[p])&&void 0!==_||(_=0),y.push([b.name,_,v=this.inputLayersTensorIndices[d]]))}t.inputLayers=y;var w=[];for(d=0;d<this.outputLayers.length;d++){var _;p=e.nodeKey(b=this.outputLayers[d],g=this.outputLayersNodeIndices[d]),this.containerNodes.has(p)&&(null!==(_=n[p])&&void 0!==_||(_=0),w.push([b.name,_,v=this.outputLayersTensorIndices[d]]))}return t.outputLayers=w,t},e.fromConfig=function(t,e){var n={},r={};function o(t,e){t.name in r?r[t.name].push(e):r[t.name]=[e]}function i(t,e){for(var r,i=[],a=0,s=e;a<s.length;a++){var u=s[a],l=u[0],c=u[1],p=u[2];if(3===u.length)r={};else{if(4!==u.length)throw new Uf("Improperly formatted model config for layer "+JSON.stringify(t)+": "+JSON.stringify(u));r=u[3]}if(!(l in n))return void o(t,e);var h=n[l];if(h.inboundNodes.length<=c)return void o(t,e);i.push(h.inboundNodes[c].outputTensors[p])}i.length>0&&t.apply(Kf(i),r)}function a(t){var r=t.name,i=bg(t,null!=e.customObjects?e.customObjects:{});n[r]=i;for(var a=0,s=t.inboundNodes;a<s.length;a++){var u=s[a];if(!(u instanceof Array))throw new Uf("Corrupted configuration, expected array for nodeData: "+u);o(i,u)}}for(var s=e.name,u=e.layers,l=0,c=u;l<c.length;l++)a(f=c[l]);for(;!rd(r);)for(var p=0,h=u;p<h.length;p++){var f=h[p];if((C=n[f.name]).name in r){for(var d=0,m=r[C.name];d<m.length;d++)i(C,m[d]);delete r[C.name]}}for(var g=[],v=[],y=0,b=e.inputLayers;y<b.length;y++){var w=(f=b[y])[0],_=f[1],x=f[2];Gf(w in n);var O=(C=n[w]).inboundNodes[_].outputTensors;g.push(O[x])}for(var E=0,S=e.outputLayers;E<S.length;E++){var C;w=(f=S[E])[0],_=f[1],x=f[2],Gf(w in n),O=(C=n[w]).inboundNodes[_].outputTensors,v.push(O[x])}return new t({inputs:g,outputs:v,name:s})},Object.defineProperty(e.prototype,"stateful",{get:function(){if(this._stateful)throw new Uf("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(var t=0,e=this.layers;t<e.length;t++)if(e[t].stateful)return!0;return!1},enumerable:!0,configurable:!0}),e}(Tm),Ig=function(){function t(e){if(this.id2Value={},e instanceof t)for(var n in e.id2Value)this.id2Value[n]=e.id2Value[n];else{if(null==e)return;for(var r=0,o=e;r<o.length;r++){var i=o[r];this.add(i.key,i.value)}}}return t.prototype.add=function(t,e){if(null!=this.id2Value[t.id])throw new Uf("Duplicate key: name="+t.name+", id="+t.id);return this.id2Value[t.id]=function(t,e){if(null!=t.shape){if(t.shape.length!==e.shape.length)throw new Uf("The rank of feed ("+e.shape.length+") does not match the rank of the key ("+t.shape.length+").");for(var n=0;n<t.shape.length;++n)if(null!=t.shape[n]&&t.shape[n]!==e.shape[n])throw new Uf("The "+n+"-th dimension of the feed ("+e.shape[n]+") is incompatible with that of the key ("+t.shape[n]+").")}if(null==t.dtype||t.dtype===e.dtype)return e;try{return Object(Sf.K)(e,t.dtype)}catch(n){throw new Uf("The dtype of the feed ("+e.dtype+") can not be cast to the dtype of the key '"+t.name+"' ("+t.dtype+").")}}(t,e),this},t.prototype.addFeed=function(t){this.add(t.key,t.value)},t.prototype.hasKey=function(t){return null!=this.id2Value[t.id]},t.prototype.getValue=function(t){if(null==this.id2Value[t.id])throw new Uf("Nonexistent key: "+JSON.stringify(t));return this.id2Value[t.id]},t}();function Ag(t,e,n){for(var r=Array.isArray(t),o=r?t:[t],i=[],a=new Ig(e),s=0,u=o;s<u.length;s++)i.push(kg(u[s],a,n));return r?i:i[0]}function kg(t,e,n){if(e.hasKey(t))return e.getValue(t);if(t.sourceLayer instanceof Rm)throw new Uf("Missing a feed value for SymbolicTensor from InputLayer '"+Rm.name+"'");for(var r=[],o=0,i=t.inputs;o<i.length;o++){var a=kg(i[o],e,n);r.push(a)}var s=t.sourceLayer.apply(r,n);Array.isArray(s)||(s=[s]);for(var u=function(t){var e;if(1===t.sourceLayer.inboundNodes.length)e=t.sourceLayer.output;else{for(var n=null,r=0;r<t.sourceLayer.inboundNodes.length;++r)for(var o=0,i=t.sourceLayer.inboundNodes[r].outputTensors;o<i.length;o++)if(i[o].id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}(t),l=Array.isArray(u)?u:[u],c=0;c<l.length;++c)e.add(l[c],s[c]);return 1===s.length?s[0]:s[t.outputTensorIndex]}function Ng(t){return Array.isArray(t)}function Pg(t){return!function(t){return t instanceof Sf.m}(t)&&!Ng(t)}function Tg(t,e,n,r,o){if(void 0===r&&(r=!0),void 0===o&&(o=""),null==e||0===e.length){if(null!=t){var i=!1;if(Ng(t)&&t.length>0)i=!0;else if(Pg(t)){for(var a in t)if(t.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new Uf("Error when checking model "+o+" expected no data, but got "+t)}return[]}if(null==t)return e.map(function(t){return null});var s;if(Pg(t)){t=t,s=[];for(var u=0,l=e;u<l.length;u++){var c=l[u];if(null==t[c])throw new Uf('No data provided for "'+c+'". Need data for each key in: '+e);s.push(t[c])}}else if(Ng(t)){if((t=t).length!==e.length)throw new Uf("Error when checking model "+o+": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see "+e.length+" Tensor(s), but instead got the following list of Tensor(s): "+t);s=t}else{if(t=t,e.length>1)throw new Uf("The model "+o+" expects "+e.length+" Tensor(s), but only received one Tensor. Found: Tensor with shape "+t.shape);s=[t]}for(var p=0;p<e.length;++p)1===(h=s[p]).shape.length&&(s[p]=Ld(h,1));if(null!=n)for(p=0;p<e.length;++p)if(null!=n[p]){var h;if((h=s[p]).shape.length!==n[p].length)throw new Uf("Error when checking "+o+": expected "+e[p]+" to have "+n[p].length+" dimension(s). but got array with shape "+h.shape);for(var f=0;f<n[p].length;++f)if(0!==f||r){var d=n[p][f];if(null!=d&&d>=0&&h.shape[f]!==d)throw new Uf("Error when checking "+o+": expected "+e[p]+" to have shape ["+n[p]+"], but got array with shape ["+h.shape+"].")}}return s}function Rg(t,e){for(var n=[],r=0,o=null;r<t;)(o=r+e)>=t&&(o=t),n.push([r,o]),r=o;return n}function Mg(t,e,n){return null==t?[null]:Array.isArray(t)?t.map(function(t){return zd(t,e,n-e)}):zd(t,e,n-e)}function Dg(t,e){return Object(Sf.id)(function(){return null==t?null:Array.isArray(t)?t.map(function(t){return Dg(t,e)}):Gd(t,"int32"===e.dtype?e:e.toInt())})}function jg(t,e,n,r,o){var i;if(void 0===r&&(r=!0),void 0===o&&(o=""),Array.isArray(t)){if(t.length!==e.length)throw new Uf("Error when checking model "+o+": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see "+e.length+" Tensor(s), but instead got "+t.length+" Tensors(s).");i=t}else{if(e.length>1)throw new Uf("The model expects "+e.length+" "+o+" Tensors, but only received one Tensor. Found: array with shape "+JSON.stringify(t.shape)+".");i=[t]}if(null!=n)for(var a=0;a<e.length;++a)if(null!=n[a]){var s=i[a];if(s.shape.length!==n[a].length)throw new Uf("Error when checking "+o+": expected "+e[a]+" to have "+n[a].length+" dimension(s), but got array with shape "+JSON.stringify(s.shape));for(var u=0;u<n[a].length;++u)if(0!==u||r){var l=n[a][u];if(null!=l&&l!==s.shape[u])throw new Uf("Error when checking "+o+": expected "+e[a]+" to have shape "+JSON.stringify(n[a])+" but got array with shape "+JSON.stringify(s.shape)+".")}}}(Sg=Eg||(Eg={}))[Sg.SILENT=0]="SILENT",Sg[Sg.VERBOSE=1]="VERBOSE";var Lg=function(t){function e(e){return t.call(this,e)||this}return If(e,t),e.prototype.summary=function(t,e,n){if(void 0===n&&(n=console.log),!this.built)throw new Uf("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function(t,e,n,r){void 0===r&&(r=console.log);var o,i=function(t){var e=!0,n=[],r=[];for(var o in t.nodesByDepth)n.push(t.nodesByDepth[o]);for(var i=0,a=n;i<a.length;i++){var s=a[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){e=!1;break}r.push.apply(r,s)}if(e)for(var u=0,l=t.layers;u<l.length;u++){for(var c=!1,p=0,h=l[u].inboundNodes;p<h.length;p++)if(-1!==r.indexOf(h[p])){if(c){e=!1;break}c=!0}if(!e)break}return e}(t),a=["Layer (type)","Output shape","Param #"];if(i?(e=e||65,n=n||[.45,.85,1]):(e=e||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(function(t){return Math.floor(e*t)})),!i)for(var s in a.push("Receives inputs"),o=[],t.nodesByDepth)o.push.apply(o,t.nodesByDepth[s]);r("_".repeat(e)),gg(a,n,r),r("=".repeat(e));for(var u,l=t.layers,c=0;c<l.length;++c)i?vg(l[c],n,r):yg(l[c],n,o,r),r((c===l.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency(),u=xm(null!=t.collectedTrainableWeights?t.collectedTrainableWeights:t.trainableWeights);var p=xm(t.nonTrainableWeights);r("Total params: "+(u+p)),r("Trainable params: "+u),r("Non-trainable params: "+p),r("_".repeat(e))}(this,t,e,n)},e.prototype.compile=function(t){var e=this;if(null==t.loss&&(t.loss=[]),this.loss=t.loss,"string"==typeof t.optimizer)this.optimizer=function(t){var e={Adagrad:function(){return Sf.md.adagrad(.01)},Adadelta:function(){return Sf.md.adadelta(1,.95,Tf())},Adam:function(){return Sf.md.adam(.001,.9,.999,Tf())},Adamax:function(){return Sf.md.adamax(.002,.9,.999,Tf(),0)},RMSProp:function(){return Sf.md.rmsprop(.001,.9,0,Tf())},SGD:function(){return Sf.md.sgd(.01)}};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new Uf("Unknown Optimizer "+t)}(t.optimizer);else{if(!(t.optimizer instanceof Sf.h))throw new Uf("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer=t.optimizer}var n=[];if(Array.isArray(t.loss)||"string"==typeof t.loss||"function"==typeof t.loss)if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new Uf("When passing an Array as loss, it should have one entry per model output. The model has "+this.outputs.length+" output(s), but you passed loss="+t.loss+".");n=t.loss.map(function(t){return ng(t)})}else{var r=ng(t.loss);this.outputs.map(function(t){n.push(r)})}else{for(var o in t.loss=t.loss,t.loss)if(-1===this.outputNames.indexOf(o))throw new Uf('Unknown entry in loss dictionary: "'+o+'". Only expect the following keys: '+this.outputNames);for(var i in this.outputNames)null==t.loss[i]&&console.warn('Output "'+i+'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to '+i+" during training"),n.push(ng(t.loss[i]))}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var a=0;a<this.outputs.length;++a){var s=this.internalOutputShapes[a];this.feedOutputNames.push(this.outputNames[a]),this.feedOutputShapes.push(s),this.feedLossFns.push(this.lossFunctions[a])}var u=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Sd("loss",function(){for(var t=0;t<e.outputs.length;++t)-1===u.indexOf(t)&&e.outputs.length>1&&(e.metricsTensors.push([e.lossFunctions[t],t]),e.metricsNames.push(e.outputNames[t]+"_loss"))});var l=function(t,e){if(null==t||Array.isArray(t)&&0===t.length)return e.map(function(t){return[]});if(Array.isArray(t))return e.map(function(e){return t});if(null!=t){for(var n=[],r=0,o=e;r<o.length;r++){var i=o[r],a=t.hasOwnProperty(i)?t[i]:[];Array.isArray(a)||(a=[a]),n.push(a)}return n}throw new TypeError("Type of metrics argument not understood. Expected an Array or Object, found: "+t)}(t.metrics,this.outputNames);Sd("metric",function(){for(var t=function(t){if(-1!==u.indexOf(t))return"continue";!function(n){for(var r,o,i,a=function(n){if(-1!==["accuracy","acc","crossentropy","ce"].indexOf(n)){var a=e.internalOutputShapes[t];1===a[a.length-1]||e.lossFunctions[t]===Zm?-1!==["accuracy","acc"].indexOf(n)?o=rg:-1!==["crossentropy","ce"].indexOf(n)&&(o=ig):e.lossFunctions[t]===Ym?-1!==["accuracy","acc"].indexOf(n)?o=ag:-1!==["crossentropy","ce"].indexOf(n)&&(o=mg):-1!==["accuracy","acc"].indexOf(n)?o=og:-1!==["crossentropy","ce"].indexOf(n)&&(o=fg);var s=void 0;-1!==["accuracy","acc"].indexOf(n)?s="acc":-1!==["crossentropy","ce"].indexOf(n)&&(s="ce"),i=o,r=""+s}else{var u=function(t){var e={binaryAccuracy:rg,categoricalAccuracy:og,categoricalCrossentropy:fg,sparseCategoricalCrossentropy:mg,mse:sg,MSE:ug,mae:lg,MAE:cg,mape:pg,MAPE:hg,cosine:dg};if("string"==typeof t&&t in e)return e[t];if("string"!=typeof t&&null!=t)return t;throw new Uf("Unknown metric "+t)}(n);i=u,r=""+n}var l;Sd(r,function(){l=i}),function(t,n,r){e.outputNames.length>1&&(n=e.outputNames[t]+"_"+n),e.metricsNames.push(n),e.metricsTensors.push([r,t])}(t,r,l)},s=0,u=l[t];s<u.length;s++)a(u[s])}()},n=0;n<e.outputs.length;++n)t(n)}),this.collectedTrainableWeights=this.trainableWeights},e.prototype.checkTrainableWeightsConsistency=function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},e.prototype.evaluate=function(t,e,n){void 0===n&&(n={});var r=null==n.batchSize?32:n.batchSize,o=this.standardizeUserData(t,e,!0,r),i=o[0].concat(o[1]);return this.makeTestFunction(),Kf(this.testLoop(this.testFunction,i,r,n.verbose,n.steps))},e.prototype.checkNumSamples=function(t,e,n,r){var o;if(void 0===r&&(r="steps"),null!=n){if(o=null,null!=e)throw new Uf("If "+r+" is set, batchSize must be null or undefined.Got batchSize = "+e)}else{if(null==t)throw new Uf("Either the input data should have a defined shape, or "+r+" shoud be specified.");o=Array.isArray(t)?t[0].shape[0]:t.shape[0]}return o},e.prototype.execute=function(t,e){if(Array.isArray(e)&&0===e.length)throw new Uf("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(e),r=this.retrieveSymbolicTensors(n?e:[e]),o=new Ig;if(t instanceof Sf.m&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new Uf("The number of inputs provided ("+t.length+") does not match the number of inputs of this model ("+this.inputs.length+").");for(var i=0;i<this.inputs.length;++i)o.add(this.inputs[i],t[i])}else for(var a=0,s=this.inputs;a<s.length;a++){var u=s[a],l=t[u.name];if(null==l)throw new Uf("No value is provided for the model's input "+u.name);o.add(u,l)}var c=Ag(r,o);return n?c:c[0]},e.prototype.retrieveSymbolicTensors=function(t){for(var e=Hf(null,t.length),n=t.length,r=0,o=this.layers;r<o.length;r++){for(var i=o[r],a=Array.isArray(i.output)?i.output:[i.output],s=a.map(function(t){return t.name}),u=0;u<t.length;++u){var l=s.indexOf(t[u]);if(-1!==l&&(e[u]=a[l],n--),0===n)break}if(0===n)break}if(n>0){var c=[];throw e.forEach(function(e,n){null==e&&c.push(t[n])}),new Uf("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(c))}return e},e.prototype.predictLoop=function(t,e,n){var r=this;return void 0===e&&(e=32),void 0===n&&(n=!1),Object(Sf.id)(function(){var o=r.checkNumSamples(t);if(n)throw new Wf("Verbose predictLoop() is not implemented yet.");for(var i=Rg(o,e),a=[],s=function(e){var n=Object(Sf.id)(function(){var n=Mg(t,i[e][0],i[e][1]),o=[];if(Array.isArray(n))for(var a=0;a<n.length;++a)o.push({key:r.inputs[a],value:n[a]});else o.push({key:r.inputs[0],value:n});var s=new Ig(o);return Ag(r.outputs,s)});if(0===e)for(var o=0,s=n;o<s.length;o++)a.push(s[o]);else for(var u=0;u<n.length;++u)a[u]=Ud(a[u],n[u])},u=0;u<i.length;++u)s(u);return Kf(a)})},e.prototype.predict=function(t,e){return void 0===e&&(e={}),jg(t,this.inputNames,this.feedInputShapes,!1),this.predictLoop(t,null==e.batchSize?32:e.batchSize)},e.prototype.predictOnBatch=function(t){return jg(t,this.inputNames,this.feedInputShapes,!0),this.predictLoop(t,t.shape[0])},e.prototype.standardizeUserData=function(t,e,n,r){if(void 0===n&&(n=!0),null==this.optimizer)throw new Vf("You must compile a model before training/testing. Use Model.compile(modelCompileConfig).");for(var o=[],i=0;i<this.feedOutputShapes.length;++i){var a=this.feedOutputShapes[i];o.push(this.feedLossFns[i]===Ym?a.slice(0,a.length-1).concat([1]):a)}if(function(t,e,n){var r=nd(t.map(function(t){return t.shape[0]}));r.sort();var o=nd(e.map(function(t){return t.shape[0]}));if(o.sort(),r.length>1)throw new Uf("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map(function(t){return t.shape})));if(o.length>1)throw new Uf("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map(function(t){return t.shape})));if(r.length>0&&o.length>0&&!Sf.rd.arraysEqual(r,o))throw new Uf("Input Tensors should have the same number of samples as target Tensors. Found "+r[0]+" input sample(s) and "+o[0]+" target sample(s).")}(t=Tg(t,this.feedInputNames,this.feedInputShapes,!1,"input"),e=Tg(e,this.feedOutputNames,o,!1,"target")),function(t,e,n){for(var r=[Um,Zm,Xm],o=0;o<t.length;++o){var i=t[o],a=e[o],s=n[o];if(null!=a){if(a===Xm&&1===i.shape[i.shape.length-1])throw new Uf("You are passing a target array of shape "+i.shape+" while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(a))for(var u=i.shape.slice(1),l=s.slice(1),c=0;c<u.length;++c){var p=l[c];if(null!=p&&u[c]!==p)throw new Uf("A target Tensor with shape "+i.shape+" was passed for an output of shape "+s+", while using a loss function that expects targets to have the same shape as the output.")}}}}(e,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&t[0].shape[0]%r!=0)throw new Uf("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+r+". Found: "+t[0].shape[0]+" sample(s).");return[t,e,null]},e.prototype.fitLoop=function(t,e,n,r,o,i,a,s,u,l,c,p,h,f){return kf(this,void 0,void 0,function(){var d,m,g,v,y,b,w,_=this;return Nf(this,function(x){switch(x.label){case 0:if(null==r&&(r=32),null==o&&(o=1),null==l&&(l=!0),null==p&&(p=0),d=!1,null!=s&&null!=u&&(d=!0),null!=f&&(d=!0,null==h))throw new Uf("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");if(null!=(m=this.checkNumSamples(e,r,h,"steps_per_epoch"))&&(g=Dd(0,m)),this.history=new Bm,a=(a=null==a?[new zm]:[new zm].concat(a)).concat([this.history]),i>0)throw new Wf("Verbose mode is not implemented yet.");return(v=new Lm(a)).setModel(this),v.setParams({epochs:o,initialEpoch:p,steps:h,verbose:i,doValidation:d,metrics:c}),[4,v.onTrainBegin()];case 1:x.sent(),this.stopTraining=!1,y=function(o){var i,a,c,p,f;return Nf(this,function(y){switch(y.label){case 0:return[4,v.onEpochBegin(o)];case 1:if(y.sent(),i={},null==h)return[3,2];throw new Wf("stepsPerEpoch mode is not implemented yet.");case 2:if("batch"===l)throw new Wf("batch shuffling is not implemneted yet");l&&Sf.rd.shuffle(g),a=Object(Sf.bd)(g),c=Rg(m,r),p=function(o){var l;return Nf(this,function(p){switch(p.label){case 0:return[4,v.onBatchBegin(o,l={})];case 1:return p.sent(),Object(Sf.id)(function(){var p=c[o][0],h=c[o][1],f=zd(a,p,h-p);l.batch=o,l.size=h-p;for(var m=Dg(e,f),g=t(m),v=0;v<n.length;++v){var y=n[v],b=g[v];l[y]=b,Object(Sf.eb)(b)}if(o===c.length-1&&d){var w=_.testLoop(s,u,r);for(v=0;v<n.length;++v)y=n[v],b=w[v],Object(Sf.eb)(b),i["val_"+y]=b}}),[4,v.onBatchEnd(o,l)];case 2:return p.sent(),function(t){if(null!=t)for(var e in t){var n=t[e];"number"!=typeof n&&n.dispose()}}(l),b.stopTraining?[2,"break"]:[2]}})},f=0,y.label=3;case 3:return f<c.length?[5,p(f)]:[3,6];case 4:if("break"===y.sent())return[3,6];y.label=5;case 5:return++f,[3,3];case 6:a.dispose(),y.label=7;case 7:return[4,v.onEpochEnd(o,i)];case 8:return y.sent(),b.stopTraining?[2,"break"]:[2]}})},b=this,w=p,x.label=2;case 2:return w<o?[5,y(w)]:[3,5];case 3:if("break"===x.sent())return[3,5];x.label=4;case 4:return++w,[3,2];case 5:return[4,v.onTrainEnd()];case 6:return x.sent(),[4,this.history.syncData()];case 7:return x.sent(),[2,this.history]}})})},e.prototype.testLoop=function(t,e,n,r,o){var i=this;return void 0===r&&(r=0),Object(Sf.id)(function(){var a=i.checkNumSamples(e,n,o,"steps"),s=[];if(1===r)throw new Wf("Verbose mode is not implemented yet.");if(null!=o)throw new Wf("steps mode in testLoop() is not implemented yet");for(var u=Rg(a,n),l=Object(Sf.bd)(Dd(0,a)),c=0;c<u.length;++c){var p=u[c][0],h=u[c][1],f=zd(l,p,h-p),d=Dg(e,f),m=t(d);if(0===c)for(var g=0;g<m.length;++g)s.push(Bf(0));for(g=0;g<m.length;++g){var v=m[g];s[g]=Object(Sf.s)(s[g],Object(Sf.Kb)(Bf(h-p),v))}}for(g=0;g<s.length;++g)s[g]=Object(Sf.Da)(s[g],Bf(a));return s})},e.prototype.getDedupedMetricsNames=function(){for(var t=this.metricsNames,e=[],n=0;n<t.length;++n){var r=t[n],o=r;$f(t,r)>1&&(o+="_"+$f(t.slice(0,n),r)),e.push(o)}return e},e.prototype.makeTestFunction=function(){var t=this;this.testFunction=function(e){return Object(Sf.id)(function(){for(var n,r=[],o=e.slice(0,t.inputs.length),i=e.slice(t.inputs.length,t.inputs.length+t.outputs.length),a=[],s=0;s<t.inputs.length;++s)a.push({key:t.inputs[s],value:o[s]});var u=new Ig(a),l=Ag(t.outputs,u);for(s=0;s<t.lossFunctions.length;++s){var c=t.lossFunctions[s],p=Object(Sf.Bb)(c(i[s],l[s]));n=0===s?p:Object(Sf.s)(n,p),r.push(n)}for(s=0;s<t.metricsTensors.length;++s){var h=t.metricsTensors[s][0],f=t.metricsTensors[s][1],d=Object(Sf.Bb)(h(i[f],l[f]));r.push(d)}return r})}},e.prototype.fit=function(t,e,n){return void 0===n&&(n={}),kf(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,p,h,f,d,m,g,v,y,b,w,_,x=this;return Nf(this,function(O){switch(O.label){case 0:if(o=this.standardizeUserData(t,e,!1,r=null==n.batchSize?32:n.batchSize),i=o[0],a=o[1],s=!1,p=!1,null!=n.validationData&&n.validationData.length>0){if(s=!0,2!==n.validationData.length)throw 3===n.validationData.length?new Wf("validationData including sample weights is not supported yet."):new Uf("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+n.validationData+" is invalid.");h=this.standardizeUserData(u=n.validationData[0],l=n.validationData[1],!0,r),c=(u=h[0]).concat(l=h[1])}else null!=n.validationSplit&&n.validationSplit>0&&n.validationSplit<1?(s=!0,f=Math.floor(i[0].shape[0]*(1-n.validationSplit)),u=Mg(i,f,d=i[0].shape[0]),i=Mg(i,0,f),l=Mg(a,f,d),a=Mg(a,0,f),p=!0,c=u.concat(l)):null!=n.validationSteps&&(s=!0);return m=i.concat(a),this.checkTrainableWeightsConsistency(),g=function(t){var e=t.slice(0,x.inputs.length),n=t.slice(x.inputs.length,x.inputs.length+x.outputs.length),r=[],o=x.collectedTrainableWeights.map(function(t){return t.read()});return[x.optimizer.minimize(function(){for(var t=[],o=0;o<x.inputs.length;++o)t.push({key:x.inputs[o],value:e[o]});var i,a=new Ig(t),s=Ag(x.outputs,a,{training:!0});for(o=0;o<x.lossFunctions.length;++o){var u=(0,x.lossFunctions[o])(n[o],s[o]);Object(Sf.Bb)(u),i=0===o?u:Object(Sf.s)(i,u)}for(o=0;o<x.metricsTensors.length;++o){var l=x.metricsTensors[o][0],c=x.metricsTensors[o][1],p=Object(Sf.Bb)(l(n[c],s[c]));Object(Sf.eb)(p),r.push(p)}return i=Object(Sf.Bb)(i),x.calculateLosses().forEach(function(t){i=Object(Sf.s)(i,t)}),i},!0,o)].concat(r)},v=this.getDedupedMetricsNames(),s?(this.makeTestFunction(),y=this.testFunction,b=v.slice().concat(v.map(function(t){return"val_"+t}))):(y=null,c=[],b=v.slice()),w=function(t){return null==t?null:t instanceof jm?[t]:Array.isArray(t)&&t[0]instanceof jm?t:Qf(t).map(function(t){return new Fm(t)})}(n.callbacks),[4,this.fitLoop(g,m,v,r,n.epochs,n.verbose,w,y,c,n.shuffle,b,n.initialEpoch,null,null)];case 1:return _=O.sent(),p&&(c.forEach(function(t){return t.dispose()}),i.forEach(function(t){return t.dispose()}),a.forEach(function(t){return t.dispose()})),[2,_]}})})},e.prototype.getNamedWeights=function(t){for(var e={},n=null!=t&&t.trainableOnly,r=n?this.trainableWeights:this.weights,o=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||(e[r[i].originalName]=o[i]);return e},e.prototype.save=function(t,e){return kf(this,void 0,void 0,function(){var n,r,o;return Nf(this,function(i){switch(i.label){case 0:if("string"==typeof t){if(0===(n=Sf.db.getSaveHandlers(t)).length)throw new Uf("Cannot find any save handlers for URL '"+t+"'");if(n.length>1)throw new Uf("Found more than one ("+n.length+") save handlers for URL '"+t+"'");t=n[0]}if(null==t.save)throw new Uf("Model.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[4,Sf.db.encodeWeights(this.getNamedWeights(e))];case 1:return r=i.sent(),o=this.toJSON(null,!1),[2,t.save({modelTopology:o,weightData:r.data,weightSpecs:r.specs})]}})})},e.className="Model",e}(Cg);Sf.yc.SerializationMap.register(Lg);var zg=function(t){function e(e){var n=t.call(this,{inputs:[],outputs:[]})||this;if(e=e||{},n.trainable=!0,n._updatable=!0,n.built=!1,n.name=null!=e.name?e.name:jf("sequential_"),null!=e.layers)for(var r=0,o=e.layers;r<o.length;r++)n.add(o[r]);return n}return If(e,t),e.prototype.add=function(t){var n,r=t instanceof e||t instanceof Lg;if(r){if(1!==(n=t).outputs.length)throw new Uf("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new Uf("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===t.inboundNodes.length){if(null==t.batchInputShape)throw new Uf("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var o=Mm({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(o)}if(r)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==t.inboundNodes.length)throw new Uf("A layer added to a Sequential model must not already be connected somewhere else. Model received layer "+t.name+" which has "+t.inboundNodes.length+" pre-existing inbound connections.");if(1!==t.inboundNodes[0].outputTensors.length)throw new Uf("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=function t(e,n,r){if((null==n||null!=r&&r>0)&&(n=e.sourceLayer,r=e.nodeIndex),0===n.inboundNodes.length)return[e];var o=n.inboundNodes[r];if(0===o.inboundLayers.length)return o.inputTensors;for(var i=[],a=0;a<o.inboundLayers.length;a++)for(var s=0,u=t(o.inputTensors[a],o.inboundLayers[a],o.nodeIndices[a]);s<u.length;s++){var l=u[s];-1===i.indexOf(l)&&i.push(l)}return i}(this.outputs[0])}this.inboundNodes=[],new Nm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Hf(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(function(t){return t.shape}),outputShapes:this.outputs[0].shape})}else{var i=t.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1},e.prototype.pop=function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},e.prototype.call=function(t,e){return null==this.model&&this.build(),this.model.call(t,e)},e.prototype.build=function(t){if(_m(t),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Lg({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.model.updatable=this.updatable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},e.prototype.countParams=function(){return this.built||this.build(),t.prototype.countParams.call(this)},e.prototype.summary=function(e,n,r){void 0===r&&(r=console.log),this.built||this.build(),t.prototype.summary.call(this,e,n,r)},e.prototype.setWeights=function(t){null==this.model&&this.build(),this.model.setWeights(t)},Object.defineProperty(e.prototype,"updatable",{get:function(){return this._updatable},set:function(t){this.built&&(this.model.updatable=t),this._updatable=t},enumerable:!0,configurable:!0}),e.prototype.evaluate=function(t,e,n){if(void 0===n&&(n={}),!this.built)throw new Vf("The model needs to be compiled before being used.");return this.model.evaluate(t,e,n)},e.prototype.predict=function(t,e){return void 0===e&&(e={}),null==this.model&&this.build(),this.model.predict(t,e)},e.prototype.predictOnBatch=function(t){return null==this.model&&this.build(),this.model.predictOnBatch(t)},e.prototype.compile=function(t){this.build(),this.model.compile(t),this.optimizer=this.model.optimizer,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},e.prototype.fit=function(t,e,n){return void 0===n&&(n={}),kf(this,void 0,void 0,function(){return Nf(this,function(r){if(!this.built)throw new Vf("The model needs to be compiled before being used.");return[2,this.model.fit(t,e,n)]})})},e.fromConfig=function(t,n){var r=new t({});if(!(r instanceof e))throw new Uf("Sequential.fromConfig called on non-Sequential input: "+r);if(!(n instanceof Array))throw new Uf("Sequential.fromConfig called without an array of configs");if(null==n[0].className||"Merge"===n[0].className)throw new Uf("Legacy serialization format not supported yet.");for(var o=0,i=n;o<i.length;o++){var a=bg(i[o]);r.add(a)}return r},e.prototype.getConfig=function(){for(var t=[],e=0,n=this.layers;e<n.length;e++){var r=n[e];t.push({className:r.getClassName(),config:r.getConfig()})}return t},e.className="Sequential",e}(Lg);function Bg(t){return new Lg(t)}function Fg(t){return new zg(t)}function Vg(t){return function(t){return kf(this,void 0,void 0,function(){var e;return Nf(this,function(n){if("string"==typeof t){if(0===(e=Sf.db.getLoadHandlers(t)).length)e.push(Sf.db.browserHTTPRequest(t));else if(e.length>1)throw new Uf("Found more than one ("+e.length+") load handlers for URL '"+t+"'");t=e[0]}return[2,function(t,e){return kf(this,void 0,void 0,function(){var e,n,r,o,i;return Nf(this,function(a){switch(a.label){case 0:if(null==t.load)throw new Uf("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,t.load()];case 1:if(e=a.sent(),null!=(n=e.modelTopology).model_config&&(n=n.model_config),r=bg(function t(e,n){if(null===e)return null;if("string"==typeof e)return Yf(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var r=[],o=e.length,i=0;i<o;++i){var a=e[i];wg(n,i,a)?r.push(a):r.push(t(a,n))}return r}for(var s={},u=0,l=Object.keys(e);u<l.length;u++){var c=l[u],p=e[c];if("name"===c&&"string"==typeof p)s[c]=p;else{var h=Yf(c);s[h]=t(p,h)}}return s}(n),void 0),null!=e.weightData){if(null==e.weightSpecs)throw new Uf("Model artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");o=!1,i=!0,r.loadWeights(Sf.db.decodeWeights(e.weightData,e.weightSpecs),o,i)}return[2,r]}})})}(t)]})})}(t)}function Ug(t){return Mm(t)}Sf.yc.SerializationMap.register(zg);var Wg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.getConfig=function(){return{}},e}(Sf.yc.Serializable),qg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.apply=function(t,e){return void 0===e&&(e=1),function(t,e){if(void 0===e&&(e=1),1!==e)throw new Wf("Support for alpha values other than 1 ("+e+") is not implemented yet.");return Object(Sf.Ha)(t)}(t,e)},e.className="elu",e}(Wg);Sf.yc.SerializationMap.register(qg);var Hg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.apply=function(t){return Object(Sf.wc)(t)},e.className="selu",e}(Wg);Sf.yc.SerializationMap.register(Hg);var Gg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.apply=function(t){return Object(Sf.mc)(t)},e.className="relu",e}(Wg);Sf.yc.SerializationMap.register(Gg);var $g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.apply=function(t){return Object(Sf.id)(function(){return Object(Sf.Eb)(Bf(6),Object(Sf.mc)(t))})},e.className="relu6",e}(Wg);Sf.yc.SerializationMap.register($g);var Kg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.apply=function(t){return t},e.className="linear",e}(Wg);Sf.yc.SerializationMap.register(Kg);var Qg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.apply=function(t){return Object(Sf.Ac)(t)},e.className="sigmoid",e}(Wg);Sf.yc.SerializationMap.register(Qg);var Xg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.apply=function(t){return function(t){return Object(Sf.id)(function(){var e=Object(Sf.s)(Bf(.5),Object(Sf.Kb)(Bf(.2),t));return Object(Sf.M)(e,0,1)})}(t)},e.className="hardSigmoid",e}(Wg);Sf.yc.SerializationMap.register(Xg);var Yg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.apply=function(t){return Object(Sf.Lc)(t)},e.className="softplus",e}(Wg);Sf.yc.SerializationMap.register(Yg);var Zg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.apply=function(t){return function(t){return Object(Sf.id)(function(){return Object(Sf.Da)(t,Object(Sf.s)(Bf(1),Object(Sf.p)(t)))})}(t)},e.className="softsign",e}(Wg);Sf.yc.SerializationMap.register(Zg);var Jg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.apply=function(t){return Object(Sf.Zc)(t)},e.className="tanh",e}(Wg);Sf.yc.SerializationMap.register(Jg);var tv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.apply=function(t,e){return void 0===e&&(e=-1),Object(Sf.Kc)(t,e)},e.className="softmax",e}(Wg);function ev(t){return t.getClassName()}function nv(t,e){return void 0===e&&(e={}),td(t,Sf.yc.SerializationMap.getMap().classNameMap,e,"activation")}function rv(t){return null==t?nv({className:"linear",config:{}}):"string"==typeof t?nv({className:t,config:{}}):t instanceof Wg?t:nv(t)}Sf.yc.SerializationMap.register(tv);var ov=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.DEFAULT_ALPHA=.3,null==e&&(e={}),n.alpha=null==e.alpha?n.DEFAULT_ALPHA:e.alpha,n}return If(e,t),e.prototype.call=function(t,e){var n=wm(t);return Object(Sf.fb)(n,this.alpha)},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={alpha:this.alpha},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="LeakyReLU",e}(Tm);Sf.yc.SerializationMap.register(ov);var iv=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;if(n.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==n.DEFAULT_ALPHA)throw new Wf("Non-default alpha value ("+e.alpha+") is not supported by the ELU layer yet.");return n.alpha=null==e.alpha?n.DEFAULT_ALPHA:e.alpha,n}return If(e,t),e.prototype.call=function(t,e){var n=wm(t);return Object(Sf.Ha)(n)},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={alpha:this.alpha},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="ELU",e}(Tm);Sf.yc.SerializationMap.register(iv);var av=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.DEFAULT_THETA=1,null==e&&(e={}),n.theta=null==e.theta?n.DEFAULT_THETA:e.theta,n.thetaTensor=Bf(n.theta),n}return If(e,t),e.prototype.call=function(t,e){var n=wm(t);return n.mul(jd(n.greater(this.thetaTensor),"float32"))},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={theta:this.theta},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="ThresholdedReLU",e}(Tm);Sf.yc.SerializationMap.register(av);var sv=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.DEFAULT_AXIS=1,null==e&&(e={}),n.softmax=(new tv).apply,n.axis=null==e.axis?n.DEFAULT_AXIS:e.axis,n}return If(e,t),e.prototype.call=function(t,e){var n=wm(t);return this.softmax(n,this.axis)},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={axis:this.axis},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Softmax",e}(Tm);Sf.yc.SerializationMap.register(sv);var uv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e}(Sf.yc.Serializable),lv=function(t){function e(e){var n=t.call(this)||this,r=null==e||null==e.l1?.01:e.l1,o=null==e||null==e.l2?.01:e.l2;return n.hasL1=0!==r,n.hasL2=0!==o,n.l1=Bf(r),n.l2=Bf(o),n}return If(e,t),e.prototype.apply=function(t){var e=this;return Object(Sf.id)(function(){var n=Object(Sf.zd)([1]);return e.hasL1&&(n=Object(Sf.s)(n,Object(Sf.Xc)(Object(Sf.Kb)(e.l1,Object(Sf.p)(t))))),e.hasL2&&(n=Object(Sf.s)(n,Object(Sf.Xc)(Object(Sf.Kb)(e.l2,$d(t))))),n.asScalar()})},e.prototype.getConfig=function(){return{l1:this.l1.dataSync()[0],l2:this.l2.dataSync()[0]}},e.fromConfig=function(t,e){return new t({l1:e.l1,l2:e.l2})},e.className="L1L2",e}(uv);Sf.yc.SerializationMap.register(lv);var cv={l1l2:"L1L2"};function pv(t){return Jf(t)}function hv(t,e){return void 0===e&&(e={}),td(t,Sf.yc.SerializationMap.getMap().classNameMap,e,"regularizer")}function fv(t){return null==t?null:"string"==typeof t?hv({className:t in cv?cv[t]:t,config:{}}):t instanceof uv?t:hv(t)}function dv(t,e,n){if("number"==typeof t)return Hf(t,e);if(t.length!==e)throw new Uf("The "+n+" argument must be a tuple of "+e+" integers. Received: "+t.length+" elements.");for(var r=0;r<e;++r){var o=t[r];if(!Nd(o))throw new Uf("The "+n+" argument must be a tuple of "+e+" integers. Received: "+JSON.stringify(t)+" including a non-integer number "+o)}return t}function mv(t,e,n,r,o){return void 0===o&&(o=1),null==t?t:Math.floor((("same"===n?t:t-(e+(e-1)*(o-1))+1)+r-1)/r)}function gv(t,e,n,r){if(null==t)return null;if("valid"===r)t=t*e+Md([n-e,0]);else{if("same"!==r)throw new Uf("Unsupport padding mode: "+r+".");t*=e}return t}function vv(t,e){return Object(Sf.id)(function(){return bd(e),"channelsFirst"===e?Object(Sf.nd)(t,[0,2,3,1]):t})}var yv=function(t){function e(n,r){var o=t.call(this,r)||this;if(o.bias=null,o.DEFAULT_KERNEL_INITIALIZER="glorotNormal",o.DEFAULT_BIAS_INITIALIZER="zeros",e.verifyConfig(r),o.rank=n,1!==o.rank&&2!==o.rank)throw new Wf("Convolution layer for rank other than 1 or 2 ("+o.rank+") is not implemented yet.");if(o.kernelSize=dv(r.kernelSize,n,"kernelSize"),o.strides=dv(null==r.strides?1:r.strides,n,"strides"),o.padding=null==r.padding?"valid":r.padding,_d(o.padding),o.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,bd(o.dataFormat),o.activation=rv(r.activation),o.useBias=null==r.useBias||r.useBias,o.biasInitializer=gm(r.biasInitializer||o.DEFAULT_BIAS_INITIALIZER),o.biasConstraint=md(r.biasConstraint),o.biasRegularizer=fv(r.biasRegularizer),o.activityRegularizer=fv(r.activityRegularizer),o.dilationRate=dv(null==r.dilationRate?1:r.dilationRate,n,"dilationRate"),1===o.rank&&Array.isArray(o.dilationRate)&&1!==o.dilationRate.length)throw new Uf("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(o.dilationRate));if(2===o.rank)if("number"==typeof o.dilationRate)o.dilationRate=[o.dilationRate,o.dilationRate];else if(2!==o.dilationRate.length)throw new Uf("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(o.dilationRate));return o}return If(e,t),e.verifyConfig=function(t){if(Gf("kernelSize"in t,"required key 'kernelSize' not in config"),"number"!=typeof t.kernelSize&&!id(t.kernelSize,"number",1,2))throw new Uf("BaseConv expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(t.kernelSize)+".")},e.prototype.getConfig=function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:ev(this.activation),useBias:this.useBias,biasInitializer:mm(this.biasInitializer),biasRegularizer:pv(this.biasRegularizer),activityRegularizer:pv(this.activityRegularizer),biasConstraint:fd(this.biasConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(Tm),bv=function(t){function e(n,r){var o=t.call(this,n,r)||this;return o.kernel=null,e.verifyConfig(r),o.filters=r.filters,o.kernelInitializer=gm(r.kernelInitializer||o.DEFAULT_KERNEL_INITIALIZER),o.kernelConstraint=md(r.kernelConstraint),o.kernelRegularizer=fv(r.kernelRegularizer),o}return If(e,t),e.prototype.build=function(t){t=_m(t);var e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new Uf("The channel dimension of the input should be defined. Found "+t[e]);var n,r=t[e],o=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(n={},n[e]=r,n)}],this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){var e;t=wm(t);var r=null==n.bias?null:n.bias.read();if(1===n.rank)e=function(t,e,n,r,o,i,a){return void 0===r&&(r=1),void 0===o&&(o="valid"),void 0===a&&(a=1),Object(Sf.id)(function(){if(null==i&&(i="channelsLast"),bd(i),3!==t.shape.length)throw new Uf("The input of a conv1dWithBias operation should be 3, but is "+t.shape.length+" instead.");if(3!==e.shape.length)throw new Uf("The kernel for a conv1dWithBias operation should be 3, but is "+e.shape.length+" instead");if(null!=n&&1!==n.shape.length)throw new Uf("The bias for a conv1dWithBias operation should be 1, but is "+e.shape.length+" instead");if("channelsFirst"===i&&(t=Object(Sf.nd)(t,[0,2,1])),"causal"===o)throw new Wf("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=Object(Sf.T)(t,e,r,"same"===o?"same":"valid","NWC",a);return null!=n&&(s=Kd(s,n)),s})}(t,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)e=function(t,e,n,r,o,i,a){return void 0===r&&(r=[1,1]),void 0===o&&(o="valid"),Object(Sf.id)(function(){if(null==i&&(i="channelsLast"),bd(i),3!==t.rank&&4!==t.rank)throw new Uf("conv2dWithBias expects input to be of rank 3 or 4, but received "+t.rank+".");if(3!==e.rank&&4!==e.rank)throw new Uf("conv2dWithBias expects kernel to be of rank 3 or 4, but received "+t.rank+".");var s=vv(t,i);if("causal"===o)throw new Wf("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return s=Object(Sf.U)(s,e,r,"same"===o?"same":"valid","NHWC",a),null!=n&&(s=Kd(s,n)),"channelsFirst"===i&&(s=Object(Sf.nd)(s,[0,3,1,2])),s})}(t,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else if(3===n.rank)throw new Wf("3D convolution is not implemented yet.");return null!=n.activation&&(e=n.activation.apply(e)),e})},e.prototype.computeOutputShape=function(t){t=_m(t);for(var e=[],n="channelsLast"===this.dataFormat?t.slice(1,t.length-1):t.slice(2),r=0;r<n.length;++r){var o=mv(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);e.push(o)}var i=[t[0]];return"channelsLast"===this.dataFormat?(i=i.concat(e)).push(this.filters):(i.push(this.filters),i=i.concat(e)),i},e.prototype.getConfig=function(){var e={filters:this.filters,kernelInitializer:mm(this.kernelInitializer),kernelRegularizer:pv(this.kernelRegularizer),kernelConstraint:fd(this.kernelConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.verifyConfig=function(t){if(!("filters"in t)||"number"!=typeof t.filters||t.filters<1)throw new Uf("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(t.filters))},e}(yv),wv=function(t){function e(n){var r=t.call(this,2,n)||this;return e.verifyConfig(n),r}return If(e,t),e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,e},e.verifyConfig=function(t){if("number"!=typeof t.kernelSize&&!id(t.kernelSize,"number",1,2))throw new Uf("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(t.kernelSize)+".")},e.className="Conv2D",e}(bv);Sf.yc.SerializationMap.register(wv);var _v=function(t){function e(e){var n=t.call(this,e)||this;if(n.inputSpec=[new Im({ndim:4})],"same"!==n.padding&&"valid"!==n.padding)throw new Uf("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+n.padding);return n}return If(e,t),e.prototype.build=function(t){if(4!==(t=_m(t)).length)throw new Uf("Input should have rank 4; Received input shape: "+JSON.stringify(t));var e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new Uf("The channel dimension of the inputs should be defined. Found `None`.");var n,r=t[e],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Im({ndim:4,axes:(n={},n[e]=r,n)})],this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){var e=wm(t);if(4!==e.shape.length)throw new Uf("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+e.shape.length);var r,o,i=e.shape;"channelsFirst"===n.dataFormat?(r=2,o=3):(r=1,o=2);var a=i[o],s=n.kernelSize[1],u=n.strides[1],l=[i[0],gv(i[r],n.strides[0],n.kernelSize[0],n.padding),gv(a,u,s,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(e=Object(Sf.nd)(e,[0,2,3,1]));var c=Object(Sf.V)(e,n.kernel.read(),l,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(c=Object(Sf.nd)(c,[0,3,1,2])),null!=n.bias&&(c=Kd(c,n.bias.read(),n.dataFormat)),null!=n.activation&&(c=n.activation.apply(c)),c})},e.prototype.computeOutputShape=function(t){var e,n,r,o=(t=_m(t)).slice();"channelsFirst"===this.dataFormat?(e=1,n=2,r=3):(e=3,n=1,r=2);var i=this.kernelSize[0],a=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return o[e]=this.filters,o[n]=gv(o[n],s,i,this.padding),o[r]=gv(o[r],u,a,this.padding),o},e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.dilationRate,e},e.className="Conv2DTranspose",e}(wv);Sf.yc.SerializationMap.register(_v);var xv=function(t){function e(e){return t.call(this,2,e)||this}return If(e,t),e.className="SeparableConv2D",e}(function(t){function e(e,n){var r=t.call(this,e,n)||this;if(r.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",r.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",r.depthwiseKernel=null,r.pointwiseKernel=null,null==n.filters)throw new Uf("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=n.kernelInitializer||null!=n.kernelRegularizer||null!=n.kernelConstraint)throw new Uf("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=n.padding&&"same"!==n.padding&&"valid"!==n.padding)throw new Uf("SeparableConv"+r.rank+"D supports only padding modes: 'same' and 'valid', but received "+JSON.stringify(n.padding));return r.depthMultiplier=null==n.depthMultiplier?1:n.depthMultiplier,r.depthwiseInitializer=gm(n.depthwiseInitializer||r.DEFAULT_DEPTHWISE_INITIALIZER),r.depthwiseRegularizer=fv(n.depthwiseRegularizer),r.depthwiseConstraint=md(n.depthwiseConstraint),r.pointwiseInitializer=gm(n.depthwiseInitializer||r.DEFAULT_POINTWISE_INITIALIZER),r.pointwiseRegularizer=fv(n.pointwiseRegularizer),r.pointwiseConstraint=md(n.pointwiseConstraint),r}return If(e,t),e.prototype.build=function(t){if((t=_m(t)).length<this.rank+2)throw new Uf("Inputs to SeparableConv"+this.rank+"D should have rank "+(this.rank+2)+", but received input shape: "+JSON.stringify(t));var e,n="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[n]||t[n]<0)throw new Uf("The channel dimension of the inputs should be defined, but found "+JSON.stringify(t[n]));for(var r=t[n],o=this.kernelSize.concat([r,this.depthMultiplier]),i=[],a=0;a<this.rank;++a)i.push(1);i.push(r*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.inputSpec=[new Im({ndim:this.rank+2,axes:(e={},e[n]=r,e)})],this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){var e;if(t=wm(t),1===n.rank)throw new Wf("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(t=Object(Sf.nd)(t,[0,2,3,1])),e=Object(Sf.xc)(t,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(e=Kd(e,n.bias.read(),n.dataFormat)),null!=n.activation&&(e=n.activation.apply(e)),"channelsFirst"===n.dataFormat&&(e=Object(Sf.nd)(e,[0,3,1,2])),e})},e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=mm(this.depthwiseInitializer),e.pointwiseInitializer=mm(this.pointwiseInitializer),e.depthwiseRegularizer=pv(this.depthwiseRegularizer),e.pointwiseRegularizer=pv(this.pointwiseRegularizer),e.depthwiseConstraint=fd(this.depthwiseConstraint),e.pointwiseConstraint=fd(this.pointwiseConstraint),e},e.className="SeparableConv",e}(bv));Sf.yc.SerializationMap.register(xv);var Ov=function(t){function e(n){var r=t.call(this,1,n)||this;return e.verifyConfig(n),r.inputSpec=[{ndim:3}],r}return If(e,t),e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,delete e.dataFormat,e},e.verifyConfig=function(t){if("number"!=typeof t.kernelSize&&!id(t.kernelSize,"number",1,1))throw new Uf("Conv1D expects config.kernelSize to be number or number[] with length 1, but received "+JSON.stringify(t.kernelSize)+".")},e.className="Conv1D",e}(bv);Sf.yc.SerializationMap.register(Ov);var Ev=function(t){function e(e){var n=t.call(this,e)||this;return n.cropping="number"==typeof e.cropping?[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:e.cropping,n.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,n.inputSpec=[{ndim:4}],n}return If(e,t),e.prototype.computeOutputShape=function(t){return"channelsFirst"===this.dataFormat?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){return t=wm(t),"channelsLast"===n.dataFormat?Fd(Fd(t,n.cropping[0][0],t.shape[1]-n.cropping[0][0]-n.cropping[0][1],2),n.cropping[1][0],t.shape[2]-n.cropping[1][1]-n.cropping[1][0],3):Fd(Fd(t,n.cropping[0][0],t.shape[2]-n.cropping[0][0]-n.cropping[0][1],3),n.cropping[1][0],t.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)})},e.prototype.getConfig=function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Cropping2D",e}(Tm);Sf.yc.SerializationMap.register(Ev);var Sv=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_SIZE=[2,2],n.inputSpec=[{ndim:4}],n.size=null==e.size?n.DEFAULT_SIZE:e.size,n.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,n}return If(e,t),e.prototype.computeOutputShape=function(t){if("channelsFirst"===this.dataFormat){var e=null==t[2]?null:this.size[0]*t[2],n=null==t[3]?null:this.size[1]*t[3];return[t[0],t[1],e,n]}return[t[0],e=null==t[1]?null:this.size[0]*t[1],n=null==t[2]?null:this.size[1]*t[2],t[3]]},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){var e=wm(t),r=e.shape;if("channelsFirst"===n.dataFormat){e=Object(Sf.nd)(e,[0,2,3,1]);var o=n.size[0]*r[2],i=n.size[1]*r[3],a=e.resizeNearestNeighbor([o,i]);return Object(Sf.nd)(a,[0,3,1,2])}return e.resizeNearestNeighbor([o=n.size[0]*r[1],i=n.size[1]*r[2]])})},e.prototype.getConfig=function(){var e={size:this.size,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="UpSampling2D",e}(Tm);Sf.yc.SerializationMap.register(Sv);var Cv=function(t){function e(e){var n=t.call(this,2,e)||this;return n.depthwiseKernel=null,n.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,n.depthwiseInitializer=gm(e.depthwiseInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.depthwiseConstraint=md(e.depthwiseConstraint),n.depthwiseRegularizer=fv(e.depthwiseRegularizer),n}return If(e,t),e.prototype.build=function(t){if((t=_m(t)).length<4)throw new Uf("Inputs to DepthwiseConv2D should have rank 4. Received input shape: "+JSON.stringify(t)+".");var e="channelsFirst"===this.dataFormat?1:3;if(null==t[e]||t[e]<0)throw new Uf("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not ("+t[e]+").");var n=t[e];this.depthwiseKernel=this.addWeight("depthwise_kernel",[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier],null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){var e=function(t,e,n,r,o,i){return void 0===n&&(n=[1,1]),void 0===r&&(r="valid"),Object(Sf.id)(function(){null==o&&(o="channelsLast"),bd(o);var i=vv(t,o);if(4!==t.rank)throw new Uf("Input for depthwiseConv2d is required to be 4-D, but is instead "+t.rank+"-D");if(4!==e.rank)throw new Uf("depthwiseKernel is required to be 4-D, but is instead "+e.rank+"-D");return i=Object(Sf.Aa)(i,e,n,"same"===r?"same":"valid","NHWC",null),"channelsFirst"===o&&(i=Object(Sf.nd)(i,[0,3,1,2])),i})}(t=wm(t),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat);return n.useBias&&(e=Kd(e,n.bias.read(),n.dataFormat)),null!=n.activation&&(e=n.activation.apply(e)),e})},e.prototype.computeOutputShape=function(t){t=_m(t);var e="channelsFirst"===this.dataFormat?t[3]:t[2],n="channelsFirst"===this.dataFormat?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,r=mv("channelsFirst"===this.dataFormat?t[2]:t[1],this.kernelSize[0],this.padding,this.strides[0]),o=mv(e,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[t[0],n,r,o]:[t[0],r,o,n]},e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=mm(this.depthwiseInitializer),e.depthwiseRegularizer=pv(this.depthwiseRegularizer),e.depthwiseConstraint=fd(this.depthwiseRegularizer),e},e.className="DepthwiseConv2D",e}(yv);Sf.yc.SerializationMap.register(Cv);var Iv=function(t){function e(e){var n=t.call(this,e)||this;if(n.rate=Math.max(Math.min(e.rate,1),0),n.rateScalar=Bf(n.rate),n.noiseShape=e.noiseShape,n.seed=e.seed,null!=n.seed)throw new Wf("Non-default seed is not implemented in Dropout layer yet: "+n.seed);return n.supportsMasking=!0,n}return If(e,t),e.prototype.getNoiseShape=function(t){if(null==this.noiseShape)return this.noiseShape;for(var e=t.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?e[r]:this.noiseShape[r]);return n},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){n.invokeCallHook(t,e);var r=wm(t);if(null!=n.noiseShape&&!Sf.rd.arraysEqual(r.shape,n.noiseShape))throw new Wf("Non-default noise shape is not implemented in Dropout layer yet: "+JSON.stringify(n.noiseShape));if(0<n.rate&&n.rate<1){var o=null!=e.training&&e.training,i=n.getNoiseShape(r);return Xd(function(){return Qd(r,n.rateScalar,i,n.seed)},function(){return r},o)}return t})},e.prototype.getConfig=function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Dropout",e}(Tm);Sf.yc.SerializationMap.register(Iv);var Av=function(t){function e(e){var n=t.call(this,e)||this;if(n.activation=null,n.useBias=!0,n.kernel=null,n.bias=null,n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var r=null;null!=e.batchSize&&(r=e.batchSize),n.batchInputShape=[r,e.inputDim]}return n.units=e.units,n.activation=rv(e.activation),null!=e.useBias&&(n.useBias=e.useBias),n.kernelInitializer=gm(e.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.biasInitializer=gm(e.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelConstraint=md(e.kernelConstraint),n.biasConstraint=md(e.biasConstraint),n.kernelRegularizer=fv(e.kernelRegularizer),n.biasRegularizer=fv(e.biasRegularizer),n.activityRegularizer=fv(e.activityRegularizer),n.inputSpec=[{minNDim:2}],n}return If(e,t),e.prototype.build=function(t){var e,n=(t=_m(t))[t.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(e={},e[-1]=n,e)}],this.built=!0},e.prototype.computeOutputShape=function(t){var e=(t=_m(t)).slice();return e[e.length-1]=this.units,e},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){n.invokeCallHook(t,e);var r=Hd(wm(t),n.kernel.read());return null!=n.bias&&(r=Kd(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r)),r})},e.prototype.getConfig=function(){var e={units:this.units,activation:ev(this.activation),useBias:this.useBias,kernelInitializer:mm(this.kernelInitializer),biasInitializer:mm(this.biasInitializer),kernelRegularizer:pv(this.kernelRegularizer),biasRegularizer:pv(this.biasRegularizer),activityRegularizer:pv(this.activityRegularizer),kernelConstraint:fd(this.kernelConstraint),biasConstraint:fd(this.biasConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Dense",e}(Tm);Sf.yc.SerializationMap.register(Av);var kv=function(t){function e(e){var n=t.call(this,e||{})||this;return n.inputSpec=[{minNDim:3}],n}return If(e,t),e.prototype.computeOutputShape=function(t){for(var e=0,n=(t=_m(t)).slice(1);e<n.length;e++)if(null==n[e])throw new Uf('The shape of the input to "Flatten" is not fully defined (got '+t.slice(1)+'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.');return[t[0],Pd(t,1)]},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){return n.invokeCallHook(t,e),function(t){if(t.rank<=1)throw new Uf("batchFlatten requires a minimum rank of 2. Got rank: "+t.rank+".");var e=[t.shape[0],Pd(t.shape,1)];return t.reshape(e)}(wm(t))})},e.className="Flatten",e}(Tm);Sf.yc.SerializationMap.register(kv);var Nv=function(t){function e(e){var n=t.call(this,e)||this;return n.supportsMasking=!0,n.activation=rv(e.activation),n}return If(e,t),e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){n.invokeCallHook(t,e);var r=wm(t);return n.activation.apply(r)})},e.prototype.getConfig=function(){var e={activation:ev(this.activation)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Activation",e}(Tm);Sf.yc.SerializationMap.register(Nv);var Pv=function(t){function e(e){var n=t.call(this,e)||this;return n.n=e.n,n.inputSpec=[{ndim:2}],n}return If(e,t),e.prototype.computeOutputShape=function(t){return[t[0],this.n,t[1]]},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){return function(t,e){return Object(Sf.id)(function(){if(2!==t.shape.length)throw new Uf("repeat() expects a rank-2 tensor, but received a rank-"+t.shape.length+" tensor.");return Wd(Ld(t,1),[1,e,1])})}(t=wm(t),n.n)})},e.prototype.getConfig=function(){var e={n:this.n},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="RepeatVector",e}(Tm);Sf.yc.SerializationMap.register(Pv);var Tv=function(t){function e(e){var n=t.call(this,e)||this;n.targetShape=e.targetShape;for(var r=0;r<n.targetShape.length;++r)n.isUnknown(n.targetShape[r])&&(n.targetShape[r]=null);return n}return If(e,t),e.prototype.isUnknown=function(t){return t<0||null==t},e.prototype.fixUnknownDimension=function(t,e){for(var n="Total size of new array must be unchanged.",r=e.slice(),o=1,i=null,a=0;a<r.length;++a){var s=r[a];if(this.isUnknown(s)){if(null!==i)throw new Uf("Can only specifiy one unknown dimension.");i=a}else o*=s}var u=Pd(t);if(null!==i){if(0===o||u%o!=0)throw new Uf(n);r[i]=u/o}else if(u!==o)throw new Uf(n);return r},e.prototype.computeOutputShape=function(t){for(var e=!1,n=0;n<t.length;++n)if(this.isUnknown(t[n])){e=!0;break}return e?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){n.invokeCallHook(t,e);var r=wm(t),o=r.shape,i=o.slice(0,1).concat(n.fixUnknownDimension(o.slice(1),n.targetShape));return r.reshape(i)})},e.prototype.getConfig=function(){var e={targetShape:this.targetShape},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Reshape",e}(Tm);Sf.yc.SerializationMap.register(Tv);var Rv=function(t){function e(e){var n=t.call(this,e)||this;if(n.embeddings=null,n.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var r=null;null!=e.batchSize&&(r=e.batchSize),n.batchInputShape=null==e.inputLength?[r,null]:[r].concat(Qf(e.inputLength))}return n.inputDim=e.inputDim,n.outputDim=e.outputDim,n.embeddingsInitializer=gm(e.embeddingsInitializer||n.DEFAULT_EMBEDDINGS_INITIALIZER),n.embeddingsRegularizer=fv(e.embeddingsRegularizer),n.activityRegularizer=fv(e.activityRegularizer),n.embeddingsConstraint=md(e.embeddingsConstraint),n.maskZero=e.maskZero,n.inputLength=e.inputLength,n}return If(e,t),e.prototype.build=function(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},e.prototype.warnOnIncompatibleInputShape=function(t){},e.prototype.computeMask=function(t,e){throw new Wf("computeMask has not been implemented for Embedding yet")},e.prototype.computeOutputShape=function(t){if(t=_m(t),null==this.inputLength)return t.concat([this.outputDim]);var e=Qf(this.inputLength);if(e.length!==t.length-1)throw new Uf('"inputLength" is '+this.inputLength+", but received input shape has shape "+t);for(var n=0,r=0;r<e.length;++r){var o=e[r],i=t[r+1];if(null!=o&&null!=i&&o!==i)throw new Uf('"inputLength" is '+this.inputLength+", but received input shape has shape "+t);null==o&&(e[n]=i),n++}return[t[0]].concat(e,[this.outputDim])},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){n.invokeCallHook(t,e);var r=wm(t);return"int32"!==r.dtype&&(r=jd(r,"int32")),Gd(n.embeddings.read(),r.as1D()).reshape(_m(n.computeOutputShape(r.shape)))})},e.prototype.getConfig=function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:mm(this.embeddingsInitializer),embeddingsRegularizer:pv(this.embeddingsRegularizer),activityRegularizer:pv(this.activityRegularizer),embeddingsConstraint:fd(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Embedding",e}(Tm);Sf.yc.SerializationMap.register(Rv);var Mv=function(t){function e(e){var n=t.call(this,e||{})||this;return n.supportsMasking=!0,n}return If(e,t),e.prototype.mergeFunction=function(t){throw new Wf},e.prototype.computeElementwiseOpOutputShape=function(t,e){if(null==t||null==e)return null;if(t.length<e.length)return this.computeElementwiseOpOutputShape(e,t);if(0===e.length)return t;for(var n=t.slice(0,t.length-e.length),r=0;r<e.length;++r){var o=t[t.length-e.length+r],i=e[r];if(null==o||null==i||o<0||i<0)n.push(null);else if(1===o)n.push(i);else if(1===i)n.push(o);else{if(o!==i)throw new Uf("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(e));n.push(o)}}return n},e.prototype.build=function(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[_m(t)]),(t=t).length<2)throw new Uf("A merge layer should be called on an Array of at least 2 inputs. Got "+t.length+" input(s).");for(var e=[],n=0,r=t;n<r.length;n++)null!=(a=r[n])&&null!==a[0]&&e.push(a[0]);if((e=nd(e)).length>1)throw new Uf("Can not merge tensors with different batch sizes. Got tensors with shapes: "+JSON.stringify(t)+".");for(var o=null==t[0]?null:t[0].slice(1),i=1;i<t.length;++i){var a=null==t[i]?null:t[i].slice(1);o=this.computeElementwiseOpOutputShape(o,a)}var s=t.map(function(t){return t.length});this.reshapeRequired=-1!==t.indexOf(null)||1!==nd(s).length},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){if(t=t,n.reshapeRequired){var e=[],r=t.map(function(t){return t.rank});if(-1===r.indexOf(null)){for(var o=Md(r),i=0,a=t;i<a.length;i++){for(var s=(h=a[i]).rank,u=0;u<o-s;++u)h=Ld(h,1);e.push(h)}return n.mergeFunction(e)}for(var l=!1,c=0,p=t;c<p.length;c++){var h;if(null==(s=(h=p[c]).rank)){var f=h.shape,d=f[0],m=f.slice(1).concat([d]),g=h.reshape([d].concat(Pd(f.slice(1))));g=(g=Object(Sf.nd)(g,[1,0])).reshape(m),e.push(g),l=!0}else if(s>1){var v=Dd(1,s).concat([0]);e.push(Object(Sf.nd)(h,v)),l=!0}else e.push(h)}var y=n.mergeFunction(e),b=y.rank;if(l)if(null==b){var w=y.shape;m=[d=w[w.length-1]].concat(w.slice(0,w.length-1)),y=Object(Sf.nd)(y.reshape([-1,d]),[1,0]).reshape(m)}else b>1&&(v=[b-1].concat(Dd(0,b-1)),y=Object(Sf.nd)(y,v));return y}return n.mergeFunction(t)})},e.prototype.computeOutputShape=function(t){var e;e=null==(t=t)[0]?null:t[0].slice(1);for(var n=1;n<t.length;++n){var r=null==t[n]?null:t[n].slice(1);e=this.computeElementwiseOpOutputShape(e,r)}for(var o=[],i=0,a=t;i<a.length;i++)null!=(r=a[i])&&null!==r[0]&&o.push(r[0]);return 1===(o=nd(o)).length?o.concat(e):[null].concat(e)},e}(Tm),Dv=function(t){function e(e){return t.call(this,e)||this}return If(e,t),e.prototype.mergeFunction=function(t){return Object(Sf.id)(function(){for(var e=Object(Sf.zd)(t[0].shape),n=0,r=t;n<r.length;n++){var o=r[n];e=Object(Sf.s)(e,o)}return e})},e.className="Add",e}(Mv);Sf.yc.SerializationMap.register(Dv);var jv=function(t){function e(e){return t.call(this,e)||this}return If(e,t),e.prototype.mergeFunction=function(t){return Object(Sf.id)(function(){for(var e=Object(Sf.Ub)(t[0].shape),n=0,r=t;n<r.length;n++){var o=r[n];e=Object(Sf.Kb)(e,o)}return e})},e.className="Multiply",e}(Mv);Sf.yc.SerializationMap.register(jv);var Lv=function(t){function e(e){return t.call(this,e)||this}return If(e,t),e.prototype.mergeFunction=function(t){return Object(Sf.id)(function(){for(var e=Object(Sf.zd)(t[0].shape),n=0,r=t;n<r.length;n++){var o=r[n];e=Object(Sf.s)(e,o)}return Object(Sf.Kb)(Bf(1/t.length),e)})},e.className="Average",e}(Mv);Sf.yc.SerializationMap.register(Lv);var zv=function(t){function e(e){return t.call(this,e)||this}return If(e,t),e.prototype.mergeFunction=function(t){return Object(Sf.id)(function(){for(var e=t[0],n=1;n<t.length;++n)e=Object(Sf.zb)(e,t[n]);return e})},e.className="Maximum",e}(Mv);Sf.yc.SerializationMap.register(zv);var Bv=function(t){function e(e){return t.call(this,e)||this}return If(e,t),e.prototype.mergeFunction=function(t){return Object(Sf.id)(function(){for(var e=t[0],n=1;n<t.length;++n)e=Object(Sf.Eb)(e,t[n]);return e})},e.className="Minimum",e}(Mv);Sf.yc.SerializationMap.register(Bv);var Fv=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_AXIS=-1,null==e&&(e={}),n.axis=null==e.axis?n.DEFAULT_AXIS:e.axis,n.supportsMasking=!0,n.reshapeRequired=!1,n}return If(e,t),e.prototype.build=function(t){if(!Array.isArray(t)||!Array.isArray(t[0])||1===t.length)throw new Uf("A `Concatenate` layer should be called on a list of at least 2 inputs");for(var e=!0,n=0,r=t=t;n<r.length;n++)if(null!=(c=r[n])){e=!1;break}if(!e){for(var o=[],i=0;i<t.length;++i){var a=t[i].slice();a.splice(this.axis,1);for(var s=!1,u=0,l=o;u<l.length;u++){var c=l[u];if(Sf.rd.arraysEqual(c,a)){s=!0;break}}s||o.push(a)}if(o.length>1)throw new Uf("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}},e.prototype.mergeFunction=function(t){var e=this;return Object(Sf.id)(function(){return Vd(t,e.axis)})},e.prototype.computeOutputShape=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Uf("A `Concatenate` layer should be called on a list of inputs.");for(var e=t,n=e[0].slice(),r=this.axis<0?n.length+this.axis:this.axis,o=0,i=e.slice(1);o<i.length;o++){var a=i[o];if(null==n[r]||null==a[r]){n[r]=null;break}n[r]+=a[r]}return n},e.prototype.getConfig=function(){var e={axis:this.axis},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Concatenate",e}(Mv);function Vv(t,e,n,r,o,i){var a;if(void 0===i&&(i=.001),2===t.rank)a=Object(Sf.G)(t,e,n,i,o,r);else if(3===t.rank)a=Object(Sf.H)(t,e,n,i,o,r);else{if(4!==t.rank)throw new Wf("batchNormalization is not implememnted for array of rank "+t.rank+" yet");a=Object(Sf.I)(t,e,n,i,o,r)}return a}Sf.yc.SerializationMap.register(Fv);var Uv=function(t){function e(e){var n=t.call(this,e)||this;return n.supportsMasking=!0,n.axis=null==e.axis?-1:e.axis,n.momentum=null==e.momentum?.99:e.momentum,n.epsilon=null==e.epsilon?.001:e.epsilon,n.center=null==e.center||e.center,n.scale=null==e.scale||e.scale,n.betaInitializer=gm(e.betaInitializer||"zeros"),n.gammaInitializer=gm(e.gammaInitializer||"ones"),n.movingMeanInitializer=gm(e.movingMeanInitializer||"zeros"),n.movingVarianceInitializer=gm(e.movingVarianceInitializer||"ones"),n.betaConstraint=md(e.betaConstraint),n.gammaConstraint=md(e.gammaConstraint),n.betaRegularizer=fv(e.betaRegularizer),n.gammaRegularizer=fv(e.gammaRegularizer),n.stepCount=0,n}return If(e,t),e.prototype.build=function(t){t=_m(t);var e=this.axis>=0?this.axis:this.axis+t.length,n=t[e];if(null==n)throw new Uf("Axis "+e+" of input tensor should have a defined dimension but the layer received an input with shape "+JSON.stringify(t)+".");this.inputSpec=[new Im({ndim:t.length,axes:(r={},r[e]=n,r)})];var r,o=[n];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){var r=null!=e.training&&e.training,o=wm(t),i=o.shape,a=i.length,s=Dd(0,a),u=n.axis>=0?n.axis:n.axis+a;s.splice(u,1);var l=Hf(1,a);l[u]=i[u];var c=s.slice();c.sort();var p=!Sf.rd.arraysEqual(c,Dd(0,a).slice(0,a-1));if(!r)return function(){if(p){var t=n.movingMean.read().reshape(l),e=n.movingVariance.read().reshape(l),r=n.center?n.beta.read().reshape(l):null,i=n.scale?n.gamma.read().reshape(l):null;return Vv(o,t,e,r,i,n.epsilon)}return Vv(o,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var h=function(t,e,n,r,o){return void 0===o&&(o=.001),Sf.rd.arraysEqual(r.slice().sort(),Dd(0,t.rank-1))?function(t,e,n,r,o){return void 0===o&&(o=.001),Object(Sf.id)(function(){var i=Object(Sf.Ib)(t,r),a=i.mean,s=i.variance;return[Vv(t,a,s,n,e,o),a,s]})}(t,e,n,r,o):function(t,e,n,r,o){return void 0===o&&(o=.001),Object(Sf.id)(function(){for(var i=Object(Sf.Ib)(t,r),a=i.mean,s=i.variance,u=[],l=0,c=Dd(0,t.rank);l<c.length;l++){var p=c[l];-1!==r.indexOf(p)?u.push(1):u.push(t.shape[p])}var h=a.reshape(u),f=s.reshape(u),d=null==e?null:e.reshape(u),m=null==n?null:n.reshape(u);return[Vv(t,h,f,m,d,o),a,s]})}(t,e,n,r,o)}(o,n.gamma.read(),n.beta.read(),s,n.epsilon),f=h[0],d=h[1],m=h[2],g=Pd(s.map(function(t){return o.shape[t]})),v=m.mul(Bf(g/(g-(1+n.epsilon))));return function(){n.stepCount++;var t=Object(Sf.Jb)(n.movingMean.read(),d,n.momentum,n.stepCount);n.movingMean.write(t);var e=Object(Sf.Jb)(n.movingVariance.read(),v,n.momentum,n.stepCount);n.movingVariance.write(e)}(),f})},e.prototype.getConfig=function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:mm(this.betaInitializer),gammaInitializer:mm(this.gammaInitializer),movingMeanInitializer:mm(this.movingMeanInitializer),movingVarianceInitializer:mm(this.movingVarianceInitializer),betaRegularizer:pv(this.betaRegularizer),gammaRegularizer:pv(this.gammaRegularizer),betaConstraint:fd(this.betaConstraint),gammaConstraint:fd(this.gammaConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="BatchNormalization",e}(Tm);Sf.yc.SerializationMap.register(Uv);var Wv=function(t){function e(e){var n=this;if(null==e&&(e={}),(n=t.call(this,e)||this).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)n.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)n.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new Uf("ZeroPadding2D expects padding to be a length-2 array, but received a length-"+e.padding.length+" array.");var r=void 0,o=void 0;if("number"==typeof e.padding[0])r=[e.padding[0],e.padding[0]],o=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new Uf("ZeroPadding2D expects height padding to be a length-2 array, but received a length-"+e.padding[0].length+" array.");if(r=e.padding[0],2!==e.padding[1].length)throw new Uf("ZeroPadding2D expects width padding to be a length-2 array, but received a length-"+e.padding[1].length+" array.");o=e.padding[1]}n.padding=[r,o]}return n.inputSpec=[new Im({ndim:4})],n}return If(e,t),e.prototype.computeOutputShape=function(t){return t=_m(t),"channelsFirst"===this.dataFormat?[t[0],t[1],null!=t[2]&&t[2]>=0?t[2]+this.padding[0][0]+this.padding[0][1]:null,null!=t[3]&&t[3]>=0?t[3]+this.padding[1][0]+this.padding[1][1]:null]:[t[0],null!=t[1]&&t[1]>=0?t[1]+this.padding[0][0]+this.padding[0][1]:null,null!=t[2]&&t[2]>=0?t[2]+this.padding[1][0]+this.padding[1][1]:null,t[3]]},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){return function(t,e,n){return Object(Sf.id)(function(){if(4!==t.rank)throw new Uf("temporalPadding expects input tensor to be 4-D, but received a "+t.rank+"-D tensor.");if(null==e&&(e=[[1,1],[1,1]]),2!==e.length||2!==e[0].length||2!==e[1].length)throw new Uf("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new Uf("Unknown data format: "+n+". Supported data formats are 'channelsLast' and 'channelsFirst.");var r;return r="channelsFirst"===n?[[0,0],[0,0],e[0],e[1]]:[[0,0],e[0],e[1],[0,0]],Object(Sf.Yb)(t,r)})}(wm(t),n.padding,n.dataFormat)})},e.prototype.getConfig=function(){var e={padding:this.padding,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="ZeroPadding2D",e}(Tm);function qv(t,e,n,r,o,i){return Object(Sf.id)(function(){var a;bd(o),od(xd,"PoolMode",i),_d(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==o&&(o="channelsLast"),null==i&&(i="max"),t=vv(t,o);var s="same"===r?"same":"valid";return a="max"===i?Object(Sf.yb)(t,e,n,s):Object(Sf.D)(t,e,n,s),"channelsFirst"===o&&(a=Object(Sf.nd)(a,[0,3,1,2])),a})}Sf.yc.SerializationMap.register(Wv);var Hv=function(t){function e(e){var n=this;if(null==e.poolSize&&(e.poolSize=2),n=t.call(this,e)||this,"number"==typeof e.poolSize)n.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new Uf("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.poolSize));n.poolSize=e.poolSize}if(null==e.strides)n.strides=n.poolSize;else if("number"==typeof e.strides)n.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new Uf("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.strides));n.strides=e.strides}return n.padding=null==e.padding?"valid":e.padding,_d(n.padding),n.inputSpec=[new Im({ndim:3})],n}return If(e,t),e.prototype.computeOutputShape=function(t){var e=mv((t=_m(t))[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],e,t[2]]},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){n.invokeCallHook(t,e),t=Ld(wm(t),2);var r=n.poolingFunction(wm(t),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return Object(Sf.Rc)(r,[2])})},e.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(Tm),Gv=function(t){function e(e){return t.call(this,e)||this}return If(e,t),e.prototype.poolingFunction=function(t,e,n,r,o){return bd(o),_d(r),qv(t,e,n,r,o,"max")},e.className="MaxPooling1D",e}(Hv);Sf.yc.SerializationMap.register(Gv);var $v=function(t){function e(e){return t.call(this,e)||this}return If(e,t),e.prototype.poolingFunction=function(t,e,n,r,o){return bd(o),_d(r),qv(t,e,n,r,o,"avg")},e.className="AveragePooling1D",e}(Hv);Sf.yc.SerializationMap.register($v);var Kv=function(t){function e(e){var n=this;if(null==e.poolSize&&(e.poolSize=[2,2]),(n=t.call(this,e)||this).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)n.strides=n.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new Uf("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+e.strides.length+".");n.strides=e.strides}else n.strides=[e.strides,e.strides];return n.padding=null==e.padding?"valid":e.padding,n.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,bd(n.dataFormat),_d(n.padding),n.inputSpec=[new Im({ndim:4})],n}return If(e,t),e.prototype.computeOutputShape=function(t){t=_m(t);var e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2];return e=mv(e,this.poolSize[0],this.padding,this.strides[0]),n=mv(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n]:[t[0],e,n,t[3]]},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){return n.invokeCallHook(t,e),n.poolingFunction(wm(t),n.poolSize,n.strides,n.padding,n.dataFormat)})},e.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(Tm),Qv=function(t){function e(e){return t.call(this,e)||this}return If(e,t),e.prototype.poolingFunction=function(t,e,n,r,o){return bd(o),_d(r),qv(t,e,n,r,o,"max")},e.className="MaxPooling2D",e}(Kv);Sf.yc.SerializationMap.register(Qv);var Xv=function(t){function e(e){return t.call(this,e)||this}return If(e,t),e.prototype.poolingFunction=function(t,e,n,r,o){return bd(o),_d(r),qv(t,e,n,r,o,"avg")},e.className="AveragePooling2D",e}(Kv);Sf.yc.SerializationMap.register(Xv);var Yv=function(t){function e(e){var n=t.call(this,e)||this;return n.inputSpec=[new Im({ndim:3})],n}return If(e,t),e.prototype.computeOutputShape=function(t){return[t[0],t[2]]},e.prototype.call=function(t,e){throw new Wf},e}(Tm),Zv=function(t){function e(e){return t.call(this,e)||this}return If(e,t),e.prototype.call=function(t,e){return Object(Sf.id)(function(){var e=wm(t);return Object(Sf.Bb)(e,1)})},e.className="GlobalAveragePooling1D",e}(Yv);Sf.yc.SerializationMap.register(Zv);var Jv=function(t){function e(e){return t.call(this,e)||this}return If(e,t),e.prototype.call=function(t,e){return Object(Sf.id)(function(){var e=wm(t);return Object(Sf.xb)(e,1)})},e.className="GlobalMaxPooling1D",e}(Yv);Sf.yc.SerializationMap.register(Jv);var ty=function(t){function e(e){var n=t.call(this,e)||this;return n.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,bd(n.dataFormat),n.inputSpec=[new Im({ndim:4})],n}return If(e,t),e.prototype.computeOutputShape=function(t){return t=t,"channelsLast"===this.dataFormat?[t[0],t[3]]:[t[0],t[1]]},e.prototype.call=function(t,e){throw new Wf},e.prototype.getConfig=function(){var e={dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(Tm),ey=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){var e=wm(t);return"channelsLast"===n.dataFormat?Object(Sf.Bb)(e,[1,2]):Object(Sf.Bb)(e,[2,3])})},e.className="GlobalAveragePooling2D",e}(ty);Sf.yc.SerializationMap.register(ey);var ny=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){var e=wm(t);return"channelsLast"===n.dataFormat?Object(Sf.xb)(e,[1,2]):Object(Sf.xb)(e,[2,3])})},e.className="GlobalMaxPooling2D",e}(ty);function ry(t,e,n,r){if(Array.isArray(t)){if(null!=e||null!=n)throw new Uf("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function o(t){return null==t||Array.isArray(t)?t:[t]}return{inputs:t,initialState:e=o(e),constants:n=o(n)}}function oy(t,e,n,r,o,i,a,s){void 0===r&&(r=!1),void 0===a&&(a=!1);var u=e.shape.length;if(u<3)throw new Uf("Input should be at least 3D, but is "+u+"D.");var l,c,p=[1,0].concat(Dd(2,u));if(e=Object(Sf.nd)(e,p),null!=o)throw new Wf("The rnn() function of the deeplearn.js backend does not support masking yet.");if(null!=i)throw new Wf("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),r&&(e=Object(Sf.oc)(e,0));for(var h=n,f=e.shape[0],d=0;d<f;++d){var m=zd(e,d,1),g=t(m=m.reshape(m.shape.slice(1)),h);c=g[0],l=0===d?c.reshape([1].concat(c.shape)):Ud(l,c.reshape([1].concat(c.shape))),h=g[1]}return[c,Object(Sf.nd)(l,[1,0].concat(Dd(2,l.shape.length))),h]}Sf.yc.SerializationMap.register(ny);var iy=function(t){function e(e){var n,r=t.call(this,e)||this;if(null==e.cell)throw new Uf("cell property is missing for the constructor of RNN.");if(null==(n=Array.isArray(e.cell)?new fy({cells:e.cell}):e.cell).stateSize)throw new Uf("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=n,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new Im({ndim:3})],r.stateSpec=null,r.states=null,r.numConstants=null,r}return If(e,t),e.prototype.getStates=function(){return null==this.states?Dd(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(function(t){return null}):this.states},e.prototype.setStates=function(t){this.states=t},e.prototype.computeOutputShape=function(t){ym(t)&&(t=t[0]),t=t;var e=this.cell.stateSize;Array.isArray(e)||(e=[e]);var n,r=e[0];if(n=this.returnSequences?[t[0],t[1],r]:[t[0],r],this.returnState){for(var o=[],i=0,a=e;i<a.length;i++)o.push([t[0],a[i]]);return[n].concat(o)}return n},e.prototype.computeMask=function(t,e){throw new Wf("computeMask has not been implemented for RNN yet")},e.prototype.build=function(t){if(null!=this.numConstants)throw new Wf("Constants support is not implemented in RNN yet.");ym(t)&&(t=t[0]),t=t,this.inputSpec[0]=new Im({shape:[this.stateful?t[0]:null,null,t[t.length-1]]});var e,n=[t[0]].concat(t.slice(2));if(this.cell.build(n),e=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!Sf.rd.arraysEqual(this.stateSpec.map(function(t){return t.shape[t.shape.length-1]}),e))throw new Uf("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec="+this.stateSpec+"; However cell.stateSize is "+this.cell.stateSize)}else this.stateSpec=e.map(function(t){return new Im({shape:[null,t]})});if(this.stateful)throw new Wf("stateful RNN layer is not implemented yet")},e.prototype.resetStates=function(t){var e=this;Object(Sf.id)(function(){if(!e.stateful)throw new Ff("Cannot call resetState() on an RNN Layer that is not stateful.");var n=e.inputSpec[0].shape[0];if(null==n)throw new Uf("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==e.states)e.states=Array.isArray(e.cell.stateSize)?e.cell.stateSize.map(function(t){return Object(Sf.zd)([n,t])}):[Object(Sf.zd)([n,e.cell.stateSize])];else if(null==t)Array.isArray(e.cell.stateSize)?e.states=e.cell.stateSize.map(function(t){return Object(Sf.zd)([n,t])}):e.states[0]=Object(Sf.zd)([n,e.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==e.states.length)throw new Uf("Layer "+e.name+" expects "+e.states.length+" state(s), but it received "+t.length+" state value(s). Input received: "+t);for(var r=0;r<e.states.length;++r){var o=t[r],i=Array.isArray(e.cell.stateSize)?e.cell.stateSize[r]:e.cell.stateSize,a=[n,i];if(!Sf.rd.arraysEqual(o.shape,a))throw new Uf("State "+r+" is incompatible with layer "+e.name+": expected shape="+a+", received shape="+o.shape);e.states[r]=o}}})},e.prototype.apply=function(e,n){var r=null==n?null:n.initialState,o=null==n?null:n.constants;null==n&&(n={});var i=ry(e,r,o,this.numConstants);e=i.inputs,o=i.constants;var a=[],s=[];if(null!=(r=i.initialState)){n.initialState=r,a=a.concat(r),this.stateSpec=[];for(var u=0,l=r;u<l.length;u++)this.stateSpec.push(new Im({shape:l[u].shape}));s=s.concat(this.stateSpec)}if(null!=o&&(n.constants=o,a=a.concat(o),this.numConstants=o.length),a[0]instanceof Am){var c=[e].concat(a),p=this.inputSpec.concat(s),h=this.inputSpec;this.inputSpec=p;var f=t.prototype.apply.call(this,c,n);return this.inputSpec=h,f}return t.prototype.apply.call(this,e,n)},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){var r=null==e?null:e.mask,o=null==e?null:e.training,i=null==e?null:e.initialState;if(t=wm(t),null==i){if(n.stateful)throw new Wf("stateful RNN layer is not implemented yet.");i=n.getInitialState(t)}if(null!=r)throw new Wf("Masking is not implemented for RNN yet");var a=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==a)throw new Uf("RNN Layer has "+a+" state(s) but was passed "+i.length+" initial state(s).");n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:o},u=oy(function(t,e){var r=n.cell.call([t].concat(e),s);return[r[0],r.slice(1)]},t,i,n.goBackwards,null,null,n.unroll),l=u[0],c=u[1],p=u[2];if(n.stateful)throw new Wf("stateful RNN layer is not implemented yet");var h=n.returnSequences?c:l;return n.returnState?[h].concat(p):h})},e.prototype.getInitialState=function(t){var e=this;return Object(Sf.id)(function(){var n=Object(Sf.zd)(t.shape);return n=Ld(n=Object(Sf.Xc)(n,[1,2])),Array.isArray(e.cell.stateSize)?e.cell.stateSize.map(function(t){return t>1?Wd(n,[1,t]):n}):e.cell.stateSize>1?[Wd(n,[1,e.cell.stateSize])]:[n]})},Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.trainable?this.cell.trainableWeights:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(e.numConstants=this.numConstants);var n=this.cell.getConfig();e.cell={className:this.cell.getClassName(),config:n};var r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},e.className="RNN",e}(Tm);Sf.yc.SerializationMap.register(iy);var ay=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e}(Tm),sy=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=e.units,n.activation=rv(null==e.activation?n.DEFAULT_ACTIVATION:e.activation),n.useBias=null==e.useBias||e.useBias,n.kernelInitializer=gm(e.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=gm(e.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=gm(e.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=fv(e.kernelRegularizer),n.recurrentRegularizer=fv(e.recurrentRegularizer),n.biasRegularizer=fv(e.biasRegularizer),n.kernelConstraint=md(e.kernelConstraint),n.recurrentConstraint=md(e.recurrentConstraint),n.biasConstraint=md(e.biasConstraint),n.dropout=Rd([1,Md([0,null==e.dropout?0:e.dropout])]),n.recurrentDropout=Rd([1,Md([0,null==e.recurrentDropout?0:e.recurrentDropout])]),n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return If(e,t),e.prototype.build=function(t){t=_m(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){if(2!==(t=t).length)throw new Uf("SimpleRNNCell expects 2 input Tensors, got "+t.length+".");var r=t[1];t=t[0];var o,i=null!=e.training&&e.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=dy(function(){return Object(Sf.Vb)(t)},n.dropout,i)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=dy(function(){return Object(Sf.Vb)(r)},n.recurrentDropout,i));var a=n.dropoutMask,s=n.recurrentDropoutMask;o=Hd(null!=a?Object(Sf.Kb)(t,a):t,n.kernel.read()),null!=n.bias&&(o=Kd(o,n.bias.read())),null!=s&&(r=Object(Sf.Kb)(r,s));var u=Object(Sf.s)(o,Hd(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]})},e.prototype.getConfig=function(){var e={units:this.units,activation:ev(this.activation),useBias:this.useBias,kernelInitializer:mm(this.kernelInitializer),recurrentInitializer:mm(this.recurrentInitializer),biasInitializer:mm(this.biasInitializer),kernelRegularizer:pv(this.kernelRegularizer),recurrentRegularizer:pv(this.recurrentRegularizer),biasRegularizer:pv(this.biasRegularizer),activityRegularizer:pv(this.activityRegularizer),kernelConstraint:fd(this.kernelConstraint),recurrentConstraint:fd(this.recurrentConstraint),biasConstraint:fd(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="SimpleRNNCell",e}(ay);Sf.yc.SerializationMap.register(sy);var uy=function(t){function e(e){return e.cell=new sy(e),t.call(this,e)||this}return If(e,t),e.prototype.call=function(e,n){var r=this;return Object(Sf.id)(function(){return null!=r.cell.dropoutMask&&(Object(Sf.Ba)(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Object(Sf.Ba)(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t.prototype.call.call(r,e,{mask:null==n?null:n.mask,training:null==n?null:n.training,initialState:null==n?null:n.initialState})})},Object.defineProperty(e.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={units:this.units,activation:ev(this.activation),useBias:this.useBias,kernelInitializer:mm(this.kernelInitializer),recurrentInitializer:mm(this.recurrentInitializer),biasInitializer:mm(this.biasInitializer),kernelRegularizer:pv(this.kernelRegularizer),recurrentRegularizer:pv(this.recurrentRegularizer),biasRegularizer:pv(this.biasRegularizer),activityRegularizer:pv(this.activityRegularizer),kernelConstraint:fd(this.kernelConstraint),recurrentConstraint:fd(this.recurrentConstraint),biasConstraint:fd(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=t.prototype.getConfig.call(this);return delete n.cell,Object.assign(e,n),e},e.className="SimpleRNN",e}(iy);Sf.yc.SerializationMap.register(uy);var ly=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=e.units,n.activation=rv(void 0===e.activation?n.DEFAULT_ACTIVATION:e.activation),n.recurrentActivation=rv(void 0===e.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),n.useBias=null==e.useBias||e.useBias,n.kernelInitializer=gm(e.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=gm(e.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=gm(e.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=fv(e.kernelRegularizer),n.recurrentRegularizer=fv(e.recurrentRegularizer),n.biasRegularizer=fv(e.biasRegularizer),n.kernelConstraint=md(e.kernelConstraint),n.recurrentConstraint=md(e.recurrentConstraint),n.biasConstraint=md(e.biasConstraint),n.dropout=Rd([1,Md([0,null==e.dropout?0:e.dropout])]),n.recurrentDropout=Rd([1,Md([0,null==e.recurrentDropout?0:e.recurrentDropout])]),n.implementation=e.implementation,n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return If(e,t),e.prototype.build=function(t){var e=(t=_m(t))[t.length-1];this.kernel=this.addWeight("kernel",[e,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){if(2!==(t=t).length)throw new Uf("GRUCell expects 2 input Tensors (inputs, h, c), got "+t.length+".");var r=null!=e.training&&e.training,o=t[1];t=t[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=dy(function(){return Object(Sf.Vb)(t)},n.dropout,r,3)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=dy(function(){return Object(Sf.Vb)(o)},n.recurrentDropout,r,3));var i,a,s,u=n.dropoutMask,l=n.recurrentDropoutMask;if(1===n.implementation){var c=Bd(n.kernel.read(),0,n.units),p=Bd(n.kernel.read(),n.units,n.units),h=Bd(n.kernel.read(),2*n.units,n.units),f=Bd(n.recurrentKernel.read(),0,n.units),d=Bd(n.recurrentKernel.read(),n.units,n.units),m=Bd(n.recurrentKernel.read(),2*n.units,n.units),g=void 0,v=void 0,y=void 0;0<n.dropout&&n.dropout<1?(g=Object(Sf.Kb)(t,u[0]),v=Object(Sf.Kb)(t,u[1]),y=Object(Sf.Kb)(t,u[2])):(g=t,v=t,y=t);var b=Hd(g,c),w=Hd(v,p),_=Hd(y,h);if(n.useBias){var x=zd(n.bias.read(),0,n.units),O=zd(n.bias.read(),n.units,n.units),E=zd(n.bias.read(),2*n.units,n.units);b=Kd(b,x),w=Kd(w,O),_=Kd(_,E)}var S=void 0,C=void 0,I=void 0;0<n.recurrentDropout&&n.recurrentDropout<1?(S=Object(Sf.Kb)(o,l[0]),C=Object(Sf.Kb)(o,l[1]),I=Object(Sf.Kb)(o,l[2])):(S=o,C=o,I=o),i=n.recurrentActivation.apply(Object(Sf.s)(b,Hd(S,f))),a=n.recurrentActivation.apply(Object(Sf.s)(w,Hd(C,d))),s=n.activation.apply(Object(Sf.s)(_,Hd(Object(Sf.Kb)(a,I),m)))}else{0<n.dropout&&n.dropout<1&&(t=Object(Sf.Kb)(t,u[0]));var A=Hd(t,n.kernel.read());n.useBias&&(A=Kd(A,n.bias.read())),0<n.dropout&&n.dropout<1&&(o=Object(Sf.Kb)(o,l[0]));var k=Hd(o,Bd(n.recurrentKernel.read(),0,2*n.units)),N=(b=Bd(A,0,n.units),w=Bd(A,n.units,n.units),Bd(k,0,n.units)),P=Bd(k,n.units,n.units);i=n.recurrentActivation.apply(Object(Sf.s)(b,N)),a=n.recurrentActivation.apply(Object(Sf.s)(w,P)),_=Bd(A,2*n.units,n.units);var T=Hd(Object(Sf.Kb)(a,o),Bd(n.recurrentKernel.read(),2*n.units,n.units));s=n.activation.apply(Object(Sf.s)(_,T))}var R=Object(Sf.s)(Object(Sf.Kb)(i,o),Object(Sf.Kb)(Object(Sf.s)(Bf(1),Object(Sf.Ob)(i)),s));return[R,R]})},e.prototype.getConfig=function(){var e={units:this.units,activation:ev(this.activation),recurrentActivation:ev(this.recurrentActivation),useBias:this.useBias,kernelInitializer:mm(this.kernelInitializer),recurrentInitializer:mm(this.recurrentInitializer),biasInitializer:mm(this.biasInitializer),kernelRegularizer:pv(this.kernelRegularizer),recurrentRegularizer:pv(this.recurrentRegularizer),biasRegularizer:pv(this.biasRegularizer),activityRegularizer:pv(this.activityRegularizer),kernelConstraint:fd(this.kernelConstraint),recurrentConstraint:fd(this.recurrentConstraint),biasConstraint:fd(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="GRUCell",e}(ay);Sf.yc.SerializationMap.register(ly);var cy=function(t){function e(e){return 0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new ly(e),t.call(this,e)||this}return If(e,t),e.prototype.call=function(e,n){var r=this;return Object(Sf.id)(function(){return null!=r.cell.dropoutMask&&(Object(Sf.Ba)(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Object(Sf.Ba)(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t.prototype.call.call(r,e,{mask:null==n?null:n.mask,training:null==n?null:n.training,initialState:null==n?null:n.initialState})})},Object.defineProperty(e.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={units:this.units,activation:ev(this.activation),recurrentActivation:ev(this.recurrentActivation),useBias:this.useBias,kernelInitializer:mm(this.kernelInitializer),recurrentInitializer:mm(this.recurrentInitializer),biasInitializer:mm(this.biasInitializer),kernelRegularizer:pv(this.kernelRegularizer),recurrentRegularizer:pv(this.recurrentRegularizer),biasRegularizer:pv(this.biasRegularizer),activityRegularizer:pv(this.activityRegularizer),kernelConstraint:fd(this.kernelConstraint),recurrentConstraint:fd(this.recurrentConstraint),biasConstraint:fd(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=t.prototype.getConfig.call(this);return delete n.cell,Object.assign(e,n),e},e.fromConfig=function(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)},e.className="GRU",e}(iy);Sf.yc.SerializationMap.register(cy);var py=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=e.units,n.activation=rv(void 0===e.activation?n.DEFAULT_ACTIVATION:e.activation),n.recurrentActivation=rv(void 0===e.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),n.useBias=null==e.useBias||e.useBias,n.kernelInitializer=gm(e.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=gm(e.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=gm(e.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.unitForgetBias=e.unitForgetBias,n.kernelRegularizer=fv(e.kernelRegularizer),n.recurrentRegularizer=fv(e.recurrentRegularizer),n.biasRegularizer=fv(e.biasRegularizer),n.kernelConstraint=md(e.kernelConstraint),n.recurrentConstraint=md(e.recurrentConstraint),n.biasConstraint=md(e.biasConstraint),n.dropout=Rd([1,Md([0,null==e.dropout?0:e.dropout])]),n.recurrentDropout=Rd([1,Md([0,null==e.recurrentDropout?0:e.recurrentDropout])]),n.implementation=e.implementation,n.stateSize=[n.units,n.units],n.dropoutMask=null,n.recurrentDropoutMask=null,n}return If(e,t),e.prototype.build=function(t){var e,n,r=(t=_m(t))[t.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var o=this.biasInitializer,i=this.units;e=new((n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return If(e,t),e.prototype.apply=function(t,e){var n=o.apply([i]),r=(new em).apply([i]),a=o.apply([2*i]);return Ud(Ud(n,r),a)},e}(Jd)).className="CustomInit",n)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,e,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){var r=null!=e.training&&e.training;if(3!==(t=t).length)throw new Uf("LSTMCell expects 3 input Tensors (inputs, h, c), got "+t.length+".");var o=t[1],i=t[2];t=t[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=dy(function(){return Object(Sf.Vb)(t)},n.dropout,r,4)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=dy(function(){return Object(Sf.Vb)(o)},n.recurrentDropout,r,4));var a,s,u,l,c=n.dropoutMask,p=n.recurrentDropoutMask;if(1===n.implementation){var h=Bd(n.kernel.read(),0,n.units),f=Bd(n.kernel.read(),n.units,n.units),d=Bd(n.kernel.read(),2*n.units,n.units),m=Bd(n.kernel.read(),3*n.units,n.units),g=Bd(n.recurrentKernel.read(),0,n.units),v=Bd(n.recurrentKernel.read(),n.units,n.units),y=Bd(n.recurrentKernel.read(),2*n.units,n.units),b=Bd(n.recurrentKernel.read(),3*n.units,n.units),w=void 0,_=void 0,x=void 0,O=void 0;0<n.dropout&&n.dropout<1?(w=Object(Sf.Kb)(t,c[0]),_=Object(Sf.Kb)(t,c[1]),x=Object(Sf.Kb)(t,c[2]),O=Object(Sf.Kb)(t,c[3])):(w=t,_=t,x=t,O=t);var E=Hd(w,h),S=Hd(_,f),C=Hd(x,d),I=Hd(O,m);if(n.useBias){var A=zd(n.bias.read(),0,n.units),k=zd(n.bias.read(),n.units,n.units),N=zd(n.bias.read(),2*n.units,n.units),P=zd(n.bias.read(),3*n.units,n.units);E=Kd(E,A),S=Kd(S,k),C=Kd(C,N),I=Kd(I,P)}var T=void 0,R=void 0,M=void 0,D=void 0;0<n.recurrentDropout&&n.recurrentDropout<1?(T=Object(Sf.Kb)(o,p[0]),R=Object(Sf.Kb)(o,p[1]),M=Object(Sf.Kb)(o,p[2]),D=Object(Sf.Kb)(o,p[3])):(T=o,R=o,M=o,D=o),a=n.recurrentActivation.apply(Object(Sf.s)(E,Hd(T,g))),s=n.recurrentActivation.apply(Object(Sf.s)(S,Hd(R,v))),u=Object(Sf.s)(Object(Sf.Kb)(s,i),Object(Sf.Kb)(a,n.activation.apply(Object(Sf.s)(C,Hd(M,y))))),l=n.recurrentActivation.apply(Object(Sf.s)(I,Hd(D,b)))}else{0<n.dropout&&n.dropout<1&&(t=Object(Sf.Kb)(t,c[0]));var j=Hd(t,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(o=Object(Sf.Kb)(o,p[0])),j=Object(Sf.s)(j,Hd(o,n.recurrentKernel.read())),n.useBias&&(j=Kd(j,n.bias.read()));var L=Bd(j,0,n.units),z=Bd(j,n.units,n.units),B=Bd(j,2*n.units,n.units),F=Bd(j,3*n.units,n.units);a=n.recurrentActivation.apply(L),s=n.recurrentActivation.apply(z),u=Object(Sf.s)(Object(Sf.Kb)(s,i),Object(Sf.Kb)(a,n.activation.apply(B))),l=n.recurrentActivation.apply(F)}var V=Object(Sf.Kb)(l,n.activation.apply(u));return[V,V,u]})},e.prototype.getConfig=function(){var e={units:this.units,activation:ev(this.activation),recurrentActivation:ev(this.recurrentActivation),useBias:this.useBias,kernelInitializer:mm(this.kernelInitializer),recurrentInitializer:mm(this.recurrentInitializer),biasInitializer:mm(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:pv(this.kernelRegularizer),recurrentRegularizer:pv(this.recurrentRegularizer),biasRegularizer:pv(this.biasRegularizer),activityRegularizer:pv(this.activityRegularizer),kernelConstraint:fd(this.kernelConstraint),recurrentConstraint:fd(this.recurrentConstraint),biasConstraint:fd(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="LSTMCell",e}(ay);Sf.yc.SerializationMap.register(py);var hy=function(t){function e(e){return 0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new py(e),t.call(this,e)||this}return If(e,t),e.prototype.call=function(e,n){var r=this;return Object(Sf.id)(function(){return null!=r.cell.dropoutMask&&(Object(Sf.Ba)(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Object(Sf.Ba)(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t.prototype.call.call(r,e,{mask:null==n?null:n.mask,training:null==n?null:n.training,initialState:null==n?null:n.initialState})})},Object.defineProperty(e.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unitForgetBias",{get:function(){return this.cell.unitForgetBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={units:this.units,activation:ev(this.activation),recurrentActivation:ev(this.recurrentActivation),useBias:this.useBias,kernelInitializer:mm(this.kernelInitializer),recurrentInitializer:mm(this.recurrentInitializer),biasInitializer:mm(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:pv(this.kernelRegularizer),recurrentRegularizer:pv(this.recurrentRegularizer),biasRegularizer:pv(this.biasRegularizer),activityRegularizer:pv(this.activityRegularizer),kernelConstraint:fd(this.kernelConstraint),recurrentConstraint:fd(this.recurrentConstraint),biasConstraint:fd(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=t.prototype.getConfig.call(this);return delete n.cell,Object.assign(e,n),e},e.fromConfig=function(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)},e.className="LSTM",e}(iy);Sf.yc.SerializationMap.register(hy);var fy=function(t){function e(e){var n=t.call(this,e)||this;return n.cells=e.cells,n}return If(e,t),Object.defineProperty(e.prototype,"stateSize",{get:function(){for(var t=[],e=0,n=this.cells.slice().reverse();e<n.length;e++){var r=n[e];Array.isArray(r.stateSize)?t.push.apply(t,r.stateSize):t.push(r.stateSize)}return t},enumerable:!0,configurable:!0}),e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){for(var r=(t=t).slice(1),o=[],i=0,a=n.cells.slice().reverse();i<a.length;i++){var s=a[i];Array.isArray(s.stateSize)?o.push(r.splice(0,s.stateSize.length)):o.push(r.splice(0,1))}o.reverse();for(var u,l=[],c=0;c<n.cells.length;++c)s=n.cells[c],r=o[c],u=0===c?[t[0]].concat(r):[u[0]].concat(r),u=s.call(u,e),l.push(u.slice(1));r=[];for(var p=0,h=l.slice().reverse();p<h.length;p++)r.push.apply(r,h[p]);return[u[0]].concat(r)})},e.prototype.build=function(t){var e;ym(t)&&(t=t[0]),t=t;for(var n=0,r=this.cells;n<r.length;n++){var o=r[n];o.build(t),e=Array.isArray(o.stateSize)?o.stateSize[0]:o.stateSize,t=[t[0],e]}this.built=!0},e.prototype.getConfig=function(){for(var e=[],n=0,r=this.cells;n<r.length;n++){var o=r[n];e.push({className:this.getClassName(),config:o.getConfig()})}var i={cells:e},a=t.prototype.getConfig.call(this);return Object.assign(i,a),i},e.fromConfig=function(t,e,n){void 0===n&&(n={});for(var r=[],o=0,i=e.cells;o<i.length;o++)r.push(bg(i[o],n));return new t({cells:r})},Object.defineProperty(e.prototype,"trainableWeights",{get:function(){if(!this.trainable)return[];for(var t=[],e=0,n=this.cells;e<n.length;e++)t.push.apply(t,n[e].trainableWeights);return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){for(var t=[],e=0,n=this.cells;e<n.length;e++){var r=n[e];t.push.apply(t,r.nonTrainableWeights)}if(!this.trainable){for(var o=[],i=0,a=this.cells;i<a.length;i++)o.push.apply(o,(r=a[i]).trainableWeights);return o.concat(t)}return t},enumerable:!0,configurable:!0}),e.prototype.getWeights=function(){for(var t=[],e=0,n=this.cells;e<n.length;e++)t.push.apply(t,n[e].weights);return Sm(t)},e.prototype.setWeights=function(t){for(var e=[],n=0,r=this.cells;n<r.length;n++)for(var o=r[n],i=t.splice(o.weights.length),a=0;a<o.weights.length;++a)e.push([o.weights[a],i[a]]);Cm(e)},e.className="StackedRNNCells",e}(ay);function dy(t,e,n,r){function o(){return Qd(t(),Bf(e))}if(void 0===n&&(n=null),void 0===r&&(r=1),r>1){for(var i=[],a=0;a<r;a++)i.push(Xd(o,t,n));return i.forEach(function(t){return Object(Sf.eb)(t)}),i}return Object(Sf.eb)(Xd(o,t,n))}Sf.yc.SerializationMap.register(fy);var my=function(t){function e(e){var n=t.call(this,e)||this;return n.layer=e.layer,n}return If(e,t),e.prototype.build=function(t){this.built=!0},Object.defineProperty(e.prototype,"trainable",{get:function(){return null!=this.layer&&this.layer.trainable},set:function(t){null!=this.layer&&(this.layer.trainable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.layer.trainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.layer.nonTrainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updates",{get:function(){return this.layer._updates},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"losses",{get:function(){return this.layer.losses},enumerable:!0,configurable:!0}),e.prototype.getWeights=function(){return this.layer.getWeights()},e.prototype.setWeights=function(t){this.layer.setWeights(t)},e.prototype.getConfig=function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.fromConfig=function(t,e,n){void 0===n&&(n={});var r=bg(e.layer,n);delete e.layer;var o={layer:r};return Object.assign(o,e),new t(o)},e}(Tm),gy=function(t){function e(e){var n=t.call(this,e)||this;return n.supportsMasking=!0,n}return If(e,t),e.prototype.build=function(e){if((e=_m(e)).length<3)throw new Uf("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(e));this.inputSpec=[{shape:e}];var n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),t.prototype.build.call(this,e)},e.prototype.computeOutputShape=function(t){var e=[(t=_m(t))[0]].concat(t.slice(2)),n=this.layer.computeOutputShape(e);return[n[0],t[1]].concat(n.slice(1))},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){return oy(function(t,r){return[n.layer.call(t,e),[]]},t=wm(t),[],!1,null,null,!1)[1]})},e.className="TimeDistributed",e}(my);Sf.yc.SerializationMap.register(gy);var vy=["sum","mul","concat","ave"],yy=function(t){function e(e){var n=t.call(this,e)||this,r=e.layer.getConfig();if(n.forwardLayer=bg({className:e.layer.getClassName(),config:r}),r.goBackwards=!0!==r.goBackwards,n.backwardLayer=bg({className:e.layer.getClassName(),config:r}),n.forwardLayer.name="forward_"+n.forwardLayer.name,n.backwardLayer.name="backward_"+n.backwardLayer.name,od(vy,"BidirectionalMergeMode",e.mergeMode),n.mergeMode=e.mergeMode,e.weights)throw new Wf("weights support is not implemented for Bidirectional layer yet.");return n._stateful=e.layer.stateful,n.returnSequences=e.layer.returnSequences,n.returnState=e.layer.returnState,n.supportsMasking=!0,n._trainable=!0,n.inputSpec=e.layer.inputSpec,n.numConstants=null,n}return If(e,t),Object.defineProperty(e.prototype,"trainable",{get:function(){return this._trainable},set:function(t){this._trainable=t,null!=this.forwardLayer&&(this.forwardLayer.trainable=t),null!=this.backwardLayer&&(this.backwardLayer.trainable=t)},enumerable:!0,configurable:!0}),e.prototype.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},e.prototype.setWeights=function(t){var e=Math.floor(t.length/2);this.forwardLayer.setWeights(t.slice(0,e)),this.backwardLayer.setWeights(t.slice(e))},e.prototype.computeOutputShape=function(t){var e,n,r,o=this.forwardLayer.computeOutputShape(t);return Array.isArray(o)&&Array.isArray(o[0])||(o=[o]),o=o,this.returnState?(r=o.slice(1),e=o[0]):e=o[0],e=e,"concat"===this.mergeMode?(e[e.length-1]*=2,n=[e]):n=null==this.mergeMode?[e,e.slice()]:[e],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[e].concat(r).concat(r.slice()):Kf(n)},e.prototype.apply=function(e,n){var r=null==n?null:n.initialState,o=null==n?null:n.constants;null==n&&(n={});var i=ry(e,r,o,this.numConstants);if(e=i.inputs,r=i.initialState,o=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==o)return t.prototype.apply.call(this,e,n);var a=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new Uf("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,a.push.apply(a,r);var l=r.map(function(t){return new Im({shape:t.shape})});this.forwardLayer.stateSpec=l.slice(0,u/2),this.backwardLayer.stateSpec=l.slice(u/2),s.push.apply(s,l)}if(null!=o)throw new Wf("Support for constants in Bidirectional layers is not implemented yet.");for(var c=a[0]instanceof Am,p=0,h=a;p<h.length;p++)if(h[p]instanceof Am!==c)throw new Uf("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){var f=[e].concat(a),d=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=d;var g=t.prototype.apply.call(this,f,n);return this.inputSpec=m,g}return t.prototype.apply.call(this,e,n)},e.prototype.call=function(t,e){var n=this;return Object(Sf.id)(function(){if(null!=e.mask)throw new Wf("The support for masking is not implemented for Bidirectional layers yet.");var r,o,i,a,s=e.initialState;if(null==s)r=n.forwardLayer.call(t,e),o=n.backwardLayer.call(t,e);else{var u=s.slice(0,s.length/2),l=s.slice(s.length/2);r=n.forwardLayer.call(t,Object.assign(e,{initialState:u})),o=n.forwardLayer.call(t,Object.assign(e,{initialState:l}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(o.slice(1))),r=r[0],o=o[0]),n.returnSequences&&(o=Object(Sf.oc)(o,1)),"concat"===n.mergeMode?a=Vd([r,o]):"sum"===n.mergeMode?a=Object(Sf.s)(r,o):"ave"===n.mergeMode?a=Object(Sf.Kb)(Bf(.5),Object(Sf.s)(r,o)):"mul"===n.mergeMode?a=Object(Sf.Kb)(r,o):null==n.mergeMode&&(a=[r,o]),n.returnState?null==n.mergeMode?a.concat(i):[a].concat(i):a})},e.prototype.resetStates=function(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},e.prototype.build=function(t){var e=this;Sd(this.forwardLayer.name,function(){e.forwardLayer.build(t)}),Sd(this.backwardLayer.name,function(){e.backwardLayer.build(t)}),this.built=!0},Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={mergeMode:this.mergeMode},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.fromConfig=function(t,e){var n=bg(e.layer);if(delete e.layer,null!=e.numConstants)throw new Wf("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=e;return r.layer=n,new t(r)},e.className="Bidirectional",e}(my);function by(t){return new $v(t)}function wy(t){return new Xv(t)}function _y(t){return new Jv(t)}function xy(t){return new ny(t)}function Oy(t){return new Gv(t)}function Ey(t){return new Qv(t)}Sf.yc.SerializationMap.register(yy);var Sy=Object.freeze({inputLayer:function(t){return new Rm(t)},elu:function(t){return new iv(t)},leakyReLU:function(t){return new ov(t)},softmax:function(t){return new sv(t)},thresholdedReLU:function(t){return new av(t)},conv1d:function(t){return new Ov(t)},conv2d:function(t){return new wv(t)},conv2dTranspose:function(t){return new _v(t)},separableConv2d:function(t){return new xv(t)},cropping2D:function(t){return new Ev(t)},upSampling2d:function(t){return new Sv(t)},depthwiseConv2d:function(t){return new Cv(t)},activation:function(t){return new Nv(t)},dense:function(t){return new Av(t)},dropout:function(t){return new Iv(t)},flatten:function(t){return new kv(t)},repeatVector:function(t){return new Pv(t)},reshape:function(t){return new Tv(t)},embedding:function(t){return new Rv(t)},add:function(t){return new Dv(t)},average:function(t){return new Lv(t)},concatenate:function(t){return new Fv(t)},maximum:function(t){return new zv(t)},minimum:function(t){return new Bv(t)},multiply:function(t){return new jv(t)},batchNormalization:function(t){return new Uv(t)},zeroPadding2d:function(t){return new Wv(t)},averagePooling1d:by,avgPool1d:function(t){return by(t)},avgPooling1d:function(t){return by(t)},averagePooling2d:wy,avgPool2d:function(t){return wy(t)},avgPooling2d:function(t){return wy(t)},globalAveragePooling1d:function(t){return new Zv(t)},globalAveragePooling2d:function(t){return new ey(t)},globalMaxPooling1d:_y,globalMaxPooling2d:xy,maxPooling1d:Oy,maxPooling2d:Ey,gru:function(t){return new cy(t)},gruCell:function(t){return new ly(t)},lstm:function(t){return new hy(t)},lstmCell:function(t){return new py(t)},simpleRNN:function(t){return new uy(t)},simpleRNNCell:function(t){return new sy(t)},rnn:function(t){return new iy(t)},stackedRNNCells:function(t){return new fy(t)},bidirectional:function(t){return new yy(t)},timeDistributed:function(t){return new gy(t)},globalMaxPool1d:_y,globalMaxPool2d:xy,maxPool1d:Oy,maxPool2d:Ey,Layer:Tm,input:Ug}),Cy=Object.freeze({binaryAccuracy:function(t,e){return rg(t,e)},binaryCrossentropy:function(t,e){return ig(t,e)},categoricalAccuracy:function(t,e){return og(t,e)},categoricalCrossentropy:function(t,e){return fg(t,e)},cosineProximity:function(t,e){return eg(t,e)},meanAbsoluteError:function(t,e){return Wm(t,e)},meanAbsolutePercentageError:function(t,e){return qm(t,e)},MAPE:function(t,e){return qm(t,e)},mape:function(t,e){return qm(t,e)},meanSquaredError:function(t,e){return Um(t,e)},MSE:function(t,e){return Um(t,e)},mse:function(t,e){return Um(t,e)}}),Iy=Object.freeze({l1l2:function(t){return new lv(t)},l1:function(t){return function(t){return new lv({l1:null!=t?t.l1:null,l2:0})}(t)},l2:function(t){return function(t){return new lv({l2:null!=t?t.l2:null,l1:0})}(t)}}),Ay=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.model=null,e}return If(e,t),e.prototype.setModel=function(t){if(!(t instanceof Lg))throw new Error("model must be a Model, not some other Container");this.model=t},e}(jm),ky=n("tgWb"),Ny={"tfjs-core":Sf.wd,"tfjs-layers":_g,"tfjs-converter":ky.c,tfjs:"0.12.3"},Py={"\xa1":76,y:74,"'":4,U:44,o:65,"\xbf":77,d:55,",":7,")":6,B:25,"\u0301":79,7:17,e:56,E:28,0:10,1:11,"!":2,K:34,h:59,A:24,O:38,":":20,".":9,r:68,"]":51,"\u0303":80,c:54,"[":50,m:63,Q:40,i:60,";":21,4:14,Z:49,R:41,g:58,W:46,"<":22," ":1,L:35,'"':3,q:67,j:61,G:30,9:19,x:73,C:26,"\u0300":78,"-":8,6:16,a:52,"(":5,"\n":0,P:39,V:45,s:69,"\u0308":81,"\u2013":82,n:64,F:29,u:71,z:75,S:42,v:72,I:32,X:47,t:70,p:66,3:13,N:37,b:53,M:36,J:33,D:27,Y:48,8:18,"?":23,5:15,l:62,f:57,T:43,2:12,H:31},Ty={0:"\n",1:" ",2:"!",3:'"',4:"'",5:"(",6:")",7:",",8:"-",9:".",10:"0",11:"1",12:"2",13:"3",14:"4",15:"5",16:"6",17:"7",18:"8",19:"9",20:":",21:";",22:"<",23:"?",24:"A",25:"B",26:"C",27:"D",28:"E",29:"F",30:"G",31:"H",32:"I",33:"J",34:"K",35:"L",36:"M",37:"N",38:"O",39:"P",40:"Q",41:"R",42:"S",43:"T",44:"U",45:"V",46:"W",47:"X",48:"Y",49:"Z",50:"[",51:"]",52:"a",53:"b",54:"c",55:"d",56:"e",57:"f",58:"g",59:"h",60:"i",61:"j",62:"l",63:"m",64:"n",65:"o",66:"p",67:"q",68:"r",69:"s",70:"t",71:"u",72:"v",73:"x",74:"y",75:"z",76:"\xa1",77:"\xbf",78:"\u0300",79:"\u0301",80:"\u0303",81:"\u0308",82:"\u2013"},Ry=function(){function t(){}return t.prototype.ngOnInit=function(){var t=this;this.checked=!0,this.generatedSentence=document.getElementById("generated-text"),this.generatedSentence.innerText="",this.generateButton=document.getElementById("generate-button"),console.log("Loading model..."),Vg("assets/char_rnn/model.json").then(function(e){t.cervantesModel=e,console.log("Model load."),t.enableGeneration()})},t.prototype.enableGeneration=function(){this.generateButton.innerText="Lets write a new chapter!",this.checked=!1},t.prototype.cervantesTalk=function(t){return e=this,void 0,r=function(){var e,n,r,o=this;return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(i){switch(i.label){case 0:this.generatedSentence.innerText=t,this.checked=!0,this.generateButton.innerText="Pay attention to Cervantes words",e=0,i.label=1;case 1:return e<3e3?[4,(n=Sf.id(function(){var e=o.convert(t),n=o.cervantesModel.predict(e);return o.sample(n)})).data()]:[3,5];case 2:return r=i.sent(),n.dispose(),this.generatedSentence.innerText=t+=Ty[r],[4,Sf.Pb()];case 3:i.sent(),i.label=4;case 4:return e++,[3,1];case 5:return this.enableGeneration(),[2]}})},new((n=void 0)||(n=Promise))(function(t,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function a(t){try{s(r.throw(t))}catch(t){o(t)}}function s(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,a)}s((r=r.apply(e,[])).next())});var e,n,r},t.prototype.sample=function(t){return Sf.id(function(){t=t.log();var e=Sf.vc(.3);return(t=(t=(t=(t=t.div(e)).exp()).div(t.sum())).mul(Sf.jc(t.shape))).argMax(1)})},t.prototype.convert=function(t){(t=(t=t.toLowerCase()).split("").filter(function(t){return t in Py}).join("")).length<40?t=t.padStart(40):t.length>40&&(t=t.substring(t.length-40));for(var e=Sf.J([1,40,Object.keys(Ty).length]),n=0;n<40;n++){var r=t.charAt(n);e.set(1,0,n,Py[r])}return e.toTensor()},t}(),My=Zr({encapsulation:0,styles:[[""]],data:{}});function Dy(t){return ji(0,[(t()(),Co(0,0,null,null,29,"div",[["class","profile-page sidebar-collapse"]],null,null,null,null,null)),(t()(),Co(1,0,null,null,0,"div",[["class","page-header header-filter"],["data-parallax","true"],["style","background-image: url('../../assets/img/best-books-2017-header.jpg');"]],null,null,null,null,null)),(t()(),Co(2,0,null,null,25,"div",[["class","main main-raised"]],null,null,null,null,null)),(t()(),Co(3,0,null,null,24,"div",[["class","profile-content"]],null,null,null,null,null)),(t()(),Co(4,0,null,null,23,"div",[["class","container"]],null,null,null,null,null)),(t()(),Co(5,0,null,null,6,"div",[["class","row"]],null,null,null,null,null)),(t()(),Co(6,0,null,null,5,"div",[["class","col-md-6 ml-auto mr-auto"]],null,null,null,null,null)),(t()(),Co(7,0,null,null,4,"div",[["class","section text-center"]],null,null,null,null,null)),(t()(),Co(8,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Ri(-1,null,["Cervantes Bot"])),(t()(),Co(10,0,null,null,1,"h6",[["class","title text-center"]],null,null,null,null,null)),(t()(),Ri(-1,null,["He can write new stories of Don Quijote de la Mancha"])),(t()(),Co(12,0,null,null,7,"div",[["class","row justify-content-md-center"]],null,null,null,null,null)),(t()(),Co(13,0,null,null,6,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),Co(14,0,null,null,5,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),Co(15,0,null,null,1,"label",[["class","bmd-label-floating"],["for","exampleInput1"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Give Cervantes some hint of what to write about"])),(t()(),Co(17,0,[["input",1]],null,0,"input",[["class","form-control"],["id","exampleInput1"],["type","text"]],null,null,null,null,null)),(t()(),Co(18,0,null,null,1,"span",[["class","bmd-help"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Try not to be too brief!"])),(t()(),Co(20,0,null,null,3,"div",[["class","row justify-content-md-center"]],null,null,null,null,null)),(t()(),Co(21,0,null,null,2,"div",[["class","col-md-auto"]],null,null,null,null,null)),(t()(),Co(22,0,null,null,1,"button",[["class","btn"],["data-container","body"],["data-placement","bottom"],["data-toggle","tooltip"],["id","generate-button"],["style","white-space: normal"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.cervantesTalk(ei(t,17).value)&&r),r},null,null)),(t()(),Ri(-1,null,[" Give me a minute! I'm poring over Don Quijote de la Mancha... "])),(t()(),Co(24,0,null,null,3,"div",[["class","row justify-content-md-center"]],null,null,null,null,null)),(t()(),Co(25,0,null,null,2,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),Co(26,0,null,null,1,"div",[["class","section text-justify"]],null,null,null,null,null)),(t()(),Co(27,0,null,null,0,"p",[["id","generated-text"]],null,null,null,null,null)),(t()(),Co(28,0,null,null,1,"app-footer",[],null,null,null,wf,bf)),di(29,114688,null,0,yf,[],null,null)],function(t,e){t(e,29,0)},function(t,e){t(e,22,0,e.component.checked)})}var jy=qo("app-cervantes",Ry,function(t){return ji(0,[(t()(),Co(0,0,null,null,1,"app-cervantes",[],null,null,null,Dy,My)),di(1,114688,null,0,Ry,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]);function Ly(t,e){return null==t&&null==e?null:null==t?e.clone():null===e?t.clone():t.concat(e,0)}function zy(t,e){for(var n=[],r=0;r<t.length;r++)n.push({value:t[r],index:r});n.sort(function(t,e){return e.value-t.value});var o=new Float32Array(e),i=new Int32Array(e);for(r=0;r<e;r++)o[r]=n[r].value,i[r]=n[r].index;return{values:o,indices:i}}var By=function(){function t(){this.classDatasetMatrices={},this.classExampleCount={}}return t.prototype.addExample=function(t,e){var n=this;if(null==this.exampleShape&&(this.exampleShape=t.shape),!Sf.rd.arraysEqual(this.exampleShape,t.shape))throw new Error("Example shape provided, "+t.shape+" does not match previously provided example shapes "+this.exampleShape+".");if(!Number.isInteger(e))throw new Error("classIndex must be an integer, got "+e+".");this.clearTrainDatasetMatrix(),Object(Sf.id)(function(){var r=n.normalizeVectorToUnitLength(t.flatten()),o=r.shape[0];if(null==n.classDatasetMatrices[e])n.classDatasetMatrices[e]=r.as2D(1,o);else{var i=n.classDatasetMatrices[e].as2D(n.classExampleCount[e],o).concat(r.as2D(1,o),0);n.classDatasetMatrices[e].dispose(),n.classDatasetMatrices[e]=i}Object(Sf.eb)(n.classDatasetMatrices[e]),null==n.classExampleCount[e]&&(n.classExampleCount[e]=0),n.classExampleCount[e]++})},t.prototype.similarities=function(t){var e=this;return Object(Sf.id)(function(){var n=e.normalizeVectorToUnitLength(t.flatten()),r=n.shape[0];if(null==e.trainDatasetMatrix){var o=null;for(var i in e.classDatasetMatrices)o=Ly(o,e.classDatasetMatrices[i]);e.trainDatasetMatrix=o}if(null==e.trainDatasetMatrix)return console.warn("Cannot predict without providing training examples."),null;Object(Sf.eb)(e.trainDatasetMatrix);var a=e.getNumExamples();return e.trainDatasetMatrix.as2D(a,r).matMul(n.as2D(r,1)).as1D()})},t.prototype.predictClass=function(t,e){return void 0===e&&(e=3),function(t,e,n,r){return new(n||(n=Promise))(function(e,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function a(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?e(t.value):new n(function(e){e(t.value)}).then(i,a)}s((r=r.apply(t,[])).next())})}(this,0,void 0,function(){var n,r,o,i,a=this;return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(s){switch(s.label){case 0:if(e<1)throw new Error("Please provide a positive integer k value to predictClass.");if(0===this.getNumExamples())throw new Error("You have not added any exaples to the KNN classifier. Please add examples before calling predictClass.");return n=Object(Sf.id)(function(){return a.similarities(t).asType("float32")}),r=Math.min(e,this.getNumExamples()),i=zy,[4,n.data()];case 1:return o=i.apply(void 0,[s.sent(),r]).indices,n.dispose(),[2,this.calculateTopClass(o,r)]}})})},t.prototype.clearClass=function(t){if(null==this.classDatasetMatrices[t])throw new Error("Cannot clear invalid class ${classIndex}");delete this.classDatasetMatrices[t],delete this.classExampleCount[t],this.clearTrainDatasetMatrix()},t.prototype.clearAllClasses=function(){for(var t in this.classDatasetMatrices)this.clearClass(+t)},t.prototype.getClassExampleCount=function(){return this.classExampleCount},t.prototype.getClassifierDataset=function(){return this.classDatasetMatrices},t.prototype.getNumClasses=function(){return Object.keys(this.classExampleCount).length},t.prototype.setClassifierDataset=function(t){for(var e in this.clearTrainDatasetMatrix(),this.classDatasetMatrices=t,t)this.classExampleCount[e]=t[e].shape[0]},t.prototype.calculateTopClass=function(t,e){var n=-1,r={};if(null==t)return{classIndex:n,confidences:r};var o=[];for(var i in this.classDatasetMatrices){var a=this.classExampleCount[i];+i>0&&(a+=o[+i-1]),o.push(a)}var s=Array(Object.keys(this.classDatasetMatrices).length).fill(0);for(i=0;i<t.length;i++)for(var u=0;u<o.length;u++)if(t[i]<o[u]){s[u]++;break}var l=0;for(var i in this.classDatasetMatrices){var c=s[i]/e;c>l&&(l=c,n=+i),r[i]=c}return{classIndex:n,confidences:r}},t.prototype.clearTrainDatasetMatrix=function(){null!=this.trainDatasetMatrix&&(this.trainDatasetMatrix.dispose(),this.trainDatasetMatrix=null)},t.prototype.normalizeVectorToUnitLength=function(t){return Object(Sf.id)(function(){var e=t.norm();return Object(Sf.Da)(t,e)})},t.prototype.getNumExamples=function(){var t=0;for(var e in this.classDatasetMatrices)t+=this.classExampleCount[+e];return t},t.prototype.dispose=function(){for(var t in this.clearTrainDatasetMatrix(),this.classDatasetMatrices)this.classDatasetMatrices[t].dispose()},t}();function Fy(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function Vy(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var Uy={0:"tench, Tinca tinca",1:"goldfish, Carassius auratus",2:"great white shark, white shark, man-eater, man-eating shark, Carcharodon carcharias",3:"tiger shark, Galeocerdo cuvieri",4:"hammerhead, hammerhead shark",5:"electric ray, crampfish, numbfish, torpedo",6:"stingray",7:"cock",8:"hen",9:"ostrich, Struthio camelus",10:"brambling, Fringilla montifringilla",11:"goldfinch, Carduelis carduelis",12:"house finch, linnet, Carpodacus mexicanus",13:"junco, snowbird",14:"indigo bunting, indigo finch, indigo bird, Passerina cyanea",15:"robin, American robin, Turdus migratorius",16:"bulbul",17:"jay",18:"magpie",19:"chickadee",20:"water ouzel, dipper",21:"kite",22:"bald eagle, American eagle, Haliaeetus leucocephalus",23:"vulture",24:"great grey owl, great gray owl, Strix nebulosa",25:"European fire salamander, Salamandra salamandra",26:"common newt, Triturus vulgaris",27:"eft",28:"spotted salamander, Ambystoma maculatum",29:"axolotl, mud puppy, Ambystoma mexicanum",30:"bullfrog, Rana catesbeiana",31:"tree frog, tree-frog",32:"tailed frog, bell toad, ribbed toad, tailed toad, Ascaphus trui",33:"loggerhead, loggerhead turtle, Caretta caretta",34:"leatherback turtle, leatherback, leathery turtle, Dermochelys coriacea",35:"mud turtle",36:"terrapin",37:"box turtle, box tortoise",38:"banded gecko",39:"common iguana, iguana, Iguana iguana",40:"American chameleon, anole, Anolis carolinensis",41:"whiptail, whiptail lizard",42:"agama",43:"frilled lizard, Chlamydosaurus kingi",44:"alligator lizard",45:"Gila monster, Heloderma suspectum",46:"green lizard, Lacerta viridis",47:"African chameleon, Chamaeleo chamaeleon",48:"Komodo dragon, Komodo lizard, dragon lizard, giant lizard, Varanus komodoensis",49:"African crocodile, Nile crocodile, Crocodylus niloticus",50:"American alligator, Alligator mississipiensis",51:"triceratops",52:"thunder snake, worm snake, Carphophis amoenus",53:"ringneck snake, ring-necked snake, ring snake",54:"hognose snake, puff adder, sand viper",55:"green snake, grass snake",56:"king snake, kingsnake",57:"garter snake, grass snake",58:"water snake",59:"vine snake",60:"night snake, Hypsiglena torquata",61:"boa constrictor, Constrictor constrictor",62:"rock python, rock snake, Python sebae",63:"Indian cobra, Naja naja",64:"green mamba",65:"sea snake",66:"horned viper, cerastes, sand viper, horned asp, Cerastes cornutus",67:"diamondback, diamondback rattlesnake, Crotalus adamanteus",68:"sidewinder, horned rattlesnake, Crotalus cerastes",69:"trilobite",70:"harvestman, daddy longlegs, Phalangium opilio",71:"scorpion",72:"black and gold garden spider, Argiope aurantia",73:"barn spider, Araneus cavaticus",74:"garden spider, Aranea diademata",75:"black widow, Latrodectus mactans",76:"tarantula",77:"wolf spider, hunting spider",78:"tick",79:"centipede",80:"black grouse",81:"ptarmigan",82:"ruffed grouse, partridge, Bonasa umbellus",83:"prairie chicken, prairie grouse, prairie fowl",84:"peacock",85:"quail",86:"partridge",87:"African grey, African gray, Psittacus erithacus",88:"macaw",89:"sulphur-crested cockatoo, Kakatoe galerita, Cacatua galerita",90:"lorikeet",91:"coucal",92:"bee eater",93:"hornbill",94:"hummingbird",95:"jacamar",96:"toucan",97:"drake",98:"red-breasted merganser, Mergus serrator",99:"goose",100:"black swan, Cygnus atratus",101:"tusker",102:"echidna, spiny anteater, anteater",103:"platypus, duckbill, duckbilled platypus, duck-billed platypus, Ornithorhynchus anatinus",104:"wallaby, brush kangaroo",105:"koala, koala bear, kangaroo bear, native bear, Phascolarctos cinereus",106:"wombat",107:"jelly fish",108:"sea anemone, anemone",109:"brain coral",110:"flatworm, platyhelminth",111:"nematode, nematode worm, roundworm",112:"conch",113:"snail",114:"slug",115:"sea slug, nudibranch",116:"chiton, coat-of-mail shell, sea cradle, polyplacophore",117:"chambered nautilus, pearly nautilus, nautilus",118:"Dungeness crab, Cancer magister",119:"rock crab, Cancer irroratus",120:"fiddler crab",121:"king crab, Alaska crab, Alaskan king crab, Alaska king crab, Paralithodes camtschatica",122:"American lobster, Northern lobster, Maine lobster, Homarus americanus",123:"spiny lobster, langouste, rock lobster, crawfish, crayfish, sea crawfish",124:"crayfish, crawfish, crawdad, crawdaddy",125:"hermit crab",126:"isopod",127:"white stork, Ciconia ciconia",128:"black stork, Ciconia nigra",129:"spoonbill",130:"flamingo",131:"little blue heron, Egretta caerulea",132:"American egret, great white heron, Egretta albus",133:"bittern",134:"crane",135:"limpkin, Aramus pictus",136:"European gallinule, Porphyrio porphyrio",137:"American coot, marsh hen, mud hen, water hen, Fulica americana",138:"bustard",139:"ruddy turnstone, Arenaria interpres",140:"red-backed sandpiper, dunlin, Erolia alpina",141:"redshank, Tringa totanus",142:"dowitcher",143:"oystercatcher, oyster catcher",144:"pelican",145:"king penguin, Aptenodytes patagonica",146:"albatross, mollymawk",147:"grey whale, gray whale, devilfish, Eschrichtius gibbosus, Eschrichtius robustus",148:"killer whale, killer, orca, grampus, sea wolf, Orcinus orca",149:"dugong, Dugong dugon",150:"sea lion",151:"Chihuahua",152:"Japanese spaniel",153:"Maltese dog, Maltese terrier, Maltese",154:"Pekinese, Pekingese, Peke",155:"Shih-Tzu",156:"Blenheim spaniel",157:"papillon",158:"toy terrier",159:"Rhodesian ridgeback",160:"Afghan hound, Afghan",161:"basset, basset hound",162:"beagle",163:"bloodhound, sleuthhound",164:"bluetick",165:"black-and-tan coonhound",166:"Walker hound, Walker foxhound",167:"English foxhound",168:"redbone",169:"borzoi, Russian wolfhound",170:"Irish wolfhound",171:"Italian greyhound",172:"whippet",173:"Ibizan hound, Ibizan Podenco",174:"Norwegian elkhound, elkhound",175:"otterhound, otter hound",176:"Saluki, gazelle hound",177:"Scottish deerhound, deerhound",178:"Weimaraner",179:"Staffordshire bullterrier, Staffordshire bull terrier",180:"American Staffordshire terrier, Staffordshire terrier, American pit bull terrier, pit bull terrier",181:"Bedlington terrier",182:"Border terrier",183:"Kerry blue terrier",184:"Irish terrier",185:"Norfolk terrier",186:"Norwich terrier",187:"Yorkshire terrier",188:"wire-haired fox terrier",189:"Lakeland terrier",190:"Sealyham terrier, Sealyham",191:"Airedale, Airedale terrier",192:"cairn, cairn terrier",193:"Australian terrier",194:"Dandie Dinmont, Dandie Dinmont terrier",195:"Boston bull, Boston terrier",196:"miniature schnauzer",197:"giant schnauzer",198:"standard schnauzer",199:"Scotch terrier, Scottish terrier, Scottie",200:"Tibetan terrier, chrysanthemum dog",201:"silky terrier, Sydney silky",202:"soft-coated wheaten terrier",203:"West Highland white terrier",204:"Lhasa, Lhasa apso",205:"flat-coated retriever",206:"curly-coated retriever",207:"golden retriever",208:"Labrador retriever",209:"Chesapeake Bay retriever",210:"German short-haired pointer",211:"vizsla, Hungarian pointer",212:"English setter",213:"Irish setter, red setter",214:"Gordon setter",215:"Brittany spaniel",216:"clumber, clumber spaniel",217:"English springer, English springer spaniel",218:"Welsh springer spaniel",219:"cocker spaniel, English cocker spaniel, cocker",220:"Sussex spaniel",221:"Irish water spaniel",222:"kuvasz",223:"schipperke",224:"groenendael",225:"malinois",226:"briard",227:"kelpie",228:"komondor",229:"Old English sheepdog, bobtail",230:"Shetland sheepdog, Shetland sheep dog, Shetland",231:"collie",232:"Border collie",233:"Bouvier des Flandres, Bouviers des Flandres",234:"Rottweiler",235:"German shepherd, German shepherd dog, German police dog, alsatian",236:"Doberman, Doberman pinscher",237:"miniature pinscher",238:"Greater Swiss Mountain dog",239:"Bernese mountain dog",240:"Appenzeller",241:"EntleBucher",242:"boxer",243:"bull mastiff",244:"Tibetan mastiff",245:"French bulldog",246:"Great Dane",247:"Saint Bernard, St Bernard",248:"Eskimo dog, husky",249:"malamute, malemute, Alaskan malamute",250:"Siberian husky",251:"dalmatian, coach dog, carriage dog",252:"affenpinscher, monkey pinscher, monkey dog",253:"basenji",254:"pug, pug-dog",255:"Leonberg",256:"Newfoundland, Newfoundland dog",257:"Great Pyrenees",258:"Samoyed, Samoyede",259:"Pomeranian",260:"chow, chow chow",261:"keeshond",262:"Brabancon griffon",263:"Pembroke, Pembroke Welsh corgi",264:"Cardigan, Cardigan Welsh corgi",265:"toy poodle",266:"miniature poodle",267:"standard poodle",268:"Mexican hairless",269:"timber wolf, grey wolf, gray wolf, Canis lupus",270:"white wolf, Arctic wolf, Canis lupus tundrarum",271:"red wolf, maned wolf, Canis rufus, Canis niger",272:"coyote, prairie wolf, brush wolf, Canis latrans",273:"dingo, warrigal, warragal, Canis dingo",274:"dhole, Cuon alpinus",275:"African hunting dog, hyena dog, Cape hunting dog, Lycaon pictus",276:"hyena, hyaena",277:"red fox, Vulpes vulpes",278:"kit fox, Vulpes macrotis",279:"Arctic fox, white fox, Alopex lagopus",280:"grey fox, gray fox, Urocyon cinereoargenteus",281:"tabby, tabby cat",282:"tiger cat",283:"Persian cat",284:"Siamese cat, Siamese",285:"Egyptian cat",286:"cougar, puma, catamount, mountain lion, painter, panther, Felis concolor",287:"lynx, catamount",288:"leopard, Panthera pardus",289:"snow leopard, ounce, Panthera uncia",290:"jaguar, panther, Panthera onca, Felis onca",291:"lion, king of beasts, Panthera leo",292:"tiger, Panthera tigris",293:"cheetah, chetah, Acinonyx jubatus",294:"brown bear, bruin, Ursus arctos",295:"American black bear, black bear, Ursus americanus, Euarctos americanus",296:"ice bear, polar bear, Ursus Maritimus, Thalarctos maritimus",297:"sloth bear, Melursus ursinus, Ursus ursinus",298:"mongoose",299:"meerkat, mierkat",300:"tiger beetle",301:"ladybug, ladybeetle, lady beetle, ladybird, ladybird beetle",302:"ground beetle, carabid beetle",303:"long-horned beetle, longicorn, longicorn beetle",304:"leaf beetle, chrysomelid",305:"dung beetle",306:"rhinoceros beetle",307:"weevil",308:"fly",309:"bee",310:"ant, emmet, pismire",311:"grasshopper, hopper",312:"cricket",313:"walking stick, walkingstick, stick insect",314:"cockroach, roach",315:"mantis, mantid",316:"cicada, cicala",317:"leafhopper",318:"lacewing, lacewing fly",319:"dragonfly, darning needle, devil's darning needle, sewing needle, snake feeder, snake doctor, mosquito hawk, skeeter hawk",320:"damselfly",321:"admiral",322:"ringlet, ringlet butterfly",323:"monarch, monarch butterfly, milkweed butterfly, Danaus plexippus",324:"cabbage butterfly",325:"sulphur butterfly, sulfur butterfly",326:"lycaenid, lycaenid butterfly",327:"starfish, sea star",328:"sea urchin",329:"sea cucumber, holothurian",330:"wood rabbit, cottontail, cottontail rabbit",331:"hare",332:"Angora, Angora rabbit",333:"hamster",334:"porcupine, hedgehog",335:"fox squirrel, eastern fox squirrel, Sciurus niger",336:"marmot",337:"beaver",338:"guinea pig, Cavia cobaya",339:"sorrel",340:"zebra",341:"hog, pig, grunter, squealer, Sus scrofa",342:"wild boar, boar, Sus scrofa",343:"warthog",344:"hippopotamus, hippo, river horse, Hippopotamus amphibius",345:"ox",346:"water buffalo, water ox, Asiatic buffalo, Bubalus bubalis",347:"bison",348:"ram, tup",349:"bighorn, bighorn sheep, cimarron, Rocky Mountain bighorn, Rocky Mountain sheep, Ovis canadensis",350:"ibex, Capra ibex",351:"hartebeest",352:"impala, Aepyceros melampus",353:"gazelle",354:"Arabian camel, dromedary, Camelus dromedarius",355:"llama",356:"weasel",357:"mink",358:"polecat, fitch, foulmart, foumart, Mustela putorius",359:"black-footed ferret, ferret, Mustela nigripes",360:"otter",361:"skunk, polecat, wood pussy",362:"badger",363:"armadillo",364:"three-toed sloth, ai, Bradypus tridactylus",365:"orangutan, orang, orangutang, Pongo pygmaeus",366:"gorilla, Gorilla gorilla",367:"chimpanzee, chimp, Pan troglodytes",368:"gibbon, Hylobates lar",369:"siamang, Hylobates syndactylus, Symphalangus syndactylus",370:"guenon, guenon monkey",371:"patas, hussar monkey, Erythrocebus patas",372:"baboon",373:"macaque",374:"langur",375:"colobus, colobus monkey",376:"proboscis monkey, Nasalis larvatus",377:"marmoset",378:"capuchin, ringtail, Cebus capucinus",379:"howler monkey, howler",380:"titi, titi monkey",381:"spider monkey, Ateles geoffroyi",382:"squirrel monkey, Saimiri sciureus",383:"Madagascar cat, ring-tailed lemur, Lemur catta",384:"indri, indris, Indri indri, Indri brevicaudatus",385:"Indian elephant, Elephas maximus",386:"African elephant, Loxodonta africana",387:"lesser panda, red panda, panda, bear cat, cat bear, Ailurus fulgens",388:"giant panda, panda, panda bear, coon bear, Ailuropoda melanoleuca",389:"barracouta, snoek",390:"eel",391:"coho, cohoe, coho salmon, blue jack, silver salmon, Oncorhynchus kisutch",392:"rock beauty, Holocanthus tricolor",393:"anemone fish",394:"sturgeon",395:"gar, garfish, garpike, billfish, Lepisosteus osseus",396:"lionfish",397:"puffer, pufferfish, blowfish, globefish",398:"abacus",399:"abaya",400:"academic gown, academic robe, judge's robe",401:"accordion, piano accordion, squeeze box",402:"acoustic guitar",403:"aircraft carrier, carrier, flattop, attack aircraft carrier",404:"airliner",405:"airship, dirigible",406:"altar",407:"ambulance",408:"amphibian, amphibious vehicle",409:"analog clock",410:"apiary, bee house",411:"apron",412:"ashcan, trash can, garbage can, wastebin, ash bin, ash-bin, ashbin, dustbin, trash barrel, trash bin",413:"assault rifle, assault gun",414:"backpack, back pack, knapsack, packsack, rucksack, haversack",415:"bakery, bakeshop, bakehouse",416:"balance beam, beam",417:"balloon",418:"ballpoint, ballpoint pen, ballpen, Biro",419:"Band Aid",420:"banjo",421:"bannister, banister, balustrade, balusters, handrail",422:"barbell",423:"barber chair",424:"barbershop",425:"barn",426:"barometer",427:"barrel, cask",428:"barrow, garden cart, lawn cart, wheelbarrow",429:"baseball",430:"basketball",431:"bassinet",432:"bassoon",433:"bathing cap, swimming cap",434:"bath towel",435:"bathtub, bathing tub, bath, tub",436:"beach wagon, station wagon, wagon, estate car, beach waggon, station waggon, waggon",437:"beacon, lighthouse, beacon light, pharos",438:"beaker",439:"bearskin, busby, shako",440:"beer bottle",441:"beer glass",442:"bell cote, bell cot",443:"bib",444:"bicycle-built-for-two, tandem bicycle, tandem",445:"bikini, two-piece",446:"binder, ring-binder",447:"binoculars, field glasses, opera glasses",448:"birdhouse",449:"boathouse",450:"bobsled, bobsleigh, bob",451:"bolo tie, bolo, bola tie, bola",452:"bonnet, poke bonnet",453:"bookcase",454:"bookshop, bookstore, bookstall",455:"bottlecap",456:"bow",457:"bow tie, bow-tie, bowtie",458:"brass, memorial tablet, plaque",459:"brassiere, bra, bandeau",460:"breakwater, groin, groyne, mole, bulwark, seawall, jetty",461:"breastplate, aegis, egis",462:"broom",463:"bucket, pail",464:"buckle",465:"bulletproof vest",466:"bullet train, bullet",467:"butcher shop, meat market",468:"cab, hack, taxi, taxicab",469:"caldron, cauldron",470:"candle, taper, wax light",471:"cannon",472:"canoe",473:"can opener, tin opener",474:"cardigan",475:"car mirror",476:"carousel, carrousel, merry-go-round, roundabout, whirligig",477:"carpenter's kit, tool kit",478:"carton",479:"car wheel",480:"cash machine, cash dispenser, automated teller machine, automatic teller machine, automated teller, automatic teller, ATM",481:"cassette",482:"cassette player",483:"castle",484:"catamaran",485:"CD player",486:"cello, violoncello",487:"cellular telephone, cellular phone, cellphone, cell, mobile phone",488:"chain",489:"chainlink fence",490:"chain mail, ring mail, mail, chain armor, chain armour, ring armor, ring armour",491:"chain saw, chainsaw",492:"chest",493:"chiffonier, commode",494:"chime, bell, gong",495:"china cabinet, china closet",496:"Christmas stocking",497:"church, church building",498:"cinema, movie theater, movie theatre, movie house, picture palace",499:"cleaver, meat cleaver, chopper",500:"cliff dwelling",501:"cloak",502:"clog, geta, patten, sabot",503:"cocktail shaker",504:"coffee mug",505:"coffeepot",506:"coil, spiral, volute, whorl, helix",507:"combination lock",508:"computer keyboard, keypad",509:"confectionery, confectionary, candy store",510:"container ship, containership, container vessel",511:"convertible",512:"corkscrew, bottle screw",513:"cornet, horn, trumpet, trump",514:"cowboy boot",515:"cowboy hat, ten-gallon hat",516:"cradle",517:"crane",518:"crash helmet",519:"crate",520:"crib, cot",521:"Crock Pot",522:"croquet ball",523:"crutch",524:"cuirass",525:"dam, dike, dyke",526:"desk",527:"desktop computer",528:"dial telephone, dial phone",529:"diaper, nappy, napkin",530:"digital clock",531:"digital watch",532:"dining table, board",533:"dishrag, dishcloth",534:"dishwasher, dish washer, dishwashing machine",535:"disk brake, disc brake",536:"dock, dockage, docking facility",537:"dogsled, dog sled, dog sleigh",538:"dome",539:"doormat, welcome mat",540:"drilling platform, offshore rig",541:"drum, membranophone, tympan",542:"drumstick",543:"dumbbell",544:"Dutch oven",545:"electric fan, blower",546:"electric guitar",547:"electric locomotive",548:"entertainment center",549:"envelope",550:"espresso maker",551:"face powder",552:"feather boa, boa",553:"file, file cabinet, filing cabinet",554:"fireboat",555:"fire engine, fire truck",556:"fire screen, fireguard",557:"flagpole, flagstaff",558:"flute, transverse flute",559:"folding chair",560:"football helmet",561:"forklift",562:"fountain",563:"fountain pen",564:"four-poster",565:"freight car",566:"French horn, horn",567:"frying pan, frypan, skillet",568:"fur coat",569:"garbage truck, dustcart",570:"gasmask, respirator, gas helmet",571:"gas pump, gasoline pump, petrol pump, island dispenser",572:"goblet",573:"go-kart",574:"golf ball",575:"golfcart, golf cart",576:"gondola",577:"gong, tam-tam",578:"gown",579:"grand piano, grand",580:"greenhouse, nursery, glasshouse",581:"grille, radiator grille",582:"grocery store, grocery, food market, market",583:"guillotine",584:"hair slide",585:"hair spray",586:"half track",587:"hammer",588:"hamper",589:"hand blower, blow dryer, blow drier, hair dryer, hair drier",590:"hand-held computer, hand-held microcomputer",591:"handkerchief, hankie, hanky, hankey",592:"hard disc, hard disk, fixed disk",593:"harmonica, mouth organ, harp, mouth harp",594:"harp",595:"harvester, reaper",596:"hatchet",597:"holster",598:"home theater, home theatre",599:"honeycomb",600:"hook, claw",601:"hoopskirt, crinoline",602:"horizontal bar, high bar",603:"horse cart, horse-cart",604:"hourglass",605:"iPod",606:"iron, smoothing iron",607:"jack-o'-lantern",608:"jean, blue jean, denim",609:"jeep, landrover",610:"jersey, T-shirt, tee shirt",611:"jigsaw puzzle",612:"jinrikisha, ricksha, rickshaw",613:"joystick",614:"kimono",615:"knee pad",616:"knot",617:"lab coat, laboratory coat",618:"ladle",619:"lampshade, lamp shade",620:"laptop, laptop computer",621:"lawn mower, mower",622:"lens cap, lens cover",623:"letter opener, paper knife, paperknife",624:"library",625:"lifeboat",626:"lighter, light, igniter, ignitor",627:"limousine, limo",628:"liner, ocean liner",629:"lipstick, lip rouge",630:"Loafer",631:"lotion",632:"loudspeaker, speaker, speaker unit, loudspeaker system, speaker system",633:"loupe, jeweler's loupe",634:"lumbermill, sawmill",635:"magnetic compass",636:"mailbag, postbag",637:"mailbox, letter box",638:"maillot",639:"maillot, tank suit",640:"manhole cover",641:"maraca",642:"marimba, xylophone",643:"mask",644:"matchstick",645:"maypole",646:"maze, labyrinth",647:"measuring cup",648:"medicine chest, medicine cabinet",649:"megalith, megalithic structure",650:"microphone, mike",651:"microwave, microwave oven",652:"military uniform",653:"milk can",654:"minibus",655:"miniskirt, mini",656:"minivan",657:"missile",658:"mitten",659:"mixing bowl",660:"mobile home, manufactured home",661:"Model T",662:"modem",663:"monastery",664:"monitor",665:"moped",666:"mortar",667:"mortarboard",668:"mosque",669:"mosquito net",670:"motor scooter, scooter",671:"mountain bike, all-terrain bike, off-roader",672:"mountain tent",673:"mouse, computer mouse",674:"mousetrap",675:"moving van",676:"muzzle",677:"nail",678:"neck brace",679:"necklace",680:"nipple",681:"notebook, notebook computer",682:"obelisk",683:"oboe, hautboy, hautbois",684:"ocarina, sweet potato",685:"odometer, hodometer, mileometer, milometer",686:"oil filter",687:"organ, pipe organ",688:"oscilloscope, scope, cathode-ray oscilloscope, CRO",689:"overskirt",690:"oxcart",691:"oxygen mask",692:"packet",693:"paddle, boat paddle",694:"paddlewheel, paddle wheel",695:"padlock",696:"paintbrush",697:"pajama, pyjama, pj's, jammies",698:"palace",699:"panpipe, pandean pipe, syrinx",700:"paper towel",701:"parachute, chute",702:"parallel bars, bars",703:"park bench",704:"parking meter",705:"passenger car, coach, carriage",706:"patio, terrace",707:"pay-phone, pay-station",708:"pedestal, plinth, footstall",709:"pencil box, pencil case",710:"pencil sharpener",711:"perfume, essence",712:"Petri dish",713:"photocopier",714:"pick, plectrum, plectron",715:"pickelhaube",716:"picket fence, paling",717:"pickup, pickup truck",718:"pier",719:"piggy bank, penny bank",720:"pill bottle",721:"pillow",722:"ping-pong ball",723:"pinwheel",724:"pirate, pirate ship",725:"pitcher, ewer",726:"plane, carpenter's plane, woodworking plane",727:"planetarium",728:"plastic bag",729:"plate rack",730:"plow, plough",731:"plunger, plumber's helper",732:"Polaroid camera, Polaroid Land camera",733:"pole",734:"police van, police wagon, paddy wagon, patrol wagon, wagon, black Maria",735:"poncho",736:"pool table, billiard table, snooker table",737:"pop bottle, soda bottle",738:"pot, flowerpot",739:"potter's wheel",740:"power drill",741:"prayer rug, prayer mat",742:"printer",743:"prison, prison house",744:"projectile, missile",745:"projector",746:"puck, hockey puck",747:"punching bag, punch bag, punching ball, punchball",748:"purse",749:"quill, quill pen",750:"quilt, comforter, comfort, puff",751:"racer, race car, racing car",752:"racket, racquet",753:"radiator",754:"radio, wireless",755:"radio telescope, radio reflector",756:"rain barrel",757:"recreational vehicle, RV, R.V.",758:"reel",759:"reflex camera",760:"refrigerator, icebox",761:"remote control, remote",762:"restaurant, eating house, eating place, eatery",763:"revolver, six-gun, six-shooter",764:"rifle",765:"rocking chair, rocker",766:"rotisserie",767:"rubber eraser, rubber, pencil eraser",768:"rugby ball",769:"rule, ruler",770:"running shoe",771:"safe",772:"safety pin",773:"saltshaker, salt shaker",774:"sandal",775:"sarong",776:"sax, saxophone",777:"scabbard",778:"scale, weighing machine",779:"school bus",780:"schooner",781:"scoreboard",782:"screen, CRT screen",783:"screw",784:"screwdriver",785:"seat belt, seatbelt",786:"sewing machine",787:"shield, buckler",788:"shoe shop, shoe-shop, shoe store",789:"shoji",790:"shopping basket",791:"shopping cart",792:"shovel",793:"shower cap",794:"shower curtain",795:"ski",796:"ski mask",797:"sleeping bag",798:"slide rule, slipstick",799:"sliding door",800:"slot, one-armed bandit",801:"snorkel",802:"snowmobile",803:"snowplow, snowplough",804:"soap dispenser",805:"soccer ball",806:"sock",807:"solar dish, solar collector, solar furnace",808:"sombrero",809:"soup bowl",810:"space bar",811:"space heater",812:"space shuttle",813:"spatula",814:"speedboat",815:"spider web, spider's web",816:"spindle",817:"sports car, sport car",818:"spotlight, spot",819:"stage",820:"steam locomotive",821:"steel arch bridge",822:"steel drum",823:"stethoscope",824:"stole",825:"stone wall",826:"stopwatch, stop watch",827:"stove",828:"strainer",829:"streetcar, tram, tramcar, trolley, trolley car",830:"stretcher",831:"studio couch, day bed",832:"stupa, tope",833:"submarine, pigboat, sub, U-boat",834:"suit, suit of clothes",835:"sundial",836:"sunglass",837:"sunglasses, dark glasses, shades",838:"sunscreen, sunblock, sun blocker",839:"suspension bridge",840:"swab, swob, mop",841:"sweatshirt",842:"swimming trunks, bathing trunks",843:"swing",844:"switch, electric switch, electrical switch",845:"syringe",846:"table lamp",847:"tank, army tank, armored combat vehicle, armoured combat vehicle",848:"tape player",849:"teapot",850:"teddy, teddy bear",851:"television, television system",852:"tennis ball",853:"thatch, thatched roof",854:"theater curtain, theatre curtain",855:"thimble",856:"thresher, thrasher, threshing machine",857:"throne",858:"tile roof",859:"toaster",860:"tobacco shop, tobacconist shop, tobacconist",861:"toilet seat",862:"torch",863:"totem pole",864:"tow truck, tow car, wrecker",865:"toyshop",866:"tractor",867:"trailer truck, tractor trailer, trucking rig, rig, articulated lorry, semi",868:"tray",869:"trench coat",870:"tricycle, trike, velocipede",871:"trimaran",872:"tripod",873:"triumphal arch",874:"trolleybus, trolley coach, trackless trolley",875:"trombone",876:"tub, vat",877:"turnstile",878:"typewriter keyboard",879:"umbrella",880:"unicycle, monocycle",881:"upright, upright piano",882:"vacuum, vacuum cleaner",883:"vase",884:"vault",885:"velvet",886:"vending machine",887:"vestment",888:"viaduct",889:"violin, fiddle",890:"volleyball",891:"waffle iron",892:"wall clock",893:"wallet, billfold, notecase, pocketbook",894:"wardrobe, closet, press",895:"warplane, military plane",896:"washbasin, handbasin, washbowl, lavabo, wash-hand basin",897:"washer, automatic washer, washing machine",898:"water bottle",899:"water jug",900:"water tower",901:"whiskey jug",902:"whistle",903:"wig",904:"window screen",905:"window shade",906:"Windsor tie",907:"wine bottle",908:"wing",909:"wok",910:"wooden spoon",911:"wool, woolen, woollen",912:"worm fence, snake fence, snake-rail fence, Virginia fence",913:"wreck",914:"yawl",915:"yurt",916:"web site, website, internet site, site",917:"comic book",918:"crossword puzzle, crossword",919:"street sign",920:"traffic light, traffic signal, stoplight",921:"book jacket, dust cover, dust jacket, dust wrapper",922:"menu",923:"plate",924:"guacamole",925:"consomme",926:"hot pot, hotpot",927:"trifle",928:"ice cream, icecream",929:"ice lolly, lolly, lollipop, popsicle",930:"French loaf",931:"bagel, beigel",932:"pretzel",933:"cheeseburger",934:"hotdog, hot dog, red hot",935:"mashed potato",936:"head cabbage",937:"broccoli",938:"cauliflower",939:"zucchini, courgette",940:"spaghetti squash",941:"acorn squash",942:"butternut squash",943:"cucumber, cuke",944:"artichoke, globe artichoke",945:"bell pepper",946:"cardoon",947:"mushroom",948:"Granny Smith",949:"strawberry",950:"orange",951:"lemon",952:"fig",953:"pineapple, ananas",954:"banana",955:"jackfruit, jak, jack",956:"custard apple",957:"pomegranate",958:"hay",959:"carbonara",960:"chocolate sauce, chocolate syrup",961:"dough",962:"meat loaf, meatloaf",963:"pizza, pizza pie",964:"potpie",965:"burrito",966:"red wine",967:"espresso",968:"cup",969:"eggnog",970:"alp",971:"bubble",972:"cliff, drop, drop-off",973:"coral reef",974:"geyser",975:"lakeside, lakeshore",976:"promontory, headland, head, foreland",977:"sandbar, sand bar",978:"seashore, coast, seacoast, sea-coast",979:"valley, vale",980:"volcano",981:"ballplayer, baseball player",982:"groom, bridegroom",983:"scuba diver",984:"rapeseed",985:"daisy",986:"yellow lady's slipper, yellow lady-slipper, Cypripedium calceolus, Cypripedium parviflorum",987:"corn",988:"acorn",989:"hip, rose hip, rosehip",990:"buckeye, horse chestnut, conker",991:"coral fungus",992:"agaric",993:"gyromitra",994:"stinkhorn, carrion fungus",995:"earthstar",996:"hen-of-the-woods, hen of the woods, Polyporus frondosus, Grifola frondosa",997:"bolete",998:"ear, spike, capitulum",999:"toilet tissue, toilet paper, bathroom tissue"},Wy="https://storage.googleapis.com/tfjs-models/tfjs/",qy=224,Hy=function(){function t(t,e){this.intermediateModels={},this.path=Wy+"mobilenet_v"+t+"_"+{.25:"0.25",.5:"0.50",.75:"0.75",1:"1.0"}[e]+"_"+qy+"/model.json",this.normalizationOffset=Object(Sf.vc)(127.5)}return t.prototype.load=function(){return Fy(this,void 0,void 0,function(){var t,e,n=this;return Vy(this,function(r){switch(r.label){case 0:return t=this,[4,Vg(this.path)];case 1:return t.model=r.sent(),this.endpoints=this.model.layers.map(function(t){return t.name}),[4,(e=Object(Sf.id)(function(){return n.model.predict(Object(Sf.zd)([1,qy,qy,3]))})).data()];case 2:return r.sent(),e.dispose(),[2]}})})},t.prototype.infer=function(t,e){var n=this;if(null!=e&&-1===this.endpoints.indexOf(e))throw new Error("Unknown endpoint "+e+". Available endpoints: "+this.endpoints+".");return Object(Sf.id)(function(){t instanceof Sf.m||(t=Object(Sf.Ta)(t));var r=t.toFloat().sub(n.normalizationOffset).div(n.normalizationOffset),o=r;t.shape[0]===qy&&t.shape[1]===qy||(o=Sf.cb.resizeBilinear(r,[qy,qy],!0));var i,a=o.reshape([1,qy,qy,3]);if(null==e)i=n.model;else{if(null==n.intermediateModels[e]){var s=n.model.layers.find(function(t){return t.name===e});n.intermediateModels[e]=Bg({inputs:n.model.inputs,outputs:s.output})}i=n.intermediateModels[e]}return i.predict(a)})},t.prototype.classify=function(t,e){return void 0===e&&(e=3),Fy(this,void 0,void 0,function(){var n,r;return Vy(this,function(o){switch(o.label){case 0:return[4,function(t,e){return Fy(this,void 0,void 0,function(){var n,r,o,i,a,s;return Vy(this,function(u){switch(u.label){case 0:return[4,t.data()];case 1:for(n=u.sent(),r=[],s=0;s<n.length;s++)r.push({value:n[s],index:s});for(r.sort(function(t,e){return e.value-t.value}),o=new Float32Array(e),i=new Int32Array(e),s=0;s<e;s++)o[s]=r[s].value,i[s]=r[s].index;for(a=[],s=0;s<i.length;s++)a.push({className:Uy[i[s]],probability:o[s]});return[2,a]}})})}(n=this.infer(t),e)];case 1:return r=o.sent(),n.dispose(),[2,r]}})})},t}(),Gy=function(){function t(t,e){this.duration=t,this.granularity=e,this.tickFns=[],this._running=!1}return t.prototype.start=function(){var t=this;if(!this._running){this._running=!0;var e=function(){var n=t.duration-(Date.now()-t.startTime);n>0?setTimeout(e,t.granularity):(n=0,t._running=!1),t.tickFns.forEach(function(t){t(n)})};this.startTime=Date.now(),e()}},Object.defineProperty(t.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),t.prototype.addTickFn=function(t){this.tickFns.push(t)},t}(),$y=["Rock","Paper","Scissors"],Ky=["train-rock-button","train-paper-button","train-scissors-button"],Qy=["train-rock-span","train-paper-span","train-scissors-span"],Xy=["train-rock-pg","train-paper-pg","train-scissors-pg"],Yy=[[0,1,-1],[-1,0,1],[1,-1,0]],Zy=["rock-you","paper-you","scissors-you"],Jy=["rock-cpu","paper-cpu","scissors-cpu"],tb=function(){function t(){}return t.prototype.ngOnInit=function(){return t=this,void 0,n=function(){var t,e,n,o,i,a=this;return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(s){switch(s.label){case 0:return this.training=-1,this.infoTexts=[],this.videoPlaying=!1,this.currentMove=-1,this.firstExampleTrained=!1,this.gaming=!1,this.knn=new By,t=this,[4,function(t,e){return void 0===t&&(t=1),void 0===e&&(e=1),Fy(this,void 0,void 0,function(){var n;return Vy(this,function(o){switch(o.label){case 0:if(null==r)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(1!==t)throw new Error("Currently only MobileNet V1 is supported. Got version "+t+".");if(-1===[.25,.5,.75,1].indexOf(e))throw new Error("MobileNet constructed with invalid alpha "+e+". Valid multipliers are 0.25, 0.50, 0.75, and 1.0.");return[4,(n=new Hy(t,e)).load()];case 1:return o.sent(),[2,n]}})})}()];case 1:for(t.mobilenet=s.sent(),e=function(t){var e=document.getElementById(Ky[t]);e.addEventListener("mousedown",function(){a.training=t,e.innerText="Training "+$y[t]+"..."}),e.addEventListener("mouseup",function(){a.training=-1,e.innerText="Train "+$y[t]}),n.infoTexts.push(document.getElementById(Qy[t]))},n=this,o=0;o<3;o++)e(o);return this.startButton=document.getElementById("start-game-button"),this.startButton.onclick=function(){a.startGame()},this.gameStatus=document.getElementById("game-status"),this.cpuMoveSpan=document.getElementById("cpu-move"),this.yourMoveSpan=document.getElementById("your-move"),this.gestureYouImages=Zy.map(function(t){return document.getElementById(t)}),this.gestureCpuImages=Jy.map(function(t){return document.getElementById(t)}),this.youImg=document.getElementById("you"),this.hiddenCanvas=document.createElement("canvas"),this.hiddenCanvas.width=227,this.hiddenCanvas.height=227,i=/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent),this.video=this.videoElement.nativeElement,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:i?void 0:227,height:i?void 0:227}}).then(function(t){a.video.srcObject=t,a.video.height=227,a.video.width=227,a.video.addEventListener("playing",function(){return a.videoPlaying=!0}),a.video.addEventListener("paused",function(){return a.videoPlaying=!1})}),this.start(),[2]}})},new((e=void 0)||(e=Promise))(function(r,o){function i(t){try{s(n.next(t))}catch(t){o(t)}}function a(t){try{s(n.throw(t))}catch(t){o(t)}}function s(t){t.done?r(t.value):new e(function(e){e(t.value)}).then(i,a)}s((n=n.apply(t,[])).next())});var t,e,n},t.prototype.startGame=function(){var t=this;this.startButton.disabled||(this.gaming=!0,this.startButton.disabled=!0,this.cpuMoveSpan.hidden=!1,this.countDownTimer=new Gy(5e3,20),this.countDownTimer.addTickFn(function(e){t.gameStatus.innerText=(e/1e3).toFixed(1)+" seconds left. Prepare your move!";for(var n=Math.floor(3*Math.random()),r=0;r<3;r++)t.gestureCpuImages[r].hidden=r!==n;0===e&&t.resolveGame()}),this.countDownTimer.start())},t.prototype.resolveGame=function(){this.gaming=!1;var t=Math.floor(3*Math.random());switch(Yy[t][this.currentMove]){case-1:this.gameStatus.innerText="You lose. Try again!";break;case 0:this.gameStatus.innerText="It's a draw! Try again.";break;case 1:this.gameStatus.innerText="You win. Yay!"}for(var e=0;e<3;e++)this.gestureCpuImages[e].hidden=e!==t,this.gestureYouImages[e].hidden=!0;this.startButton.disabled=!1,this.hiddenCanvas.getContext("2d").drawImage(this.video,0,0,227,227),this.youImg.src=this.hiddenCanvas.toDataURL(),this.youImg.hidden=!1},t.prototype.start=function(){this.video.play(),this.timer=requestAnimationFrame(this.animate.bind(this))},t.prototype.animate=function(){var t,e,n=this;try{t=Sf.Ta(this.video)}catch(t){return void requestAnimationFrame(this.animate.bind(this))}var r=function(){return n.mobilenet.infer(t,"conv_preds")};-1!==this.training&&(e=r(),this.knn.addExample(e,this.training)),this.knn.getNumClasses()>0&&(e=r(),this.yourMoveSpan.hidden=!1,this.knn.predictClass(e,3).then(function(t){n.currentMove=t.classIndex;for(var e=0;e<3;e++){n.infoTexts[e].style.fontWeight=t.classIndex===e?"bold":"normal";var r=n.knn.getClassExampleCount();if(n.youImg.hidden=!0,n.gestureYouImages[e].hidden=t.classIndex!==e,r[e]>0){n.infoTexts[e].innerText=" "+r[e]+" examples";var o=document.getElementById(Xy[e]);o.style.width=100*t.confidences[e]+"%",o.setAttribute("aria-value-now",""+100*t.confidences[e])}}n.firstExampleTrained||(n.firstExampleTrained=!0,n.startButton.disabled=!1)})),t.dispose(),null!=e&&e.dispose(),this.timer=requestAnimationFrame(this.animate.bind(this))},t}(),eb=Zr({encapsulation:0,styles:[["div.video__frame[_ngcontent-%COMP%]{box-shadow:0 0 55px 2px rgba(0,0,0,.71)}"]],data:{}});function nb(t){return ji(0,[function(t,e,n){var r=[];for(var o in n)r.push({propName:o,bindingType:n[o]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:402653184,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:1,filterId:po(1),bindings:r},ngContent:null}}(0,0,{videoElement:0}),(t()(),Co(1,0,null,null,69,"div",[["class","profile-page sidebar-collapse"]],null,null,null,null,null)),(t()(),Co(2,0,null,null,0,"div",[["class","page-header header-filter"],["data-parallax","true"],["style","background-image: url('../../assets/img/rockpaper.jpg');"]],null,null,null,null,null)),(t()(),Co(3,0,null,null,65,"div",[["class","main main-raised"]],null,null,null,null,null)),(t()(),Co(4,0,null,null,64,"div",[["class","profile-content"]],null,null,null,null,null)),(t()(),Co(5,0,null,null,63,"div",[["class","container"]],null,null,null,null,null)),(t()(),Co(6,0,null,null,6,"div",[["class","row"]],null,null,null,null,null)),(t()(),Co(7,0,null,null,5,"div",[["class","col-md-6 ml-auto mr-auto"]],null,null,null,null,null)),(t()(),Co(8,0,null,null,4,"div",[["class","section text-center"]],null,null,null,null,null)),(t()(),Co(9,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Ri(-1,null,["Rock Paper Scissors "])),(t()(),Co(11,0,null,null,1,"h6",[["class","title text-center"]],null,null,null,null,null)),(t()(),Ri(-1,null,["He will beat you."])),(t()(),Co(13,0,null,null,3,"div",[["class","row justify-content-center"]],null,null,null,null,null)),(t()(),Co(14,0,null,null,2,"div",[["class","col-auto text-center"]],null,null,null,null,null)),(t()(),Co(15,0,null,null,1,"div",[["class","video__frame"]],null,null,null,null,null)),(t()(),Co(16,0,[[1,0],["video",1]],null,0,"video",[["autoplay",""],["id","video"]],null,null,null,null,null)),(t()(),Co(17,0,null,null,51,"div",[["class","section text-center"]],null,null,null,null,null)),(t()(),Co(18,0,null,null,21,"div",[["class","row justify-content-center"]],null,null,null,null,null)),(t()(),Co(19,0,null,null,6,"div",[["class","col-2 col-sm-auto"]],null,null,null,null,null)),(t()(),Co(20,0,null,null,1,"button",[["class","btn btn-success"],["id","train-rock-button"],["type","button"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Train Rock"])),(t()(),Co(22,0,null,null,1,"div",[["class","progress"]],null,null,null,null,null)),(t()(),Co(23,0,null,null,0,"div",[["aria-valuemax","100"],["aria-valuemin","0"],["aria-valuenow","0"],["class","progress-bar bg-success"],["id","train-rock-pg"],["role","progressbar"],["style","width: 0%"]],null,null,null,null,null)),(t()(),Co(24,0,null,null,1,"span",[["id","train-rock-span"]],null,null,null,null,null)),(t()(),Ri(-1,null,["No examples added"])),(t()(),Co(26,0,null,null,6,"div",[["class","col-2 col-sm-auto"]],null,null,null,null,null)),(t()(),Co(27,0,null,null,1,"button",[["class","btn btn-primary"],["id","train-paper-button"],["type","button"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Train Paper"])),(t()(),Co(29,0,null,null,1,"div",[["class","progress"]],null,null,null,null,null)),(t()(),Co(30,0,null,null,0,"div",[["aria-valuemax","100"],["aria-valuemin","0"],["aria-valuenow","0"],["class","progress-bar bg-primary"],["id","train-paper-pg"],["role","progressbar"],["style","width: 0%"]],null,null,null,null,null)),(t()(),Co(31,0,null,null,1,"span",[["id","train-paper-span"]],null,null,null,null,null)),(t()(),Ri(-1,null,[" No examples added"])),(t()(),Co(33,0,null,null,6,"div",[["class","col-2 col-sm-auto"]],null,null,null,null,null)),(t()(),Co(34,0,null,null,1,"button",[["class","btn btn-danger"],["id","train-scissors-button"],["type","button"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Train Scissors"])),(t()(),Co(36,0,null,null,1,"div",[["class","progress"]],null,null,null,null,null)),(t()(),Co(37,0,null,null,0,"div",[["aria-valuemax","100"],["aria-valuemin","0"],["aria-valuenow","0"],["class","progress-bar bg-danger"],["id","train-scissors-pg"],["role","progressbar"],["style","width: 0%"]],null,null,null,null,null)),(t()(),Co(38,0,null,null,1,"span",[["id","train-scissors-span"]],null,null,null,null,null)),(t()(),Ri(-1,null,[" No examples added"])),(t()(),Co(40,0,null,null,10,"div",[["class","section text-center"]],null,null,null,null,null)),(t()(),Co(41,0,null,null,6,"div",[["class","row justify-content-center"]],null,null,null,null,null)),(t()(),Co(42,0,null,null,2,"div",[["class","col-xs-6"]],null,null,null,null,null)),(t()(),Co(43,0,null,null,1,"button",[["class","btn btn-default"],["data-target","#exampleModal"],["data-toggle","modal"],["type","button"]],null,null,null,null,null)),(t()(),Ri(-1,null,[" Instructions "])),(t()(),Co(45,0,null,null,2,"div",[["class","col-xs-6"]],null,null,null,null,null)),(t()(),Co(46,0,null,null,1,"button",[["class","btn btn-default"],["disabled",""],["id","start-game-button"],["type","button"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Start a game"])),(t()(),Co(48,0,null,null,2,"div",[["class","row justify-content-center"]],null,null,null,null,null)),(t()(),Co(49,0,null,null,1,"div",[["class","col-xs-6"]],null,null,null,null,null)),(t()(),Co(50,0,null,null,0,"span",[["id","game-status"]],null,null,null,null,null)),(t()(),Co(51,0,null,null,17,"div",[["class","row justify-content-center "]],null,null,null,null,null)),(t()(),Co(52,0,null,null,8,"div",[["class","col-xs-6 col-auto"]],null,null,null,null,null)),(t()(),Co(53,0,null,null,0,"i",[["class","far fa-hand-rock fa-10x"],["hidden",""],["id","rock-you"]],null,null,null,null,null)),(t()(),Co(54,0,null,null,0,"i",[["class","far fa-hand-paper fa-10x"],["hidden",""],["id","paper-you"]],null,null,null,null,null)),(t()(),Co(55,0,null,null,0,"i",[["class","far fa-hand-scissors fa-10x"],["hidden",""],["id","scissors-you"]],null,null,null,null,null)),(t()(),Co(56,0,null,null,0,"img",[["class","float-right"],["hidden",""],["id","you"],["src",""]],null,null,null,null,null)),(t()(),Co(57,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Co(58,0,null,null,2,"span",[["hidden",""],["id","your-move"]],null,null,null,null,null)),(t()(),Co(59,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),Ri(-1,null,["Your move"])),(t()(),Co(61,0,null,null,7,"div",[["class","col-xs-6 col-auto"]],null,null,null,null,null)),(t()(),Co(62,0,null,null,0,"i",[["class","far fa-hand-rock fa-10x"],["hidden",""],["id","rock-cpu"]],null,null,null,null,null)),(t()(),Co(63,0,null,null,0,"i",[["class","far fa-hand-paper fa-10x"],["hidden",""],["id","paper-cpu"]],null,null,null,null,null)),(t()(),Co(64,0,null,null,0,"i",[["class","far fa-hand-scissors fa-10x"],["hidden",""],["id","scissors-cpu"]],null,null,null,null,null)),(t()(),Co(65,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Co(66,0,null,null,2,"span",[["hidden",""],["id","cpu-move"]],null,null,null,null,null)),(t()(),Co(67,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),Ri(-1,null,["Computer's move"])),(t()(),Co(69,0,null,null,1,"app-footer",[],null,null,null,wf,bf)),di(70,114688,null,0,yf,[],null,null),(t()(),Co(71,0,null,null,18,"div",[["aria-hidden","true"],["aria-labelledby","exampleModalLabel"],["class","modal fade"],["id","exampleModal"],["role","dialog"],["tabindex","-1"]],null,null,null,null,null)),(t()(),Co(72,0,null,null,15,"div",[["class","modal-dialog"],["role","document"]],null,null,null,null,null)),(t()(),Co(73,0,null,null,14,"div",[["class","modal-content"]],null,null,null,null,null)),(t()(),Co(74,0,null,null,5,"div",[["class","modal-header"]],null,null,null,null,null)),(t()(),Co(75,0,null,null,1,"h5",[["class","modal-title"],["id","exampleModalLabel"]],null,null,null,null,null)),(t()(),Ri(-1,null,["How do I play?"])),(t()(),Co(77,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(t()(),Co(78,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(t()(),Ri(-1,null,["\xd7"])),(t()(),Co(80,0,null,null,4,"div",[["class","modal-body"]],null,null,null,null,null)),(t()(),Ri(-1,null,[" First, you have to train the neural network to recognize what are you going to play: rock, paper or scissors. Press one of the 3 training buttons and hold it while the AI takes images and learn to classify the different shapes. Once it has seen at least 10 frames, you will be ready to go on to the next button. Try to move your hand around, in and out while the AI is taking pictures for a better accuracy. When you are done training the algorithm, you're ready to play. Click the "])),(t()(),Co(82,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),Ri(-1,null,["Start a game"])),(t()(),Ri(-1,null,[" button and keep your hand in front of the camera. The AI will recognize the shape of your hand and will do a random play. "])),(t()(),Co(85,0,null,null,2,"div",[["class","modal-footer"]],null,null,null,null,null)),(t()(),Co(86,0,null,null,1,"button",[["class","btn btn-secondary"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Close"])),(t()(),Co(88,0,null,null,1,"app-footer",[],null,null,null,wf,bf)),di(89,114688,null,0,yf,[],null,null)],function(t,e){t(e,70,0),t(e,89,0)},null)}var rb=qo("app-rock-paper-scissors",tb,function(t){return ji(0,[(t()(),Co(0,0,null,null,1,"app-rock-paper-scissors",[],null,null,null,nb,eb)),di(1,114688,null,0,tb,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),ob=n("b0Xh"),ib=function(){function t(){}return t.prototype.getOrientedImage=function(t){return new Promise(function(e,n){var r;ob||((ob={}).getData=function(e,n){return n.call(t),!0},ob.getTag=function(){return!1}),ob.getData(t,function(){var n=ob.getTag(t,"Orientation");if(1!=n){var o=document.createElement("canvas"),i=o.getContext("2d"),a=t.width,s=t.height,u=0,l=0,c=0;switch(n){case 3:case 4:u=-t.width,l=-t.height,c=180;break;case 5:case 6:a=t.height,s=t.width,l=-t.height,c=90;break;case 7:case 8:a=t.height,s=t.width,u=-t.width,c=270}o.width=a,o.height=s,[2,4,5,7].indexOf(n)>-1&&(i.translate(a,0),i.scale(-1,1)),i.rotate(c*Math.PI/180),i.drawImage(t,u,l),(r=document.createElement("img")).width=a,r.height=s,r.addEventListener("load",function(){e(r)}),r.src=o.toDataURL("image/png")}else e(t)})})},t}(),ab=function(){function t(t){this.imageExifService=t}return t.prototype.compressImage=function(t,e,n,r){var o=this;void 0===n&&(n=!1),void 0===r&&(r=!1);var i=new at;if(this.timeAtStart=(new Date).getTime(),this.initialFile=t,"image/jpeg"!==t.type&&"image/png"!==t.type)return setTimeout(function(){i.error({compressedFile:t,reason:"File provided is neither of type jpg nor of type png.",error:"INVALID_EXTENSION"})},0),i.asObservable();if(t.size/1024/1024<e)return setTimeout(function(){i.next(t)},0),i.asObservable();var a=document.createElement("canvas"),s=a.getContext("2d"),u=new Image,l=this;return u.onload=function(){o.imageExifService.getOrientedImage(u).then(function(c){window.URL.revokeObjectURL(u.src),a.width=c.width,a.height=c.height,s.drawImage(c,0,0);var p=s.getImageData(0,0,c.width,c.height);"image/png"===t.type&&o.isImgUsingAlpha(p)&&!n&&i.error({compressedFile:t,reason:"File provided is a png image which uses the alpha channel. No compression possible.",error:"PNG_WITH_ALPHA"}),(s=a.getContext("2d",{alpha:!1})).drawImage(c,0,0),l.getCompressedFile(a,50,e,1).then(function(t){i.next(t),l.logExecutionTime(r)}).catch(function(t){i.error(t),l.logExecutionTime(r)})})},u.src=window.URL.createObjectURL(t),i.asObservable()},t.prototype.getCompressedFile=function(t,e,n,r){var o=this;return new Promise(function(i,a){t.toBlob(function(s){if(r+1>15)a({compressedFile:o.getResultFile(s),reason:"Could not find the correct compression quality in 15 steps.",error:"MAX_STEPS_EXCEEDED"});else{var u=o.getCalculatedQuality(s,e,n,r);o.checkCompressionStatus(t,s,e,n,r,u).then(function(t){i(t)}).catch(function(t){a(t)})}},"image/jpeg",e/100)})},t.prototype.getResultFile=function(t){return this.generateResultFile(t,this.initialFile.name,this.initialFile.type,(new Date).getTime())},t.prototype.generateResultFile=function(t,e,n,r){var o=new Blob([t],{type:n});return this.blobToFile(o,e,r)},t.prototype.blobToFile=function(t,e,n){var r=t;return r.name=e,r.lastModified=n,r},t.prototype.getCalculatedQuality=function(t,e,n,r){var o=t.size/1024/1024,i=n/o;i>5&&(i=5);var a=o/(this.initialFile.size/1024/1024);a<.05&&(a=.05);var s=0,u=10*Math.abs(a-1)/(1.7*r)/i;return u<1&&(u=1),(s=i>=1?e+10*(i-1)*u:e-10*(1-i)*u)>100&&(s=e+(100-e)/2),s<0&&(s=e-e/2),s},t.prototype.checkCompressionStatus=function(t,e,n,r,o,i){var a=this;return new Promise(function(s,u){100===n&&i>=100?u({compressedFile:a.initialFile,reason:"Unfortunately there was an error while compressing the file.",error:"FILE_BIGGER_THAN_INITIAL_FILE"}):n<1&&i<n?u({compressedFile:a.getResultFile(e),reason:"Could not compress image enough to fit the maximal file size limit.",error:"UNABLE_TO_COMPRESS_ENOUGH"}):i>n&&Math.round(n)==Math.round(i)?s(a.getResultFile(e)):o>5&&i>n&&i<n+2?s(a.getResultFile(e)):i>n&&Number.isInteger(n)&&Math.floor(i)==n?s(a.getResultFile(e)):(n>i&&Math.round(n)==Math.round(i)&&(i=Math.round(i)-1),s(a.getCompressedFile(t,i,r,o+1)))})},t.prototype.isImgUsingAlpha=function(t){for(var e=0;e<t.data.length;e+=4)if(255!==t.data[e+3])return!0;return!1},t.prototype.logExecutionTime=function(t){t&&console.info("Execution time: ",(new Date).getTime()-this.timeAtStart+"ms")},t}(),sb=n("gkvR"),ub=n.n(sb),lb=n("b0Xh"),cb=function(){function t(){}return t.prototype.getOrientedImage=function(t){return new Promise(function(e,n){var r;lb||((lb={}).getData=function(e,n){return n.call(t),!0},lb.getTag=function(){return!1}),lb.getData(t,function(){var n=lb.getTag(t,"Orientation");if(1!=n){var o=document.createElement("canvas"),i=o.getContext("2d"),a=t.width,s=t.height,u=0,l=0,c=0;switch(n){case 3:case 4:u=-t.width,l=-t.height,c=180;break;case 5:case 6:a=t.height,s=t.width,l=-t.height,c=90;break;case 7:case 8:a=t.height,s=t.width,u=-t.width,c=270}o.width=a,o.height=s,[2,4,5,7].indexOf(n)>-1&&(i.translate(a,0),i.scale(-1,1)),i.rotate(c*Math.PI/180),i.drawImage(t,u,l),(r=document.createElement("img")).width=a,r.height=s,r.addEventListener("load",function(){e(r)}),r.src=o.toDataURL("image/png")}else e(t)})})},t}(),pb=function(){function t(t){this.imageExifService=t}return t.prototype.resize=function(t,e,n,r){void 0===r&&(r=!1);for(var o=new at,i=0;i<t.length;i++)this.resizeFile(t[i],e,n,r).then(function(t){o.next(t)}).catch(function(t){o.error(t)});return o.asObservable()},t.prototype.resizeCanvas=function(t,e,n){return new Promise(function(r,o){var i=new ub.a;i&&i.resize||(i=new window.pica),i.resize(t,e,n).then(function(t){r(t)},function(t){o(t)})})},t.prototype.resizeBuffer=function(t){return new Promise(function(e,n){var r=new ub.a;r&&r.resizeBuffer||(r=new window.pica),r.resizeBuffer(t).then(function(t){e(t)},function(t){n(t)})})},t.prototype.resizeFile=function(t,e,n,r){var o=this;return void 0===r&&(r=!1),new Promise(function(i,a){var s=document.createElement("canvas"),u=s.getContext("2d"),l=new Image;l.onload=function(){o.imageExifService.getOrientedImage(l).then(function(c){window.URL.revokeObjectURL(l.src),s.width=c.width,s.height=c.height,u.drawImage(c,0,0);var p=u.getImageData(0,0,c.width,c.height);if(r){var h=Math.min(e/p.width,n/p.height);e=Math.round(p.width*h),n=Math.round(p.height*h)}var f=!0;("image/jpeg"===t.type||"image/png"===t.type&&!o.isImgUsingAlpha(p))&&(f=!1,(u=s.getContext("2d",{alpha:!1})).drawImage(c,0,0));var d=document.createElement("canvas");d.width=e,d.height=n,o.resizeCanvas(s,d,{alpha:f}).then(function(e){e.toBlob(function(e){var n=o.generateResultFile(e,t.name,t.type,(new Date).getTime());i(n)},t.type)}).catch(function(t){a(t)})})},l.src=window.URL.createObjectURL(t)})},t.prototype.isImgUsingAlpha=function(t){for(var e=0;e<t.data.length;e+=4)if(255!==t.data[e+3])return!0;return!1},t.prototype.generateResultFile=function(t,e,n,r){var o=new Blob([t],{type:n});return this.blobToFile(o,e,r)},t.prototype.blobToFile=function(t,e,n){var r=t;return r.name=e,r.lastModified=n,r},t}(),hb=function(){},fb=function(){function t(t,e){this.ng2PicaService=t,this.imageExifService=e}return t.prototype.resizeImage=function(t,e,n,r){var o=this;void 0===r&&(r=!1);var i=new at;if(this.timeAtStart=(new Date).getTime(),"image/jpeg"!==t.type&&"image/png"!==t.type)return setTimeout(function(){i.error({resizedFile:t,reason:"The provided File is neither of type jpg nor of type png.",error:"INVALID_EXTENSION"})},0),i.asObservable();var a=new Image,s=this;return a.onload=function(){o.imageExifService.getOrientedImage(a).then(function(o){window.URL.revokeObjectURL(a.src);var u=o.width,l=o.height,c=u,p=l;c>e&&(c=e,p*=e/u),l=p,p>n&&(p=n,c*=n/l),p===o.height&&c===o.width?(i.next(t),s.logExecutionTime(r)):s.ng2PicaService.resize([t],c,p).subscribe(function(t){i.next(t),s.logExecutionTime(r)},function(e){i.error({resizedFile:t,reason:e,error:"PICA_ERROR"}),s.logExecutionTime(r)})})},a.src=window.URL.createObjectURL(t),i.asObservable()},t.prototype.logExecutionTime=function(t){t&&console.info("Execution time: ",(new Date).getTime()-this.timeAtStart+"ms")},t}(),db=function(){function t(t,e,n){this.imgMaxSizeService=t,this.imgMaxPXSizeService=e,this.imageExifService=n}return t.prototype.compress=function(t,e,n,r){var o=this;void 0===n&&(n=!1),void 0===r&&(r=!1);var i=new at;return t.forEach(function(t){o.compressImage(t,e,n,r).subscribe(function(t){i.next(t)},function(t){i.error(t)})}),i.asObservable()},t.prototype.resize=function(t,e,n,r){var o=this;void 0===r&&(r=!1);var i=new at;return t.forEach(function(t){o.resizeImage(t,e,n,r).subscribe(function(t){i.next(t)},function(t){i.error(t)})}),i.asObservable()},t.prototype.compressImage=function(t,e,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!1),this.imgMaxSizeService.compressImage(t,e,n,r)},t.prototype.resizeImage=function(t,e,n,r){return void 0===r&&(r=!1),this.imgMaxPXSizeService.resizeImage(t,e,n,r)},t.prototype.getEXIFOrientedImage=function(t){return this.imageExifService.getOrientedImage(t)},t}(),mb=function(){},gb=function(){function t(t){this.ng2ImgMaxService=t}return t.prototype.cropImage=function(t,e,n,r,o){var i=this;void 0===r&&(r=0),void 0===o&&(o=0);var a=new at;if("image/jpeg"!==t.type&&"image/png"!==t.type)return setTimeout(function(){a.error({croppedFile:t,reason:"File provided is neither of type jpg nor of type png.",error:"INVALID_EXTENSION"})},0),a.asObservable();var s=document.createElement("canvas"),u=s.getContext("2d"),l=new Image;return l.onload=function(){i.ng2ImgMaxService.getEXIFOrientedImage(l).then(function(c){window.URL.revokeObjectURL(l.src),s.width=e,s.height=n,u.drawImage(c,r,o,e,n,0,0,e,n);var p=u.getImageData(0,0,c.width,c.height),h=!0;("image/jpeg"===t.type||"image/png"===t.type&&!i.isImgUsingAlpha(p))&&(h=!1,(u=s.getContext("2d",{alpha:!1})).drawImage(c,r,o,e,n,0,0,e,n)),s.toBlob(function(e){var n=i.generateResultFile(e,t.name,t.type,(new Date).getTime());a.next(n)},h?"image/png":"image/jpeg")})},l.src=window.URL.createObjectURL(t),a.asObservable()},t.prototype.isImgUsingAlpha=function(t){for(var e=0;e<t.data.length;e+=4)if(255!==t.data[e+3])return!0;return!1},t.prototype.generateResultFile=function(t,e,n,r){var o=new Blob([t],{type:n});return this.blobToFile(o,e,r)},t.prototype.blobToFile=function(t,e,n){var r=t;return r.name=e,r.lastModified=n,r},t}(),vb=function(){function t(t,e){this.ng2ImgMaxService=t,this.imgCropService=e}return t.prototype.resizeExactFill=function(t,e,n,r){var o=this,i=new at;if("image/jpeg"!==t.type&&"image/png"!==t.type)return setTimeout(function(){i.error({resizedFile:t,reason:"File provided is neither of type jpg nor of type png.",error:"INVALID_EXTENSION"})},0),i.asObservable();var a=new Image;return a.onload=function(){o.ng2ImgMaxService.getEXIFOrientedImage(a).then(function(s){window.URL.revokeObjectURL(a.src);var u=s.width/s.height,l=e/n,c=1e5,p=1e5;u>l?p=e:u<=l&&(c=n),o.ng2ImgMaxService.resize([t],p,c).subscribe(function(a){var u=0,l=0;1e5===p?u=(s.width/(s.height/n)-e)/2:1e5===c&&(l=(s.height/(s.width/e)-n)/2);var h=new Image,f=document.createElement("canvas"),d=f.getContext("2d");h.onload=function(){f.width=e,f.height=n,r&&(d.fillStyle=r,d.fillRect(0,0,e,n)),d.drawImage(h,u,l,e,n,0,0,e,n);var a=d.getImageData(0,0,e,n),s=!0;("image/jpeg"===t.type||"image/png"===t.type&&!o.isImgUsingAlpha(a))&&(s=!1,d=f.getContext("2d",{alpha:!1}),r&&(d.fillStyle=r,d.fillRect(0,0,e,n)),d.drawImage(h,u,l,e,n,0,0,e,n)),f.toBlob(function(e){window.URL.revokeObjectURL(h.src);var n=o.generateResultFile(e,t.name,t.type,(new Date).getTime());i.next(n)},s?"image/png":"image/jpeg")},h.src=window.URL.createObjectURL(a)},function(t){i.error(t)})})},a.src=window.URL.createObjectURL(t),i.asObservable()},t.prototype.resizeExactCrop=function(t,e,n){var r=this,o=new at;if("image/jpeg"!==t.type&&"image/png"!==t.type)return setTimeout(function(){o.error({resizedFile:t,reason:"File provided is neither of type jpg nor of type png.",error:"INVALID_EXTENSION"})},0),o.asObservable();var i=new Image;return i.onload=function(){r.ng2ImgMaxService.getEXIFOrientedImage(i).then(function(a){window.URL.revokeObjectURL(i.src);var s=a.width/a.height,u=e/n,l=1e5,c=1e5,p=0,h=0;s>u?l=n:s<=u&&(c=e),r.ng2ImgMaxService.resize([t],c,l).subscribe(function(t){1e5===c?p=(a.width/(a.height/n)-e)/2:1e5===l&&(h=(a.height/(a.width/e)-n)/2),r.imgCropService.cropImage(t,e,n,p,h).subscribe(function(t){o.next(t)},function(t){o.error(t)})},function(t){o.error(t)})})},i.src=window.URL.createObjectURL(t),o.asObservable()},t.prototype.isImgUsingAlpha=function(t){for(var e=0;e<t.data.length;e+=4)if(255!==t.data[e+3])return!0;return!1},t.prototype.generateResultFile=function(t,e,n,r){var o=new Blob([t],{type:n});return this.blobToFile(o,e,r)},t.prototype.blobToFile=function(t,e,n){var r=t;return r.name=e,r.lastModified=n,r},t}(),yb=function(){function t(t,e,n){this.imgResizeExactService=t,this.ng2ImgMaxService=e,this.imgCropService=n}return t.prototype.compress=function(t,e,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!1),this.ng2ImgMaxService.compress(t,e,n,r)},t.prototype.resize=function(t,e,n,r){return void 0===r&&(r=!1),this.ng2ImgMaxService.resize(t,e,n,r)},t.prototype.crop=function(t,e,n,r,o){var i=this;void 0===r&&(r=0),void 0===o&&(o=0);var a=new at;return t.forEach(function(t){i.cropImage(t,e,n,r,o).subscribe(function(t){a.next(t)},function(t){a.error(t)})}),a.asObservable()},t.prototype.resizeExactCrop=function(t,e,n){var r=this,o=new at;return t.forEach(function(t){r.resizeExactCropImage(t,e,n).subscribe(function(t){o.next(t)},function(t){o.error(t)})}),o.asObservable()},t.prototype.resizeExactFill=function(t,e,n,r){var o=this,i=new at;return t.forEach(function(t){o.resizeExactFillImage(t,e,n,r).subscribe(function(t){i.next(t)},function(t){i.error(t)})}),i.asObservable()},t.prototype.resizeExactFillImage=function(t,e,n,r){return this.imgResizeExactService.resizeExactFill(t,e,n,r)},t.prototype.resizeExactCropImage=function(t,e,n){return this.imgResizeExactService.resizeExactCrop(t,e,n)},t.prototype.cropImage=function(t,e,n,r,o){return void 0===r&&(r=0),void 0===o&&(o=0),this.imgCropService.cropImage(t,e,n,r,o)},t.prototype.compressImage=function(t,e,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!1),this.ng2ImgMaxService.compressImage(t,e,n,r)},t.prototype.resizeImage=function(t,e,n,r){return void 0===r&&(r=!1),this.ng2ImgMaxService.resizeImage(t,e,n,r)},t.prototype.getEXIFOrientedImage=function(t){return this.ng2ImgMaxService.getEXIFOrientedImage(t)},t}(),bb=function(){},wb=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},_b=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},xb=function(){function t(t){this.ng2ImgTools=t}return t.prototype.ngOnInit=function(){return wb(this,void 0,void 0,function(){var t;return _b(this,function(e){switch(e.label){case 0:return this.canvas=document.getElementById("content"),this.context=this.canvas.getContext("2d"),this.context.clearRect(0,0,256,256),t=this,[4,this.createImg("../../assets/img/rose.jpg")];case 1:return t.cImg=e.sent(),this.drawImage(),[2]}})})},t.prototype.drawImage=function(){this.context.drawImage(this.cImg,0,0,this.cImg.width,this.cImg.width)},t.prototype.createModel=function(t){return wb(this,void 0,void 0,function(){return _b(this,function(e){switch(e.label){case 0:return[4,Vg(t)];case 1:return[2,e.sent()]}})})},t.prototype.loadModel=function(t){return void 0===t&&(t="style1/model.json"),wb(this,void 0,void 0,function(){var e,n,r,o,i;return _b(this,function(a){switch(a.label){case 0:return(e=document.getElementById("status")).innerText="Model Loading ...",n=document.getElementById("combined"),r=this.preProcess(this.cImg),[4,this.createModel(t)];case 1:return o=a.sent(),i=o.predict(r),this.toPixels(this.deProcess(i),n),e.innerText="Model Created ...",[2]}})})},t.prototype.preProcess=function(t){return Sf.id(function(){var e=Sf.Ta(t).toFloat(),n=Sf.vc(127.5);return e.sub(n).div(n).expandDims(0)})},t.prototype.deProcess=function(t){return Sf.id(function(){var e=Sf.vc(127.5);return t.mul(e).add(e).toInt().squeeze()})},t.prototype.toPixels=function(t,e){for(var n=e.getContext("2d"),r=t.shape,o=r[0],i=r[1],a=new Uint8ClampedArray(i*o*4),s=new ImageData(i,o),u=t.dataSync(),l=0,c=0;c<o;c++)for(var p=0;p<i;p++){var h=4*(c*i+p);a[h]=u[l],a[h+1]=u[l+1],a[h+2]=u[l+2],a[h+3]=255,l+=3}s.data.set(a),n.putImageData(s,0,0)},t.prototype.createImg=function(t){return wb(this,void 0,void 0,function(){return _b(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.crossOrigin="anonymous",r.src=t,r.width=256,r.height=256})];case 1:return[2,e.sent()]}})})},t.prototype.onFileChanged=function(t){var e=this.canvas,n=this.context,r=new FileReader,o=this;r.onload=function(t){var r=new Image;r.onload=function(){e.width=256,e.height=256,n.drawImage(r,0,0,r.width,r.height,0,0,e.width,e.height),r.src=e.toDataURL()},r.src=t.target.result,o.cImg=r},r.readAsDataURL(t.target.files[0])},t}(),Ob=Zr({encapsulation:0,styles:[[""]],data:{}});function Eb(t){return ji(0,[(t()(),Co(0,0,null,null,36,"div",[["class","profile-page sidebar-collapse"]],null,null,null,null,null)),(t()(),Co(1,0,null,null,0,"div",[["class","page-header header-filter"],["data-parallax","true"],["style","background-image: url('../../assets/img/style-header.jpg');"]],null,null,null,null,null)),(t()(),Co(2,0,null,null,32,"div",[["class","main main-raised"]],null,null,null,null,null)),(t()(),Co(3,0,null,null,31,"div",[["class","profile-content"]],null,null,null,null,null)),(t()(),Co(4,0,null,null,30,"div",[["class","section text-center"]],null,null,null,null,null)),(t()(),Co(5,0,null,null,6,"div",[["class","container"]],null,null,null,null,null)),(t()(),Co(6,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(t()(),Co(7,0,null,null,4,"div",[["class","col-md-6 ml-auto mr-auto"]],null,null,null,null,null)),(t()(),Co(8,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Ri(-1,null,["Neural Style Transfer"])),(t()(),Co(10,0,null,null,1,"h6",[["class","title text-center"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Make your images looks like a Picasso painting"])),(t()(),Co(12,0,null,null,22,"div",[["class","section text-center"]],null,null,null,null,null)),(t()(),Co(13,0,null,null,21,"div",[["class","row justify-content-center"]],null,null,null,null,null)),(t()(),Co(14,0,null,null,5,"div",[["class","col-6 col-sm-auto"]],null,null,null,null,null)),(t()(),Co(15,0,[["fileInput",1]],null,0,"input",[["style","display: none"],["type","file"]],null,[[null,"change"]],function(t,e,n){var r=!0;return"change"===e&&(r=!1!==t.component.onFileChanged(n)&&r),r},null,null)),(t()(),Co(16,0,null,null,1,"a",[["href","javascript:void(0);"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==ei(t,15).click()&&r),r},null,null)),(t()(),Co(17,0,null,null,0,"canvas",[["height","256"],["id","content"],["style","border:1px solid #9ca0a8; border-radius:5%;"],["width","256"]],null,null,null,null,null)),(t()(),Co(18,0,null,null,1,"div",[["class","text-muted"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Click on the image to upload a new one"])),(t()(),Co(20,0,null,null,14,"div",[["class","col-2 col-sm-auto"]],null,null,null,null,null)),(t()(),Co(21,0,null,null,0,"canvas",[["height","256"],["id","combined"],["style","border:1px solid #9ca0a8; border-radius:5%;"],["width","256"]],null,null,null,null,null)),(t()(),Co(22,0,null,null,1,"div",[["class","text-muted"],["id","status"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Click an image to load its model"])),(t()(),Co(24,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),Co(25,0,null,null,1,"a",[["href","javascript:void(0);"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.loadModel("../../assets/style1/model.json")&&r),r},null,null)),(t()(),Co(26,0,null,null,0,"img",[["height","50"],["src","../../assets/img/styles/style1.jpg"],["width","50"]],null,null,null,null,null)),(t()(),Co(27,0,null,null,1,"a",[["href","javascript:void(0);"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.loadModel("../../assets/style2/model.json")&&r),r},null,null)),(t()(),Co(28,0,null,null,0,"img",[["height","50"],["src","../../assets/img/styles/style2.jpg"],["width","50"]],null,null,null,null,null)),(t()(),Co(29,0,null,null,1,"a",[["href","javascript:void(0);"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.loadModel("../../assets/style3/model.json")&&r),r},null,null)),(t()(),Co(30,0,null,null,0,"img",[["height","50"],["src","../../assets/img/styles/style3.jpg"],["width","50"]],null,null,null,null,null)),(t()(),Co(31,0,null,null,1,"a",[["href","javascript:void(0);"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.loadModel("../../assets/style4/model.json")&&r),r},null,null)),(t()(),Co(32,0,null,null,0,"img",[["height","50"],["src","../../assets/img/styles/style4.jpg"],["width","50"]],null,null,null,null,null)),(t()(),Co(33,0,null,null,1,"a",[["href","javascript:void(0);"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.loadModel("../../assets/style5/model.json")&&r),r},null,null)),(t()(),Co(34,0,null,null,0,"img",[["height","50"],["src","../../assets/img/styles/style5.jpg"],["width","50"]],null,null,null,null,null)),(t()(),Co(35,0,null,null,1,"app-footer",[],null,null,null,wf,bf)),di(36,114688,null,0,yf,[],null,null)],function(t,e){t(e,36,0)},null)}var Sb=qo("app-style-transfer",xb,function(t){return ji(0,[(t()(),Co(0,0,null,null,1,"app-style-transfer",[],null,null,null,Eb,Ob)),di(1,114688,null,0,xb,[yb],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Cb=function(){function t(){}return t.prototype.ngOnInit=function(){},t}(),Ib=Zr({encapsulation:0,styles:[[""]],data:{}});function Ab(t){return ji(0,[(t()(),Co(0,0,null,null,39,"nav",[["class","navbar navbar-transparent navbar-color-on-scroll fixed-top navbar-expand-lg"],["color-on-scroll","100"],["id","sectionsNav"]],null,null,null,null,null)),(t()(),Co(1,0,null,null,38,"div",[["class","container"]],null,null,null,null,null)),(t()(),Co(2,0,null,null,8,"div",[["class","navbar-translate"]],null,null,null,null,null)),(t()(),Co(3,0,null,null,1,"a",[["class","navbar-brand"],["href","/"]],null,null,null,null,null)),(t()(),Ri(-1,null,[" Alberto Casta\xf1o "])),(t()(),Co(5,0,null,null,5,"button",[["aria-expanded","false"],["aria-label","Toggle navigation"],["class","navbar-toggler"],["data-toggle","collapse"],["type","button"]],null,null,null,null,null)),(t()(),Co(6,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(t()(),Ri(-1,null,["Toggle navigation"])),(t()(),Co(8,0,null,null,0,"span",[["class","navbar-toggler-icon"]],null,null,null,null,null)),(t()(),Co(9,0,null,null,0,"span",[["class","navbar-toggler-icon"]],null,null,null,null,null)),(t()(),Co(10,0,null,null,0,"span",[["class","navbar-toggler-icon"]],null,null,null,null,null)),(t()(),Co(11,0,null,null,28,"div",[["class","collapse navbar-collapse"]],null,null,null,null,null)),(t()(),Co(12,0,null,null,27,"ul",[["class","navbar-nav ml-auto"]],null,null,null,null,null)),(t()(),Co(13,0,null,null,17,"li",[["class","dropdown nav-item"]],null,null,null,null,null)),(t()(),Co(14,0,null,null,3,"a",[["class","dropdown-toggle nav-link"],["data-toggle","dropdown"],["href","#"]],null,null,null,null,null)),(t()(),Co(15,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),Ri(-1,null,["apps"])),(t()(),Ri(-1,null,[" Examples "])),(t()(),Co(18,0,null,null,12,"div",[["class","dropdown-menu dropdown-with-icons"]],null,null,null,null,null)),(t()(),Co(19,0,null,null,3,"a",[["class","dropdown-item"],["href","/cervantes"]],null,null,null,null,null)),(t()(),Co(20,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),Ri(-1,null,["short_text"])),(t()(),Ri(-1,null,[" Cervantes "])),(t()(),Co(23,0,null,null,3,"a",[["class","dropdown-item"],["href","/rps"]],null,null,null,null,null)),(t()(),Co(24,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),Ri(-1,null,["short_text"])),(t()(),Ri(-1,null,[" Rock Paper Scissors "])),(t()(),Co(27,0,null,null,3,"a",[["class","dropdown-item"],["href","/style-transfer"]],null,null,null,null,null)),(t()(),Co(28,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),Ri(-1,null,["short_text"])),(t()(),Ri(-1,null,[" Style Transfer "])),(t()(),Co(31,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(t()(),Co(32,0,null,null,1,"a",[["class","nav-link"],["data-original-title","Follow me on LinkedIn"],["data-placement","bottom"],["href","https://www.linkedin.com/in/alberto-casta%C3%B1o-4aa710b6/"],["rel","tooltip"],["target","_blank"],["title",""]],null,null,null,null,null)),(t()(),Co(33,0,null,null,0,"i",[["class","fa fa-linkedin"]],null,null,null,null,null)),(t()(),Co(34,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(t()(),Co(35,0,null,null,1,"a",[["class","nav-link"],["data-original-title","Visit my Github"],["data-placement","bottom"],["href","https://github.com/bertocast"],["rel","tooltip"],["target","_blank"],["title",""]],null,null,null,null,null)),(t()(),Co(36,0,null,null,0,"i",[["class","fa fa-github"]],null,null,null,null,null)),(t()(),Co(37,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(t()(),Co(38,0,null,null,1,"a",[["class","nav-link"],["data-original-title","Follow me on Medium"],["data-placement","bottom"],["href","https://medium.com/@bertocast"],["rel","tooltip"],["target","_blank"],["title",""]],null,null,null,null,null)),(t()(),Co(39,0,null,null,0,"i",[["class","fa fa-medium"]],null,null,null,null,null))],null,null)}var kb=function(){function t(){}return t.prototype.ngOnInit=function(){},t}(),Nb=Zr({encapsulation:0,styles:[[""]],data:{}});function Pb(t){return ji(0,[(t()(),Co(0,0,null,null,1,"app-header",[],null,null,null,Ab,Ib)),di(1,114688,null,0,Cb,[],null,null),(t()(),Co(2,0,null,null,1,"div",[["class","container"]],null,null,null,null,null)),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:null,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:0}}],function(t,e){t(e,1,0)},null)}var Tb=Zr({encapsulation:0,styles:[['.wrapper[_ngcontent-%COMP%]{display:inline-flex;justify-content:flex-end;border:10px solid #ff943d;transition:border-color .2s ease-in}.wrapper[_ngcontent-%COMP%]:hover{border:10px solid #ef6c00;transition:border-color .2s ease-in}canvas[_ngcontent-%COMP%]{cursor:crosshair}.row[_ngcontent-%COMP%]{margin:10vh 5vw}.flip[_ngcontent-%COMP%]{-webkit-transform:scaleX(-1);transform:scaleX(-1)}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%}.page-wrap[_ngcontent-%COMP%]{min-height:100%;margin-bottom:-60px}.page-wrap[_ngcontent-%COMP%]:after{content:"";display:block}.page-wrap[_ngcontent-%COMP%]:after, .site-footer[_ngcontent-%COMP%]{padding-top:10px;height:50px}.site-footer[_ngcontent-%COMP%]{background:#efefef;text-align:center}input[_ngcontent-%COMP%]{text-align:center}']],data:{}});function Rb(t){return ji(0,[(t()(),Co(0,0,null,null,1,"app-layout",[],null,null,null,Pb,Nb)),di(1,114688,null,0,kb,[],null,null),(t()(),Co(2,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),di(3,212992,null,0,Gh,[Hh,Rn,qe,[8,null],Mn],null,null)],function(t,e){t(e,1,0),t(e,3,0)},null)}var Mb=qo("app-root",Su,function(t){return ji(0,[(t()(),Co(0,0,null,null,1,"app-root",[],null,null,null,Rb,Tb)),di(1,114688,null,0,Su,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Db=n("dNeE"),jb={target:null,action:"click",duration:650,easing:"easeInOutQuad",offset:0,offsetMap:new Map},Lb={easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},easeOutElastic:function(t){return Math.pow(2,-10*t)*Math.sin((t-.25)*(2*Math.PI)/1)+1}};function zb(t){return t===window}var Bb=function(){function t(t,e,n,r,o,i){var a=this;this._container=t,this._listenerTarget=e,this._isWindow=n,this._to=r,this._options=o,this._isBrowser=i,this._loop=function(){a._timeLapsed+=a._tick,a._percentage=a._timeLapsed/a._options.duration,a._percentage=a._percentage>1?1:a._percentage,a._position=a._startPosition+(a._startPosition-a._to<=0?1:-1)*a._distance*Lb[a._options.easing](a._percentage),null!==a._lastPosition&&a._position===a._lastPosition?a.stop():(a._source$.next(a._position),a._isWindow?a._listenerTarget.scrollTo(0,Math.floor(a._position)):a._container.scrollTop=Math.floor(a._position),a._lastPosition=a._position)},this._tick=16,this._interval=null,this._lastPosition=null,this._timeLapsed=0,this._windowScrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,this._startPosition=this._container?this._isWindow?this._windowScrollTop:this._container.scrollTop:this._windowScrollTop,this._container&&!this._isWindow&&(this._to=this._to-this._container.getBoundingClientRect().top+this._startPosition);var s=this._startPosition-this._to;this._distance=this._container?Math.abs(this._startPosition-this._to):this._to,this._mappedOffset=this._options.offset,this._isBrowser&&this._options.offsetMap.forEach(function(t,e){return a._mappedOffset=window.innerWidth>e?t:a._mappedOffset}),this._distance+=this._mappedOffset*(s<=0?1:-1),this._source$=new Db.ReplaySubject}return t.prototype.start=function(){return clearInterval(this._interval),this._interval=setInterval(this._loop,this._tick),this._source$.asObservable()},t.prototype.stop=function(){clearInterval(this._interval),this._interval=null,this._source$.complete()},t}(),Fb=function(){function t(t,e){this._document=t,this._platformId=e,this._interruptiveEvents=["mousewheel","DOMMouseScroll","touchstart"]}return t.prototype.scrollTo=function(t){return Cl(this._platformId)?this._start(t):(new Db.ReplaySubject).asObservable()},t.prototype._start=function(t){var e=this,n=a({},jb,t);this._animation&&this._animation.stop();var r=this._getNode(n.target);if(n.target&&!r)return Object(Db.throwError)("Unable to find Target Element");var o=this._getContainer(n,r);if(n.container&&!o)return Object(Db.throwError)("Unable to find Container Element");var i=this._getListenerTarget(o)||window,s=o?o.getBoundingClientRect().top:0;r&&(s=zb(i)?r.offsetTop:r.getBoundingClientRect().top),this._animation=new Bb(o,i,zb(i),s,n,Cl(this._platformId));var u=function(){return e._animation.stop()};this._addInterruptiveEventListeners(i,u);var l=this._animation.start();return this._subscribeToAnimation(l,i,u),l},t.prototype._subscribeToAnimation=function(t,e,n){var r=this,o=t.subscribe(function(){},function(){},function(){r._removeInterruptiveEventListeners(r._interruptiveEvents,e,n),o.unsubscribe()})},t.prototype._getContainer=function(t,e){var n=null;return t.container?n=this._getNode(t.container,!0):e&&(n=this._getFirstScrollableParent(e)),n},t.prototype._addInterruptiveEventListeners=function(t,e){t||(t=window),this._interruptiveEvents.forEach(function(n){return t.addEventListener(n,e)})},t.prototype._removeInterruptiveEventListeners=function(t,e,n){e||(e=window),t.forEach(function(t){return e.removeEventListener(t,n)})},t.prototype._getFirstScrollableParent=function(t){var e=window.getComputedStyle(t),n=/(auto|scroll)/;if("fixed"===e.position)return null;for(var r=t;r=r.parentElement;null)if("absolute"!==(e=window.getComputedStyle(r)).position&&"hidden"!==e.overflow&&"hidden"!==e.overflowY&&(n.test(e.overflow+e.overflowY+e.overflowX)||"BODY"===r.tagName))return r;return null},t.prototype._getNode=function(t,e){var n,r;return void 0===e&&(e=!1),"string"==typeof(r=t)||r instanceof String?n=!e||"body"!==t&&"BODY"!==t?this._document.getElementById(function(t){return"#"===t.substring(0,1)?t.substring(1):t}(t)):this._document.body:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}(t)?n=this._document.getElementById(String(t)):t instanceof Sn?n=t.nativeElement:t instanceof HTMLElement&&(n=t),n},t.prototype._getListenerTarget=function(t){return t?this._isDocumentBody(t)?window:t:null},t.prototype._isDocumentBody=function(t){return"BODY"===t.tagName.toUpperCase()},t}(),Vb=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[Fb]}},t}(),Ub=function(){},Wb=function(){},qb=function(t,e,n){return new Wa(Eu,[Su],function(t){return function(t){for(var e={},n=[],r=!1,o=0;o<t.length;o++){var i=t[o];i.token===fe&&!0===i.value&&(r=!0),1073741824&i.flags&&n.push(i.token),i.index=o,e[Qr(i.token)]=i}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}([Do(512,qe,He,[[8,[vf,Ef,jy,rb,Sb,Mb]],[3,qe],$e]),Do(5120,sr,cr,[[3,sr]]),Do(4608,wl,_l,[sr,[2,bl]]),Do(5120,Ie,Ae,[]),Do(5120,er,ur,[]),Do(5120,nr,lr,[]),Do(4608,Ic,Ac,[Ol]),Do(6144,Dr,null,[Ic]),Do(4608,wc,xc,[]),Do(5120,$l,function(t,e,n,r,o,i,a,s){return[new yc(t,e,n),new Cc(r),new Oc(o,i,a,s)]},[Ol,tn,Pe,Ol,Ol,wc,Re,[2,_c]]),Do(4608,Kl,Kl,[$l,tn]),Do(135680,Yl,Yl,[Ol]),Do(4608,oc,oc,[Kl,Yl]),Do(6144,On,null,[oc]),Do(6144,Xl,null,[Yl]),Do(4608,ln,ln,[tn]),Do(5120,eh,cf,[Vh]),Do(4608,Xh,Xh,[]),Do(6144,Kh,null,[Xh]),Do(135680,Yh,Yh,[Vh,Cn,De,Ft,Kh]),Do(4608,Qh,Qh,[]),Do(5120,Zh,of,[Vh,Il,Jh]),Do(5120,df,ff,[pf]),Do(5120,Te,function(t){return[t]},[df]),Do(4608,cb,cb,[]),Do(4608,pb,pb,[cb]),Do(4608,ib,ib,[]),Do(4608,fb,fb,[pb,ib]),Do(4608,ab,ab,[ib]),Do(4608,db,db,[ab,fb,ib]),Do(4608,gb,gb,[db]),Do(4608,vb,vb,[db,gb]),Do(4608,yb,yb,[vb,db,gb]),Do(4608,Fb,Fb,[Ol,Pe]),Do(1073742336,xl,xl,[]),Do(1024,he,jc,[]),Do(1024,gn,function(){return[nf()]},[]),Do(512,pf,pf,[Ft]),Do(1024,Se,function(t,e){return[(n=t,ql("probe",Gl),ql("coreTokens",a({},Hl,(n||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return Gl}),hf(e)];var n},[[2,gn],pf]),Do(512,Ce,Ce,[[2,Se]]),Do(131584,_n,_n,[tn,Re,Ft,he,qe,Ce]),Do(1073742336,pr,pr,[_n]),Do(1073742336,Lc,Lc,[[3,Lc]]),Do(1024,tf,sf,[[3,Vh]]),Do(512,Op,Ep,[]),Do(512,Hh,Hh,[]),Do(256,Jh,{},[]),Do(1024,cl,af,[ul,[2,pl],Jh]),Do(512,hl,hl,[cl]),Do(512,De,De,[]),Do(512,Cn,Nn,[De,[2,An]]),Do(1024,Mh,function(){return[[{path:"home",component:_f},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"cervantes",component:Ry},{path:"rps",component:tb},{path:"style-transfer",component:xb}]]},[]),Do(1024,Vh,lf,[_n,Op,Hh,hl,Ft,Cn,De,Mh,Jh,[2,jh],[2,Th]]),Do(1073742336,rf,rf,[[2,tf],[2,Vh]]),Do(1073742336,Ub,Ub,[]),Do(1073742336,Wb,Wb,[]),Do(1073742336,Vb,Vb,[]),Do(1073742336,hb,hb,[]),Do(1073742336,mb,mb,[]),Do(1073742336,bb,bb,[]),Do(1073742336,Eu,Eu,[]),Do(256,fe,!0,[])])})}();(function(){if(fn)throw new Error("Cannot enable prod mode after platform setup.");hn=!1})(),Dc().bootstrapModuleFactory(qb).catch(function(t){return console.log(t)})},zfKp:function(t,e,n){"use strict";e.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},"zk/k":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}r.prototype=Object.create(Error.prototype),e.TimeoutError=r},zo3G:function(t,e,n){"use strict";var r=n(null),o=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.c(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.c(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.c(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(null).a))),i=n("siIJ"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.c(e,t),e}(function(t){function e(n,r){void 0===r&&(r=i.Scheduler.now);var o=t.call(this,n,function(){return e.delegate&&e.delegate!==o?e.delegate.now():r()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.c(e,t),e.prototype.schedule=function(n,r,o){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,o):t.prototype.schedule.call(this,n,r,o)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(i.Scheduler));n.d(e,"queue",function(){return s});var s=new a(o)},"zrt+":function(t,e,n){"use strict";n.r(e),n.d(e,"isObservable",function(){return o});var r=n(null);function o(t){return!!t&&(t instanceof r.a||"function"==typeof t.lift&&"function"==typeof t.subscribe)}},zvlq:function(t,e,n){"use strict";var r=n("XdTn");e.asap=new(n("UGPC").AsapScheduler)(r.AsapAction)},zzsZ:function(t,e,n){"use strict";var r=n("Q1FS"),o=n("zB/H"),i=n("OAkW");e.fromArray=function(t,e){return new r.Observable(e?function(n){var r=new o.Subscription,i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r}:i.subscribeToArray(t))}}},[[3,0]]]);