(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{3:function(t,e,n){t.exports=n("zUnb")},"Re/O":function(t,e,n){"use strict";n.d(e,"Yb",function(){return Ps}),n.d(e,"Ya",function(){return Ws}),n.d(e,"Y",function(){return Os}),n.d(e,"qb",function(){return Ns}),n.d(e,"Wb",function(){return B}),n.d(e,"a",function(){return ks}),n.d(e,"b",function(){return Q}),n.d(e,"Xb",function(){return Z}),n.d(e,"X",function(){return ti}),n.d(e,"Da",function(){return Xo}),n.d(e,"q",function(){return gn}),n.d(e,"r",function(){return vn}),n.d(e,"s",function(){return yn}),n.d(e,"p",function(){return bn}),n.d(e,"x",function(){return St}),n.d(e,"y",function(){return It}),n.d(e,"z",function(){return Pt}),n.d(e,"A",function(){return kt}),n.d(e,"B",function(){return Tt}),n.d(e,"C",function(){return In}),n.d(e,"D",function(){return Pn}),n.d(e,"H",function(){return kn}),n.d(e,"pb",function(){return Tn}),n.d(e,"E",function(){return An}),n.d(e,"La",function(){return Mn}),n.d(e,"lb",function(){return zn}),n.d(e,"Na",function(){return qn}),n.d(e,"o",function(){return $n}),n.d(e,"vb",function(){return Xn}),n.d(e,"wb",function(){return Zn}),n.d(e,"xb",function(){return Jn}),n.d(e,"yb",function(){return Yn}),n.d(e,"zb",function(){return tr}),n.d(e,"c",function(){return De}),n.d(e,"d",function(){return je}),n.d(e,"e",function(){return Le}),n.d(e,"k",function(){return ze}),n.d(e,"l",function(){return Ve}),n.d(e,"m",function(){return Be}),n.d(e,"n",function(){return Fe}),n.d(e,"v",function(){return Ue}),n.d(e,"w",function(){return We}),n.d(e,"F",function(){return qe}),n.d(e,"G",function(){return $e}),n.d(e,"M",function(){return He}),n.d(e,"N",function(){return Ge}),n.d(e,"P",function(){return Ke}),n.d(e,"S",function(){return Qe}),n.d(e,"Ga",function(){return Xe}),n.d(e,"Ha",function(){return Ze}),n.d(e,"Xa",function(){return Ye}),n.d(e,"ib",function(){return tn}),n.d(e,"mb",function(){return en}),n.d(e,"rb",function(){return rn}),n.d(e,"sb",function(){return on}),n.d(e,"tb",function(){return an}),n.d(e,"ub",function(){return sn}),n.d(e,"Bb",function(){return un}),n.d(e,"Db",function(){return ln}),n.d(e,"Eb",function(){return cn}),n.d(e,"Ib",function(){return pn}),n.d(e,"Mb",function(){return fn}),n.d(e,"Nb",function(){return hn}),n.d(e,"g",function(){return dr}),n.d(e,"h",function(){return mr}),n.d(e,"i",function(){return gr}),n.d(e,"j",function(){return vr}),n.d(e,"Ma",function(){return br}),n.d(e,"Pa",function(){return wr}),n.d(e,"Qa",function(){return xr}),n.d(e,"Ta",function(){return _r}),n.d(e,"Lb",function(){return Or}),n.d(e,"L",function(){return Er}),n.d(e,"V",function(){return Sr}),n.d(e,"W",function(){return Ir}),n.d(e,"Ba",function(){return Tr}),n.d(e,"Ca",function(){return Ar}),n.d(e,"Za",function(){return Dr}),n.d(e,"f",function(){return Fr}),n.d(e,"J",function(){return qr}),n.d(e,"T",function(){return Hr}),n.d(e,"Oa",function(){return Gr}),n.d(e,"Ra",function(){return Qr}),n.d(e,"Sa",function(){return Zr}),n.d(e,"Va",function(){return Yr}),n.d(e,"Wa",function(){return to}),n.d(e,"eb",function(){return eo}),n.d(e,"Fb",function(){return ro}),n.d(e,"Kb",function(){return io}),n.d(e,"K",function(){return go}),n.d(e,"Aa",function(){return vo}),n.d(e,"jb",function(){return bo}),n.d(e,"ob",function(){return wo}),n.d(e,"Ia",function(){return lo}),n.d(e,"Ja",function(){return co}),n.d(e,"Ka",function(){return po}),n.d(e,"Zb",function(){return ho}),n.d(e,"t",function(){return ie}),n.d(e,"u",function(){return se}),n.d(e,"O",function(){return ce}),n.d(e,"Q",function(){return pe}),n.d(e,"ab",function(){return de}),n.d(e,"db",function(){return me}),n.d(e,"fb",function(){return _e}),n.d(e,"gb",function(){return Oe}),n.d(e,"kb",function(){return Ce}),n.d(e,"Cb",function(){return Ee}),n.d(e,"Gb",function(){return Ne}),n.d(e,"Hb",function(){return Se}),n.d(e,"Rb",function(){return Ie}),n.d(e,"Ub",function(){return Pe}),n.d(e,"Vb",function(){return ke}),n.d(e,"R",function(){return Wt}),n.d(e,"Ea",function(){return qt}),n.d(e,"bb",function(){return $t}),n.d(e,"hb",function(){return Ht}),n.d(e,"nb",function(){return Gt}),n.d(e,"Ob",function(){return Kt}),n.d(e,"Pb",function(){return Qt}),n.d(e,"ac",function(){return ee}),n.d(e,"cb",function(){return ne}),n.d(e,"bc",function(){return re}),n.d(e,"Tb",function(){return xo}),n.d(e,"Ab",function(){return _o}),n.d(e,"Fa",function(){return Oo}),n.d(e,"U",function(){return Po}),n.d(e,"Ua",function(){return Mo}),n.d(e,"Jb",function(){return Do}),n.d(e,"Sb",function(){return Us}),n.d(e,"Qb",function(){return ur}),n.d(e,"Z",function(){return lr}),n.d(e,"I",function(){return cr});var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function o(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function a(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function s(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function u(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function l(t){for(var e=t.length,n=0,r=0;e>0;)r=Math.random()*e|0,n=t[--e],t[e]=t[r],t[r]=n}function c(t,e,n){return Math.max(t,Math.min(e,n))}function p(t,e){return Math.random()*(e-t)+t}function f(t,e){if(!t)throw new Error("string"==typeof e?e:e())}function h(t,e,n){void 0===n&&(n=""),f(y(t,e),n+" Shapes "+t+" and "+e+" must match")}function d(t){f(null!=t,"The input to the tensor constructor must be a non-null value.")}function m(t,e){if(void 0===e&&(e=[]),Array.isArray(t))for(var n=0;n<t.length;++n)m(t[n],e);else e.push(t);return e}function g(t){var e=t;if(T(t))return[t.length];if(!Array.isArray(t))return[];for(var n=[];e instanceof Array;)n.push(e.length),e=e[0];return t instanceof Array&&function t(e,n,r){if(r=r||[],e instanceof Array){f(n.length>0,function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+e.length+" elements"}),f(e.length===n[0],function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+e.length+" elements"});for(var o=n.slice(1),i=0;i<e.length;++i)t(e[i],o,r.concat(i))}else f(0===n.length,function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array of "+n[0]+" elements"})}(t,n,[]),n}function v(t){if(0===t.length)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function y(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function b(t){return t%1==0}function w(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function x(t){for(var e=Math.floor(Math.sqrt(t));e>1;--e)if(t%e==0)return[e,t/e];return[1,t]}function _(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function O(t,e,n){return void 0===e&&(e=function(t){return 0}),new Promise(function(r,o){var i=0,a=function(){if(t())r();else{var s=e(++i);null!=n&&i>=n?o():setTimeout(a,s)}};a()})}function C(t){var e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}(e,n[0],n[1]),n.join("=")}),e}function E(t,e){for(var n=1,r=-1,o=0;o<t.length;++o)if(t[o]>0)n*=t[o];else if(-1===t[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found - 1 at dim "+r+" and dim "+o);r=o}else if(t[o]<=0)throw Error("Shapes can not be <= 0. Found "+t[o]+" at dim "+o);if(-1===r){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var i=t.slice();return i[r]=e/n,i}function N(t,e){for(var n=[],r=[],o=0,i=0;i<t.length;++i){if(null!=e){if(e[o]===i&&t[i]>1)throw new Error("Can't squeeze axis "+i+" since its dim '"+t[i]+"' is not 1");(null==e[o]||e[o]>i)&&1===t[i]&&(n.push(t[i]),r.push(i)),e[o]<=i&&o++}t[i]>1&&(n.push(t[i]),r.push(i))}return{newShape:n,keptDims:r}}function S(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function I(t,e,n){if("float32"===e)for(var r=0;r<t.length;r++)if(isNaN(t[r]))throw Error("The result of the '"+n+"' has NaNs.")}function P(t,e){return!("float32"===e||"int32"===e&&"float32"!==t||"bool"===e&&"bool"===t)}function k(t,e){if(null==e||"float32"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){for(var n=new Uint8Array(t.length),r=0;r<n.length;++r)0!==Math.round(t[r])&&(n[r]=1);return n}throw new Error("Unknown data type "+e)}function T(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function A(t){if("float32"===t||"int32"===t)return 4;if("bool"===t)return 1;throw new Error("Unknown dtype "+t)}function R(t){return!!(t&&t.constructor&&t.call&&t.apply)}function M(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function D(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function j(t,e){return function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e)?t:(Array.isArray(t)&&(t=m(t)),k(t,e))}function L(t,e){for(var n=z(t,e),r=0;r<n.length;r++)n[r]=1;return n}function z(t,e){if(null==e||"float32"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type "+e)}function V(){if("undefined"!=typeof performance)return performance.now();if("undefined"!=typeof process){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}throw new Error("Can not measure time in this environment. You should run tf.js in the browser or in Node.js")}var B=Object.freeze({shuffle:l,clamp:c,randUniform:p,distSquared:function(t,e){for(var n=0,r=0;r<t.length;r++){var o=Number(t[r])-Number(e[r]);n+=o*o}return n},assert:f,assertShapesMatch:h,assertNonNull:d,flatten:m,inferShape:g,sizeFromShape:v,isScalarShape:function(t){return 0===t.length},arraysEqual:y,isInt:b,tanh:w,sizeToSquarishShape:x,createShuffledIndices:function(t){for(var e=new Uint32Array(t),n=0;n<t;++n)e[n]=n;return l(e),e},rightPad:_,repeatedTry:O,getQueryParams:C,inferFromImplicitShape:E,squeezeShape:N,getTypedArrayFromDType:S,checkForNaN:I,hasEncodingLoss:P,copyTypedArray:k,isTypedArray:T,bytesPerElement:A,isFunction:R,nearestDivisor:M,computeStrides:D,toTypedArray:j,makeOnesTypedArray:L,makeZerosTypedArray:z,now:V}),F=function(){function t(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new U)}return t.prototype.profileKernel=function(t,e){var n,r=this,o=this.backendTimer.time(function(){n=e()}),i=n.dataSync();return I(i,n.dtype,t),o.then(function(e){r.logger.logKernelProfile(t,n,i,e.kernelMs)}),n},t}(),U=function(){function t(){}return t.prototype.logKernelProfile=function(t,e,n,r){var o=_(r+"ms",9),i=_(t,25),a=e.rank,s=e.size,u=_(e.shape.toString(),14);console.log("%c"+i+"\t%c"+o+"\t%c"+a+"D "+u+"\t%c"+s,"font-weight:bold","color:red","color:blue","color: orange")},t}(),W=7;function q(t,e){return _(parseFloat(t.toFixed(W)).toString(),e)}var $=function(){function t(t,e,n){if(this.dtype=e,null!=n){var r=n.length,o=v(t);f(r===o,"Length of values '"+r+"' does not match the size inferred by the shape '"+o+"'")}this.shape=t.slice(),this.values=n||S(e,v(t)),this.strides=D(t),this.size=v(t)}return t.prototype.set=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];0===e.length&&(e=[0]),f(e.length===this.rank,"The number of provided coordinates ("+e.length+") must match the rank ("+this.rank+")");var r=this.locToIndex(e);this.values[r]=t},t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0===t.length&&(t=[0]);for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return this.values[n]},t.prototype.locToIndex=function(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];for(var e=t[t.length-1],n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e},t.prototype.indexToLoc=function(t){if(0===this.rank)return[];if(1===this.rank)return[t];for(var e=new Array(this.shape.length),n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return Q.make(this.shape,{values:this.values},this.dtype)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"set",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"get",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"toTensor",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t)}(),H=null,G=null;function K(t){H=t}var Q=function(){function t(t,n,r,o){this.isDisposedInternal=!1,this.size=v(t),null!=r&&f(this.size===r.length,"Constructing tensor of shape ("+this.size+") should match the length of values ("+r.length+")"),this.shape=t.slice(),this.dtype=n||"float32",this.strides=D(t),this.dataId=null!=o?o:{},this.id=e.nextId++,this.rankType=this.rank<5?this.rank.toString():"higher",H().registerTensor(this),null!=r&&H().write(this.dataId,r)}var e;return e=t,t.make=function(t,n,r){return new e(t,r,n.values,n.dataId)},t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),f(1===this.size,"The array must have only 1 element."),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(t,e){return this.throwIfDisposed(),this.reshape([t,e])},t.prototype.as3D=function(t,e,n){return this.throwIfDisposed(),this.reshape([t,e,n])},t.prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),this.reshape([t,e,n,r])},t.prototype.asType=function(t){return this.throwIfDisposed(),G.cast(this,t)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];f(t.length===this.rank,"Number of coordinates in get() must match the rank of the tensor"),this.throwIfDisposed(),0===t.length&&(t=[0]);for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return this.dataSync()[n]},t.prototype.buffer=function(){return G.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.data=function(){return s(this,void 0,void 0,function(){return u(this,function(t){return this.throwIfDisposed(),[2,H().read(this.dataId)]})})},t.prototype.dataSync=function(){return this.throwIfDisposed(),H().readSync(this.dataId)},t.prototype.dispose=function(){this.isDisposed||(H().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(t){return void 0===t&&(t=!1),G.print(this,t)},t.prototype.reshape=function(t){return this.throwIfDisposed(),G.reshape(this,t)},t.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},t.prototype.expandDims=function(t){return void 0===t&&(t=0),G.expandDims(this,t)},t.prototype.cumsum=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=!1),void 0===n&&(n=!1),G.cumsum(this,t,e,n)},t.prototype.squeeze=function(t){return this.throwIfDisposed(),G.squeeze(this,t)},t.prototype.clone=function(){return this.throwIfDisposed(),G.clone(this)},t.prototype.toString=function(t){return void 0===t&&(t=!1),function(t,e,n,r){var o=D(e),i=function(t,e,n){var r=v(e),o=n[n.length-1],i=new Array(o).fill(0);if(e.length>1)for(var a=0;a<r/o;a++)for(var s=a*o,u=0;u<o;u++)i[u]=Math.max(i[u],q(t[s+u],0).length);return i}(t,e,o),a=e.length,s=function t(e,n,r,o,i){void 0===i&&(i=!0);var a=n[0],s=n.length;if(0===s)return[e[0].toString()];if(1===s){if(a>20){var u=Array.from(e.subarray(0,3)),l=Array.from(e.subarray(a-3,a));return["["+u.map(function(t,e){return q(t,o[e])}).join(", ")+", ..., "+l.map(function(t,e){return q(t,o[a-3+e])}).join(", ")+"]"]}return["["+Array.from(e).map(function(t,e){return q(t,o[e])}).join(", ")+"]"]}var c=n.slice(1),p=r.slice(1),f=r[0],h=[];if(a>20){for(var d=0;d<3;d++){var m=(g=d*f)+f;h.push.apply(h,t(e.subarray(g,m),c,p,o,!1))}for(h.push("..."),d=a-3;d<a;d++)m=(g=d*f)+f,h.push.apply(h,t(e.subarray(g,m),c,p,o,d===a-1))}else for(d=0;d<a;d++){var g;m=(g=d*f)+f,h.push.apply(h,t(e.subarray(g,m),c,p,o,d===a-1))}var v=2===s?",":"";for(h[0]="["+h[0]+v,d=1;d<h.length-1;d++)h[d]=" "+h[d]+v;var y=",\n";for(d=2;d<s;d++)y+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(i?"":y),h}(t,e,o,i),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+a),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map(function(t){return"    "+t}).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,t)},t.prototype.tile=function(t){return this.throwIfDisposed(),G.tile(this,t)},t.prototype.gather=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),G.gather(this,t,e)},t.prototype.matMul=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),this.throwIfDisposed(),G.matMul(this,t,e,n)},t.prototype.dot=function(t){return this.throwIfDisposed(),G.dot(this,t)},t.prototype.norm=function(t,e,n){return void 0===t&&(t="euclidean"),void 0===e&&(e=null),void 0===n&&(n=!1),this.throwIfDisposed(),G.norm(this,t,e,n)},t.prototype.slice=function(t,e){return this.throwIfDisposed(),G.slice(this,t,e)},t.prototype.reverse=function(t){return this.throwIfDisposed(),G.reverse(this,t)},t.prototype.concat=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),G.concat([this,t],e)},t.prototype.stack=function(t,e){return void 0===e&&(e=0),G.stack([this,t],e)},t.prototype.unstack=function(t,e){return void 0===e&&(e=0),G.unstack(this,e)},t.prototype.pad=function(t,e){return void 0===e&&(e=0),G.pad(this,t,e)},t.prototype.batchNormalization=function(t,e,n,r,o){return void 0===n&&(n=.001),this.throwIfDisposed(),G.batchNormalization(this,t,e,n,r,o)},t.prototype.all=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),G.all(this,t,e)},t.prototype.any=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),G.any(this,t,e)},t.prototype.logSumExp=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),G.logSumExp(this,t,e)},t.prototype.sum=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),G.sum(this,t,e)},t.prototype.mean=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),G.mean(this,t,e)},t.prototype.min=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),G.min(this,t,e)},t.prototype.max=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),G.max(this,t,e)},t.prototype.argMin=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),G.argMin(this,t)},t.prototype.argMax=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),G.argMax(this,t)},t.prototype.cast=function(t){return this.throwIfDisposed(),G.cast(this,t)},t.prototype.add=function(t){return this.throwIfDisposed(),G.add(this,t)},t.prototype.addStrict=function(t){return this.throwIfDisposed(),G.addStrict(this,t)},t.prototype.sub=function(t){return this.throwIfDisposed(),G.sub(this,t)},t.prototype.subStrict=function(t){return this.throwIfDisposed(),G.subStrict(this,t)},t.prototype.pow=function(t){return this.throwIfDisposed(),G.pow(this,t)},t.prototype.powStrict=function(t){return this.throwIfDisposed(),G.powStrict(this,t)},t.prototype.mul=function(t){return this.throwIfDisposed(),G.mul(this,t)},t.prototype.mulStrict=function(t){return this.throwIfDisposed(),G.mulStrict(this,t)},t.prototype.div=function(t){return this.throwIfDisposed(),G.div(this,t)},t.prototype.floorDiv=function(t){return this.throwIfDisposed(),G.floorDiv(this,t)},t.prototype.divStrict=function(t){return this.throwIfDisposed(),G.divStrict(this,t)},t.prototype.minimum=function(t){return this.throwIfDisposed(),G.minimum(this,t)},t.prototype.minimumStrict=function(t){return this.throwIfDisposed(),G.minimumStrict(this,t)},t.prototype.maximum=function(t){return this.throwIfDisposed(),G.maximum(this,t)},t.prototype.maximumStrict=function(t){return this.throwIfDisposed(),G.maximumStrict(this,t)},t.prototype.mod=function(t){return this.throwIfDisposed(),G.mod(this,t)},t.prototype.modStrict=function(t){return this.throwIfDisposed(),G.modStrict(this,t)},t.prototype.squaredDifference=function(t){return this.throwIfDisposed(),G.squaredDifference(this,t)},t.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),G.squaredDifferenceStrict(this,t)},t.prototype.transpose=function(t){return this.throwIfDisposed(),G.transpose(this,t)},t.prototype.notEqual=function(t){return this.throwIfDisposed(),G.notEqual(this,t)},t.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),G.notEqualStrict(this,t)},t.prototype.less=function(t){return this.throwIfDisposed(),G.less(this,t)},t.prototype.lessStrict=function(t){return this.throwIfDisposed(),G.lessStrict(this,t)},t.prototype.equal=function(t){return this.throwIfDisposed(),G.equal(this,t)},t.prototype.equalStrict=function(t){return this.throwIfDisposed(),G.equalStrict(this,t)},t.prototype.lessEqual=function(t){return this.throwIfDisposed(),G.lessEqual(this,t)},t.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),G.lessEqualStrict(this,t)},t.prototype.greater=function(t){return this.throwIfDisposed(),G.greater(this,t)},t.prototype.greaterStrict=function(t){return this.throwIfDisposed(),G.greaterStrict(this,t)},t.prototype.greaterEqual=function(t){return this.throwIfDisposed(),G.greaterEqual(this,t)},t.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),G.greaterEqualStrict(this,t)},t.prototype.logicalAnd=function(t){return this.throwIfDisposed(),G.logicalAnd(this,t)},t.prototype.logicalOr=function(t){return this.throwIfDisposed(),G.logicalOr(this,t)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),G.logicalNot(this)},t.prototype.logicalXor=function(t){return this.throwIfDisposed(),G.logicalXor(this,t)},t.prototype.where=function(t,e){return this.throwIfDisposed(),G.where(t,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),G.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),G.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),G.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),G.sign(this)},t.prototype.exp=function(){return this.throwIfDisposed(),G.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),G.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),G.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),G.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),G.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),G.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),G.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),G.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),G.abs(this)},t.prototype.clipByValue=function(t,e){return this.throwIfDisposed(),G.clipByValue(this,t,e)},t.prototype.relu=function(){return this.throwIfDisposed(),G.relu(this)},t.prototype.elu=function(){return this.throwIfDisposed(),G.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),G.selu(this)},t.prototype.leakyRelu=function(t){return void 0===t&&(t=.2),this.throwIfDisposed(),G.leakyRelu(this,t)},t.prototype.prelu=function(t){return this.throwIfDisposed(),G.prelu(this,t)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),G.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),G.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),G.softplus(this)},t.prototype.sin=function(){return this.throwIfDisposed(),G.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),G.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),G.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),G.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),G.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),G.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),G.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),G.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),G.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),G.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),G.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),G.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),G.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),G.round(this)},t.prototype.step=function(t){return void 0===t&&(t=0),this.throwIfDisposed(),G.step(this,t)},t.prototype.softmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),G.softmax(this,t)},t.prototype.resizeBilinear=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),G.image.resizeBilinear(this,t,e)},t.prototype.resizeNearestNeighbor=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),G.image.resizeNearestNeighbor(this,t,e)},t.prototype.conv1d=function(t,e,n,r,o,i){return void 0===r&&(r="NWC"),void 0===o&&(o=1),this.throwIfDisposed(),G.conv1d(this,t,e,n,r,o,i)},t.prototype.conv2d=function(t,e,n,r,o,i){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),G.conv2d(this,t,e,n,r,o,i)},t.prototype.conv2dTranspose=function(t,e,n,r,o){return this.throwIfDisposed(),G.conv2dTranspose(this,t,e,n,r,o)},t.prototype.depthwiseConv2D=function(t,e,n,r,o,i){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),G.depthwiseConv2d(this,t,e,n,r,o,i)},t.prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),G.avgPool(this,t,e,n,r)},t.prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),G.maxPool(this,t,e,n,r)},t.prototype.localResponseNormalization=function(t,e,n,r){return void 0===t&&(t=5),void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=.5),G.localResponseNormalization(this,t,e,n,r)},t.prototype.variable=function(t,e,n){return void 0===t&&(t=!0),this.throwIfDisposed(),X.variable(this,t,e,n)},t.prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),G.unsortedSegmentSum(this,t,e)},t.nextId=0,a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"flatten",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"asScalar",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"as1D",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"as2D",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"as3D",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"as4D",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"asType",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"buffer",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"data",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"dataSync",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"dispose",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"toFloat",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"toInt",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"toBool",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"print",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"reshape",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"reshapeAs",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"expandDims",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"cumsum",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"squeeze",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"clone",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t.prototype,"toString",null),e=a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t)}();Object.defineProperty(Q,Symbol.hasInstance,{value:function(t){return null!=t.shape&&null!=t.dtype}});var X=function(t){function e(e,r,o){void 0===r&&(r=!0);var i=t.call(this,e.shape,e.dtype,null,e.dataId)||this;i.trainable=r,i.name=o,null==i.name&&(i.name=n.nextVarId.toString(),n.nextVarId++);try{H().registerVariable(i)}catch(t){throw H().disposeTensor(i),t}return i}var n;return o(e,t),n=e,e.variable=function(t,e,r,o){return void 0===e&&(e=!0),null!=o&&o!==t.dtype&&(t=t.asType(o)),new n(t,e,r)},e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!y(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");H().disposeTensor(this),this.dataId=t.dataId,H().registerTensor(this)},e.nextVarId=0,a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],e.prototype,"assign",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],e,"variable",null),n=a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],e)}(Q);Object.defineProperty(X,Symbol.hasInstance,{value:function(t){return t instanceof Q&&null!=t.assign&&t.assign instanceof Function}});var Z=X.variable;function J(t,e){f(t.dtype===e.dtype," The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match")}function Y(t,e,n,r){if(void 0===r&&(r="float32"),r=r||"float32",t instanceof Q)return t;if(!T(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t)throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got "+t.constructor.name);var o=g(t);return T(t)||Array.isArray(t)||(t=[t]),Q.make(o,{values:j(t,r)},r)}function tt(t,e,n){if(!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(t,r){return Y(t,e+"["+r+"]",n)})}function et(t){var e=[];return function t(e,n,r){if(null!=e)if(e instanceof Q)n.push(e);else if(function(t){return Array.isArray(t)||"object"==typeof t}(e)){var o=e;for(var i in o){var a=o[i];r.has(a)||(r.add(a),t(a,n,r))}}}(t,e,new Set),e}var nt,rt,ot=function(){function t(t,e,n){this.backend=t,this.safeMode=e,this.debugMode=n,this.registeredVariables={},this.refCounter=new WeakMap,this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numDataBuffers=0,this.gradientScopeCount=0,this.customGradientDepth=0,this.keepTensors=new Set,this.activeScope={track:[],name:"default scope"},this.scopeStack=[this.activeScope],this.profiler=new F(t)}return t.prototype.tidy=function(t,e,n){var r=this;void 0===n&&(n=!1);var o,i=null;if(null==e){if("function"!=typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}return this.scopedRun(function(){return r.startScope(i,n)},function(){return r.endScope(o,n)},function(){return(o=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o})},t.prototype.scopedRun=function(t,e,n){t();try{var r=n();return e(),r}catch(t){throw e(),t}},t.prototype.runKernel=function(t,e,n){var r,o=this,i=[],a=function(t){return i.push(t),t},s=this.activeScope.name;if(this.scopedRun(function(){return o.customGradientDepth++},function(){return o.customGradientDepth--},function(){r=o.debugMode()?o.profiler.profileKernel(s,function(){return t(o.backend,a)}):t(o.backend,a)}),this.shouldRecord()){var u={id:this.nextTapeNodeId++,name:s,inputs:e,output:r};null!=n&&(u.gradient=function(t){return n(t,i)}),this.activeTape.push(u)}return r},t.prototype.registerTensor=function(t){var e=this.refCounter.has(t.dataId)?this.refCounter.get(t.dataId):0;this.numTensors++,0===e&&(this.numDataBuffers++,this.numBytes+=v(t.shape)*A(t.dtype),this.backend.register(t.dataId,t.shape,t.dtype)),this.refCounter.set(t.dataId,e+1),t instanceof X||this.track(t)},t.prototype.registerVariable=function(t){if(null!=this.registeredVariables[t.name])throw new Error("Variable with name "+t.name+" was already registered");this.registeredVariables[t.name]=t},t.prototype.disposeTensor=function(t){if(this.refCounter.has(t.dataId)){this.keepTensors.has(t.id)&&this.keepTensors.delete(t.id),this.numTensors--;var e=this.refCounter.get(t.dataId);e<=1?(this.refCounter.delete(t.dataId),this.backend.disposeData(t.dataId),this.numDataBuffers--,this.numBytes-=v(t.shape)*A(t.dtype)):this.refCounter.set(t.dataId,e-1)}},t.prototype.disposeVariables=function(){for(var t in this.registeredVariables)this.disposeTensor(this.registeredVariables[t]),delete this.registeredVariables[t]},t.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.numTensors,t.numDataBuffers=this.numDataBuffers,t.numBytes=this.numBytes,t},t.prototype.shouldRecord=function(){return null!=this.activeTape&&0===this.customGradientDepth},t.prototype.addTapeNode=function(t,e,n){var r={};t.forEach(function(t,e){r[e]=t});var o={id:this.nextTapeNodeId++,name:this.activeScope.name,inputs:r,output:e,gradient:function(t){var e={};return n(t).forEach(function(t,n){e[n]=function(){return t}}),e}};this.activeTape.push(o)},t.prototype.keep=function(t){if(1===this.scopeStack.length&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {...}) to avoid memory leaks.");return this.keepTensors.add(t.id),t},t.prototype.startScope=function(t,e){void 0===e&&(e=!1),e&&0===this.gradientScopeCount&&(this.activeTape=[]),e&&this.gradientScopeCount++;var n={track:[],name:"unnamed scope"};t&&(n.name=t),this.scopeStack.push(n),this.activeScope=n},t.prototype.endScope=function(t,e){var n=this;void 0===e&&(e=!1),e&&(this.gradientScopeCount--,0===this.gradientScopeCount&&(this.activeTape=null));var r=new Set(this.keepTensors),o=et(t);o.forEach(function(t){return r.add(t.id)});for(var i=0;i<this.activeScope.track.length;i++){var a=this.activeScope.track[i];r.has(a.id)||(null!=this.activeTape?o.push(a):a.dispose())}var s=this.scopeStack.pop();this.activeScope=0===this.scopeStack.length?{track:[],name:"default scope"}:this.scopeStack[this.scopeStack.length-1],o.forEach(function(t){!n.keepTensors.has(t.id)&&function(t,e){for(var n=0;n<e.length;n++)if(e[n].id===t.id)return!0;return!1}(t,s.track)&&n.track(t)})},t.prototype.gradients=function(t,e,n,r){var o=this;return void 0===r&&(r=!1),f(e.length>0,"gradients() received an empty list of xs."),this.tidy("gradients",function(){var i=t();f(i instanceof Q,"The result y returned by f() must be a tensor.");var a=function(t,e,n){for(var r={},o={},i=0;i<e.length;i++)r[e[i].id]=!0;for(i=0;i<t.length;i++){var a=(m=t[i]).inputs;for(var s in a){for(var u=a[s],l=!1,c=0;c<e.length;c++)if(r[u.id]){r[m.output.id]=!0,l=!0,o[m.id]=!0;break}if(l)break}}var p={};p[n.id]=!0;var f={};for(i=t.length-1;i>=0;i--){a=(m=t[i]).inputs;var h=[];for(h.push(m.output),c=0;c<h.length;c++)if(p[h[c].id]){for(var s in a)p[a[s].id]=!0,f[m.id]=!0;break}}var d=[];for(i=0;i<t.length;i++){var m;if(o[(m=t[i]).id]&&f[m.id]){var g={};for(var s in m.inputs){var v=m.inputs[s];r[v.id]&&(g[s]=v)}var y=Object.assign({},m);y.inputs=g,y.output=m.output,d.push(y)}}return d}(o.activeTape,e,i);if(!r&&0===a.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");var s={};return s[i.id]=null==n?function(t){var e=L(v(t),"float32");return Q.make(t,{values:e})}(i.shape):n,function(t,e){for(var n=e.length-1;n>=0;n--){var r=e[n],o=t[r.output.id];if(null==r.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+r.name+".");var i=r.gradient(o);for(var a in r.inputs){if(!(a in i))throw new Error("Cannot backprop through input "+a+". Available gradients found: "+Object.keys(i)+".");var s=i[a](),u=r.inputs[a];if(!y(s.shape,u.shape))throw new Error("Error in gradient for op "+r.name+". The gradient of input '"+a+"' has shape '"+s.shape+"', which does not match the shape of the input '"+u.shape+"'");if(null==t[u.id])t[u.id]=s;else{var l=t[u.id];t[u.id]=l.add(s),l.dispose()}}}}(s,a),{value:i,grads:e.map(function(t){return s[t.id]})}},!0)},t.prototype.customGrad=function(t){var e=this;return f(R(t),"The f passed in customGrad(f) must be a function."),function(){for(var n,r,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return f(o.every(function(t){return t instanceof Q}),"The args passed in customGrad(f)(x1, x2,...) must all be tensors"),e.scopedRun(function(){return e.customGradientDepth++},function(){return e.customGradientDepth--},function(){r=e.tidy(t.name,function(){var e=t.apply(void 0,o),r=e.value,i=e.gradFunc;return f(r instanceof Q,"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),f(R(i),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n=i,r},!0)}),e.shouldRecord()&&e.addTapeNode(o,r,function(t){var e=n(t),r=Array.isArray(e)?e:[e];return f(r.length===o.length,"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),f(r.every(function(t){return t instanceof Q}),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."),r}),r}},t.prototype.write=function(t,e){this.backend.write(t,e)},t.prototype.readSync=function(t){return this.backend.readSync(t)},t.prototype.read=function(t){return this.backend.read(t)},t.prototype.fromPixels=function(t,e){return this.backend.fromPixels(t,e)},t.prototype.time=function(t){return s(this,void 0,void 0,function(){var e,n;return u(this,function(r){switch(r.label){case 0:return e=V(),[4,this.backend.time(t)];case 1:return(n=r.sent()).wallMs=V()-e,[2,n]}})})},t.prototype.track=function(t){if(1===this.scopeStack.length&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {op();...}); to avoid memory leaks.");return this.activeScope.track.push(t),t},t}();(rt=nt||(nt={}))[rt.NUMBER=0]="NUMBER",rt[rt.BOOLEAN=1]="BOOLEAN",rt[rt.STRING=2]="STRING";var it=[{name:"DEBUG",type:nt.BOOLEAN},{name:"IS_BROWSER",type:nt.BOOLEAN},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",type:nt.NUMBER},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",type:nt.BOOLEAN},{name:"WEBGL_VERSION",type:nt.NUMBER},{name:"WEBGL_RENDER_FLOAT32_ENABLED",type:nt.BOOLEAN},{name:"WEBGL_DOWNLOAD_FLOAT_ENABLED",type:nt.BOOLEAN},{name:"WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED",type:nt.BOOLEAN},{name:"BACKEND",type:nt.STRING}];function at(t,e){var n;try{n=ct(t,e)}catch(t){return!1}return null!=n&&(pt(n),!0)}var st="tfjsflags";function ut(){var t={};if("undefined"==typeof window||void 0===window.location)return t;var e=C(window.location.search);if(st in e){var n={};e[st].split(",").forEach(function(t){var e=t.split(":");n[e[0]]=e[1]}),it.forEach(function(e){e.name in n&&(console.log("Setting feature override from URL "+e.name+": "+n[e.name]),e.type===nt.NUMBER?t[e.name]=+n[e.name]:e.type===nt.BOOLEAN?t[e.name]="true"===n[e.name]:e.type===nt.STRING?t[e.name]=n[e.name]:console.warn("Unknown URL param: "+e.name+"."))})}return t}function lt(t,e){return null!=t.getExtension(e)}function ct(t,e){if(0===t||!e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=document.createElement("canvas");return 1===t?n.getContext("webgl")||n.getContext("experimental-webgl"):n.getContext("webgl2")}function pt(t){if(null!=t){var e=t.getExtension("WEBGL_lose_context");if(null==e)throw new Error("Extension WEBGL_lose_context not supported on this browser.");e.loseContext()}}function ft(t,e){var n=t.createFramebuffer(),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,2===e?t.RGBA32F:t.RGBA,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0)}var ht=function(){function t(t){this.features={},this.registry={},null!=t&&(this.features=t),this.get("DEBUG")&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}return t.setBackend=function(t,e){if(void 0===e&&(e=!1),!(t in dt.registry))throw new Error("Backend type '"+t+"' not found in registry");dt.initBackend(t,e)},t.getBackend=function(){return dt.initDefaultBackend(),dt.currentBackend},t.disposeVariables=function(){dt.engine.disposeVariables()},t.memory=function(){return dt.engine.memory()},t.tidy=function(t,e,n){return void 0===n&&(n=!1),dt.engine.tidy(t,e,n)},t.dispose=function(t){et(t).forEach(function(t){return t.dispose()})},t.keep=function(t){return dt.engine.keep(t)},t.time=function(t){return dt.engine.time(t)},t.prototype.get=function(t){return t in this.features?this.features[t]:(this.features[t]=this.evaluateFeature(t),this.features[t])},t.prototype.getFeatures=function(){return this.features},t.prototype.set=function(t,e){this.features[t]=e},t.prototype.getBestBackendType=function(){var t=this;if(0===Object.keys(this.registry).length)throw new Error("No backend found in registry.");return Object.keys(this.registry).map(function(e){return{name:e,entry:t.registry[e]}}).sort(function(t,e){return e.entry.priority-t.entry.priority})[0].name},t.prototype.evaluateFeature=function(t){if("DEBUG"===t)return!1;if("IS_BROWSER"===t)return"undefined"!=typeof window;if("IS_NODE"===t)return"undefined"!=typeof process&&void 0!==process.versions.node;if("IS_CHROME"===t)return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);if("IS_TEST"===t)return!1;if("BACKEND"===t)return this.getBestBackendType();if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"===t){var e=this.get("WEBGL_VERSION");return 0===e?0:function(t,e){if(0===t)return 0;var n,r=ct(t,e);return n=lt(r,"EXT_disjoint_timer_query_webgl2")&&2===t?2:lt(r,"EXT_disjoint_timer_query")?1:0,null!=r&&pt(r),n}(e,this.get("IS_BROWSER"))}if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE"===t)return this.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!function(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}();if("HAS_WEBGL"===t)return this.get("WEBGL_VERSION")>0;if("WEBGL_VERSION"===t)return at(2,this.get("IS_BROWSER"))?2:at(1,this.get("IS_BROWSER"))?1:0;if("WEBGL_RENDER_FLOAT32_ENABLED"===t)return function(t,e){if(0===t)return!1;var n=ct(t,e);if(1===t){if(!lt(n,"OES_texture_float"))return!1}else if(!lt(n,"EXT_color_buffer_float"))return!1;ft(n,t);var r=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return pt(n),r}(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("WEBGL_DOWNLOAD_FLOAT_ENABLED"===t)return function(t,e){if(0===t)return!1;var n=ct(t,e);if(1===t){if(!lt(n,"OES_texture_float"))return!1}else if(!lt(n,"EXT_color_buffer_float"))return!1;ft(n,t),n.readPixels(0,0,1,1,n.RGBA,n.FLOAT,new Float32Array(4));var r=n.getError()===n.NO_ERROR;return pt(n),r}(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED"===t)return function(t,e){if(t>0)return!1;if(2!==t)return!1;var n=ct(t,e),r=lt(n,"WEBGL_get_buffer_sub_data_async");return pt(n),r}(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("TEST_EPSILON"===t)return this.get("WEBGL_RENDER_FLOAT32_ENABLED")?.001:.1;throw new Error("Unknown feature "+t+".")},t.prototype.setFeatures=function(t){this.features=Object.assign({},t)},t.prototype.reset=function(){this.features=ut(),null!=this.globalEngine&&(this.globalEngine=null)},t.prototype.initBackend=function(t,e){var n=this;void 0===e&&(e=!1),this.currentBackend=t;var r=this.findBackend(t);this.globalEngine=new ot(r,e,function(){return n.get("DEBUG")})},t.prototype.findBackend=function(t){return t in this.registry?this.registry[t].backend:null},t.prototype.registerBackend=function(t,e,n,r){var o=this;if(void 0===n&&(n=1),t in this.registry)return console.warn(t+" backend was already registered. Reusing existing backend"),null!=r&&r(function(){return o.engine}),!1;try{var i=e();return this.registry[t]={backend:i,priority:n},!0}catch(e){return console.warn("Registration of backend "+t+" failed"),console.warn(e.stack||e.message),!1}},t.prototype.removeBackend=function(t){if(!(t in this.registry))throw new Error(t+" backend not found in registry");this.registry[t].backend.dispose(),delete this.registry[t]},Object.defineProperty(t.prototype,"engine",{get:function(){return this.initDefaultBackend(),this.globalEngine},enumerable:!0,configurable:!0}),t.prototype.initDefaultBackend=function(){null==this.globalEngine&&this.initBackend(this.get("BACKEND"),!1)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"setBackend",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"getBackend",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"disposeVariables",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"memory",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tidy",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"dispose",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"keep",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"time",null),t}(),dt=function(){var t=function(){var t;if("undefined"!=typeof window)t=window;else{if("undefined"==typeof process)throw new Error("Could not find a global object");t=process}return t}();return null==t.ENV&&(t.ENV=new ht(ut()),K(function(){return t.ENV.engine})),t.ENV}();function mt(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function gt(t,e){for(var n=[],r=t.length,o=0;o<r;o++)-1===e.indexOf(o)&&n.push(t[o]);return[n,e.map(function(e){return t[e]})]}function vt(t,e){return function(t,e,n){for(var r=t.length+e.length,o=[],i=0,a=0,s=0;s<r;s++)-1===n.indexOf(s)?o.push(t[i++]):o.push(e[a++]);return o}(t,e.map(function(t){return 1}),e)}function yt(t,e){var n=e.length;return f((t=null==t?e.map(function(t,e){return e}):[].concat(t)).every(function(t){return t>=-n&&t<n}),"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t),f(t.every(function(t){return b(t)}),"All values in axis param must be integers but got axis "+t),t.map(function(t){return t<0?n+t:t})}function bt(t,e,n){f(mt(e,n),t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input.")}function wt(t,e){if(mt(t,e))return null;for(var n=[],r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach(function(t){return n.push(t)}),n}function xt(t){return t.map(function(t,e){return[e,t]}).sort(function(t,e){return t[1]-e[1]}).map(function(t){return t[0]})}function _t(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function Ot(t,e,n){f(t.length===e.length,"x1 and x2 should have the same rank.");var r=t.slice();return r[n]+=e[n],r}function Ct(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];dt.engine.startScope(t.name);try{var r=t.apply(void 0,e);return r instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),dt.engine.endScope(r),r}catch(t){throw dt.engine.endScope(null),t}}}Object.freeze({Environment:ht,ENV:dt});var Et=function(){function t(){}return t.concat1d=function(e){return t.concat(e,0)},t.concat2d=function(e,n){return t.concat(e,n)},t.concat3d=function(e,n){return t.concat(e,n)},t.concat4d=function(e,n){return t.concat(e,n)},t.concat=function(t,e){void 0===e&&(e=0),f(t.length>=1,"Pass at least one tensor to concat");var n=tt(t,"tensors","concat"),r=n[0];if(1===n.length)return r;for(var o=yt(e,r.shape),i=1;i<n.length;++i)r=Nt(r,n[i],o[0]);return r},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"concat",null),t}();function Nt(t,e,n){!function(t,e,n){var r=t.length;f(t.length===e.length,"Error in concat"+r+"D: rank of x1 ("+r+") and x2 ("+e.length+") must be the same."),f(n>=0&&n<r,"Error in concat"+r+"D: axis must be between 0 and "+(r-1)+".");for(var o=0;o<r;o++)f(o===n||t[o]===e[o],"Error in concat"+r+"D: Shape ("+t+") does not match ("+e+") along the non-concatenated axis "+o+".")}(t.shape,e.shape,n);var r=Ot(t.shape,e.shape,n),o=t.as2D(-1,v(t.shape.slice(n))),i=e.as2D(-1,v(e.shape.slice(n))),a=function(t,e){return{aBegin:[0,0],aSize:t,bBegin:[0,t[1]],bSize:i.shape}}(o.shape),s=a.aBegin,u=a.aSize,l=a.bBegin,c=a.bSize;return dt.engine.runKernel(function(t){return t.concat(o,i)},{a:o,b:i},function(t){return{a:function(){return t.slice(s,u)},b:function(){return t.slice(l,c)}}}).reshape(r)}var St=Ct(Et.concat),It=Ct(Et.concat1d),Pt=Ct(Et.concat2d),kt=Ct(Et.concat3d),Tt=Ct(Et.concat4d);function At(t,e){return t(e={exports:{}},e.exports),e.exports}"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Rt=At(function(t){!function(t,e,n){function r(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function o(t,e){var n=new function(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}(t),o=e&&e.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+1.1102230246251565e-16*(2097152*i()|0)},i.quick=i,o&&("object"==typeof o&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:this.alea=o}(0,t)}),Mt=At(function(t){!function(t,e,n){function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function o(t,e){var n=new function(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}(t),o=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,o&&("object"==typeof o&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:this.xor128=o}(0,t)}),Dt=At(function(t){!function(t,e,n){function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function o(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}(t),o=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,o&&("object"==typeof o&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:this.xorwow=o}(0,t)}),jt=At(function(t){!function(t,e,n){function r(t,e){return e.x=t.x.slice(),e.i=t.i,e}function o(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.x,o=e.i;return t=r[o],n=(t^=t>>>7)^t<<24,n^=(t=r[o+1&7])^t>>>10,n^=(t=r[o+3&7])^t>>>3,n^=(t=r[o+4&7])^t<<7,t=r[o+7&7],n^=(t^=t<<13)^t<<9,r[o]=n,e.i=o+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}(t),o=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,o&&(o.x&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:this.xorshift7=o}(0,t)}),Lt=At(function(t){!function(t,e,n){function r(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function o(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.w,o=e.X,i=e.i;return e.w=r=r+1640531527|0,n=o[i+34&127],t=o[i=i+1&127],n^=n<<13,t^=t<<17,n=o[i]=(n^=n>>>15)^(t^=t>>>12),e.i=i,n+(r^r>>>16)|0},function(t,e){var n,r,o,i,a,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),o=0,i=-32;i<u;++i)e&&(r^=e.charCodeAt((i+32)%e.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=0==(n=s[127&i]^=r+(a=a+1640531527|0))?o+1:0);for(o>=128&&(s[127&(e&&e.length||0)]=-1),o=127,i=512;i>0;--i)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,s[o]=(r^=r>>>15)^(n^=n>>>12);t.w=a,t.X=s,t.i=o}(e,t)}(t),o=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,o&&(o.X&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:this.xor4096=o}(0,t)}),zt=At(function(t){!function(t,e,n){function r(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function o(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,o=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^o,e.a=o-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}(t),o=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,o&&("object"==typeof o&&r(o,n),i.state=function(){return r(n,{})}),i}e&&e.exports?e.exports=o:this.tychei=o}(0,t)}),Vt=At(function(t){!function(e,r){var o,i=this,a=256,s=6,u="random",l=r.pow(a,s),c=r.pow(2,52),p=2*c,f=a-1;function h(t,n,h){var v=[],y=m(function t(e,n){var r,o=[],i=typeof e;if(n&&"object"==i)for(r in e)try{o.push(t(e[r],n-1))}catch(t){}return o.length?o:"string"==i?e:e+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[t,g(e)]:null==t?function(){try{var t;return o&&(t=o.randomBytes)?t=t(a):(t=new Uint8Array(a),(i.crypto||i.msCrypto).getRandomValues(t)),g(t)}catch(t){var n=i.navigator,r=n&&n.plugins;return[+new Date,i,r,i.screen,g(e)]}}():t,3),v),b=new function(t){var e,n=t.length,r=this,o=0,i=r.i=r.j=0,s=r.S=[];for(n||(t=[n++]);o<a;)s[o]=o++;for(o=0;o<a;o++)s[o]=s[i=f&i+t[o%n]+(e=s[o])],s[i]=e;(r.g=function(t){for(var e,n=0,o=r.i,i=r.j,s=r.S;t--;)e=s[o=f&o+1],n=n*a+s[f&(s[o]=s[i=f&i+e])+(s[i]=e)];return r.i=o,r.j=i,n})(a)}(v),w=function(){for(var t=b.g(s),e=l,n=0;t<c;)t=(t+n)*a,e*=a,n=b.g(1);for(;t>=p;)t/=2,e/=2,n>>>=1;return(t+n)/e};return w.int32=function(){return 0|b.g(4)},w.quick=function(){return b.g(4)/4294967296},w.double=w,m(g(b.S),e),(n.pass||h||function(t,e,n,o){return o&&(o.S&&d(o,b),t.state=function(){return d(b,{})}),n?(r[u]=t,e):t})(w,y,"global"in n?n.global:this==r,n.state)}function d(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function m(t,e){for(var n,r=t+"",o=0;o<r.length;)e[f&o]=f&(n^=19*e[f&o])+r.charCodeAt(o++);return g(e)}function g(t){return String.fromCharCode.apply(0,t)}if(r["seed"+u]=h,m(r.random(),e),t.exports){t.exports=h;try{o=n(!function(){var t=new Error("Cannot find module 'crypto'");throw t.code="MODULE_NOT_FOUND",t}())}catch(t){}}}([],Math)});Vt.alea=Rt,Vt.xor128=Mt,Vt.xorwow=Dt,Vt.xorshift7=jt,Vt.xor4096=Lt,Vt.tychei=zt;var Bt=Vt.alea,Ft=function(){function t(t,e,n,r,o){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=Bt(i.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,n,r=!1;!r;){var o=void 0,i=void 0,a=void 0;do{a=(o=2*this.random()-1)*o+(i=2*this.random()-1)*i}while(a>=1||0===a);var s=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*o*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(e)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(e)},t.prototype.convertValue=function(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)},t.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},t}(),Ut=function(){function t(){}return t.tensor=function(t,e,n){if(void 0===n&&(n="float32"),!T(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t)throw new Error("values passed to tensor(values) must be an array of numbers or booleans, or a TypedArray");var r=g(t);return null!=e&&1!==r.length&&h(e,r,"Error creating a new Tensor. Inferred shape ("+r+") does not match the provided shape ("+e+"). "),T(t)||Array.isArray(t)||(t=[t]),Q.make(e=e||r,{values:j(t,n)},n)},t.scalar=function(e,n){if(void 0===n&&(n="float32"),T(e)||Array.isArray(e))throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean)");return t.tensor(e,[],n)},t.tensor1d=function(e,n){void 0===n&&(n="float32"),d(e);var r=g(e);if(1!==r.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return t.tensor(e,r,n)},t.tensor2d=function(e,n,r){if(void 0===r&&(r="float32"),d(e),null!=n&&2!==n.length)throw new Error("tensor2d() requires shape to have two numbers");var o=g(e);if(2!==o.length&&1!==o.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===o.length&&null==n)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return t.tensor(e,n=n||o,r)},t.tensor3d=function(e,n,r){if(void 0===r&&(r="float32"),d(e),null!=n&&3!==n.length)throw new Error("tensor3d() requires shape to have three numbers");var o=g(e);if(3!==o.length&&1!==o.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===o.length&&null==n)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return t.tensor(e,n=n||o,r)},t.tensor4d=function(e,n,r){if(void 0===r&&(r="float32"),d(e),null!=n&&4!==n.length)throw new Error("tensor4d() requires shape to have four numbers");var o=g(e);if(4!==o.length&&1!==o.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===o.length&&null==n)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return t.tensor(e,n=n||o,r)},t.tensor5d=function(e,n,r){if(void 0===r&&(r="float32"),d(e),null!=n&&5!==n.length)throw new Error("tensor5d() requires shape to have five numbers");var o=g(e);if(5!==o.length&&1!==o.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===o.length&&null==n)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return t.tensor(e,n=n||o,r)},t.tensor6d=function(e,n,r){if(void 0===r&&(r="float32"),d(e),null!=n&&6!==n.length)throw new Error("tensor6d() requires shape to have six numbers");var o=g(e);if(6!==o.length&&1!==o.length)throw new Error("tensor6d() requires values to be number[][][][] or flat/TypedArray");if(1===o.length&&null==n)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t.tensor(e,n=n||o,r)},t.ones=function(t,e){void 0===e&&(e="float32");var n=L(v(t),e);return Q.make(t,{values:n},e)},t.zeros=function(t,e){void 0===e&&(e="float32");var n=z(v(t),e);return Q.make(t,{values:n},e)},t.fill=function(t,e,n){void 0===n&&(n="float32");var r=S(n,v(t));return r.fill(e),Q.make(t,{values:r},n)},t.onesLike=function(e){var n=Y(e,"x","onesLike");return t.ones(n.shape,n.dtype)},t.zerosLike=function(e){var n=Y(e,"x","zerosLike");return t.zeros(n.shape,n.dtype)},t.linspace=function(e,n,r){if(0===r)throw new Error("Cannot request zero samples");var o=(n-e)/(r-1),i=z(r,"float32");i[0]=e;for(var a=1;a<i.length;a++)i[a]=i[a-1]+o;return t.tensor1d(i,"float32")},t.range=function(e,n,r,o){if(void 0===r&&(r=1),void 0===o&&(o="float32"),0===r)throw new Error("Cannot have a step of zero");if(e===n||e<n&&r<0||n<e&&r>1)return t.zeros([0],o);var i=z(Math.abs(Math.ceil((n-e)/r)),o);n<e&&1===r&&(r=-1),i[0]=e;for(var a=1;a<i.length;a++)i[a]=i[a-1]+r;return t.tensor1d(i,o)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tensor",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"scalar",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tensor1d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tensor2d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tensor3d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tensor4d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tensor5d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tensor6d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"ones",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"zeros",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"fill",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"onesLike",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"zerosLike",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"linspace",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"range",null),t}(),Wt=Ut.fill,qt=Ut.linspace,$t=Ut.ones,Ht=Ut.range,Gt=Ut.scalar,Kt=Ut.tensor,Qt=Ut.tensor1d,Xt=Ut.tensor2d,Zt=Ut.tensor3d,Jt=Ut.tensor4d,Yt=Ut.tensor5d,te=Ut.tensor6d,ee=Ut.zeros,ne=Ct(Ut.onesLike),re=Ct(Ut.zerosLike),oe=function(){function t(){}return t.clone=function(t){var e=Y(t,"x","clone");return dt.engine.runKernel(function(t){return Q.make(e.shape,{dataId:e.dataId},e.dtype)},{$x:e},function(t){return{$x:function(){return t.toFloat()}}})},t.eye=function(e,n,r,o){void 0===o&&(o="float32"),null==n&&(n=e);for(var i=t.buffer([e,n],o),a=e<=n?e:n,s=0;s<a;++s)i.set(1,s,s);var u=i.toTensor().as2D(e,n);if(null==r)return u;if(1===r.length)return t.tile(t.expandDims(u,0),[r[0],1,1]);if(2===r.length)return t.tile(t.expandDims(t.expandDims(u,0),0),[r[0],r[1],1,1]);if(3===r.length)return t.tile(t.expandDims(t.expandDims(t.expandDims(u,0),0),0),[r[0],r[1],r[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+r.length+"D.")},t.randomNormal=function(e,n,r,o,i){if(void 0===n&&(n=0),void 0===r&&(r=1),null!=o&&"bool"===o)throw new Error("Unsupported data type "+o);for(var a=new Ft(n,r,o,!1,i),s=t.buffer(e,o),u=0;u<s.values.length;u++)s.values[u]=a.nextValue();return s.toTensor()},t.truncatedNormal=function(e,n,r,o,i){if(void 0===n&&(n=0),void 0===r&&(r=1),null!=o&&"bool"===o)throw new Error("Unsupported data type "+o);for(var a=new Ft(n,r,o,!0,i),s=t.buffer(e,o),u=0;u<s.values.length;u++)s.values[u]=a.nextValue();return s.toTensor()},t.randomUniform=function(e,n,r,o){void 0===n&&(n=0),void 0===r&&(r=1),void 0===o&&(o="float32");for(var i=t.buffer(e,o),a=0;a<i.values.length;a++)i.values[a]=p(n,r);return i.toTensor()},t.rand=function(t,e,n){var r=v(t),o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var i=0;i<r;i++)o[i]=e();return Q.make(t,{values:o},n)},t.multinomial=function(t,e,n,r){void 0===r&&(r=!1);var o=Y(t,"logits","multinomial"),i=o.size,a=o.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();var s=1===a?o.as2D(1,-1):o,u=dt.engine.runKernel(function(t){return t.multinomial(s,r,e,n)},{logits2D:s});return 1===a?u.as1D():u},t.oneHot=function(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=0);var o=Y(t,"indices","oneHot","int32");if(f("int32"===o.dtype,"Indices must be of dtype `int32`"),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);return dt.engine.runKernel(function(t){return t.oneHot(o,e,n,r)},{$indices:o})},t.fromPixels=function(t,e){if(void 0===e&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");return dt.engine.fromPixels(t,e)},t.toPixels=function(t,e){return s(this,void 0,void 0,function(){var n,r,o,i,a,s,l,c,p,f,h,d,m,g,v,y,b,w,x,_;return u(this,function(u){switch(u.label){case 0:if(2!==(n=Y(t,"img","toPixels","int32")).rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],i=r[1],(a=2===n.rank?1:n.shape[2])>4||2===a)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return s=n.min(),l=n.max(),[4,s.data()];case 1:return c=u.sent()[0],[4,l.data()];case 2:if(p=u.sent()[0],s.dispose(),l.dispose(),"float32"===n.dtype){if(c<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+c+" - "+p+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(c<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+c+" - "+p+"].")}return[4,n.data()];case 3:for(f=u.sent(),h="float32"===n.dtype?255:1,d=new Uint8ClampedArray(i*o*4),m=0;m<o*i;++m)g=void 0,v=void 0,y=void 0,b=void 0,1===a?(g=f[m]*h,v=f[m]*h,y=f[m]*h,b=255):3===a?(g=f[3*m]*h,v=f[3*m+1]*h,y=f[3*m+2]*h,b=255):4===a&&(g=f[4*m]*h,v=f[4*m+1]*h,y=f[4*m+2]*h,b=f[4*m+3]*h),d[0+(w=4*m)]=Math.round(g),d[w+1]=Math.round(v),d[w+2]=Math.round(y),d[w+3]=Math.round(b);return null!=e&&(e.width=i,e.height=o,x=e.getContext("2d"),_=new ImageData(d,i,o),x.putImageData(_,0,0)),n!==t&&n.dispose(),[2,d]}})})},t.reshape=function(t,e){var n=Y(t,"x","reshape");return e=E(e,n.size),f(n.size===v(e),"new shape and old shape must have the same number of elements."),dt.engine.runKernel(function(t){return t.reshape(n,e)},{$x:n},function(t){return{$x:function(){return t.reshape(n.shape)}}})},t.squeeze=function(e,n){var r=Y(e,"x","squeeze");return t.reshape(r,N(r.shape,n).newShape)},t.cast=function(t,e){var n=Y(t,"x","cast");return dt.engine.runKernel(function(t){return t.cast(n,e)},{$x:n},function(t){return{$x:function(){return t.clone()}}})},t.tile=function(t,e){var n=Y(t,"x","tile");return f(n.rank===e.length,"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."),dt.engine.runKernel(function(t){return t.tile(n,e)},{$x:n},function(t){return{$x:function(){var r=re(n);if(1===n.rank)for(var o=0;o<e[0];++o)r=r.add(t.slice([o*n.shape[0]],[n.shape[0]]));else if(2===n.rank)for(o=0;o<e[0];++o)for(var i=0;i<e[1];++i)r=r.add(t.slice([o*n.shape[0],i*n.shape[1]],[n.shape[0],n.shape[1]]));else if(3===n.rank)for(o=0;o<e[0];++o)for(i=0;i<e[1];++i)for(var a=0;a<e[2];++a)r=r.add(t.slice([o*n.shape[0],i*n.shape[1],a*n.shape[2]],[n.shape[0],n.shape[1],n.shape[2]]));else{if(4!==n.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+n.rank+" tensors yet.");for(o=0;o<e[0];++o)for(i=0;i<e[1];++i)for(a=0;a<e[2];++a)for(var s=0;s<e[3];++s)r=r.add(t.slice([o*n.shape[0],i*n.shape[1],a*n.shape[2],s*n.shape[3]],[n.shape[0],n.shape[1],n.shape[2],n.shape[3]]))}return r}}})},t.pad1d=function(e,n,r){return void 0===r&&(r=0),f(2===n.length,"Invalid number of paddings. Must be length of 2."),t.pad(e,[n],r)},t.pad2d=function(e,n,r){return void 0===r&&(r=0),f(2===n.length&&2===n[0].length&&2===n[1].length,"Invalid number of paddings. Must be length of 2 each."),t.pad(e,n,r)},t.pad3d=function(e,n,r){return void 0===r&&(r=0),f(3===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length,"Invalid number of paddings. Must be length of 2 each."),t.pad(e,n,r)},t.pad4d=function(e,n,r){return void 0===r&&(r=0),f(4===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length&&2===n[3].length,"Invalid number of paddings. Must be length of 2 each."),t.pad(e,n,r)},t.pad=function(t,e,n){void 0===n&&(n=0);var r=Y(t,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o=e.map(function(t){return t[0]});return dt.engine.runKernel(function(t){return t.pad(r,e,n)},{$x:r},function(t){return{$x:function(){return t.slice(o,r.shape)}}})},t.stack=function(t,e){void 0===e&&(e=0);var n=tt(t,"tensors","stack");if(f(n.length>=1,"Pass at least one tensor to tf.stack"),1===n.length)return n[0].expandDims(e);var r=n[0].shape,o=n[0].dtype;f(e<=n[0].rank,"Axis must be <= rank of the tensor"),n.forEach(function(t){h(r,t.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(t){f(o===t.dtype,"All tensors passed to stack must have matching dtypes")});var i=n.map(function(t){return t.expandDims(e)});return St(i,e)},t.unstack=function(t,e){void 0===e&&(e=0);for(var n,r=Y(t,"x","unstack"),o=r.shape[e],i=Array(r.rank-1).fill(0),a=0,s=0;s<r.rank;s++)s!==e&&(i[a]=r.shape[s],a++);n=Array(o).fill(1);var u=Array(r.rank).fill(0),l=r.shape.slice();return n.map(function(t){l[e]=t;var n=r.slice(u,l);return u[e]+=t,n.reshape(i)})},t.split=function(t,e,n){void 0===n&&(n=0);var r,o=Y(t,"x","split");n=yt(n,o.shape)[0],"number"==typeof e?(f(o.shape[n]%e==0,"Number of splits must evenly divide the axis."),r=Array(e).fill(o.shape[n]/e)):(f(o.shape[n]===e.reduce(function(t,e){return t+e}),"The sum of sizes must match the size of the axis dimension."),r=e);var i=Array(o.rank).fill(0),a=o.shape.slice();return r.map(function(t){a[n]=t;var e=o.slice(i,a);return i[n]+=t,e})},t.cumsum=function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var o=Y(t,"x","cumsum"),i=wt([e|=0],o.rank),a=o;null!=i&&(a=o.transpose(i));var s=_t(1,o.rank)[0],u=dt.engine.runKernel(function(t){return t.cumsum(a,s,n,r)},{permutedX:a},function(t){return{permutedX:function(){return t.cumsum(e,n,!r)}}});return null!=i&&(u=u.transpose(i)),u},t.expandDims=function(e,n){void 0===n&&(n=0);var r=Y(e,"x","expandDims");f(n<=r.rank,"Axis must be <= rank of the tensor");var o=r.shape.slice();return n<0&&(f(-(r.rank+1)<=n,"Axis must be in the interval ["+-(r.rank+1)+", "+r.rank+"]"),n=r.rank+n+1),o.splice(n,0,1),t.reshape(r,o)},t.buffer=function(t,e,n){return void 0===e&&(e="float32"),new $(t,e,n)},t.print=function(t,e){void 0===e&&(e=!1),console.log(t.toString(e))},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"clone",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"eye",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"randomNormal",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"truncatedNormal",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"randomUniform",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"multinomial",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"oneHot",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"fromPixels",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"toPixels",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"reshape",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"squeeze",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"cast",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tile",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"pad",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"stack",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"unstack",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"split",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"cumsum",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"expandDims",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"buffer",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"print",null),t}(),ie=oe.buffer,ae=oe.toPixels,se=Ct(oe.cast),ue=Ct(oe.clone),le=Ct(oe.cumsum),ce=Ct(oe.expandDims),pe=Ct(oe.eye),fe=Ct(oe.fromPixels),he=Ct(oe.multinomial),de=Ct(oe.oneHot),me=Ct(oe.pad),ge=Ct(oe.pad1d),ve=Ct(oe.pad2d),ye=Ct(oe.pad3d),be=Ct(oe.pad4d),we=Ct(oe.print),xe=Ct(oe.rand),_e=Ct(oe.randomNormal),Oe=Ct(oe.randomUniform),Ce=Ct(oe.reshape),Ee=Ct(oe.split),Ne=Ct(oe.squeeze),Se=Ct(oe.stack),Ie=Ct(oe.tile),Pe=Ct(oe.truncatedNormal),ke=Ct(oe.unstack);function Te(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var i=n-1-o;(e[e.length-1-o]||1)>1&&1===(t[i]||1)&&r.unshift(i)}return r}function Ae(t,e){for(var n=[],r=0;r<e.length;r++){var o=t[t.length-r-1],i=e.length-r-1;(null==o||1===o&&e[i]>1)&&n.unshift(i)}return n}function Re(t,e){for(var n=[],r="Operands could not be broadcast together with shapes "+t+" and "+e+".",o=Math.max(t.length,e.length),i=0;i<o;i++){var a=t[t.length-i-1]||1,s=e[e.length-i-1]||1;if(a>1&&s>1&&a!==s)throw Error(r);n.unshift(Math.max(a,s))}return n}var Me=function(){function t(){}return t.neg=function(t){var e=Y(t,"x","neg");return dt.engine.runKernel(function(t){return t.neg(e)},{$x:e},function(t){return{$x:function(){return t.neg()}}})},t.ceil=function(t){var e=Y(t,"x","ceil");return dt.engine.runKernel(function(t){return t.ceil(e)},{$x:e},function(t){return{$x:function(){return re(t)}}})},t.floor=function(t){var e=Y(t,"x","floor");return dt.engine.runKernel(function(t){return t.floor(e)},{$x:e},function(t){return{$x:function(){return re(t)}}})},t.sign=function(t){var e=Y(t,"x","sign");return dt.engine.runKernel(function(t){return t.sign(e)},{$x:e},function(t){return{$x:function(){return re(t)}}})},t.round=function(t){var e=Y(t,"x","round");return dt.engine.runKernel(function(t){return t.round(e)},{$x:e},function(t){return{$x:function(){return re(t)}}})},t.exp=function(t){var e=Y(t,"x","exp");return dt.engine.runKernel(function(t,n){return n(t.exp(e))},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mulStrict(n)}}})},t.expm1=function(t){var e=Y(t,"x","expm1");return dt.engine.runKernel(function(t){return t.expm1(e)},{$x:e},function(t){return{$x:function(){return t.mulStrict(e.exp())}}})},t.log=function(t){var e=Y(t,"x","log");return dt.engine.runKernel(function(t){return t.log(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.toFloat())}}})},t.log1p=function(t){var e=Y(t,"x","log1p");return dt.engine.runKernel(function(t){return t.log1p(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.add(Gt(1)))}}})},t.sqrt=function(t){var e=Y(t,"x","sqrt");return dt.engine.runKernel(function(t){return t.sqrt(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.toFloat().sqrt().mul(Gt(2)))}}})},t.rsqrt=function(t){var e=Y(t,"x","rsqrt");return dt.engine.runKernel(function(t){return t.rsqrt(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.pow(Gt(1.5)).mul(Gt(2))).neg()}}})},t.square=function(t){var e=Y(t,"x","square");return dt.engine.runKernel(function(t){return t.square(e)},{$x:e},function(t){return{$x:function(){return t.mulStrict(e.toFloat().mul(Gt(2)))}}})},t.reciprocal=function(t){var e=Y(t,"x","reciprocal");return dt.engine.runKernel(function(t){return t.reciprocal(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.square().neg())}}})},t.abs=function(t){var e=Y(t,"x","abs");return dt.engine.runKernel(function(t){return t.abs(e)},{$x:e},function(t){return{$x:function(){return t.mulStrict(e.toFloat().step(-1))}}})},t.clipByValue=function(t,e,n){var r=Y(t,"x","clipByValue");return f(e<=n,"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."),dt.engine.runKernel(function(t){return t.clip(r,e,n)},{$x:r},function(t){return{$x:function(){return t.where(r.greaterEqual(Gt(e)).logicalAnd(r.lessEqual(Gt(n))),re(t))}}})},t.sigmoid=function(t){var e=Y(t,"x","sigmoid");return dt.engine.runKernel(function(t,n){return n(t.sigmoid(e))},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mulStrict(n.mul(Gt(1).sub(n)))}}})},t.logSigmoid=function(t){var e=Y(t,"x","logSigmoid");return dt.engine.runKernel(function(t){return t.softplus(e.neg()).neg()},{$x:e},function(t){return{$x:function(){return t.mulStrict(e.neg().sigmoid())}}})},t.softplus=function(t){var e=Y(t,"x","softplus");return dt.engine.runKernel(function(t){return t.softplus(e)},{$x:e},function(t){return{$x:function(){return t.mulStrict(e.sigmoid())}}})},t.sin=function(t){var e=Y(t,"x","sin");return dt.engine.runKernel(function(t){return t.sin(e)},{$x:e},function(t){return{$x:function(){return e.toFloat().cos().mulStrict(t)}}})},t.cos=function(t){var e=Y(t,"x","cos");return dt.engine.runKernel(function(t){return t.cos(e)},{$x:e},function(t){return{$x:function(){return e.toFloat().sin().neg().mulStrict(t)}}})},t.tan=function(t){var e=Y(t,"x","tan");return dt.engine.runKernel(function(t){return t.tan(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.cos().square())}}})},t.asin=function(t){var e=Y(t,"x","asin");return dt.engine.runKernel(function(t){return t.asin(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(Gt(1).sub(e.toFloat().square()).sqrt())}}})},t.acos=function(t){var e=Y(t,"x","acos");return dt.engine.runKernel(function(t){return t.acos(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(Gt(1).sub(e.toFloat().square()).sqrt()).neg()}}})},t.atan=function(t){var e=Y(t,"x","atan");return dt.engine.runKernel(function(t){return t.atan(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(Gt(1).add(e.toFloat().square()))}}})},t.sinh=function(t){var e=Y(t,"x","sinh");return dt.engine.runKernel(function(t){return t.sinh(e)},{$x:e},function(t){return{$x:function(){return e.toFloat().cosh().mulStrict(t)}}})},t.cosh=function(t){var e=Y(t,"x","cosh");return dt.engine.runKernel(function(t){return t.cosh(e)},{$x:e},function(t){return{$x:function(){return e.toFloat().sinh().mulStrict(t)}}})},t.tanh=function(t){var e=Y(t,"x","tanh");return dt.engine.runKernel(function(t,n){return n(t.tanh(e))},{$x:e},function(t,e){var n=e[0];return{$x:function(){return Gt(1).sub(n.square()).mulStrict(t)}}})},t.asinh=function(t){var e=Y(t,"x","asinh");return dt.engine.runKernel(function(t){return t.asinh(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(Gt(1).add(e.toFloat().square()).sqrt())}}})},t.acosh=function(t){var e=Y(t,"x","acosh");return dt.engine.runKernel(function(t){return t.acosh(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.toFloat().square().sub(Gt(1)).sqrt())}}})},t.atanh=function(t){var e=Y(t,"x","atanh");return dt.engine.runKernel(function(t){return t.atanh(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(Gt(1).sub(e.toFloat().square()))}}})},t.erf=function(t){var e=Y(t,"x","erf");return f("int32"===e.dtype||"float32"===e.dtype,"Input dtype must be `int32` or `float32`."),"int32"===e.dtype&&(e=e.toFloat()),dt.engine.runKernel(function(t){return t.erf(e)},{$x:e},function(t){return{$x:function(){return t.mulStrict(Gt(2/Math.sqrt(Math.PI)).mul(e.square().neg().exp()))}}})},t.step=function(t,e){void 0===e&&(e=0);var n=Y(t,"x","step");return dt.engine.runKernel(function(t){return t.step(n,e)},{$x:n},function(t){return{$x:function(){return re(t)}}})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"neg",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"ceil",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"floor",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sign",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"round",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"exp",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"expm1",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"log",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"log1p",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sqrt",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"rsqrt",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"square",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"reciprocal",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"abs",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"clipByValue",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sigmoid",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"logSigmoid",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"softplus",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sin",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"cos",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tan",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"asin",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"acos",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"atan",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sinh",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"cosh",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"tanh",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"asinh",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"acosh",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"atanh",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"erf",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"step",null),t}(),De=Ct(Me.abs),je=Ct(Me.acos),Le=Ct(Me.acosh),ze=Ct(Me.asin),Ve=Ct(Me.asinh),Be=Ct(Me.atan),Fe=Ct(Me.atanh),Ue=Ct(Me.ceil),We=Ct(Me.clipByValue),qe=Ct(Me.cos),$e=Ct(Me.cosh),He=Ct(Me.erf),Ge=Ct(Me.exp),Ke=Ct(Me.expm1),Qe=Ct(Me.floor),Xe=Ct(Me.log),Ze=Ct(Me.log1p),Je=Ct(Me.logSigmoid),Ye=Ct(Me.neg),tn=Ct(Me.reciprocal),en=Ct(Me.round),nn=Ct(Me.rsqrt),rn=Ct(Me.sigmoid),on=Ct(Me.sign),an=Ct(Me.sin),sn=Ct(Me.sinh),un=Ct(Me.softplus),ln=Ct(Me.sqrt),cn=Ct(Me.square),pn=Ct(Me.step),fn=Ct(Me.tan),hn=Ct(Me.tanh),dn=function(){function t(){}return t.batchNormalization2d=function(e,n,r,o,i,a){void 0===o&&(o=.001);var s,u,l=Y(e,"x","batchNormalization"),c=Y(n,"mean","batchNormalization"),p=Y(r,"variance","batchNormalization");return null!=i&&(s=Y(i,"scale","batchNormalization")),null!=a&&(u=Y(a,"offset","batchNormalization")),f(2===l.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+l.rank+"."),f(2===c.rank||1===c.rank,"Error in batchNormalization2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."),f(2===p.rank||1===p.rank,"Error in batchNormalization2D: variance must be rank 2 or rank 1 but got rank "+p.rank+"."),null!=s&&f(2===s.rank||1===s.rank,"Error in batchNormalization2D: scale must be rank 2 or rank 1 but got rank "+s.rank+"."),null!=u&&f(2===u.rank||1===u.rank,"Error in batchNormalization2D: offset must be rank 2 or rank 1 but got rank "+u.rank+"."),t.batchNormalization(l,c,p,o,s,u)},t.batchNormalization3d=function(e,n,r,o,i,a){void 0===o&&(o=.001);var s,u,l=Y(e,"x","batchNormalization"),c=Y(n,"mean","batchNormalization"),p=Y(r,"variance","batchNormalization");return null!=i&&(s=Y(i,"scale","batchNormalization")),null!=a&&(u=Y(a,"offset","batchNormalization")),f(3===l.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+l.rank+"."),f(3===c.rank||1===c.rank,"Error in batchNormalization3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."),f(3===p.rank||1===p.rank,"Error in batchNormalization3D: variance must be rank 3 or rank 1 but got rank "+p.rank+"."),null!=s&&f(3===s.rank||1===s.rank,"Error in batchNormalization3D: scale must be rank 3 or rank 1 but got rank "+s.rank+"."),null!=u&&f(3===u.rank||1===u.rank,"Error in batchNormalization3D: offset must be rank 3 or rank 1 but got rank "+u.rank+"."),t.batchNormalization(l,c,p,o,s,u)},t.batchNormalization4d=function(e,n,r,o,i,a){void 0===o&&(o=.001);var s,u,l=Y(e,"x","batchNormalization"),c=Y(n,"mean","batchNormalization"),p=Y(r,"variance","batchNormalization");return null!=i&&(s=Y(i,"scale","batchNormalization")),null!=a&&(u=Y(a,"offset","batchNormalization")),f(4===l.rank,"Error in batchNormalization4D: x must be rank 4 but got rank "+l.rank+"."),f(4===c.rank||1===c.rank,"Error in batchNormalization4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."),f(4===p.rank||1===p.rank,"Error in batchNormalization4D: variance must be rank 4 or rank 1 but got rank "+p.rank+"."),null!=s&&f(4===s.rank||1===s.rank,"Error in batchNormalization4D: scale must be rank 4 or rank 1 but got rank "+s.rank+"."),null!=u&&f(4===u.rank||1===u.rank,"Error in batchNormalization4D: offset must be rank 4 or rank 1 but got rank "+u.rank+"."),t.batchNormalization(l,c,p,o,s,u)},t.batchNormalization=function(t,e,n,r,o,i){void 0===r&&(r=.001);var a,s,u,l=Y(t,"x","batchNormalization"),c=Y(e,"mean","batchNormalization"),p=Y(n,"variance","batchNormalization");return null!=o&&(a=Y(o,"scale","batchNormalization")),null!=i&&(s=Y(i,"offset","batchNormalization")),f(c.rank===p.rank,"Batch normalization gradient requires mean and variance to have equal ranks."),f(null==s||c.rank===s.rank,"Batch normalization gradient requires mean and offset to have equal ranks."),f(null==a||c.rank===a.rank,"Batch normalization gradient requires mean and scale to have equal ranks."),u=0===l.rank||1===l.rank?l.as4D(1,1,1,l.size):2===l.rank?l.as4D(1,1,l.shape[0],l.shape[1]):3===l.rank?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l,dt.engine.runKernel(function(t){return t.batchNormalization(u,mn(c),mn(p),r,mn(a),mn(s))},{$x:l,$mean:c,$variance:p,$scale:a,$offset:s},function(t){var e=null==a?Gt(1):a,n=Ae(c.shape,u.shape),o=[];if(1===c.rank){for(var i=0;i<u.shape.length-1;++i)o.push(u.shape[i]);o.push(1)}var s=l.sub(c),f=t.mul(e),h=nn(p.add(Gt(r))),d=h.mul(h).mul(h).mul(Gt(-.5));return{$x:function(){return 1===c.rank?t.mul(Ie(h.as4D(1,1,1,c.shape[0]),o)).mul(e).reshape(l.shape):t.mul(h).mul(e).reshape(l.shape)},$mean:function(){var t=h.mul(Gt(-1)).mul(f);return 1===c.rank&&(t=t.sum(n)),t.reshape(c.shape)},$variance:function(){var t=d.mul(s).mul(f);return 1===c.rank&&(t=t.sum(n)),t.reshape(c.shape)},$scale:function(){var e=s.mul(h),r=t.mul(e);return 1===c.rank&&(r=r.sum(n)),r.reshape(c.shape)},$offset:function(){var e=t;return 1===c.rank&&(e=e.sum(n)),e.reshape(c.shape)}}}).reshape(l.shape)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"batchNormalization",null),t}();function mn(t){return null==t?null:0===t.rank?t.as1D():1===t.rank?t:2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}var gn=Ct(dn.batchNormalization2d),vn=Ct(dn.batchNormalization3d),yn=Ct(dn.batchNormalization4d),bn=Ct(dn.batchNormalization);function wn(t,e,n,r,o,i){void 0===i&&(i="channelsLast");var a,s=_n(e),u=s[0],l=s[1];if("channelsLast"===i)a=[u,l,t[3],t[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);a=[u,l,t[1],t[1]]}return xn(t,a,n,1,r,o,!1,i)}function xn(t,e,n,r,o,i,a,s){void 0===a&&(a=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],p=u[2],h=u[3];if("channelsLast"===s)l=t[0],c=t[1],p=t[2],h=t[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);l=t[0],h=t[1],c=t[2],p=t[3]}var d,m=e[0],g=e[1],v=e[3],y=_n(n),w=y[0],x=y[1],_=_n(r),O=_[0],C=_[1],E=function(t,e,n,r,o,i,a,s){var u,l,c;if("number"==typeof t){u={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};var p=function(t,e,n,r,o,i){null==o&&(o=function(t,e,n,r){void 0===r&&(r=1);var o=On(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}(t,e,r));var a=t[1],s=Cn((t[0]-e+2*o)/r+1,i);f(b(s),"The output # of rows ("+s+") must be an integer. Change the stride and/or zero pad parameters");var u=Cn((a-e+2*o)/r+1,i);return f(b(u),"The output # of columns ("+u+") must be an integer. Change the stride and/or zero pad parameters"),[s,u,1]}([e,n,1],i,0,r,t,s);l=p[0],c=p[1]}else if("same"===t){var h=((l=Math.ceil(e/r))-1)*r+i-e,d=((c=Math.ceil(n/o))-1)*o+a-n,m=Math.floor(h/2),g=h-m,v=Math.floor(d/2);u={top:m,bottom:g,left:v,right:d-v,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((e-i+1)/r),c=Math.ceil((n-a+1)/o)}return{padInfo:u,outHeight:l,outWidth:c}}(o,c,p,w,x,On(m,O),On(g,C),i),N=E.outHeight,S=E.outWidth,I=a?v*h:v;return"channelsFirst"===s?d=[l,I,N,S]:"channelsLast"===s&&(d=[l,N,S,I]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:p,inChannels:h,outHeight:N,outWidth:S,outChannels:I,padInfo:E.padInfo,strideHeight:w,strideWidth:x,filterHeight:m,filterWidth:g,dilationHeight:O,dilationWidth:C,inShape:t,outShape:d,filterShape:e}}function _n(t){return"number"==typeof t?[t,t]:t}function On(t,e){return e<=1?t:t+(t-1)*(e-1)}function Cn(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}var En=function(){function t(){}return t.conv1d=function(e,n,r,o,i,a,s){void 0===i&&(i="NWC"),void 0===a&&(a=1);var u=Y(e,"x","conv1d"),l=Y(n,"filter","conv1d"),c=u,p=!1;2===u.rank&&(p=!0,c=u.as3D(1,u.shape[0],u.shape[1])),f(3===c.rank,"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."),f(3===l.rank,"Error in conv1d: filter must be rank 3, but got rank "+l.rank+"."),null!=s&&f(b(o),"Error in conv1d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+o+"."),f(c.shape[2]===l.shape[1],"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+l.shape[1]+"."),f(Sn(r,a),"Error in conv1D: Either stride or dilation must be 1. Got stride "+r+" and dilation '"+a+"'"),f("NWC"===i,"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported.");var h=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]),d=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),m=t.conv2d(d,h,[1,r],o,"NHWC",[1,a],s);return p?m.as2D(m.shape[2],m.shape[3]):m.as3D(m.shape[0],m.shape[2],m.shape[3])},t.conv2d=function(e,n,r,o,i,a,s){void 0===i&&(i="NHWC"),void 0===a&&(a=[1,1]);var u=Y(e,"x","conv2d"),l=Y(n,"filter","conv2d"),c=u,p=!1;3===u.rank&&(p=!0,c=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),f(4===c.rank,"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."),f(4===l.rank,"Error in conv2d: filter must be rank 4, but got rank "+l.rank+"."),null!=s&&f(b(o),"Error in conv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+o+"."),f(c.shape[3]===l.shape[2],"Error in conv2d: depth of input ("+c.shape[3]+") must match input depth for filter "+l.shape[2]+"."),f(Sn(r,a),"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"),f("NHWC"===i,"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported.");var h=xn(c.shape,l.shape,r,a,o,s),d=dt.engine.runKernel(function(t){return t.conv2d(c,l,h)},{x:c,$filter:l},function(e){return f(Nn(a),"Error in gradient of conv2D: dilation rates greater than 1 are notyet supported in gradients. Got dilations '"+a+"'"),{x:function(){return t.conv2dDerInput(c.shape,e,l,r,o)},$filter:function(){return t.conv2dDerFilter(c,e,l.shape,r,o)}}});return p?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d},t.conv2dDerInput=function(t,e,n,r,o,i){f(t.length===e.rank,"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match");var a=t,s=e,u=!1;3===e.rank&&(u=!0,s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),a=[1,t[0],t[1],t[2]]);var l=a[3],c=s.shape[3];f(4===a.length,"Error in conv2dDerInput: inShape must be length 4, but got length "+a.length+"."),f(4===s.rank,"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank),f(4===n.rank,"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank),f(l===n.shape[2],"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."),f(c===n.shape[3],"Error in conv2dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[3]+"."),null!=i&&f(b(o),"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+".");var p=xn(a,n.shape,r,1,o,i),h=dt.engine.runKernel(function(t){return t.conv2dDerInput(s,n,p)},{dy4D:s});return u?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},t.conv2dDerFilter=function(t,e,n,r,o,i){var a=t;3===t.rank&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var s=e;3===s.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),f(4===a.rank,"Error in conv2dDerFilter: input must be rank 4, but got shape "+a.shape+"."),f(4===s.rank,"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."),f(4===n.length,"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."),f(a.shape[3]===n[2],"Error in conv2dDerFilter: depth of input "+a.shape[3]+") must match input depth in filter ("+n[2]+"."),f(s.shape[3]===n[3],"Error in conv2dDerFilter: depth of dy ("+s.shape[3]+") must match output depth for filter ("+n[3]+")."),null!=i&&f(b(o),"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+".");var u=xn(a.shape,n,r,1,o,i);return dt.engine.runKernel(function(t){return t.conv2dDerFilter(a,s,u)},{x4D:a,dy4D:s})},t.conv2dTranspose=function(e,n,r,o,i,a){var s=Y(e,"x","conv2dTranspose"),u=Y(n,"filter","conv2dTranspose");return t.conv2dDerInput(r,s,u,o,i,a)},t.depthwiseConv2d=function(t,e,n,r,o,i,a){void 0===o&&(o="NHWC"),void 0===i&&(i=[1,1]);var s=Y(t,"x","depthwiseConv2d"),u=Y(e,"filter","depthwiseConv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),f(4===l.rank,"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."),f(4===u.rank,"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."),f(l.shape[3]===u.shape[2],"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."),null==i&&(i=[1,1]),f(Sn(n,i),"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"),null!=a&&f(b(r),"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+".");var p=xn(l.shape,u.shape,n,i,r,a,!0),h=dt.engine.runKernel(function(t){return t.depthwiseConv2D(l,u,p)},{x:l,$filter:u},function(t){return f(Nn(i),"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"),{x:function(){return function(t,e,n,r){var o=e,i=!1;3===e.rank&&(i=!0,o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=dt.engine.runKernel(function(t){return t.depthwiseConv2DDerInput(o,n,r)},{dy4D:o});return i?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}(0,t,u,p)},$filter:function(){return function(t,e,n,r){var o=l;3===l.rank&&(o=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]));var i=e;return 3===i.rank&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),dt.engine.runKernel(function(t){return t.depthwiseConv2DDerFilter(o,i,r)},{x4D:o,dy4D:i})}(0,t,0,p)}}});return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},t.separableConv2d=function(e,n,r,o,i,a,s){void 0===a&&(a=[1,1]),void 0===s&&(s="NHWC");var u=Y(e,"x","separableConv2d"),l=Y(n,"depthwiseFilter","separableConv2d"),c=Y(r,"pointwiseFilter","separableConv2d"),p=u,h=!1;if(3===u.rank&&(h=!0,p=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),"NCHW"===s)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");f(4===p.rank,"Error in separableConv2d: input must be rank 4, but got rank "+p.rank+"."),f(4===l.rank,"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+l.rank+"."),f(4===c.rank,"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+l.rank+"."),f(1===c.shape[0],"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."),f(1===c.shape[1],"Error in separableConv2d: the second dimension of pointwise filter  must be 1, but got "+c.shape[1]+".");var d=l.shape[2],m=l.shape[3];f(c.shape[2]===d*m,"Error in separableConv2d: the third dimension of pointwise filter must be "+d*m+", but got "+c.shape[2]+".");var g=t.depthwiseConv2d(p,l,o,i,s,a),v=t.conv2d(g,c,1,"valid",s);return h?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"conv1d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"conv2d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"conv2dTranspose",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"depthwiseConv2d",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"separableConv2d",null),t}();function Nn(t){var e=function(t){return"number"==typeof t?[t,t]:t}(t);return 1===e[0]&&1===e[1]}function Sn(t,e){return Nn(t)||Nn(e)}var In=Ct(En.conv1d),Pn=Ct(En.conv2d),kn=Ct(En.depthwiseConv2d),Tn=Ct(En.separableConv2d),An=Ct(En.conv2dTranspose),Rn=function(){function t(){}return t.matMul=function(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);var o=Y(t,"a","matMul"),i=Y(e,"b","matMul"),a=n?o.shape[0]:o.shape[1],s=r?i.shape[1]:i.shape[0];return f(2===o.rank&&2===i.rank,"Error in matMul: inputs must be rank 2, got ranks "+o.rank+" and "+i.rank+"."),f(a===s,"Error in matMul: inner shapes ("+a+") and ("+s+") of Tensors with shapes "+o.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."),dt.engine.runKernel(function(t){return t.matMul(o,i,n,r)},{$a:o,$b:i},function(t){return n||r?!n&&r?{$a:function(){return t.matMul(i.toFloat(),!1,!1)},$b:function(){return t.matMul(o.toFloat(),!0,!1)}}:n&&!r?{$a:function(){return i.toFloat().matMul(t,!1,!0)},$b:function(){return o.toFloat().matMul(t,!1,!1)}}:{$a:function(){return i.toFloat().matMul(t,!0,!0)},$b:function(){return t.matMul(o.toFloat(),!0,!0)}}:{$a:function(){return t.matMul(i.toFloat(),!1,!0)},$b:function(){return o.toFloat().matMul(t,!0,!1)}}})},t.outerProduct=function(t,e){var n=Y(t,"v1","outerProduct"),r=Y(e,"v2","outerProduct");return f(1===n.rank&&1===r.rank,"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."),n.as2D(-1,1).matMul(r.as2D(1,-1))},t.dot=function(t,e){var n=Y(t,"t1","dot"),r=Y(e,"t2","dot");f(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+".");var o=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];return f(o===i,"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+i+"."),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"matMul",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"outerProduct",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"dot",null),t}(),Mn=Ct(Rn.matMul),Dn=Ct(Rn.dot),jn=Ct(Rn.outerProduct),Ln=function(){function t(){}return t.reverse1d=function(e){var n=Y(e,"x","reverse");return f(1===n.rank,"Error in reverse1D: x must be rank 1 but got\n             rank "+n.rank+"."),t.reverse(n,0)},t.reverse2d=function(e,n){var r=Y(e,"x","reverse");return f(2===r.rank,"Error in reverse2D: x must be rank 2 but got\n             rank "+r.rank+"."),t.reverse(r,n)},t.reverse3d=function(e,n){var r=Y(e,"x","reverse");return f(3===r.rank,"Error in reverse3D: x must be rank 3 but got\n             rank "+r.rank+"."),t.reverse(r,n)},t.reverse4d=function(e,n){var r=Y(e,"x","reverse");return f(4===r.rank,"Error in reverse4D: x must be rank 4 but got\n             rank "+r.rank+"."),t.reverse(r,n)},t.reverse=function(t,e){var n=Y(t,"x","reverse");if(0===n.rank)return n.clone();var r=yt(e,n.shape);return dt.engine.runKernel(function(t){return t.reverse(n,r)},{$x:n},function(t){return{$x:function(){return t.reverse(r)}}}).reshapeAs(n)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"reverse",null),t}(),zn=Ct(Ln.reverse),Vn=Ct(Ln.reverse1d),Bn=Ct(Ln.reverse2d),Fn=Ct(Ln.reverse3d),Un=Ct(Ln.reverse4d),Wn=function(){function t(){}return t.maxPool=function(t,e,n,r,o){var i=Y(t,"x","maxPool"),a=i,s=!1;3===i.rank&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),f(4===a.rank,"Error in maxPool: input must be rank 4 but got rank "+a.rank+"."),null!=o&&f(b(r),"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+".");var u=wn(a.shape,e,n,r,o),l=dt.engine.runKernel(function(t,e){return e(t.maxPool(a,u))},{x:a},function(t,o){var i=o[0];return{x:function(){return function(t,e,n,r,o,i,a){var s=Y(t,"dy","maxPoolBackprop"),u=Y(e,"input","maxPoolBackprop"),l=Y(n,"output","maxPoolBackprop");f(u.rank===s.rank,"Rank of input ("+u.rank+") does not match rank of dy ("+s.rank+")"),f(4===s.rank,"Error in maxPoolBackprop: dy must be rank 4 but got rank "+s.rank+"."),f(4===u.rank,"Error in maxPoolBackprop: input must be rank 4 but got rank "+u.rank+".");var c=wn(u.shape,r,o,i,void 0);return dt.engine.runKernel(function(t){return t.maxPoolBackprop(s,u,l,c)},{$dy:s,$input:u})}(t,a,i,e,n,r)}}});return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l},t.avgPool=function(t,e,n,r,o){var i=Y(t,"x","avgPool");f("float32"===i.dtype,"The input dtype to avgPool must be float32");var a=i,s=!1;3===i.rank&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),f(4===a.rank,"Error in avgPool: x must be rank 4 but got rank "+a.rank+"."),null!=o&&f(b(r),"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+".");var u=wn(a.shape,e,n,r),l=dt.engine.runKernel(function(t){return t.avgPool(a,u)},{x:a},function(t){return{x:function(){return function(t,e,n,r,o){var i=Y(t,"dy","avgPoolBackprop"),a=Y(e,"input","avgPoolBackprop");f(a.rank===i.rank,"Rank of input ("+a.rank+") does not match rank of dy ("+i.rank+")");var s=a,u=i,l=!1;3===a.rank&&(l=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]),u=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),f(4===u.rank,"Error in avgPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."),f(4===s.rank,"Error in avgPoolBackprop: input must be rank 4 but got rank "+s.rank+".");var c=wn(s.shape,n,r,o),p=dt.engine.runKernel(function(t){return t.avgPoolBackprop(u,s,c)},{dy4D:u,input4D:s});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}(t,a,e,n,r)}}});return l=l.cast(i.dtype),s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"maxPool",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"avgPool",null),t}(),qn=Ct(Wn.maxPool),$n=Ct(Wn.avgPool);function Hn(t,e,n,r,o,i){void 0===o&&(o=0),void 0===i&&(i=0);for(var a=[],s=[],u=0;u<t.length;u++)a[u]=Gn(o,e,r,t,u),s[u]=Kn(i,n,r,t,u);var l=new Array(t.length).fill(0);return l=l.map(function(t,e){for(var n=0,o=a[e];!(r[e]>0?o>=s[e]:o<=s[e]);o+=r[e])n+=1;return n}),[a,l]}function Gn(t,e,n,r,o){var i=e[o];t&1<<o&&(i=n[o]>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var a=r[o];return i<0&&(i+=a),c(0,i,a-1)}function Kn(t,e,n,r,o){var i=e[o];t&1<<o&&(i=n[o]>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var a=r[o];return i<0&&(i+=a),n[o]>0?c(0,i,a):c(-1,i,a-1)}var Qn=function(){function t(){}return t.slice1d=function(e,n,r){var o=Y(e,"x","slice1d");return f(1===o.rank,"slice1d expects a rank-1 tensor, but got a rank-"+o.rank+" tensor"),t.slice(o,[n],[r])},t.slice2d=function(e,n,r){var o=Y(e,"x","slice2d");return f(2===o.rank,"slice1d expects a rank-2 tensor, but got a rank-"+o.rank+" tensor"),t.slice(o,n,r)},t.slice3d=function(e,n,r){var o=Y(e,"x","slice3d");return f(3===o.rank,"slice1d expects a rank-3 tensor, but got a rank-"+o.rank+" tensor"),t.slice(o,n,r)},t.slice4d=function(e,n,r){var o=Y(e,"x","slice4d");return f(4===o.rank,"slice1d expects a rank-4 tensor, but got a rank-"+o.rank+" tensor"),t.slice(o,n,r)},t.slice=function(t,e,n){var r,o,i=Y(t,"x","slice");if(0===i.rank)throw new Error("Slicing scalar is not possible");r="number"==typeof e?[e].concat(new Array(i.rank-1).fill(0)):e.length<i.rank?e.concat(new Array(i.rank-e.length).fill(0)):e,o=(o=null==n?new Array(i.rank).fill(-1):"number"==typeof n?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map(function(t,e){return t>=0?t:(f(-1===t,"Bad value in size"),i.shape[e]-r[e])}),function(t,e,n){f(t.rank===e.length,"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."),f(t.rank===n.length,"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+").");for(var r=0;r<t.rank;++r)f(e[r]+n[r]<=t.shape[r],"Error in slice"+t.rank+"D: begin["+r+"] + size["+r+"] ("+(e[r]+n[r])+") would overflow input.shape["+r+"] ("+t.shape[r]+")")}(i,r,o);var a=i.shape;return dt.engine.runKernel(function(t){return t.slice(i,r,o)},{$x:i},function(t){for(var e=[],n=0;n<t.rank;n++)e.push([r[n],a[n]-r[n]-o[n]]);return{$x:function(){return t.pad(e)}}})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"slice",null),t}(),Xn=Ct(Qn.slice),Zn=Ct(Qn.slice1d),Jn=Ct(Qn.slice2d),Yn=Ct(Qn.slice3d),tr=Ct(Qn.slice4d),er=function(){function t(){}return t.gradScope=function(t,e){return dt.engine.tidy(t,e,!0)},t.grad=function(t){return f(R(t),"The f passed in grad(f) must be a function"),function(e,n){return f(e instanceof Q,"The x passed in grad(f)(x) must be a tensor"),f(null==n||n instanceof Q,"The dy passed in grad(f)(x, dy) must be a tensor"),dt.engine.tidy(function(){var r=dt.engine.gradients(function(){return t(e)},[e],n),o=r.grads;return null!=n&&h(r.value.shape,n.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),nr(o),o[0]})}},t.grads=function(t){return f(R(t),"The f passed in grads(f) must be a function"),function(e,n){return f(Array.isArray(e)&&e.every(function(t){return t instanceof Q}),"The args passed in grads(f)(args) must be an array of tensors"),f(null==n||n instanceof Q,"The dy passed in grads(f)(args, dy) must be a tensor"),dt.engine.tidy(function(){var r=dt.engine.gradients(function(){return t.apply(void 0,e)},e,n),o=r.grads;return null!=n&&h(r.value.shape,n.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),nr(o),o})}},t.valueAndGrad=function(t){return f(R(t),"The f passed in valueAndGrad(f) must be a function"),function(e,n){f(e instanceof Q,"The x passed in valueAndGrad(f)(x) must be a tensor"),f(null==n||n instanceof Q,"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");var r=dt.engine.gradients(function(){return t(e)},[e],n),o=r.grads,i=r.value;return nr(o),{grad:o[0],value:i}}},t.valueAndGrads=function(t){return f(R(t),"The f passed in valueAndGrads(f) must be a function"),function(e,n){f(Array.isArray(e)&&e.every(function(t){return t instanceof Q}),"The args passed in valueAndGrads(f)(args) must be array of tensors"),f(null==n||n instanceof Q,"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");var r=dt.engine.gradients(function(){return t.apply(void 0,e)},e,n);return null!=n&&h(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),nr(r.grads),r}},t.variableGrads=function(t,e){if(f(R(t),"The f passed in variableGrads(f) must be a function"),f(null==e||Array.isArray(e)&&e.every(function(t){return t instanceof X}),"The varList passed in variableGrads(f, varList) must be an array of variables"),null==e)for(var n in e=[],dt.engine.registeredVariables)e.push(dt.engine.registeredVariables[n]);var r=e.length;f((e=e.filter(function(t){return t.trainable})).length>0,"variableGrads() expects at least one of the input variables to be trainable, but none of the "+r+" variables is trainable.");var o=dt.engine.gradients(t,e,null,!0),i=o.value,a=o.grads;f(a.some(function(t){return null!=t}),"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),f(0===i.rank,"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+i.rank+" tensor");var s={};return e.forEach(function(t,e){null!=a[e]&&(s[t.name]=a[e])}),{value:i,grads:s}},t.customGrad=function(t){return dt.engine.customGrad(t)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"grad",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"grads",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"valueAndGrad",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"valueAndGrads",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"variableGrads",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"customGrad",null),t}();function nr(t){if(t.filter(function(t){return null==t}).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var rr,or,ir,ar,sr,ur=ht.tidy,lr=ht.keep,cr=ht.dispose,pr=er.variableGrads,fr=er.customGrad,hr=function(){function t(){}return t.logSumExp=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=Y(t,"x","logSumExp"),o=yt(e,r.shape),i=r.max(o,!0),a=r.sub(i).exp().sum(o).log(),s=i.reshape(a.shape).add(a);if(n){var u=vt(s.shape,o);return s.reshape(u)}return s},t.sum=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=Y(t,"x","sum");"bool"===r.dtype&&(r=r.toInt());var o=yt(e,r.shape);return fr(function(t){var e=wt(o,t.rank),r=o,i=t;null!=e&&(i=t.transpose(e),r=_t(r.length,t.rank));var a=dt.engine.runKernel(function(t){return t.sum(i,r)},{permutedX:i});if(n){var s=vt(a.shape,o);a=a.reshape(s)}return{value:a,gradFunc:function(e){var n=t.shape.slice();return o.forEach(function(t){n[t]=1}),e.reshape(n).mul($t(t.shape,"float32"))}}})(r)},t.mean=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=Y(t,"x","mean"),o=yt(e,r.shape),i=v(gt(r.shape,o)[1]);return fr(function(t){var r=Gt(i);return{value:(r.dtype===t.dtype?t:t.cast(r.dtype)).div(r).sum(e,n),gradFunc:function(e){var n=t.shape.slice();return o.forEach(function(t){n[t]=1}),e.reshape(n).mul($t(t.shape,"float32")).div(r)}}})(r)},t.min=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=Y(t,"x","min"),o=yt(e,r.shape),i=o,a=wt(i,r.rank);null!=a&&(r=r.transpose(a),i=_t(i.length,r.rank));var s=dt.engine.runKernel(function(t){return t.min(r,i)},{$x:r});if(n){var u=vt(s.shape,o);return s.reshape(u)}return s},t.max=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=Y(t,"x","max"),o=yt(e,r.shape),i=o,a=wt(i,r.rank);null!=a&&(r=r.transpose(a),i=_t(i.length,r.rank));var s=dt.engine.runKernel(function(t){return t.max(r,i)},{$x:r});if(n){var u=vt(s.shape,o);return s.reshape(u)}return s},t.argMin=function(t,e){void 0===e&&(e=0);var n=Y(t,"x","argMin");null==e&&(e=0);var r=yt(e,n.shape),o=wt(r,n.rank);return null!=o&&(n=n.transpose(o),r=_t(r.length,n.rank)),dt.engine.runKernel(function(t){return t.argMin(n,r[0])},{$x:n})},t.argMax=function(t,e){void 0===e&&(e=0);var n=Y(t,"x","argMax");null==e&&(e=0);var r=yt(e,n.shape),o=wt(r,n.rank);return null!=o&&(n=n.transpose(o),r=_t(r.length,n.rank)),dt.engine.runKernel(function(t){return t.argMax(n,r[0])},{$x:n})},t.all=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=Y(t,"x","all","bool");f("bool"===r.dtype,"Error Tensor must be of type bool. Got: "+r.dtype);var o=yt(e,r.shape),i=o,a=wt(i,r.rank);null!=a&&(r=r.transpose(a),i=_t(i.length,r.rank));var s=dt.engine.runKernel(function(t){return t.all(r,i)},{$x:r});if(n){var u=vt(s.shape,o);return s.reshape(u)}return s},t.any=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=Y(t,"x","any","bool");f("bool"===r.dtype,"Error Tensor must be of type bool. Got: "+r.dtype);var o=yt(e,r.shape),i=o,a=wt(i,r.rank);null!=a&&(r=r.transpose(a),i=_t(i.length,r.rank));var s=dt.engine.runKernel(function(t){return t.any(r,i)},{$x:r});if(n){var u=vt(s.shape,o);return s.reshape(u)}return s},t.moments=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yt(e,(t=Y(t,"x","moments")).shape),o=t.mean(r,n),i=o.shape;return n||(i=vt(o.shape,r)),{mean:o,variance:t.toFloat().sub(o.reshape(i)).square().mean(r,n)}},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"logSumExp",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sum",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"mean",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"min",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"max",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"argMin",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"argMax",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"all",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"any",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"moments",null),t}(),dr=Ct(hr.all),mr=Ct(hr.any),gr=Ct(hr.argMax),vr=Ct(hr.argMin),yr=Ct(hr.logSumExp),br=Ct(hr.max),wr=Ct(hr.mean),xr=Ct(hr.min),_r=Ct(hr.moments),Or=Ct(hr.sum),Cr=function(){function t(){}return t.notEqual=function(t,e){var n=Y(t,"a","notEqual"),r=Y(e,"b","notEqual");return J(n,r),Re(n.shape,r.shape),dt.engine.runKernel(function(t){return t.notEqual(n,r)},{$a:n,$b:r})},t.notEqualStrict=function(t,e){var n=Y(t,"a","notEqualStrict"),r=Y(e,"b","notEqualStrict");return h(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)},t.less=function(t,e){var n=Y(t,"a","less"),r=Y(e,"b","less");return J(n,r),Re(n.shape,r.shape),dt.engine.runKernel(function(t){return t.less(n,r)},{$a:n,$b:r})},t.lessStrict=function(t,e){var n=Y(t,"a","lessStrict"),r=Y(e,"b","lessStrict");return h(n.shape,r.shape,"Error in lessStrict: "),n.less(r)},t.equal=function(t,e){var n=Y(t,"a","equal"),r=Y(e,"b","equal");return J(n,r),Re(n.shape,r.shape),dt.engine.runKernel(function(t){return t.equal(n,r)},{$a:n,$b:r})},t.equalStrict=function(t,e){var n=Y(t,"a","equalStrict"),r=Y(e,"b","equalStrict");return h(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)},t.lessEqual=function(t,e){var n=Y(t,"a","lessEqual"),r=Y(e,"b","lessEqual");return J(n,r),Re(n.shape,r.shape),dt.engine.runKernel(function(t){return t.lessEqual(n,r)},{$a:n,$b:r})},t.lessEqualStrict=function(t,e){var n=Y(t,"a","lessEqualStrict"),r=Y(e,"b","lessEqualStrict");return h(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)},t.greater=function(t,e){var n=Y(t,"a","greater"),r=Y(e,"b","greater");return J(n,r),Re(n.shape,r.shape),dt.engine.runKernel(function(t){return t.greater(n,r)},{$a:n,$b:r})},t.greaterStrict=function(t,e){var n=Y(t,"a","greaterStrict"),r=Y(e,"b","greaterStrict");return h(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)},t.greaterEqual=function(t,e){var n=Y(t,"a","greaterEqual"),r=Y(e,"b","greaterEqual");return J(n,r),Re(n.shape,r.shape),dt.engine.runKernel(function(t){return t.greaterEqual(n,r)},{$a:n,$b:r})},t.greaterEqualStrict=function(t,e){var n=Y(t,"a","greaterEqualStrict"),r=Y(e,"b","greaterEqualStrict");return h(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"notEqual",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"less",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"equal",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"lessEqual",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"greater",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"greaterEqual",null),t}(),Er=Ct(Cr.equal),Nr=Ct(Cr.equalStrict),Sr=Ct(Cr.greater),Ir=Ct(Cr.greaterEqual),Pr=Ct(Cr.greaterEqualStrict),kr=Ct(Cr.greaterStrict),Tr=Ct(Cr.less),Ar=Ct(Cr.lessEqual),Rr=Ct(Cr.lessEqualStrict),Mr=Ct(Cr.lessStrict),Dr=Ct(Cr.notEqual),jr=Ct(Cr.notEqualStrict);!function(t){t.float32="float32",t.int32="int32",t.bool="bool"}(rr||(rr={})),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(or||(or={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32"}(ir||(ir={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool"}(ar||(ar={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32"}(sr||(sr={}));var Lr={float32:sr,int32:ir,bool:ar};function zr(t,e){return Lr[t][e]}function Vr(t){return zr(t,"int32")}var Br=function(){function t(){}return t.add=function(t,e){var n=Y(t,"a","add"),r=Y(e,"b","add");J(n,r);var o=Re(n.shape,r.shape);return dt.engine.runKernel(function(t){return t.add(n,r)},{$a:n,$b:r},function(t){return{$a:function(){var e=t,r=Ae(n.shape,o);return r.length>0&&(e=e.sum(r)),e.reshape(n.shape)},$b:function(){var e=t,n=Ae(r.shape,o);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)}}})},t.addStrict=function(t,e){return h(t.shape,e.shape,"Error in addStrict: "),t.add(e)},t.sub=function(t,e){var n=Y(t,"a","sub"),r=Y(e,"b","sub");J(n,r);var o=Re(n.shape,r.shape);return dt.engine.runKernel(function(t){return t.subtract(n,r)},{$a:n,$b:r},function(t){return{$a:function(){var e=t,r=Ae(n.shape,o);return r.length>0&&(e=e.sum(r)),e.reshape(n.shape)},$b:function(){var e=t,n=Ae(r.shape,o);return n.length>0&&(e=e.sum(n)),e.neg().reshape(r.shape)}}})},t.subStrict=function(t,e){return h(t.shape,e.shape,"Error in subStrict: "),t.sub(e)},t.pow=function(t,e){var n=Y(t,"base","pow"),r=Y(e,"exp","pow"),o=Re(n.shape,r.shape);return t=n.cast(zr(n.dtype,r.dtype)),e=r.cast(zr(n.dtype,r.dtype)),dt.engine.runKernel(function(t,e){return e(t.pow(n,r))},{$base:n,$exp:r},function(t,e){var i=e[0];return{$base:function(){var e=t.mul(r.toFloat().mul(i.div(n))),a=Ae(n.shape,o);return a.length>0&&(e=e.sum(a)),e.reshape(n.shape)},$exp:function(){var e=t.mul(i.mul(n.log()).toFloat()),a=Ae(r.shape,o);return a.length>0&&(e=e.sum(a)),e.reshape(r.shape)}}})},t.powStrict=function(t,e){return h(t.shape,e.shape,"Error in powStrict: "),t.pow(e)},t.mul=function(t,e){var n=Y(t,"a","mul"),r=Y(e,"b","mul");J(n,r);var o=Re(n.shape,r.shape);return dt.engine.runKernel(function(t){return t.multiply(n,r)},{$a:n,$b:r},function(t){return{$a:function(){var e=t.mul(r.toFloat()),i=Ae(n.shape,o);return i.length>0?e.sum(i).reshape(n.shape):e},$b:function(){var e=t.mul(n.toFloat()),i=Ae(r.shape,o);return i.length>0?e.sum(i).reshape(r.shape):e}}})},t.mulStrict=function(t,e){return h(t.shape,e.shape,"Error in multiplyStrict: "),t.mul(e)},t.div=function(e,n){var r,o=Y(e,"a","div"),i=Y(n,"b","div");if(J(o,i),"int32"===o.dtype&&"int32"===i.dtype)return t.floorDiv(o,i);r=function(t){return t.realDivide(o,i)};var a=Re(o.shape,i.shape);return dt.engine.runKernel(r,{$a:o,$b:i},function(t){return{$a:function(){var e=t.div(i.toFloat()),n=Ae(o.shape,a);return n.length>0?e.sum(n).reshape(o.shape):e},$b:function(){var e=t.mul(o.toFloat()),n=Ae(i.shape,a);n.length>0&&(e=e.sum(n).reshape(i.shape));var r=i.square();return e.div(r.toFloat()).neg()}}})},t.floorDiv=function(t,e){var n=Y(t,"a","floorDiv"),r=Y(e,"b","floorDiv");J(n,r);var o=Re(n.shape,r.shape);return dt.engine.runKernel(function(t){return t.floorDiv(n,r)},{$a:n,$b:r},function(t){return{$a:function(){var e=t.div(r.toFloat()),i=Ae(n.shape,o);return i.length>0?e.sum(i).reshape(n.shape):e},$b:function(){var e=t.mul(n.toFloat()),i=Ae(r.shape,o);i.length>0&&(e=e.sum(i).reshape(r.shape));var a=r.square();return e.div(a.toFloat()).neg()}}})},t.divStrict=function(t,e){return h(t.shape,e.shape,"Error in divideStrict: "),t.div(e)},t.mod=function(t,e){var n=Y(t,"a","mod"),r=Y(e,"b","mod");J(n,r);var o=Re(n.shape,r.shape);return dt.engine.runKernel(function(t){return t.mod(n,r)},{$a:n,$b:r},function(t){return{$a:function(){var e=Ae(n.shape,o);return e.length>0?t.sum(e).reshape(n.shape):t},$b:function(){var e=t.mul(n.div(r).floor().neg()),i=Ae(r.shape,o);return i.length>0?e.sum(i).reshape(r.shape):e}}})},t.modStrict=function(t,e){return h(t.shape,e.shape,"Error in modStrict: "),t.mod(e)},t.minimum=function(t,e){var n=Y(t,"a","minimum"),r=Y(e,"b","minimum");return J(n,r),"bool"===n.dtype&&(n=n.toInt()),"bool"===r.dtype&&(r=r.toInt()),Re(n.shape,r.shape),dt.engine.runKernel(function(t){return t.minimum(n,r)},{$a:n,$b:r},function(t){return{$a:function(){return t.mul(n.lessEqual(r).toFloat())},$b:function(){return t.mul(n.greater(r).toFloat())}}})},t.minimumStrict=function(t,e){return h(t.shape,e.shape,"Error in minimumStrict: "),t.minimum(e)},t.maximum=function(t,e){var n=Y(t,"a","maximum"),r=Y(e,"b","maximum");return J(n,r),"bool"===n.dtype&&(n=n.toInt()),"bool"===r.dtype&&(r=r.toInt()),Re(n.shape,r.shape),dt.engine.runKernel(function(t){return t.maximum(n,r)},{$a:n,$b:r},function(t){return{$a:function(){return t.mul(n.greaterEqual(r).toFloat())},$b:function(){return t.mul(n.less(r).toFloat())}}})},t.maximumStrict=function(t,e){return h(t.shape,e.shape,"Error in minimumStrict: "),t.maximum(e)},t.squaredDifference=function(t,e){var n=Y(t,"a","squaredDifference"),r=Y(e,"b","squaredDifference");return J(n,r),Re(n.shape,r.shape),dt.engine.runKernel(function(t){return t.squaredDifference(n,r)},{$a:n,$b:r},function(t){var e=Gt(2);return{$a:function(){return t.mul(n.sub(r).mul(e))},$b:function(){return t.mul(r.sub(n).mul(e))}}})},t.squaredDifferenceStrict=function(t,e){return h(t.shape,e.shape,"Error in squaredDifferenceStrict: "),t.squaredDifference(e)},t.atan2=function(e,n){var r=Y(e,"a","atan2"),o=Y(n,"b","atan2");J(r,o);var i=Re(r.shape,o.shape);return dt.engine.runKernel(function(t){return t.atan2(r,o)},{$a:r,$b:o},function(e){return{$a:function(){var n=t.add(r.square(),o.square()),a=e.mul(o.div(n)),s=Ae(r.shape,i);return s.length>0&&(a=a.sum(s)),a.reshape(r.shape)},$b:function(){var n=t.add(r.square(),o.square()),a=Ye(e.mul(r.div(n))),s=Ae(o.shape,i);return s.length>0&&(a=a.sum(s)),a.reshape(o.shape)}}})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"add",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sub",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"pow",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"mul",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"div",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"floorDiv",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"mod",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"minimum",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"maximum",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"squaredDifference",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"atan2",null),t}(),Fr=Ct(Br.add),Ur=Ct(Br.addStrict),Wr=Ct(Br.atan2),qr=Ct(Br.div),$r=Ct(Br.divStrict),Hr=Ct(Br.floorDiv),Gr=Ct(Br.maximum),Kr=Ct(Br.maximumStrict),Qr=Ct(Br.minimum),Xr=Ct(Br.minimumStrict),Zr=Ct(Br.mod),Jr=Ct(Br.modStrict),Yr=Ct(Br.mul),to=Ct(Br.mulStrict),eo=Ct(Br.pow),no=Ct(Br.powStrict),ro=Ct(Br.squaredDifference),oo=Ct(Br.squaredDifferenceStrict),io=Ct(Br.sub),ao=Ct(Br.subStrict),so=Ct(function(){function t(){}return t.sigmoidCrossEntropyWithLogits=function(t,e){var n=Y(t,"labels","sigmoidCrossEntropyWithLogits"),r=Y(e,"logits","sigmoidCrossEntropyWithLogits");h(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var o=r.relu(),i=r.mul(n),a=r.abs().neg().exp().log1p();return o.sub(i).add(a)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sigmoidCrossEntropyWithLogits",null),t}().sigmoidCrossEntropyWithLogits),uo=function(){function t(){}return t.logicalNot=function(t){var e=Y(t,"x","logicalNot","bool");return f("bool"===e.dtype,"Error Array must be of type bool."),dt.engine.runKernel(function(t){return t.logicalNot(e)},{$x:e})},t.logicalAnd=function(t,e){var n=Y(t,"a","logicalAnd","bool"),r=Y(e,"b","logicalAnd","bool");return f("bool"===n.dtype&&"bool"===r.dtype,"Error Array must be of type bool."),Re(n.shape,r.shape),dt.engine.runKernel(function(t){return t.logicalAnd(n,r)},{$a:n,$b:r})},t.logicalOr=function(t,e){var n=Y(t,"a","logicalOr","bool"),r=Y(e,"b","logicalOr","bool");return f("bool"===n.dtype&&"bool"===r.dtype,"Error Array must be of type bool."),Re(n.shape,r.shape),dt.engine.runKernel(function(t){return t.logicalOr(n,r)},{$a:n,$b:r})},t.logicalXor=function(e,n){var r=Y(e,"a","logicalXor","bool"),o=Y(n,"b","logicalXor","bool");return f("bool"===r.dtype&&"bool"===o.dtype,"Error Array must be of type bool."),Re(r.shape,o.shape),t.logicalOr(e,n).logicalAnd(t.logicalAnd(e,n).logicalNot())},t.where=function(t,e,n){var r=Y(e,"a","where"),o=Y(n,"b","where"),i=Y(t,"condition","where","bool");f("bool"===i.dtype,"Error Condition must be of type bool."),h(r.shape,o.shape,"Error in where: "),1===i.rank?f(i.shape[0]===r.shape[0],"The first dimension of `a` must match the size of `condition`."):h(i.shape,o.shape,"Error in where: ");var a=zr(r.dtype,o.dtype);return dt.engine.runKernel(function(t){return t.where(i,r,o,a)},{$condition:i,$a:r,$b:o},function(t){return{$condition:function(){return re(i)},$a:function(){return t.mul(i.cast(r.dtype))},$b:function(){return t.mul(i.logicalNot().cast(o.dtype))}}})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"logicalNot",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"logicalAnd",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"logicalOr",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"logicalXor",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"where",null),t}(),lo=Ct(uo.logicalAnd),co=Ct(uo.logicalNot),po=Ct(uo.logicalOr),fo=Ct(uo.logicalXor),ho=Ct(uo.where),mo=function(){function t(){}return t.relu=function(t){var e=Y(t,"x","relu");return"bool"===e.dtype?e.toInt():dt.engine.runKernel(function(t){return t.relu(e)},{$x:e},function(t){var n=e.step();return{$x:function(){return t.mulStrict(n.toFloat())}}})},t.elu=function(t){var e=Y(t,"x","elu");return dt.engine.runKernel(function(t,n){return n(t.elu(e))},{$x:e},function(t,e){var n=e[0];return{$x:function(){return dt.engine.runKernel(function(e){return e.eluDer(t,n)},{dy:t,y:n})}}})},t.selu=function(t){var e=Y(t,"x","selu");return dt.engine.runKernel(function(t){return t.selu(e)},{$x:e},function(t){return{$x:function(){var n=e.greater(Gt(0)),r=Gt(1.7580993408473768),o=Gt(1.0507009873554805),i=t.mul(o),a=t.mul(r).mul(e.toFloat().exp());return ho(n,i,a)}}})},t.leakyRelu=function(t,e){void 0===e&&(e=.2);var n=Y(t,"x","leakyRelu");return Gr(Gt(e).mul(n),n)},t.prelu=function(t,e){var n=Y(t,"x","prelu"),r=Y(e,"alpha","prelu"),o=Gt(0);return Gr(o,n).add(r.mul(Qr(o,n)))},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"relu",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"elu",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"selu",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"leakyRelu",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"prelu",null),t}(),go=Ct(mo.elu),vo=Ct(mo.leakyRelu),yo=Ct(mo.prelu),bo=Ct(mo.relu),wo=Ct(mo.selu),xo=Ct(function(){function t(){}return t.transpose=function(t,e){var n=Y(t,"x","transpose");return null==e&&(e=n.shape.map(function(t,e){return e}).reverse()),f(n.rank===e.length,"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."),e.forEach(function(t){f(t>=0&&t<n.rank,"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e)}),n.rank<=1?n.clone():dt.engine.runKernel(function(t){return t.transpose(n,e)},{$x:n},function(t){var n=xt(e);return{$x:function(){return t.transpose(n)}}})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"transpose",null),t}().transpose),_o=Ct(function(){function t(){}return t.softmax=function(t,e){void 0===e&&(e=-1);var n=Y(t,"logits","softmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return er.customGrad(function(t){var n=t.logSumExp([e],!0),r=t.toFloat().sub(n).exp();return{value:r,gradFunc:function(t){var n=t.mul(r);return n.sub(n.sum([e],!0).mul(r))}}})(n)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"softmax",null),t}().softmax),Oo=Ct(function(){function t(){}return t.localResponseNormalization=function(t,e,n,r,o){void 0===e&&(e=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=.5);var i=Y(t,"x","localResponseNormalization");f(4===i.rank||3===i.rank,"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+i.rank+"."),f(b(e),"Error in localResponseNormalization: depthRadius must be an integer\n                     but got depthRadius "+e+".");var a=i,s=!1;3===i.rank&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var u=dt.engine.runKernel(function(t){return t.localResponseNormalization4D(a,e,n,r,o)},{x4D:a});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"localResponseNormalization",null),t}().localResponseNormalization),Co=Ct(function(){function t(){}return t.norm=function(t,e,n,r){void 0===e&&(e="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var o=function t(e,n,r){if(void 0===r&&(r=null),0===e.rank)return e.abs();if(1!==e.rank&&null===r)return t(e.reshape([-1]),n,r);if(1===e.rank||"number"==typeof r||r instanceof Array&&1===r.length){if(1===n)return e.abs().sum(r);if(n===1/0)return e.abs().max(r);if(n===-1/0)return e.abs().min(r);if("euclidean"===n||2===n)return e.abs().pow(Gt(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(r instanceof Array&&2===r.length){if(1===n)return e.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return e.abs().sum(r[1]).max(r[0]);if(n===-1/0)return e.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return e.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(t=Y(t,"x","norm"),e,n),i=o.shape;if(r){var a=yt(n,t.shape);i=vt(o.shape,a)}return o.reshape(i)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"norm",null),t}().norm),Eo=function(){function t(){}return t.unsortedSegmentSum=function(t,e,n){var r=Y(t,"x","unsortedSegmentSum"),o=Y(e,"segmentIds","unsortedSegmentSum","int32");return f("int32"===o.dtype,"segmentIds must be of dtype `int32`"),f(b(n),"numSegments must be of dtype int"),dt.engine.runKernel(function(t){return t.unsortedSegmentSum(r,o,n)},{$x:r},function(t){return{$x:function(){return function(t,e){for(var n=Gr(e,re(e)),r=Eo.gather(t,n),o=Ir(e,Gt(0,"int32")),i=r.rank-o.rank,a=0;a<i;++a)o=ce(o,a+1);o=lo(o,$t(r.shape,"bool"));var s=re(r);return ho(o,r,s)}(t,o)}}})},t.gather=function(e,n,r){void 0===r&&(r=0);var o=Y(e,"x","gather"),i=Y(n,"indices","gather","int32");return f("int32"===i.dtype,"Indices must be of dtype `int32`"),r=yt(r,o.shape)[0],dt.engine.runKernel(function(t){return t.gather(o,i,r)},{$x:o},function(e){return{$x:function(){if(0===r)return t.unsortedSegmentSum(e,i,o.shape[r]);var n=o.shape,a=i.size,s=n.slice(0,r),u=s.length,l=n.slice(r,n.length).slice(1),c=l.length,p=No(0,u),f=No(u+1,u+1+c),h=So([s,[a],l]),d=e.reshape(h),m=i.reshape([a]),g=So([[u],p,f]),v=d.transpose(g),y=t.unsortedSegmentSum(v,m,o.shape[r]),b=xt(g);return y.transpose(b)}}})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"unsortedSegmentSum",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"gather",null),t}();function No(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function So(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}var Io,Po=Ct(Eo.gather),ko=Ct(Eo.unsortedSegmentSum),To=function(){function t(){}return t.multiRNNCell=function(t,e,n,r){for(var o=Y(e,"data","multiRNNCell"),i=tt(n,"c","multiRNNCell"),a=tt(r,"h","multiRNNCell"),s=o,u=[],l=0;l<t.length;l++){var c=t[l](s,i[l],a[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var p=[],f=[];for(l=0;l<u.length;l+=2)p.push(u[l]),f.push(u[l+1]);return[p,f]},t.basicLSTMCell=function(t,e,n,r,o,i){var a=Y(t,"forgetBias","basicLSTMCell"),s=Y(e,"lstmKernel","basicLSTMCell"),u=Y(n,"lstmBias","basicLSTMCell"),l=Y(r,"data","basicLSTMCell"),c=Y(o,"c","basicLSTMCell"),p=Y(i,"h","basicLSTMCell"),f=l.concat(p,1).matMul(s).add(u),h=f.shape[1]/4,d=[f.shape[0],h],m=f.slice([0,0],d),g=f.slice([0,h],d),v=f.slice([0,2*h],d),y=f.slice([0,3*h],d),b=m.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(a.add(v).sigmoid()));return[b,b.tanh().mulStrict(y.sigmoid())]},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"multiRNNCell",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"basicLSTMCell",null),t}(),Ao=Ct(To.basicLSTMCell),Ro=Ct(To.multiRNNCell),Mo=Ct(function(){function t(){}return t.movingAverage=function(t,e,n,r,o){void 0===o&&(o=!0);var i=Y(t,"v","movingAverage"),a=Y(e,"x","movingAverage"),s=Y(n,"decay","movingAverage");J(i,a),f(y(i.shape,a.shape),"Shape mismatch in v and x");var u=Gt(1),l=u.sub(s),c=a.sub(i).mul(l);if(o){f(null!=r,"When using zeroDebias: true, step is required.");var p=Y(r,"step","movingAverage");c=c.div(u.sub(eo(s,p)))}return i.add(c)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"movingAverage",null),t}().movingAverage),Do=Ct(function(){function t(){}return t.stridedSlice=function(t,e,n,r,o,i){void 0===o&&(o=0),void 0===i&&(i=0);var a=Y(t,"x","stridedSlice");return dt.engine.runKernel(function(t){return t.stridedSlice(a,e,n,r,o,i)},{$x:a})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"stridedSlice",null),t}().stridedSlice);!function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Io||(Io={}));var jo=function(){function t(){}return t.computeWeightedLoss=function(t,e,n){void 0===n&&(n=Io.SUM_BY_NONZERO_WEIGHTS);var r=Y(t,"losses","computeWeightedLoss"),o=null;null!=e&&(o=Y(e,"weights","computeWeightedLoss"));var i=null==o?r:r.mul(o);if(n===Io.NONE)return i;if(n===Io.SUM)return i.sum();if(n===Io.MEAN)return null==o?i.mean():i.sum().div(o.sum());if(n===Io.SUM_BY_NONZERO_WEIGHTS){if(null==o)return i.sum().div(Gt(r.size));var a=o.mul($t(r.shape)).notEqual(Gt(0)).sum().toFloat();return i.sum().div(a)}throw Error("Unknown reduction: "+n)},t.absoluteDifference=function(e,n,r,o){void 0===o&&(o=Io.SUM_BY_NONZERO_WEIGHTS);var i=Y(e,"labels","absoluteDifference"),a=Y(n,"predictions","absoluteDifference"),s=null;null!=r&&(s=Y(r,"weights","absoluteDifference")),h(i.shape,a.shape,"Error in absoluteDifference: ");var u=i.sub(a).abs();return t.computeWeightedLoss(u,s,o)},t.meanSquaredError=function(e,n,r,o){void 0===o&&(o=Io.SUM_BY_NONZERO_WEIGHTS);var i=Y(e,"labels","meanSquaredError"),a=Y(n,"predictions","meanSquaredError"),s=null;null!=r&&(s=Y(r,"weights","meanSquaredError")),h(i.shape,a.shape,"Error in meanSquaredError: ");var u=i.squaredDifference(a);return t.computeWeightedLoss(u,s,o)},t.cosineDistance=function(e,n,r,o,i){void 0===i&&(i=Io.SUM_BY_NONZERO_WEIGHTS);var a=Y(e,"labels","cosineDistance"),s=Y(n,"predictions","cosineDistance"),u=null;null!=o&&(u=Y(o,"weights","cosineDistance")),h(a.shape,s.shape,"Error in cosineDistance: ");var l=Gt(1).sub(a.mul(s).sum(r,!0));return t.computeWeightedLoss(l,u,i)},t.hingeLoss=function(e,n,r,o){void 0===o&&(o=Io.SUM_BY_NONZERO_WEIGHTS);var i=Y(e,"labels","hingeLoss"),a=Y(n,"predictions","hingeLoss"),s=null;null!=r&&(s=Y(r,"weights","hingeLoss")),h(i.shape,a.shape,"Error in hingeLoss: ");var u=Gt(1);i=Gt(2).mul(i).sub(u);var l=u.sub(i.mul(a)).relu();return t.computeWeightedLoss(l,s,o)},t.logLoss=function(e,n,r,o,i){void 0===o&&(o=1e-7),void 0===i&&(i=Io.SUM_BY_NONZERO_WEIGHTS);var a=Y(e,"labels","logLoss"),s=Y(n,"predictions","logLoss"),u=null;null!=r&&(u=Y(r,"weights","logLoss")),h(a.shape,s.shape,"Error in logLoss: ");var l=Gt(1),c=Gt(o),p=a.mul(s.add(c).log()).neg().sub(l.sub(a).mul(l.sub(s).add(c).log()));return t.computeWeightedLoss(p,u,i)},t.huberLoss=function(e,n,r,o,i){void 0===o&&(o=1),void 0===i&&(i=Io.SUM_BY_NONZERO_WEIGHTS);var a=Y(e,"labels","huberLoss"),s=Y(n,"predictions","huberLoss"),u=null;null!=r&&(u=Y(r,"weights","huberLoss")),h(a.shape,s.shape,"Error in huberLoss: ");var l=Gt(o),c=s.sub(a).abs(),p=Qr(c,l),f=c.sub(p),d=Gt(.5).mul(p.square()).add(l.mul(f));return t.computeWeightedLoss(d,u,i)},t.softmaxCrossEntropy=function(t,e,n){void 0===n&&(n=-1);var r=Y(t,"labels","softmaxCrossEntropy"),o=Y(e,"logits","softmaxCrossEntropy");if(h(r.shape,o.shape,"Error in softmaxCrossEntropy: "),-1===n&&(n=o.rank-1),n!==o.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+o.rank+" and dim was "+n);return fr(function(t,e){var r=e.softmax(n);return{value:Gt(1e-5).add(r).log().mul(t).neg().sum([n]),gradFunc:function(e){var o=vt(e.shape,[n]);return[e.reshape(o).mul(t.toFloat().sub(r)),e.reshape(o).mul(r.sub(t.toFloat()))]}}})(r,o)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"computeWeightedLoss",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"absoluteDifference",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"meanSquaredError",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"cosineDistance",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"hingeLoss",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"logLoss",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"huberLoss",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"softmaxCrossEntropy",null),t}(),Lo=Ct(jo.absoluteDifference),zo=Ct(jo.computeWeightedLoss),Vo=Ct(jo.cosineDistance),Bo=Ct(jo.hingeLoss),Fo=Ct(jo.huberLoss),Uo=Ct(jo.logLoss),Wo=Ct(jo.meanSquaredError),qo=Ct(jo.softmaxCrossEntropy),$o=Object.freeze({get Reduction(){return Io},absoluteDifference:Lo,computeWeightedLoss:zo,cosineDistance:Vo,hingeLoss:Bo,huberLoss:Fo,logLoss:Uo,meanSquaredError:Wo,softmaxCrossEntropy:qo}),Ho=function(){function t(){}return t.gramSchmidt=function(t){var e;if(Array.isArray(t)){e=!1,f(null!=t&&t.length>0,"Gram-Schmidt process: input must not be null, undefined, or empty");for(var n=t[0].shape[0],r=1;r<t.length;++r)f(t[r].shape[0]===n,"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[r].shape[0]+" vs. "+n+")")}else e=!0,t=Ee(t,t.shape[0],0).map(function(t){return Ne(t,[0])});f(t.length<=t[0].shape[0],"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+").");var o=[],i=t,a=function(t){o.push(dt.engine.tidy(function(){var e=i[t];if(t>0)for(var n=0;n<t;++n){var r=Or(o[n].mulStrict(e)).mul(o[n]);e=e.sub(r)}return e.div(Co(e,"euclidean"))}))};for(r=0;r<t.length;++r)a(r);return e?Se(o,0):o},t.qr=function(t,e){if(void 0===e&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(2===t.rank)return Go(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(t,e){return t*e}),r=[],o=[];return ke(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0).forEach(function(t){var n=Go(t,e),i=n[1];r.push(n[0]),o.push(i)}),[Se(r,0).reshape(t.shape),Se(o,0).reshape(t.shape)]},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"gramSchmidt",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"qr",null),t}();function Go(t,e){return void 0===e&&(e=!1),dt.engine.tidy(function(){if(2!==t.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],o=pe(n),i=t.clone(),a=Xt([[1]],[1,1]),s=a.clone(),u=n>=r?r:n,l=function(t){var e,u=i,l=s,c=o;e=dt.engine.tidy(function(){var e=i.slice([t,t],[n-t,1]),u=e.norm(),l=i.slice([t,t],[1,1]),c=l.sign().neg(),p=l.sub(c.mul(u)),f=e.div(p);s=1===f.shape[0]?a.clone():a.concat(f.slice([1,0],[f.shape[0]-1,f.shape[1]]),0);var h=c.matMul(p).div(u).neg(),d=i.slice([t,0],[n-t,r]),m=h.mul(s);i=0===t?d.sub(m.matMul(s.transpose().matMul(d))):i.slice([0,0],[t,r]).concat(d.sub(m.matMul(s.transpose().matMul(d))),0);var g=o.slice([0,t],[n,o.shape[1]-t]);return o=0===t?g.sub(g.matMul(s).matMul(m.transpose())):o.slice([0,0],[n,t]).concat(g.sub(g.matMul(s).matMul(m.transpose())),1),[s,i,o]}),s=e[0],i=e[1],o=e[2],cr([u,l,c])},c=0;c<u;++c)l(c);return!e&&n>r&&(o=o.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[o,i]})}var Ko=Ct(Ho.gramSchmidt),Qo=Ct(Ho.qr),Xo=Object.freeze({gramSchmidt:Ko,qr:Qo}),Zo=function(){function t(){}return t.resizeBilinear=function(t,e,n){void 0===n&&(n=!1);var r=Y(t,"images","resizeBilinear");f(3===r.rank||4===r.rank,"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."),f(2===e.length,"Error in resizeBilinear: new shape must 2D, but got shape "+e+".");var o=r,i=!1;3===r.rank&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=e[0],s=e[1],u=dt.engine.runKernel(function(t,e){return t.resizeBilinear(o,a,s,n)},{batchImages:o},function(t,e){return{batchImages:function(){return dt.engine.runKernel(function(e){return e.resizeBilinearBackprop(t,o,n)},{})}}});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u},t.resizeNearestNeighbor=function(t,e,n){void 0===n&&(n=!1);var r=Y(t,"images","resizeNearestNeighbor");f(3===r.rank||4===r.rank,"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."),f(2===e.length,"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."),f("float32"===r.dtype||"int32"===r.dtype,"`images` must have `int32` or `float32` as dtype");var o=r,i=!1;3===r.rank&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=e[0],s=e[1],u=dt.engine.runKernel(function(t,e){return t.resizeNearestNeighbor(o,a,s,n)},{batchImages:o},function(t,e){return{batchImages:function(){return dt.engine.runKernel(function(e){return e.resizeNearestNeighborBackprop(t,o,n)},{})}}});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"resizeBilinear",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"resizeNearestNeighbor",null),t}(),Jo=Ct(Zo.resizeBilinear),Yo=Ct(Zo.resizeNearestNeighbor),ti=Object.freeze({resizeBilinear:Jo,resizeNearestNeighbor:Yo}),ei=Object.freeze({image:ti,linalg:Xo,losses:$o,op:Ct,batchNormalization2d:gn,batchNormalization3d:vn,batchNormalization4d:yn,batchNormalization:bn,concat:St,concat1d:It,concat2d:Pt,concat3d:kt,concat4d:Tt,conv1d:In,conv2d:Pn,depthwiseConv2d:kn,separableConv2d:Tn,conv2dTranspose:An,matMul:Mn,dot:Dn,outerProduct:jn,reverse:zn,reverse1d:Vn,reverse2d:Bn,reverse3d:Fn,reverse4d:Un,maxPool:qn,avgPool:$n,slice:Xn,slice1d:Zn,slice2d:Jn,slice3d:Yn,slice4d:tr,abs:De,acos:je,acosh:Le,asin:ze,asinh:Ve,atan:Be,atanh:Fe,ceil:Ue,clipByValue:We,cos:qe,cosh:$e,erf:He,exp:Ge,expm1:Ke,floor:Qe,log:Xe,log1p:Ze,logSigmoid:Je,neg:Ye,reciprocal:tn,round:en,rsqrt:nn,sigmoid:rn,sign:on,sin:an,sinh:sn,softplus:un,sqrt:ln,square:cn,step:pn,tan:fn,tanh:hn,all:dr,any:mr,argMax:gr,argMin:vr,logSumExp:yr,max:br,mean:wr,min:xr,moments:_r,sum:Or,equal:Er,equalStrict:Nr,greater:Sr,greaterEqual:Ir,greaterEqualStrict:Pr,greaterStrict:kr,less:Tr,lessEqual:Ar,lessEqualStrict:Rr,lessStrict:Mr,notEqual:Dr,notEqualStrict:jr,add:Fr,addStrict:Ur,atan2:Wr,div:qr,divStrict:$r,floorDiv:Hr,maximum:Gr,maximumStrict:Kr,minimum:Qr,minimumStrict:Xr,mod:Zr,modStrict:Jr,mul:Yr,mulStrict:to,pow:eo,powStrict:no,squaredDifference:ro,squaredDifferenceStrict:oo,sub:io,subStrict:ao,sigmoidCrossEntropyWithLogits:so,elu:go,leakyRelu:vo,prelu:yo,relu:bo,selu:wo,logicalAnd:lo,logicalNot:co,logicalOr:po,logicalXor:fo,where:ho,buffer:ie,toPixels:ae,cast:se,clone:ue,cumsum:le,expandDims:ce,eye:pe,fromPixels:fe,multinomial:he,oneHot:de,pad:me,pad1d:ge,pad2d:ve,pad3d:ye,pad4d:be,print:we,rand:xe,randomNormal:_e,randomUniform:Oe,reshape:Ce,split:Ee,squeeze:Ne,stack:Se,tile:Ie,truncatedNormal:Pe,unstack:ke,fill:Wt,linspace:qt,ones:$t,range:Ht,scalar:Gt,tensor:Kt,tensor1d:Qt,tensor2d:Xt,tensor3d:Zt,tensor4d:Jt,tensor5d:Yt,tensor6d:te,zeros:ee,onesLike:ne,zerosLike:re,transpose:xo,softmax:_o,localResponseNormalization:Oo,norm:Co,gather:Po,unsortedSegmentSum:ko,basicLSTMCell:Ao,multiRNNCell:Ro,movingAverage:Mo,stridedSlice:Do}),ni=30;function ri(t){return t<=ni?t:M(t,Math.floor(Math.sqrt(t)))}function oi(t,e,n){if(!P(t.dtype,e))return Q.make(t.shape,{dataId:t.dataId},e);if("int32"===e)return n.int(t);if("bool"===e)return n.notEqual(t,Gt(0,t.dtype));throw new Error("Error in Cast: unknown dtype argument ("+e+")")}function ii(t,e){return Q.make(e,{dataId:t.dataId},t.dtype)}var ai=function(){function t(t,e,n){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.outputShape=Re(e,n),this.userCode="\n      uniform float NAN;\n      float binaryOperation(float a, float b) {\n        "+t+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(){var t=this;return function(e,n){null==t.startLoc&&(t.startLoc=e.getUniformLocationNoThrow(n,"NAN"),null==t.startLoc)||e.gl.uniform1f(t.startLoc,NaN)}},t}();var si,ui,li="\n  float sampleTexture(sampler2D textureSampler, vec2 uv) {\n    return texture2D(textureSampler, uv).r;\n  }\n",ci="\n  void setOutput(float val) {\n    gl_FragColor = vec4(val, 0, 0, 0);\n  }\n",pi="\n  precision highp float;\n  precision highp int;\n  varying vec2 resultUV;\n  const vec2 halfCR = vec2(0.5, 0.5);\n\n  struct ivec5\n  {\n    int x;\n    int y;\n    int z;\n    int w;\n    int u;\n  };\n\n  struct ivec6\n  {\n    int x;\n    int y;\n    int z;\n    int w;\n    int u;\n    int v;\n  };\n\n  bool isNaN(float val) {\n    return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;\n  }\n\n  bool hasNaN(vec4 values) {\n    vec4 v1 = values * values;\n    vec4 v2 = values * values;\n    return any(notEqual(v1, v2));\n  }\n\n  float getNaN(vec4 values) {\n    return dot(vec4(1), values);\n  }\n\n  int round(float value) {\n    return int(floor(value + 0.5));\n  }\n\n  int imod(int x, int y) {\n    return x - y * (x / y);\n  }\n\n  //Based on the work of Dave Hoskins\n  //https://www.shadertoy.com/view/4djSRW\n  #define HASHSCALE1 443.8975\n  float random(float seed){\n    vec2 p = resultUV * seed;\n    vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n  }\n\n  \nvec2 UVfrom1D(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom2D(int texNumR, int texNumC, int numC, int row, int col) {\n  int index = row * numC + col;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom3D(int texNumR, int texNumC, int stride0,\n    int stride1, int row, int col, int depth) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom4D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int row, int col, int depth,\n    int depth2) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom5D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int stride3, int row, int col, int depth,\n    int depth2, int depth3) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 +\n              depth * stride2 + depth2 * stride3 + depth3;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom6D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int stride3, int stride4,\n    int row, int col, int depth, int depth2, int depth3, int depth4) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2 *\n    stride3 + depth3 * stride4 + depth4;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n";function fi(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function hi(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function di(t,e){return e.map(function(e){return t[e]}).join(", ")}function mi(t,e){if(1===t)return""+e;if(2===t)return e+".y";if(3===t)return e+".z";if(4===t)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}function gi(t,e){return[e,t]}function vi(t,e){return t*e}function yi(t,e,n){var r=function(t,e){if(t%e!=0)throw new Error("unpackedSize ("+t+") must be a multiple of "+e);return t/e}(t.length,n);if(e.length<r)throw new Error("matrix length ("+e.length+") must be >= "+r);for(var o=0,i=0;i<t.length;i+=n)e[o++]=t[i]}function bi(t,e){return[Math.ceil(e/2),Math.ceil(t/2)]}function wi(t,e){var n=bi(t,e);return n[0]*n[1]*4}!function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(si||(si={})),function(t){t[t.FLOAT16=0]="FLOAT16",t[t.FLOAT32=1]="FLOAT32",t[t.UNSIGNED_BYTE=2]="UNSIGNED_BYTE"}(ui||(ui={}));var xi=null;function _i(t){var e=document.createElement("canvas");return e.width=1,e.height=1,Oi(e,t)}function Oi(t,e){var n,r=dt.get("WEBGL_VERSION");if(2===r?n=t.getContext("webgl2",e):1===r&&(n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)),0===r||null==n)throw new Error("This browser does not support WebGL.");return n}function Ci(t,e){var n=e();return Si(t),n}var Ei=!1;function Ni(t){Ei=t}function Si(t){if(Ei){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+Ii(t,e))}}function Ii(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function Pi(t,e){return Ji(t,function(){return t.getExtension(e)},'Extension "'+e+'" not supported on this browser.')}function ki(t,e){var n=Ji(t,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Ci(t,function(){return t.shaderSource(n,e)}),Ci(t,function(){return t.compileShader(n)}),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Ti(t,e){var n=Ji(t,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Ci(t,function(){return t.shaderSource(n,e)}),Ci(t,function(){return t.compileShader(n)}),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw function(t,e){var n=Ai.exec(e);if(null==n)return console.log("Couldn't parse line number in error: "+e),void console.log(t);for(var r=+n[1],o=t.split("\n"),i=o.length.toString().length+2,a=o.map(function(t,e){return _((e+1).toString(),i)+t}),s=0,u=0;u<a.length;u++)s=Math.max(a[u].length,s);var l=a.slice(0,r-1),c=a.slice(r-1,r),p=a.slice(r);console.log(l.join("\n")),console.log(e.split("\n")[0]),console.log("%c "+_(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(p.join("\n"))}(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var Ai=/ERROR: [0-9]+:([0-9]+):/g;function Ri(t){return Ji(t,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function Mi(t,e){if(Ci(t,function(){return t.linkProgram(e)}),!1===t.getProgramParameter(e,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function Di(t,e){if(Ci(t,function(){return t.validateProgram(e)}),!1===t.getProgramParameter(e,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function ji(t,e){var n=Ji(t,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Ci(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,n)}),Ci(t,function(){return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}),n}function Li(t,e){var n=Ji(t,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Ci(t,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)}),Ci(t,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)}),n}function zi(t){return null!=xi?xi:xi=Ci(t,function(){return t.getParameter(t.MAX_TEXTURE_SIZE)})}function Vi(){return 2===dt.get("WEBGL_VERSION")?1:4}function Bi(t){return Ji(t,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function Fi(t,e,n){var r=zi(t);if(e<=0||n<=0){var o="["+e+"x"+n+"]";throw new Error("Requested texture size "+o+" is invalid.")}if(e>r||n>r)throw o="["+e+"x"+n+"]",new Error("Requested texture size "+o+" greater than WebGL maximum on this browser / GPU ["+r+"x"+r+"].")}function Ui(t){return Ji(t,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function Wi(t,e,n,r,o,i,a){var s=t.getAttribLocation(e,n);return-1!==s&&(Ci(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),Ci(t,function(){return t.vertexAttribPointer(s,o,t.FLOAT,!1,i,a)}),Ci(t,function(){return t.enableVertexAttribArray(s)}),!0)}function qi(t,e,n){Yi(t,n),Ci(t,function(){return t.activeTexture(t.TEXTURE0+n)}),Ci(t,function(){return t.bindTexture(t.TEXTURE_2D,e)})}function $i(t,e,n){return Ji(t,function(){return t.getUniformLocation(e,n)},'uniform "'+n+'" not present in program.')}function Hi(t,e,n){return t.getUniformLocation(e,n)}function Gi(t,e,n,r,o){Ci(t,function(){return qi(t,n,o)}),Ci(t,function(){return t.uniform1i(r,o)})}function Ki(t,e,n){Ci(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),Ci(t,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)})}function Qi(t,e){Ci(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)}),Ci(t,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function Xi(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Zi(t,e))}function Zi(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Ji(t,e,n){var r=Ci(t,function(){return e()});if(null==r)throw new Error(n);return r}function Yi(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function ta(t,e){2!==e.length&&(e=N(e).newShape);var n=zi(t),r=v(e);return e.length<=1&&r<=n?[r,1]:2===e.length&&e[0]<=n&&e[1]<=n?e:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?[e[0],e[1]*e[2]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n?[e[0],e[1]*e[2]*e[3]]:x(r)}var ea=Object.freeze({createWebGLRenderingContext:_i,createWebGLRenderingContextFromCanvas:Oi,callAndCheck:Ci,enableDebugWebGLErrorChecking:Ni,checkWebGLError:Si,getWebGLErrorMessage:Ii,getExtensionOrThrow:Pi,createVertexShader:ki,createFragmentShader:Ti,createProgram:Ri,linkProgram:Mi,validateProgram:Di,createStaticVertexBuffer:ji,createStaticIndexBuffer:Li,queryMaxTextureSize:zi,getNumChannels:Vi,createTexture:Bi,validateTextureSize:Fi,createFramebuffer:Ui,bindVertexBufferToProgramAttribute:Wi,bindTextureUnit:qi,unbindTextureUnit:function(t,e){Yi(t,e),Ci(t,function(){return t.activeTexture(t.TEXTURE0+e)}),Ci(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:$i,getProgramUniformLocation:Hi,bindTextureToProgramUniformSampler:Gi,bindCanvasToFramebuffer:function(t){Ci(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Ci(t,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),Ci(t,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},bindColorTextureToFramebuffer:Ki,unbindColorTextureFromFramebuffer:Qi,validateFramebuffer:Xi,getFramebufferErrorMessage:Zi,getTextureShapeFromLogicalShape:ta});function na(t){var e,n={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};return Ci(e=null!=t?Oi(t,n):_i(n),function(){return e.disable(e.DEPTH_TEST)}),Ci(e,function(){return e.disable(e.STENCIL_TEST)}),Ci(e,function(){return e.disable(e.BLEND)}),Ci(e,function(){return e.disable(e.DITHER)}),Ci(e,function(){return e.disable(e.POLYGON_OFFSET_FILL)}),Ci(e,function(){return e.disable(e.SAMPLE_COVERAGE)}),Ci(e,function(){return e.enable(e.SCISSOR_TEST)}),Ci(e,function(){return e.enable(e.CULL_FACE)}),Ci(e,function(){return e.cullFace(e.BACK)}),e}function ra(t){return ki(t,"\n    precision highp float;\n    attribute vec3 clipSpacePos;\n    attribute vec2 uv;\n    varying vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function oa(t){return ji(t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function ia(t){return Li(t,new Uint16Array([0,1,2,2,1,3]))}function aa(t,e){var n,r,o,i,a,s,u,l=t;return 2===dt.get("WEBGL_VERSION")?(n=l.R32F,r=l.R16F,o=l.RGBA32F,i=l.RED,a=4,s=1,u=l.HALF_FLOAT):(n=t.RGBA,r=t.RGBA,o=l.RGBA,i=t.RGBA,a=4,s=4,u=null!=e?e.HALF_FLOAT_OES:null),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:a,defaultNumChannels:s,textureTypeHalfFloat:u}}function sa(t,e,n,r,o,i){Fi(t,e,n);var a=Bi(t),s=t.TEXTURE_2D;return Ci(t,function(){return t.bindTexture(s,a)}),Ci(t,function(){return t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),Ci(t,function(){return t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),Ci(t,function(){return t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)}),Ci(t,function(){return t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)}),Ci(t,function(){return t.texImage2D(s,0,r,e,n,0,o,i,null)}),Ci(t,function(){return t.bindTexture(t.TEXTURE_2D,null)}),a}function ua(t,e,n,r){var o=gi(e,n);return sa(t,o[0],o[1],r.internalFormatFloat,r.textureFormatFloat,t.FLOAT)}function la(t,e,n,r){var o=gi(e,n);return sa(t,o[0],o[1],r.internalFormatFloat,r.textureFormatFloat,r.textureTypeHalfFloat)}function ca(t,e,n,r){var o=gi(e,n);return sa(t,o[0],o[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function pa(t,e,n,r){var o=bi(e,n);return sa(t,o[0],o[1],r.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function fa(t,e,n){return Ci(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,n)}),Wi(t,e,"clipSpacePos",n,3,20,0)&&Wi(t,e,"uv",n,2,20,12)}function ha(t,e,n){Ci(t,function(){return t.bindTexture(t.TEXTURE_2D,e)}),Ci(t,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)}),Ci(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function da(t,e,n,r,o,i){Fi(t,n,r),Ci(t,function(){return t.bindTexture(t.TEXTURE_2D,e)}),Ci(t,function(){return t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,i,t.FLOAT,o)}),Ci(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function ma(t,e,n,r,o,i,a){var s,u=gi(n,r),l=u[0],c=u[1];1===a.defaultNumChannels?s=o:function(t,e,n){var r=vi(t.length,n);if(e.length<r)throw new Error("unpackedArray length ("+e.length+") must be >= "+r);for(var o=0,i=0;i<t.length;++i)e[o]=t[i],o+=n}(o,s=new Float32Array(vi(o.length,i)),i),da(t,e,l,c,s,a.textureFormatFloat)}function ga(t,e,n,r,o,i){var a=bi(n,r),s=a[0],u=a[1],l=new Float32Array(wi(n,r));(function(t,e,n,r){var o=wi(e,n);if(r.length<o)throw new Error("packedRGBA length ("+r.length+") must be >= "+o);for(var i=bi(e,n),a=i[0],s=i[1],u=n%2==1,l=e%2==1,c=Math.floor(n/2),p=Math.floor(e/2),f=u?4:0,h=n,d=0,m=0;m<p;++m){for(var g=2*m*n,v=0;v<c;++v){var y=g+2*v;r[d]=t[y],r[d+1]=t[y+1],r[d+2]=t[y+h],r[d+3]=t[y+h+1],d+=4}d+=f}if(u){y=n-1,d=4*(a-1);var b=2*n;for(f=4*a,m=0;m<p;++m)r[d]=t[y],r[d+2]=t[y+n],y+=b,d+=f}if(l)for(y=(e-1)*n,d=(s-1)*a*4,v=0;v<c;++v)r[d++]=t[y++],r[d++]=t[y++],d+=2;u&&l&&(r[r.length-4]=t[t.length-1])})(o,n,r,l),da(t,e,s,u,l,t.RGBA)}function va(t,e,n,r,o){return s(this,void 0,void 0,function(){var i,a,s,l,c;return u(this,function(u){switch(u.label){case 0:return i=t,a=new Float32Array(vi(n*r,o.downloadUnpackNumChannels)),s=a instanceof Float32Array?4*a.length:a,l=t.createBuffer(),Ci(t,function(){return t.bindBuffer(i.PIXEL_PACK_BUFFER,l)}),Ci(t,function(){return t.bufferData(i.PIXEL_PACK_BUFFER,s,t.STATIC_DRAW)}),Ci(t,function(){return i.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)}),[4,e.getBufferSubDataAsync(i.PIXEL_PACK_BUFFER,0,a)];case 1:return u.sent(),c=new Float32Array(n*r),yi(a,c,o.downloadUnpackNumChannels),[2,c]}})})}function ya(t,e,n,r){var o=gi(e,n),i=o[0],a=o[1],s=new Float32Array(vi(e*n,r.downloadUnpackNumChannels));Ci(t,function(){return t.readPixels(0,0,i,a,r.downloadTextureFormat,t.FLOAT,s)});var u=new Float32Array(e*n);return yi(s,u,r.downloadUnpackNumChannels),u}function ba(t,e,n,r){var o=gi(e,n),i=o[0],a=o[1],s=new Uint8Array(vi(e*n,4));return Ci(t,function(){return t.readPixels(0,0,i,a,r.downloadTextureFormat,t.UNSIGNED_BYTE,s)}),new Float32Array(s.buffer)}function wa(t,e,n,r){var o=bi(e,n),i=o[0],a=o[1],s=new Float32Array(wi(e,n));Ci(t,function(){return t.readPixels(0,0,i,a,t.RGBA,t.FLOAT,s)});var u=new Float32Array(e*n);return function(t,e,n,r){var o=e*n;if(o<r.length)throw new Error("matrix length ("+r.length+") must be >= "+o);for(var i=n%2==1,a=e%2==1,s=Math.floor(n/2),u=Math.floor(e/2),l=bi(e,n),c=l[0],p=l[1],f=i?4:0,h=n+(i?1:0),d=0,m=0,g=n,v=0;v<u;++v){for(var y=0;y<s;++y)r[m++]=t[d++],r[m++]=t[d++],r[g++]=t[d++],r[g++]=t[d++];d+=f,m+=h,g+=h}if(i){d=4*(c-1);var b=n-1;for(f=4*c,h=2*n,v=0;v<u;++v)r[b]=t[d],r[b+n]=t[d+2],d+=f,b+=h}if(a)for(d=(p-1)*c*4,b=(e-1)*n,y=0;y<s;++y)r[b++]=t[d++],r[b++]=t[d++],d+=2;return i&&a&&(r[r.length-1]=t[t.length-4]),r}(s,e,n,u)}var xa=Object.freeze({getWebGLContextAttributes:function(){return{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0}},createWebGLContext:na,createVertexShader:ra,createVertexBuffer:oa,createIndexBuffer:ia,getTextureConfig:aa,createFloat32MatrixTexture:ua,createFloat16MatrixTexture:la,createUnsignedBytesMatrixTexture:ca,createPackedMatrixTexture:pa,bindVertexProgramAttributeStreams:fa,uploadPixelDataToTexture:ha,uploadMatrixToTexture:ma,uploadMatrixToPackedTexture:ga,downloadMatrixFromOutputTextureAsync:va,downloadFloat32MatrixFromOutputTexture:ya,downloadByteEncodedFloatMatrixFromOutputTexture:ba,downloadMatrixFromPackedOutputTexture:wa}),_a=function(){function t(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.autoDebugValidate=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[],this.gl=null!=t?t:na(),1===dt.get("WEBGL_VERSION")?(this.textureFloatExtension=Pi(this.gl,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),dt.get("WEBGL_RENDER_FLOAT32_ENABLED")||(this.textureHalfFloatExtension=Pi(this.gl,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float"))):this.colorBufferFloatExtension=Pi(this.gl,"EXT_color_buffer_float"),this.loseContextExtension=Pi(this.gl,"WEBGL_lose_context"),dt.get("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED")&&(this.getBufferSubDataAsyncExtension=this.gl.getExtension("WEBGL_get_buffer_sub_data_async")),this.vertexBuffer=oa(this.gl),this.indexBuffer=ia(this.gl),this.framebuffer=Ui(this.gl),this.textureConfig=aa(this.gl,this.textureHalfFloatExtension)}return t.prototype.dispose=function(){var t=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;Ci(e,function(){return e.finish()}),Ci(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),Ci(e,function(){return e.deleteFramebuffer(t.framebuffer)}),Ci(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),Ci(e,function(){return e.deleteBuffer(t.vertexBuffer)}),Ci(e,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),Ci(e,function(){return e.deleteBuffer(t.indexBuffer)}),this.loseContextExtension.loseContext(),this.disposed=!0}},t.prototype.enableAutomaticDebugValidation=function(t){this.autoDebugValidate=t,Ni(t)},t.prototype.createFloat32MatrixTexture=function(t,e){return this.throwIfDisposed(),ua(this.gl,t,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(t,e){return this.throwIfDisposed(),la(this.gl,t,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(t,e){return this.throwIfDisposed(),ca(this.gl,t,e)},t.prototype.uploadPixelDataToTexture=function(t,e){this.throwIfDisposed(),ha(this.gl,t,e)},t.prototype.createPackedMatrixTexture=function(t,e){return this.throwIfDisposed(),pa(this.gl,t,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(Qi(this.gl,this.framebuffer),this.outputTexture=null),Ci(this.gl,function(){return e.gl.deleteTexture(t)})},t.prototype.uploadMatrixToTexture=function(t,e,n,r){this.throwIfDisposed();var o=Vi();return ma(this.gl,t,e,n,r,o,this.textureConfig)},t.prototype.uploadMatrixToPackedTexture=function(t,e,n,r){return this.throwIfDisposed(),ga(this.gl,t,e,n,r)},t.prototype.downloadFloat32MatrixFromOutputTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return ya(r.gl,e,n,r.textureConfig)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return ba(r.gl,e,n,r.textureConfig)})},t.prototype.downloadMatrixFromTextureAsync=function(t,e,n){return s(this,void 0,void 0,function(){var r=this;return u(this,function(o){if(null==this.getBufferSubDataAsyncExtension)throw new Error("Cannot download matrix from output texture asynchronously, WEBGL_get_buffer_sub_data_async is not enabled.");return[2,this.downloadMatrixDriverAsync(t,function(){return va(r.gl,r.getBufferSubDataAsyncExtension,e,n,r.textureConfig)})]})})},t.prototype.downloadMatrixFromPackedTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return wa(r.gl,e,n)})},t.prototype.createProgram=function(t){this.throwIfDisposed();var e=this.gl,n=Ti(e,t),r=ra(e),o=Ri(e);return Ci(e,function(){return e.attachShader(o,r)}),Ci(e,function(){return e.attachShader(o,n)}),Mi(e,o),this.autoDebugValidate&&Di(e,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=fa(e,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&Ci(this.gl,function(){return e.gl.deleteProgram(t)})},t.prototype.setProgram=function(t){var e=this;this.throwIfDisposed(),this.program=t,null!=this.program&&this.autoDebugValidate&&Di(this.gl,this.program),Ci(this.gl,function(){return e.gl.useProgram(t)})},t.prototype.getUniformLocation=function(t,e,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?$i(this.gl,t,e):Hi(this.gl,t,e)},t.prototype.getAttributeLocation=function(t,e){var n=this;return this.throwIfDisposed(),Ci(this.gl,function(){return n.gl.getAttribLocation(t,e)})},t.prototype.getUniformLocationNoThrow=function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)},t.prototype.setInputMatrixTexture=function(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),Gi(this.gl,0,t,e,n)},t.prototype.setOutputMatrixTexture=function(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)},t.prototype.setOutputPackedMatrixTexture=function(t,e,n){this.throwIfDisposed();var r=bi(e,n);this.setOutputMatrixTextureDriver(t,r[0],r[1])},t.prototype.setOutputMatrixWriteRegion=function(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){null!=this.program&&Di(this.gl,this.program),Xi(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.autoDebugValidate&&this.debugValidate(),Ci(t,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),Ci(this.gl,function(){return t.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=Pi(this.gl,2===dt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.runQuery=function(t){var e=this.beginQuery();return t(),this.endQuery(),this.pollQueryTime(e)},t.prototype.beginQuery=function(){if(2===dt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),o=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(2!==dt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var e=this.gl,n=this.getQueryTimerExtensionWebGL2();e.endQuery(n.TIME_ELAPSED_EXT)}},t.prototype.isQueryAvailable=function(t,e){if(0===e)return!0;if(2===e){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.prototype.pollQueryTime=function(t){var e=this;return new Promise(function(n){var r=dt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION");e.addItemToPoll(function(){return e.isQueryAvailable(t,r)},function(){return n(e.getQueryTime(t,r))})})},t.prototype.pollItems=function(){for(var t=function(t){for(var e=0,n=t.length-1,r=-1;e<=n;){var o=e+n>>1;t[o]()?(r=o,e=o+1):n=o-1}return r}(this.itemsToPoll.map(function(t){return t.isDoneFn})),e=0;e<=t;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},t.prototype.addItemToPoll=function(t,e){var n=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||O(function(){return n.pollItems(),0===n.itemsToPoll.length})},t.prototype.getQueryTime=function(t,e){if(0===e)return null;if(2===e){var n=this.gl;return n.getQueryParameter(t,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6},t.prototype.downloadMatrixDriverSetup=function(t){this.throwIfDisposed(),Ki(this.gl,t,this.framebuffer),this.autoDebugValidate&&Xi(this.gl)},t.prototype.downloadMatrixDriverTeardown=function(){null!=this.outputTexture?(Ki(this.gl,this.outputTexture,this.framebuffer),this.autoDebugValidate&&Xi(this.gl)):Qi(this.gl,this.framebuffer)},t.prototype.downloadMatrixDriver=function(t,e){this.downloadMatrixDriverSetup(t);var n=e();return this.downloadMatrixDriverTeardown(),n},t.prototype.downloadMatrixDriverAsync=function(t,e){return s(this,void 0,void 0,function(){var n;return u(this,function(r){switch(r.label){case 0:return this.downloadMatrixDriverSetup(t),[4,e()];case 1:return n=r.sent(),this.downloadMatrixDriverTeardown(),[2,n]}})})},t.prototype.setOutputMatrixTextureDriver=function(t,e,n){this.throwIfDisposed();var r=this.gl;Ki(r,t,this.framebuffer),this.autoDebugValidate&&Xi(r),this.outputTexture=t,Ci(r,function(){return r.viewport(0,0,e,n)}),Ci(r,function(){return r.scissor(0,0,e,n)})},t.prototype.setOutputMatrixWriteRegionDriver=function(t,e,n,r){var o=this;this.throwIfDisposed(),Ci(this.gl,function(){return o.gl.scissor(t,e,n,r)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},t}();function Oa(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(t,n){var r=t.logicalShape,o=e[n],i=o.tensor.shape;if(!y(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+i+" must match");if(!t.isUniform||!o.isUniform){var a=t.texShape,s=o.isUniform?null:o.texData.texShape;if(!y(a,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+s+" must match")}})}var Ca=function(){function t(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(e-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(e-1)+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.seedLoc&&(e.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(e.seedLoc,t)}},t}(),Ea=function(t,e,n){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterHeight,o=t.filterWidth,i=t.strideHeight,a=t.strideWidth,s=t.padInfo.top,u=t.padInfo.left;this.outputShape=t.outShape;var l="avg"===e,c="0.0";if(l||(c="-1.0 / 0.0"),n)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+a+");\n        const ivec2 pads = ivec2("+s+", "+u+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+r+"; wR++) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+o+"; wC++) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+o+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var p=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(p="avgValue / count");var f=4*Math.floor(o/4),h=o%4,d="\n      if ("+l+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+a+");\n      const ivec2 pads = ivec2("+s+", "+u+");\n      const float initializationValue = "+c+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+c+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+r+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC += 4) {\n            int xC = xCCorner + wC;\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              getValue(batch, xR, xC + 3, d)\n            );\n\n            "+d+"\n          }\n\n          int xC = xCCorner + "+f+";\n          if ("+(1===h)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+d+"\n          } else if ("+(2===h)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+d+"\n          } else if ("+(3===h)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              initializationValue\n            );\n\n            "+d+"\n          }\n        }\n        setOutput("+p+");\n      }\n    "}},Na=function(){function t(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var e=fi(this.rank),n=function(t){if(1===t)return"sourceLoc";if(2===t)return"sourceLoc.x, sourceLoc.y";if(3===t)return"sourceLoc.x, sourceLoc.y, sourceLoc.z";if(4===t)return"sourceLoc.x, sourceLoc.y, sourceLoc.z, sourceLoc.w";throw Error("Slicing for rank "+t+" is not yet supported")}(this.rank);this.userCode="\n      uniform "+e+" start;\n\n      void main() {\n        "+e+" sourceLoc = start + getOutputCoords();\n        setOutput(getSource("+n+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){if(null!=e.startLoc||(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null!=e.startLoc))if(1===e.rank)n.gl.uniform1i(e.startLoc,t[0]);else if(2===e.rank)n.gl.uniform2i(e.startLoc,t[0],t[1]);else if(3===e.rank)n.gl.uniform3i(e.startLoc,t[0],t[1],t[2]);else{if(4!==e.rank)throw Error("Slicing for rank "+e.rank+" is not yet supported");n.gl.uniform4i(e.startLoc,t[0],t[1],t[2],t[3])}}},t}(),Sa=function(){function t(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(t,e){var n,r=Ia(e),o=Pa(t,r);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var i=this.freeTextures[o].shift();return this.usedTextures[o].push(i),i}return this.numUsedTextures++,this.log(),r===ui.FLOAT32?n=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):r===ui.FLOAT16?n=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):r===ui.UNSIGNED_BYTE&&(n=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[o].push(n),n},t.prototype.releaseTexture=function(t,e,n){var r=Pa(e,Ia(n));r in this.freeTextures||(this.freeTextures[r]=[]),this.freeTextures[r].push(t),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[r],i=o.indexOf(t);if(i<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(i,1),this.log()},t.prototype.log=function(){this.logEnabled&&console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+(this.numFreeTextures+this.numUsedTextures)+")")},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var t=this;if(null!=this.freeTextures){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(e){t.gpgpu.deleteMatrixTexture(e)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(e){t.gpgpu.deleteMatrixTexture(e)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function Ia(t){if(t===si.DOWNLOAD||t===si.PIXELS)return ui.UNSIGNED_BYTE;if(t===si.UPLOAD)return ui.FLOAT32;if(t===si.RENDER)return dt.get("WEBGL_RENDER_FLOAT32_ENABLED")?ui.FLOAT32:ui.FLOAT16;throw new Error("Unknown logical texture type "+t)}function Pa(t,e){return t[0]+"_"+t[1]+"_"+e}var ka=function(){function t(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float NAN;\n      float unaryOperation(float x) {\n        "+e+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(){var t=this;return function(e,n){null==t.startLoc&&(t.startLoc=e.getUniformLocationNoThrow(n,"NAN"),null==t.startLoc)||e.gl.uniform1f(t.startLoc,NaN)}},t}(),Ta=300,Aa=function(){function t(t,e){if(void 0===e&&(e=!0),this.gpgpu=t,this.delayedStorage=e,this.texData=new WeakMap,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.lruDataGPU=[],this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.binaryCache={},this.disposed=!1,dt.get("WEBGL_VERSION")<1)throw new Error("WebGL is not supported on this device");dt.get("IS_BROWSER")&&(this.canvas=document.createElement("canvas")),null==t?(this.gpgpu=new _a(na(this.canvas)),this.gpgpuCreatedLocally=!0):this.gpgpuCreatedLocally=!1,this.NUM_BYTES_BEFORE_PAGING=window.screen.height*window.screen.width*window.devicePixelRatio*Ta,this.textureManager=new Sa(this.gpgpu)}return t.prototype.register=function(t,e,n){if(this.texData.has(t))throw new Error("Data buffer is already registered");this.texData.set(t,{shape:e,dtype:n,values:null,texture:null,texShape:null,usage:si.RENDER})},t.prototype.fromPixels=function(t,e){if(null==t)throw new Error("pixels passed to tf.fromPixels() can not be null");var n=[t.height,t.width],r=[t.height,t.width,e];if(!(t instanceof HTMLVideoElement||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageData))throw new Error("pixels passed to tf.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+t.constructor.name);if(t instanceof HTMLVideoElement){if(null==this.fromPixelsCanvas){if(!dt.get("IS_BROWSER"))throw new Error("Can't read pixels from HTMLImageElement outside the browser.");if("complete"!==document.readyState)throw new Error("The DOM is not ready yet. Please call tf.fromPixels() once the DOM is ready. One way to do that is to add an event listener for `DOMContentLoaded` on the document object");this.fromPixelsCanvas=document.createElement("canvas")}this.fromPixelsCanvas.width=t.width,this.fromPixelsCanvas.height=t.height,this.fromPixelsCanvas.getContext("2d").drawImage(t,0,0,t.width,t.height),t=this.fromPixelsCanvas}var o=Q.make(n,{},"int32");this.texData.get(o.dataId).usage=si.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(o.dataId),t);var i=new function(t){this.variableNames=["A"];var e=t[0],n=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+n+".0, "+e+".0);\n\n        vec4 values = texture2D(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "}(r),a=this.compileAndRun(i,[o]);return o.dispose(),a},t.prototype.write=function(t,e){if(null==e)throw new Error("MathBackendWebGL.write(): values can not be null");this.throwIfNoData(t);var n=this.texData.get(t),r=n.texture;null!=r&&(this.releaseTexture(t,r,n.texShape,n.usage),n.texture=null,n.texShape=null),n.usage=si.UPLOAD,n.values=e,this.delayedStorage||this.uploadToGPU(t)},t.prototype.readSync=function(t){this.throwIfNoData(t);var e=this.texData.get(t),n=e.shape,r=e.texture,o=e.values,i=e.texShape,a=e.dtype;if(null!=o)return this.cacheOnCPU(t),o;var s,u,l=null!=this.activeTimers;if(l&&(s=performance.now()),dt.get("WEBGL_DOWNLOAD_FLOAT_ENABLED"))u=this.gpgpu.downloadFloat32MatrixFromOutputTexture(r,i[0],i[1]);else{var c=Q.make(n,{});this.texData.get(c.dataId).usage=si.DOWNLOAD;var p=Q.make(n,{dataId:t},a),f=new function(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      const float FLOAT_MAX = 1.70141184e38;\n      const float FLOAT_MIN = 1.17549435e-38;\n\n      lowp vec4 encode_float(highp float v) {\n        if (isNaN(v)) {\n          return vec4(255, 255, 255, 255);\n        }\n\n        highp float av = abs(v);\n\n        if(av < FLOAT_MIN) {\n          return vec4(0.0, 0.0, 0.0, 0.0);\n        } else if(v > FLOAT_MAX) {\n          return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n        } else if(v < -FLOAT_MAX) {\n          return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n        }\n\n        highp vec4 c = vec4(0,0,0,0);\n\n        highp float e = floor(log2(av));\n        highp float m = exp2(fract(log2(av))) - 1.0;\n\n        c[2] = floor(128.0 * m);\n        m -= c[2] / 128.0;\n        c[1] = floor(32768.0 * m);\n        m -= c[1] / 32768.0;\n        c[0] = floor(8388608.0 * m);\n\n        highp float ebias = e + 127.0;\n        c[3] = floor(ebias / 2.0);\n        ebias -= c[3] * 2.0;\n        c[2] += floor(ebias) * 128.0;\n\n        c[3] += 128.0 * step(0.0, -v);\n\n        return c / 255.0;\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        gl_FragColor = encode_float(x);\n      }\n    "}(n);this.compileAndRun(f,[p],c,null,!1);var h=this.texData.get(c.dataId);u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture,h.texShape[0],h.texShape[1]),p.dispose(),c.dispose()}return l&&(this.downloadWaitMs+=performance.now()-s),this.cacheOnCPU(t,u),e.values},t.prototype.read=function(t){return s(this,void 0,void 0,function(){var e,n,r,o,i,a,s,l;return u(this,function(u){switch(u.label){case 0:return this.pendingRead.has(t)?(e=this.pendingRead.get(t),[2,new Promise(function(t){return e.push(t)})]):(this.throwIfNoData(t),n=this.texData.get(t),r=n.texture,i=n.texShape,null!=(o=n.values)?(this.cacheOnCPU(t),[2,o]):dt.get("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED")?[4,this.gpgpu.downloadMatrixFromTextureAsync(r,i[0],i[1])]:[3,2]);case 1:return a=u.sent(),this.cacheOnCPU(t,a),[2,n.values];case 2:return 0===dt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?[2,this.readSync(t)]:(this.pendingRead.set(t,[]),[4,this.gpgpu.runQuery(function(){})]);case 3:return u.sent(),s=this.pendingRead.get(t),this.pendingRead.delete(t),l=this.readSync(t),s.forEach(function(t){return t(l)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)),[2,l]}})})},t.prototype.time=function(t){return s(this,void 0,void 0,function(){var e,n,r,o,i,a;return u(this,function(s){switch(s.label){case 0:return e=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,t(),o=m(this.activeTimers),this.activeTimers=e,r&&(this.programTimersStack=null),[4,Promise.all(o).then(function(t){var e=0;return t.forEach(function(t){return e+=t}),e})];case 1:return i=s.sent(),a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:i,wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,a]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return dt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},t.prototype.endTimer=function(t){return dt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),t):(t.endMs=performance.now(),t)},t.prototype.getQueryTime=function(t){return s(this,void 0,void 0,function(){var e;return u(this,function(n){return dt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.pollQueryTime(t)]:[2,(e=t).endMs-e.startMs]})})},t.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t))if(this.pendingRead.has(t))this.pendingDisposal.add(t);else if(this.texData.has(t)){var e=this.texData.get(t),n=e.texture;null!=n&&this.releaseTexture(t,n,e.texShape,e.usage),this.texData.delete(t)}},t.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.getCanvas=function(){return this.canvas},t.prototype.slice=function(t,e,n){var r=new Na(n),o=r.getCustomSetupFunc(e);return this.compileAndRun(r,[t],null,o)},t.prototype.stridedSlice=function(t,e,n,r,o,i){var a=Hn(t.shape,e,n,r,o,i),s=a[0],u=a[1];if(u.some(function(t){return 0===t}))return Kt([],u);var l=new function(t,e,n){this.variableNames=["x"],this.outputShape=n,this.rank=n.length;var r,o=fi(this.rank);r=1===this.rank?"coords * strides + begin":n.map(function(t,e){return"coords["+e+"] * strides["+e+"] + begin["+e+"]"}).join(","),this.userCode="\n      "+o+" begin = "+o+"("+t+");\n      "+o+" strides = "+o+"("+e+");\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}(s,r,u);return this.compileAndRun(l,[t])},t.prototype.reverse=function(t,e){var n=new function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,1!==n){var r=t.map(function(n,r){return function(n){return-1!==e.indexOf(n)&&1!==t[n]?t[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)}).join(","),o=fi(n);this.userCode="\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+t[0]+" - coord - 1));\n        }\n      "}(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.concat=function(t,e){var n=new function(t,e){this.variableNames=["A","B"],this.outputShape=[],this.outputShape=Ot(t,e,1),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        float value = 0.0;\n        if (yC < "+t[1]+") {\n          value = getA(yR, yC);\n        } else {\n          yC -= "+t[1]+";\n          value = getB(yR, yC);\n        }\n\n        setOutput(value);\n      }\n    "}(t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.neg=function(t){var e=new ka(t.shape,"return -x;");return this.compileAndRun(e,[t])},t.prototype.matMul=function(t,e,n,r){var o=new function(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),this.variableNames=["matrixA","matrixB"];var o=n?t[0]:t[1];this.outputShape=[n?t[1]:t[0],r?e[0]:e[1]];var i=function(t,e){return n?e+" + "+t+", aRow":"aRow, "+e+" + "+t},a=function(t,e){return r?"bCol, "+e+" + "+t:e+" + "+t+", bCol"},s=4*Math.floor(o/4),u=o%4;this.userCode=" float dotARowBCol(int aRow, int bCol) {\n      float result = 0.0;\n      for (int i = 0; i < "+s+"; i += 4) {\n        vec4 a = vec4(\n          getMatrixA("+i(0,"i")+"),\n          getMatrixA("+i(1,"i")+"),\n          getMatrixA("+i(2,"i")+"),\n          getMatrixA("+i(3,"i")+")\n        );\n        vec4 b = vec4(\n          getMatrixB("+a(0,"i")+"),\n          getMatrixB("+a(1,"i")+"),\n          getMatrixB("+a(2,"i")+"),\n          getMatrixB("+a(3,"i")+")\n        );\n\n        result += dot(a, b);\n      }\n\n      if ("+(1===u)+") {\n        result += getMatrixA("+i(0,s)+") *\n          getMatrixB("+a(0,s)+");\n      } else if ("+(2===u)+") {\n        vec2 a = vec2(\n          getMatrixA("+i(0,s)+"),\n          getMatrixA("+i(1,s)+")\n        );\n        vec2 b = vec2(\n          getMatrixB("+a(0,s)+"),\n          getMatrixB("+a(1,s)+")\n        );\n        result += dot(a, b);\n      } else if ("+(3===u)+") {\n        vec3 a = vec3(\n          getMatrixA("+i(0,s)+"),\n          getMatrixA("+i(1,s)+"),\n          getMatrixA("+i(2,s)+")\n        );\n        vec3 b = vec3(\n          getMatrixB("+a(0,s)+"),\n          getMatrixB("+a(1,s)+"),\n          getMatrixB("+a(2,s)+")\n        );\n        result += dot(a, b);\n      }\n\n      return result;\n    }\n\n    void main() {\n      ivec2 resRC = getOutputCoords();\n      setOutput(dotARowBCol(resRC.x, resRC.y));\n    }\n    "}(t.shape,e.shape,n,r);return this.compileAndRun(o,[t,e])},t.prototype.multiply=function(t,e){var n=new ai("return a * b;",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,zr(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],r)},t.prototype.batchNormalization=function(t,e,n,r,o,i){var a=[t,e,n],s=null;null!=i&&(s=i.shape,a.push(i));var u=null;null!=o&&(u=o.shape,a.push(o));var l=new function(t,e,n,r,o,i){this.outputShape=[],this.supportsBroadcasting=!0,this.variableNames=["x","mean","variance"],Re(t,e),Re(t,n);var a="0.0";null!=r&&(Re(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";null!=o&&(Re(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+a+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+i+"));\n        setOutput((x - mean) * inv + offset);\n      }\n    "}(t.shape,e.shape,n.shape,s,u,r);return this.compileAndRun(l,a)},t.prototype.localResponseNormalization4D=function(t,e,n,r,o){var i=new function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[];var i=e,a=t[3]-1;this.outputShape=t;var s="float("+n+") + float("+r+") * sum";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+i+"; j <= "+i+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+a+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+(.5===o?"inversesqrt("+s+")":1===o?"1.0/("+s+")":"exp(log("+s+") * float(-"+o+"));")+";\n        setOutput(val);\n      }\n    "}(t.shape,e,n,r,o);return this.compileAndRun(i,[t])},t.prototype.tile=function(t,e){var n=new function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var o=fi(this.rank),i=function(t){var e=t.length;if(e>5)throw Error("Tile for rank "+e+" is not yet supported");if(1===e)return"imod(resRC, "+t[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],o=0;o<t.length;o++)r.push("imod("+n[o]+", "+t[o]+")");return r.join()}(t);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "}(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.pad=function(t,e,n){var r=new function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(e,n){return e[0]+t[n]+e[1]});var r=t.length,o=fi(r),i=e.map(function(t){return t[0]}).join(","),a=e.map(function(e,n){return e[0]+t[n]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+o+" start = "+o+"("+i+");\n      "+o+" end = "+o+"("+a+");\n\n      void main() {\n        "+o+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+o+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+i+";\n        int end = "+a+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "}(t.shape,e,n);return this.compileAndRun(r,[t])},t.prototype.transpose=function(t,e){var n=new function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var o=fi(this.rank),i=function(t){var e=t.length;if(e>6)throw Error("Transpose for rank "+e+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e),o=0;o<t.length;o++)r[t[o]]=n[o];return r.join()}(e);this.userCode="\n    void main() {\n      "+o+" resRC = getOutputCoords();\n      setOutput(getA("+i+"));\n    }\n    "}(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.gather=function(t,e,n){var r=new function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var o=fi(this.rank),i=function(t,e){var n=t.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],i=0;i<t.length;i++)o.push(i===e?"int(getIndices("+r[i]+"))":""+r[i]);return o.join()}(t,n);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "}(t.shape,e.size,n);return this.compileAndRun(r,[t,e])},t.prototype.reduce=function(t,e,n){var r=t.shape[0],o=t.shape[1],i=new function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,o=t.inSize,i=Math.ceil(o/n);this.outputShape=[r,i];var a="0.0",s="";"min"===e?(a="1.0 / 0.0",s="min"):"max"===e&&(a="-1.0 / 0.0",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e?u="sumValue":"all"===e?u="allValue":"any"===e&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,p="\n      if ("+("sum"===e)+") {\n        sumValue += dot(values, ones);\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",f="vec4";"all"===e?(a="1.0",p="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===e&&(a="0.0",p="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4");var h="";o%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+a+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+h+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+a+");\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+p+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===c)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+p+"\n        } else if ("+(2===c)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+p+"\n        } else if ("+(3===c)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+p+"\n        }\n        setOutput("+u+");\n      }\n    "}({windowSize:ri(o),inSize:o,batchSize:r},e),a=i.outputShape,s=this.makeOutputArray([a[0],a[1]],n);return this.compileAndRun(i,[t],s),1===s.shape[1]?s:this.reduce(s,e,n)},t.prototype.argReduce=function(t,e,n){void 0===n&&(n=null);var r=t.shape[0],o=t.shape[1];null!=n&&(r=n.shape[0],o=n.shape[1]);var i=new function(t,e,n){this.variableNames=["A"];var r=t.windowSize,o=t.batchSize,i=Math.ceil(t.inSize/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = 0;\n        float bestValue = getA(batch, inOffset);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+(n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));")+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+("max"===e?">":"<")+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "}({windowSize:ri(o),inSize:o,batchSize:r},e,null==n),a=i.outputShape,s=this.makeOutputArray([a[0],a[1]],"int32"),u=[t];return null!=n&&u.push(n),this.compileAndRun(i,u,s),1===s.shape[1]?s:this.argReduce(t,e,s)},t.prototype.sum=function(t,e){bt("sum",e,t.rank);var n=gt(t.shape,e),r=n[0],o=v(n[1]),i=t.as2D(-1,o),a=Vr(t.dtype);return this.reduce(i,"sum",a).reshape(r)},t.prototype.unsortedSegmentSum=function(t,e,n){var r=0,o=wt([r],t.rank),i=t;null!=o&&(i=t.transpose(o),r=_t(1,t.rank)[0]);var a=function(t,e,n){for(var r=[],o=t.length,i=0;i<o;i++)r.push(i!==e?t[i]:n);return r}(i.shape,r,n),s=v([i.shape[r]]),u=i.as2D(-1,s),l=Vr(t.dtype),c=this.segOpCompute(u,"unsortedSegmentSum",e,l,n).reshape(a);return null!=o&&(c=c.transpose(xt(o))),c},t.prototype.segOpCompute=function(t,e,n,r,o){var i=t.shape[0],a=t.shape[1],s=function(t,e){var n,r=!1;for(t<=ni?(n=t,r=!0):n=M(t,Math.floor(Math.sqrt(t)));!r;){if(n>e||n===t){r=!0;break}n=M(t,n+1)}return n}(a,o),u=new function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,o=t.inSize,i=t.numSegments,a=i*Math.ceil(o/n);this.outputShape=[r,a];var s=4*Math.floor(n/4),u=n%4,l="\n        sumValue += dot(values, filter);\n    ",c="";o%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      ");var p="";o%n>0&&(p="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+p+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+i+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+i+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+l+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+l+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+l+"\n        }\n        setOutput(sumValue);\n      }\n    "}({windowSize:s,inSize:a,batchSize:i,numSegments:o},e),l=u.outputShape,c=this.makeOutputArray([l[0],l[1]],r);return this.compileAndRun(u,[t,n],c),c.shape[1]===o?c:(n=Ht(0,o).tile([a/s]),this.segOpCompute(c,e,n,r,o))},t.prototype.argMin=function(t,e){var n=[e];bt("argMin",n,t.rank);var r=gt(t.shape,n),o=r[0],i=v(r[1]),a=t.as2D(-1,i);return this.argReduce(a,"min").reshape(o)},t.prototype.argMax=function(t,e){var n=[e];bt("argMax",n,t.rank);var r=gt(t.shape,n),o=r[0],i=v(r[1]),a=t.as2D(-1,i);return this.argReduce(a,"max").reshape(o)},t.prototype.cumsum=function(t,e,n,r){if(e!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+e);var o=new function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,o=t[t.length-1],i=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+o+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+fi(r)+" coords = getOutputCoords();\n        int end = "+mi(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+o+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+i+" end) {\n            continue;\n          }\n          if (idx == end && "+e+") {\n            continue;\n          }\n          "+mi(r,"coords")+" = idx;\n          val += getX("+function(t,e){if(1===t)return""+e;if(2===t)return e+".x, "+e+".y";if(3===t)return e+".x, "+e+".y, "+e+".z";if(4===t)return e+".x, "+e+".y, "+e+".z, "+e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "}(t.shape,n,r);return this.compileAndRun(o,[t])},t.prototype.equal=function(t,e){var n=new ai("return float(a == b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.notEqual=function(t,e){var n=new ai("return float(a != b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.less=function(t,e){var n=new ai("return float(a < b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.lessEqual=function(t,e){var n=new ai("return float(a <= b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.greater=function(t,e){var n=new ai("return float(a > b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.greaterEqual=function(t,e){var n=new ai("return float(a >= b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.logicalNot=function(t){var e=new ka(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(e,[t])},t.prototype.logicalAnd=function(t,e){var n=new ai("return float(a >= 1.0 && b >= 1.0);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.logicalOr=function(t,e){var n=new ai("return float(a >= 1.0 || b >= 1.0);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.where=function(t,e,n,r){var o=new function(t,e,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)o="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],u=0;u<e.length;u++)s.push(""+i[u]),u<t&&a.push(""+i[u]);r=a.join(),o=s.join()}var l=fi(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+o+"));\n        } else {\n          setOutput(getB("+o+"));\n        }\n      }\n    "}(t.rank,e.shape,e.rank),i=this.makeOutputArray(o.outputShape,r);return this.compileAndRun(o,[t,e,n],i)},t.prototype.topKValues=function(t,e){throw new Error("topKValues GPU not yet implemented!")},t.prototype.topKIndices=function(t,e){throw new Error("topKIndices GPU not yet implemented!")},t.prototype.min=function(t,e){bt("min",e,t.rank);var n=gt(t.shape,e),r=n[0],o=v(n[1]),i=t.as2D(-1,o);return this.reduce(i,"min",i.dtype).reshape(r)},t.prototype.minimum=function(t,e){var n=new ai("\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n\n  return min(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.mod=function(t,e){var n=new ai("if (b == 0.0) return NAN;\n  return mod(a, b);",t.shape,e.shape),r=n.getCustomSetupFunc();return this.compileAndRun(n,[t,e],null,r)},t.prototype.max=function(t,e){bt("max",e,t.rank);var n=gt(t.shape,e),r=n[0],o=v(n[1]),i=t.as2D(-1,o);return this.reduce(i,"max",i.dtype).reshape(r)},t.prototype.maximum=function(t,e){var n=new ai("\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n\n  return max(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.all=function(t,e){bt("all",e,t.rank);var n=gt(t.shape,e),r=n[0],o=v(n[1]),i=t.as2D(-1,o);return this.reduce(i,"all",i.dtype).reshape(r)},t.prototype.any=function(t,e){bt("any",e,t.rank);var n=gt(t.shape,e),r=n[0],o=v(n[1]),i=t.as2D(-1,o);return this.reduce(i,"any",i.dtype).reshape(r)},t.prototype.squaredDifference=function(t,e){var n=new ai("return (a - b) * (a - b);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.realDivide=function(t,e){var n=new ai("if (a == b) return 1.0;\n  return a / b;",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[t,e],r)},t.prototype.floorDiv=function(t,e){var n=new ai("\n  float resultSign = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  int result = ia / ib;\n  int amodb = ia - ib * result;\n\n  if (resultSign < 0.0 && amodb != 0) {\n    result -= 1;\n  }\n  return float(result);\n",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"int32");return this.compileAndRun(n,[t,e],r)},t.prototype.add=function(t,e){var n=new ai("return a + b;",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,zr(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],r)},t.prototype.subtract=function(t,e){var n=new ai("return a - b;",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,zr(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],r)},t.prototype.pow=function(t,e){var n=new ai("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nreturn (round(mod(b, 2.0)) == 0 || round(mod(b, 2.0)) == 2) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",t.shape,e.shape),r=n.getCustomSetupFunc(),o=this.makeOutputArray(n.outputShape,zr(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],o,r)},t.prototype.ceil=function(t){var e=new ka(t.shape,"return ceil(x);");return this.compileAndRun(e,[t])},t.prototype.floor=function(t){var e=new ka(t.shape,"return floor(x);");return this.compileAndRun(e,[t])},t.prototype.sign=function(t){var e=new ka(t.shape,"\n  if (isNaN(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(e,[t])},t.prototype.round=function(t){var e=new ka(t.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(e,[t])},t.prototype.exp=function(t){var e=new ka(t.shape,"return exp(x);");return this.compileAndRun(e,[t])},t.prototype.expm1=function(t){var e=new ka(t.shape,"return exp(x) - 1.0;");return this.compileAndRun(e,[t])},t.prototype.log=function(t){var e=new ka(t.shape,"if (x < 0.0) return NAN;\n  return log(x);"),n=e.getCustomSetupFunc();return this.compileAndRun(e,[t],null,n)},t.prototype.log1p=function(t){var e=new ka(t.shape,"return log(1.0 + x);");return this.compileAndRun(e,[t])},t.prototype.sqrt=function(t){var e=new ka(t.shape,"return sqrt(x);");return this.compileAndRun(e,[t])},t.prototype.rsqrt=function(t){var e=new ka(t.shape,"return inversesqrt(x);");return this.compileAndRun(e,[t])},t.prototype.square=function(t){var e=new ka(t.shape,"return x * x;");return this.compileAndRun(e,[t])},t.prototype.reciprocal=function(t){var e=new ka(t.shape,"return 1.0 / x;");return this.compileAndRun(e,[t])},t.prototype.relu=function(t){var e=new ka(t.shape,"if (isNaN(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n");return this.compileAndRun(e,[t])},t.prototype.elu=function(t){var e=new ka(t.shape,"return (x >= 0.0) ? x : (exp(x) - 1.0);");return this.compileAndRun(e,[t])},t.prototype.eluDer=function(t,e){var n=new ai("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.selu=function(t){var e=new ka(t.shape,"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n");return this.compileAndRun(e,[t])},t.prototype.int=function(t){var e=new ka(t.shape,"return float(int(x));"),n=this.makeOutputArray(e.outputShape,"int32");return this.compileAndRun(e,[t],n)},t.prototype.clip=function(t,e,n){var r=new function(t,e,n){this.variableNames=["A"],this.outputShape=t;var r=e.toFixed(20),o=n.toFixed(20);this.userCode="\n      void main() {\n        float value = getAAtOutCoords();\n        if (isNaN(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, "+r+", "+o+"));\n      }\n    "}(t.shape,e,n);return this.compileAndRun(r,[t])},t.prototype.abs=function(t){var e=new ka(t.shape,"return abs(x);");return this.compileAndRun(e,[t])},t.prototype.sigmoid=function(t){var e=new ka(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(e,[t])},t.prototype.softplus=function(t){var e=new ka(t.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(e,[t])},t.prototype.sin=function(t){var e=new ka(t.shape,"if (isNaN(x)) return x;\n  return sin(x);\n");return this.compileAndRun(e,[t])},t.prototype.cos=function(t){var e=new ka(t.shape,"if (isNaN(x)) return x;\n  return cos(x);\n");return this.compileAndRun(e,[t])},t.prototype.tan=function(t){var e=new ka(t.shape,"return tan(x);");return this.compileAndRun(e,[t])},t.prototype.asin=function(t){var e=new ka(t.shape,"return asin(x);");return this.compileAndRun(e,[t])},t.prototype.acos=function(t){var e=new ka(t.shape,"return acos(x);");return this.compileAndRun(e,[t])},t.prototype.atan=function(t){var e=new ka(t.shape,"if (isNaN(x)) return x;\n  return atan(x);\n");return this.compileAndRun(e,[t])},t.prototype.atan2=function(t,e){var n=new ai("\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n\n  return atan(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.sinh=function(t){var e=new ka(t.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},t.prototype.cosh=function(t){var e=new ka(t.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},t.prototype.tanh=function(t){var e=new ka(t.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(e,[t])},t.prototype.asinh=function(t){var e=new ka(t.shape,"return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(e,[t])},t.prototype.acosh=function(t){var e=new ka(t.shape,"if (isNaN(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));"),n=e.getCustomSetupFunc();return this.compileAndRun(e,[t],null,n)},t.prototype.atanh=function(t){var e=new ka(t.shape,"if (isNaN(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;"),n=e.getCustomSetupFunc();return this.compileAndRun(e,[t],null,n)},t.prototype.erf=function(t){var e=new ka(t.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float t = 1.0 / (1.0 + p * x);\n  return 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x);\n');return this.compileAndRun(e,[t])},t.prototype.step=function(t,e){var n=new ka(t.shape,function(t){return void 0===t&&(t=0),"if (isNaN(x)) return x;\n    return x > 0.0 ? 1.0 : float("+t+");\n  "}(e));return this.compileAndRun(n,[t])},t.prototype.conv2d=function(t,e,n){var r=new function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.top,n=t.padInfo.left,r=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,a=t.dilationWidth,s=t.filterHeight,u=t.filterWidth,l=4*Math.floor(t.inChannels/4),c=t.inChannels%4;this.userCode="\n      const ivec2 strides = ivec2("+r+", "+o+");\n      const ivec2 pads = ivec2("+e+", "+n+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+"; wR++) {\n          int xR = xRCorner + wR * "+i+";\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC * "+a+";\n\n            if (xC < 0 || xC >= "+t.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+l+"; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if ("+(1===c)+") {\n              dotProd +=\n                getX(batch, xR, xC, "+l+") *\n                getW(wR, wC, "+l+", d2);\n            } else if ("+(2===c)+") {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, "+l+"),\n                getX(batch, xR, xC, "+l+" + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, "+l+", d2),\n                getW(wR, wC, "+l+" + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if ("+(3===c)+") {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, "+l+"),\n                getX(batch, xR, xC, "+l+" + 1),\n                getX(batch, xR, xC, "+l+" + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, "+l+", d2),\n                getW(wR, wC, "+l+" + 1, d2),\n                getW(wR, wC, "+l+" + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[t,e])},t.prototype.conv2dDerInput=function(t,e,n){var r=new function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[t,e])},t.prototype.conv2dDerFilter=function(t,e,n){var r=new function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+t.strideHeight+" - "+t.padInfo.top+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+t.strideWidth+" - "+t.padInfo.left+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[t,e])},t.prototype.depthwiseConv2D=function(t,e,n){var r=new function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 strides = ivec2("+t.strideHeight+", "+t.strideWidth+");\n      const ivec2 pads = ivec2("+t.padInfo.top+", "+t.padInfo.left+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+e+";\n        int q = d2 - d1 * "+e+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+t.filterHeight+"; wR++) {\n          int xR = xRCorner + wR * "+t.dilationHeight+";\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+t.filterWidth+"; wC++) {\n            int xC = xCCorner + wC * "+t.dilationWidth+";\n\n            if (xC < 0 || xC >= "+t.inWidth+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[t,e])},t.prototype.depthwiseConv2DDerInput=function(t,e,n){var r=new function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TODO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+r+"; dm++) {\n              int d2 = d1 * "+r+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[t,e])},t.prototype.depthwiseConv2DDerFilter=function(t,e,n){var r=new function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+t.outChannels/t.inChannels+" + dm;\n\n        float dotProd = 0.0;\n\n        // TODO: Vec4 over the batch size\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+t.strideHeight+" - "+t.padInfo.top+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+t.strideWidth+" - "+t.padInfo.left+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[t,e])},t.prototype.maxPool=function(t,e){var n=new Ea(e,"max",!1),r=this.makeOutputArray(n.outputShape,t.dtype);return this.compileAndRun(n,[t],r)},t.prototype.avgPool=function(t,e){var n=new Ea(e,"avg",!1),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[t],r)},t.prototype.maxPoolBackprop=function(t,e,n,r){var o=new Ea(r,"max",!0),i=this.compileAndRun(o,[e]),a=new function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+(e*n-1)+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+n+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(r),s=this.makeOutputArray(a.outputShape,e.dtype),u=this.compileAndRun(a,[t,i],s);return i.dispose(),u},t.prototype.avgPoolBackprop=function(t,e,n){var r=new function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(e-1-t.padInfo.top)+", "+(n-1-t.padInfo.left)+");\n      const float avgMultiplier = float("+1/(e*n)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n),o=this.makeOutputArray(r.outputShape,e.dtype);return this.compileAndRun(r,[t],o)},t.prototype.cast=function(t,e){return oi(t,e,this)},t.prototype.reshape=function(t,e){return ii(t,e)},t.prototype.resizeBilinear=function(t,e,n,r){var o=new function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[1],i=t[2];this.outputShape=[t[0],e,n,t[3]];var a=[r&&e>1?o-1:o,r&&n>1?i-1:i],s=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+a[0]/s[0]+",\n          "+a[1]/s[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "}(t.shape,e,n,r);return this.compileAndRun(o,[t])},t.prototype.resizeBilinearBackprop=function(t,e,n){var r=new function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],i=r[2],a=t.shape,s=a[1],u=a[2],l=[n&&s>1?o-1:o,n&&u>1?i-1:i],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],p=l[0]/c[0],f=l[1]/c[1],h=1/p,d=1/f,m=2*Math.ceil(h)+2,g=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+p+");\n        const float widthScale = float("+f+");\n\n        const float invHeightScale = float("+h+");\n        const float invWidthScale = float("+d+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(o-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(i-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "}(t,e,n);return this.compileAndRun(r,[t])},t.prototype.resizeNearestNeighbor=function(t,e,n,r){var o=new function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[1],i=t[2];this.outputShape=[t[0],e,n,t[3]];var a=[r&&e>1?o-1:o,r&&n>1?i-1:i],s=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+a[0]/s[0]+",\n          "+a[1]/s[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+(r?"0.5":"0.0")+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "}(t.shape,e,n,r);return this.compileAndRun(o,[t])},t.prototype.resizeNearestNeighborBackprop=function(t,e,n){var r=new function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],i=r[2],a=t.shape,s=a[1],u=a[2],l=[n&&s>1?o-1:o,n&&u>1?i-1:i],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],p=l[0]/c[0],f=l[1]/c[1],h=1/p,d=1/f,m=2*Math.ceil(h)+2,g=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+p+");\n        const float widthScale = float("+f+");\n\n        const float invHeightScale = float("+h+");\n        const float invWidthScale = float("+d+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+l[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+l[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "}(t,e,n);return this.compileAndRun(r,[t])},t.prototype.multinomial=function(t,e,n,r){var o=e?t:_o(t),i=new Ca(o.shape[0],o.shape[1],n),a=this.makeOutputArray(i.outputShape,"int32"),s=i.getCustomSetupFunc(r);return this.compileAndRun(i,[o],a,s)},t.prototype.oneHot=function(t,e,n,r){var o=new function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "}(t.size,e,n,r);return this.compileAndRun(o,[t])},t.prototype.makeOutputArray=function(t,e){return Q.make(t,{},e)},t.prototype.compileAndRun=function(t,e,n,r,o){var i=this;void 0===o&&(o=!0),null==n&&(n=this.makeOutputArray(t.outputShape,e[0].dtype));var a=e.map(function(t){var e=i.texData.get(t.dataId);return null==e.texture&&t.size<=32?{tensor:t,texData:null,isUniform:!0}:(i.uploadToGPU(t.dataId),{tensor:t,texData:e,isUniform:!1})});this.uploadToGPU(n.dataId);var s,u={tensor:n,texData:this.texData.get(n.dataId),isUniform:!1},l=function(t,e,n){var r="";a.concat(u).forEach(function(t){r+=t.tensor.shape+"_"+(t.isUniform?"uniform":t.texData.texShape)});var o=t.userCode,i=(!0===t.supportsBroadcasting).toString();return t.constructor.name+"_"+i+"_"+r+"_"+o}(t),c=this.getAndSaveBinary(l,function(){return function(t,e,n,r){for(var o=e.userCode,i=n.map(function(t,n){return{name:e.variableNames[n],shapeInfo:{logicalShape:t.tensor.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform}}}),a=i.map(function(t){return t.shapeInfo}),s={logicalShape:r.tensor.shape,texShape:r.texData.texShape,isUniform:!1},u=function(t,e,n,r){var o=t.map(function(t){var e=v(t.shapeInfo.logicalShape);return t.shapeInfo.isUniform?"uniform float "+t.name+(e>1?"["+e+"]":"")+";":"uniform sampler2D "+t.name+";"});o=o.join("\n");var i=t.map(function(t){return function(t,e,n){var r=function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1)+"Flat",r=v(t.shapeInfo.logicalShape);if(t.shapeInfo.isUniform)return 1===r?"float "+n+"(int index) {return "+e+";}":"\n      float "+n+"(int index) {\n        for (int i = 0; i < "+r+"; i++) {\n          if (i == index) {\n            return "+e+"[i];\n          }\n        }\n      }\n    ";var o=t.shapeInfo.texShape,i=o[0],a=o[1];return 1===a&&1===i?"\n      float "+n+"(int index) {\n        return sampleTexture("+e+", halfCR);\n      }\n    ":1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index) + 0.5) / "+i+".0);\n        return sampleTexture("+e+", uv);\n      }\n    ":1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index) + 0.5) / "+a+".0, 0.5);\n        return sampleTexture("+e+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = UVfrom1D("+i+", "+a+", index);\n      return sampleTexture("+e+", uv);\n    }\n  "}(t);return r+=function t(e){var n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);return t.shapeInfo.isUniform?"float "+n+"() {return "+e+";}":"\n    float "+n+"() {\n      return sampleTexture("+e+", halfCR);\n    }\n  "}(e);case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);return"\n    float "+n+"(int index) {\n      return "+n+"Flat(index);\n    }\n  "}(e);case 2:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&y(n,i))return"\n    float "+o+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+i[1]+".0, "+i[0]+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ";var a=N(n),s=a.newShape,u=a.keptDims;if(s.length<n.length)return"\n      "+t(hi(e,s))+"\n      float "+o+"(int row, int col) {\n        return "+o+"("+di(["row","col"],u)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col) {\n        int index = row * "+n[1]+" + col;\n        return "+o+"Flat(index);\n      }\n    ";var l=i[0],c=i[1];return 1===c?"\n    float "+o+"(int row, int col) {\n      int index = row * "+n[1]+" + col;\n      vec2 uv = vec2(0.5, (float(index) + 0.5) / "+l+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ":1===l?"\n    float "+o+"(int row, int col) {\n      int index = row * "+n[1]+" + col;\n      vec2 uv = vec2((float(index) + 0.5) / "+c+".0, 0.5);\n      return sampleTexture("+r+", uv);\n    }\n  ":"\n  float "+o+"(int row, int col) {\n    vec2 uv = UVfrom2D("+l+", "+c+", "+n[1]+", row, col);\n    return sampleTexture("+r+", uv);\n  }\n"}(e);case 3:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],a=n[2],s=N(n),u=s.newShape,l=s.keptDims;if(u.length<n.length)return"\n        "+t(hi(e,u))+"\n        float "+o+"(int row, int col, int depth) {\n          return "+o+"("+di(["row","col","depth"],l)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth) {\n        int index = row * "+i+" + col * "+a+" + depth;\n        return "+o+"Flat(index);\n      }\n    ";var c=e.shapeInfo.texShape,p=c[0],f=c[1];return f===i?"\n        float "+o+"(int row, int col, int depth) {\n          int texR = row;\n          int texC = col * "+a+" + depth;\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+f+".0, "+p+".0);\n          return sampleTexture("+r+", uv);\n        }\n      ":f===a?"\n    float "+o+"(int row, int col, int depth) {\n      int texR = row * "+n[1]+" + col;\n      int texC = depth;\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+f+".0, "+p+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ":"\n      float "+o+"(int row, int col, int depth) {\n        vec2 uv = UVfrom3D(\n            "+p+", "+f+", "+i+", "+a+", row, col, depth);\n        return sampleTexture("+r+", uv);\n      }\n  "}(e);case 4:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],a=n[2]*i,s=n[1]*a,u=N(n),l=u.newShape,c=u.keptDims;if(l.length<n.length)return"\n      "+t(hi(e,l))+"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        return "+o+"("+di(["row","col","depth","depth2"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        int index = row * "+s+" + col * "+a+" +\n            depth * "+i+" + depth2;\n        return "+o+"Flat(index);\n      }\n    ";var p=e.shapeInfo.texShape,f=p[0],h=p[1];return h===s?"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        int texR = row;\n        int texC = col * "+a+" + depth * "+i+" + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+h+".0, "+f+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":h===i?"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        int texR = row * "+n[1]*n[2]+" + col * "+n[2]+" + depth;\n        int texC = depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+h+".0, "+f+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+o+"(int row, int col, int depth, int depth2) {\n      vec2 uv = UVfrom4D("+f+", "+h+", "+s+", "+a+",\n          "+i+", row, col, depth, depth2);\n      return sampleTexture("+r+", uv);\n    }\n  "}(e);case 5:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[4],a=n[3]*i,s=n[2]*a,u=n[1]*s,l=N(n),c=l.newShape,p=l.keptDims;if(c.length<n.length)return"\n      "+t(hi(e,c))+"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+o+"("+di(["row","col","depth","depth2","depth3"],p)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        int index = row * "+u+" + col * "+s+" +\n            depth * "+a+" + depth2 * "+i+" + depth3;\n        return "+o+"Flat(index);\n      }\n    ";var f=e.shapeInfo.texShape,h=f[0],d=f[1];return d===u?"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        int texC = col * "+s+" + depth * "+a+" +\n                   depth2 * "+i+" + depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+d+".0, "+h+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":d===i?"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row * "+n[1]*n[2]+" + col * "+n[2]+" +\n                   depth * "+n[3]+" + depth2;\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+d+".0, "+h+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n      vec2 uv = UVfrom5D("+h+", "+d+", "+u+", "+s+",\n          "+a+", "+i+", row, col, depth, depth2, depth3);\n      return sampleTexture("+r+", uv);\n    }\n  "}(e);case 6:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[5],a=n[4]*i,s=n[3]*a,u=n[2]*s,l=n[1]*u,c=N(n),p=c.newShape,f=c.keptDims;if(p.length<n.length)return"\n      "+t(hi(e,p))+"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+o+"("+di(["row","col","depth","depth2","depth3","depth4"],f)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = row * "+l+" + col * "+u+" +\n            depth * "+s+" + depth2 * "+a+" + depth3 * "+a+"\n            + depth4\n        return "+o+"Flat(index);\n      }\n    ";var h=e.shapeInfo.texShape,d=h[0],m=h[1];return m===l?"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        int texC = col * "+u+" + depth * "+s+" + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+d+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":m===i?"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row * "+n[1]*n[2]+" + col * "+n[2]+" + depth;\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+d+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+o+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      vec2 uv = UVfrom6D("+d+", "+m+", "+l+", "+u+",\n          "+s+", "+a+", "+i+"\n          ,row, col, depth, depth2, depth3, depth4);\n      return sampleTexture("+r+", uv);\n    }\n  "}(e);default:throw new Error(n.length+"-D input sampling is not yet supported")}}(t),(n||y(t.shapeInfo.logicalShape,e.logicalShape))&&(r+=function(t,e,n){var r=t.name,o=r.charAt(0).toUpperCase()+r.slice(1),i="get"+o+"AtOutCoords",a=Te(t.shapeInfo.logicalShape,e.logicalShape),s=n&&(e.logicalShape.length>t.shapeInfo.logicalShape.length||a.length>0),u=function(t){for(var e=0;e<t.length;e++)if(t[e]!==e)return!1;return!0}(a),l=t.shapeInfo.isUniform;if(s&&!u)return function(t,e,n,r){var o=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,a="int";2===i?a="ivec2":3===i?a="ivec3":4===i&&(a="ivec4");var s=Te(t.shapeInfo.logicalShape,e.logicalShape),u=i-o;return"\n    float "+r+"() {\n      "+a+" coords = getOutputCoords();\n      "+(0===o?"":i<2&&s.length>=1?"coords = 0;":s.map(function(t){return"coords["+(t+u)+"] = 0;"}).join("\n"))+"\n      return get"+n+"("+(i<2&&o>0?"coords":t.shapeInfo.logicalShape.map(function(t,e){return"coords["+(e+u)+"]"}).join(", "))+");\n    }\n  "}(t,e,o,i);var c=v(t.shapeInfo.logicalShape),p="";s&&u&&(p="\n        int mainPart = index / "+c+";\n        index -= mainPart * "+c+";\n      ");var f=e.texShape;if(l)return 1===c?"float "+i+"() {return "+r+";}":"\n      float "+i+"() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                              vec2("+f[0]+", "+f[1]+"));\n        int index = resTexRC.x * "+f[1]+" + resTexRC.y;\n        "+p+"\n        return get"+o+"Flat(index);\n      }\n    ";var h=t.shapeInfo.texShape;return y(h,f)?"\n      float "+i+"() {\n        return sampleTexture("+r+", resultUV);\n      }\n    ":"\n    float "+i+"() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+f[0]+", "+f[1]+"));\n      int index = resTexRC.x * "+f[1]+" + resTexRC.y;\n      "+p+"\n      int texR = index / "+h[1]+";\n      int texC = index - texR * "+h[1]+";\n      vec2 uv = (vec2(texC, texR) + halfCR) /\n                 vec2("+h[1]+".0, "+h[0]+".0);\n\n      return sampleTexture("+r+", uv);\n    }\n  "}(t,e,n)),r}(t,e,r)}).join("\n"),a=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){return 1===e[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+e[1]+".0);\n      }\n    ":1===e[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+e[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      return resTexRC.x * "+e[1]+" + resTexRC.y;\n    }\n  "}(0,e);case 2:return function(t,e){return y(t,e)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+e[0]+", "+e[1]+"));\n      }\n    ":1===t[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===t[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      int r = index / "+t[1]+";\n      int c = index - r * "+t[1]+";\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return function(t,e){var n=t[1]*t[2],r=t[2];return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      int r = index / "+n+";\n      index -= r * "+n+";\n      int c = index / "+r+";\n      int d = index - c * "+r+";\n      return ivec3(r, c, d);\n    }\n  "}(t,e);case 4:return function(t,e){var n=t[3],r=t[2]*n,o=t[1]*r;return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      int r = index / "+o+";\n      index -= r * "+o+";\n\n      int c = index / "+r+";\n      index -= c * "+r+";\n\n      int d = index / "+n+";\n      int d2 = index - d * "+n+";\n\n      return ivec4(r, c, d, d2);\n    }\n  "}(t,e);case 5:return function(t,e){var n=t[4],r=t[3]*n,o=t[2]*r,i=t[1]*o;return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+e[0]+",\n                             "+e[1]+"));\n\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      int r = index / "+i+";\n      index -= r * "+i+";\n\n      int c = index / "+o+";\n      index -= c * "+o+";\n\n      int d = index / "+r+";\n      index -= d * "+r+";\n\n      int d2 = index  / "+n+";\n      int d3 = index - d2 * "+n+";\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(t,e);case 6:return function(t,e){var n=t[5],r=t[4]*n,o=t[3]*r,i=t[2]*o,a=t[1]*i;return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      int r = index / "+a+";\n      index -= r * "+a+";\n\n      int c = index / "+i+";\n      index -= c * "+i+";\n\n      int d = index / "+o+";\n      index -= d * "+o+";\n\n      int d2 = index / "+r+";\n      index -= d2 * "+r+";\n\n      int d3 = index / "+n+";\n      int d4 = index - d3 * "+n+";\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}}(e.logicalShape,e.texShape);return[pi,li,ci,o,a,i,n].join("\n")}(i,s,o,!0===e.supportsBroadcasting),l=t.createProgram(u),c={},p=0;p<e.variableNames.length;p++){var f=e.variableNames[p];c[f]=t.getUniformLocation(l,f,!1)}return{program:e,source:u,webGLProgram:l,uniformLocations:c,gpgpu:t,inShapeInfos:a,outShapeInfo:s}}(i.gpgpu,t,a,u)}),p=null!=this.activeTimers;if(p&&(s=this.startTimer()),function(t,e,n,r){Oa(t.inShapeInfos,e),Oa([t.outShapeInfo],[n]);var o=n.texData.texShape,i=t.gpgpu;i.setOutputMatrixTexture(n.texData.texture,o[0],o[1]),i.setProgram(t.webGLProgram),e.forEach(function(e,n){var r=t.uniformLocations[t.program.variableNames[n]];if(null!=r){if(e.isUniform){if(1===e.tensor.size)i.gl.uniform1f(r,e.tensor.dataSync()[0]);else{var o=e.tensor.dataSync();o instanceof Float32Array||(o=new Float32Array(o)),i.gl.uniform1fv(r,o)}return}i.setInputMatrixTexture(e.texData.texture,r,n)}}),null!=r&&r(i,t.webGLProgram),i.executeProgram()}(c,a,u,r),o&&this.numBytesInGPU>this.NUM_BYTES_BEFORE_PAGING)for(var f=this.numBytesInGPU-this.NUM_BYTES_BEFORE_PAGING;f>0&&this.lruDataGPU.length>0;){var h=this.lruDataGPU.shift(),d=this.texData.get(h);f-=this.computeBytes(d.shape,d.dtype),this.read(h)}return p&&(s=this.endTimer(s),this.activeTimers.push(this.getQueryTime(s))),n},t.prototype.getAndSaveBinary=function(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){if(!this.disposed){for(var t in this.binaryCache)this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram);this.textureManager.dispose(),this.canvas.remove(),null!=this.fromPixelsCanvas&&this.fromPixelsCanvas.remove(),this.gpgpuCreatedLocally&&this.gpgpu.dispose(),this.disposed=!0}},t.prototype.throwIfNoData=function(t){if(!this.texData.has(t))throw new Error("WebGL backend: No data found for this tensor. Did you change your backend in the middle of the program? New backends can't use Tensors created with previous backends")},t.prototype.uploadToGPU=function(t){this.throwIfNoData(t);var e=this.texData.get(t),n=e.shape,r=e.values,o=e.usage;if(null==e.texture){var i,a=null!=this.activeTimers;a&&(i=performance.now());var s=ta(this.gpgpu.gl,n);e.texShape=s;var u=this.acquireTexture(t,s,o);e.texture=u,null!=r&&(this.gpgpu.uploadMatrixToTexture(u,s[0],s[1],r instanceof Float32Array?r:new Float32Array(r)),e.values=null,a&&(this.uploadWaitMs+=performance.now()-i))}else this.lruDataGPU.indexOf(t)>=0&&(this.lruDataGPU.splice(this.lruDataGPU.indexOf(t),1),this.lruDataGPU.push(t))},t.prototype.cacheOnCPU=function(t,e){var n=this.delayedStorage,r=this.texData.get(t),o=r.texture,i=r.dtype;n&&null!=o&&(this.releaseTexture(t,o,r.texShape,r.usage),r.texture=null,r.texShape=null),null!=e&&(r.values=function(t,e){if("float32"===e)return t;if("int32"===e||"bool"===e){for(var n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length),r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}throw new Error("Unknown dtype "+e)}(e,i))},t.prototype.releaseTexture=function(t,e,n,r){var o=this.texData.get(t),i=o.shape,a=o.dtype,s=this.lruDataGPU.indexOf(t);s>=0&&this.lruDataGPU.splice(s,1),this.numBytesInGPU-=this.computeBytes(i,a),this.textureManager.releaseTexture(e,n,r)},t.prototype.acquireTexture=function(t,e,n){var r=this.texData.get(t),o=r.shape,i=r.dtype;return this.lruDataGPU.push(t),this.numBytesInGPU+=this.computeBytes(o,i),this.textureManager.acquireTexture(e,n)},t.prototype.computeBytes=function(t,e){return v(t)*A(e)},t}();dt.get("IS_BROWSER")&&dt.registerBackend("webgl",function(){return new Aa},2,K);var Ra=function(){function t(){this.data=new WeakMap,this.firstUse=!0,dt.get("IS_BROWSER")&&(this.canvas=document.createElement("canvas"))}return t.prototype.register=function(t,e,n){if(this.firstUse&&(this.firstUse=!1,dt.get("IS_NODE")&&!dt.get("IS_TEST")&&console.warn("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================\n")),this.data.has(t))throw new Error("Data buffer is already registered");this.data.set(t,null)},t.prototype.write=function(t,e){if(null==e)throw new Error("MathBackendCPU.write(): values can not be null");this.throwIfNoData(t),this.data.set(t,e)},t.prototype.fromPixels=function(t,e){if(null==t)throw new Error("pixels passed to tf.fromPixels() can not be null");var n,r;if(dt.get("IS_NODE")&&null==t.getContext)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(null!=t.getContext)n=t.getContext("2d").getImageData(0,0,t.width,t.height).data;else if(t instanceof ImageData)n=t.data;else{if(!(t instanceof HTMLImageElement||t instanceof HTMLVideoElement))throw new Error("pixels passed to tf.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+t.constructor.name);if(null==this.canvas)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.canvas.width=t.width,this.canvas.height=t.height,this.canvas.getContext("2d").drawImage(t,0,0,t.width,t.height),n=this.canvas.getContext("2d").getImageData(0,0,t.width,t.height).data}if(4===e)r=new Int32Array(n);else{var o=t.width*t.height;r=new Int32Array(o*e);for(var i=0;i<o;i++)for(var a=0;a<e;++a)r[i*e+a]=n[4*i+a]}return Zt(r,[t.height,t.width,e],"int32")},t.prototype.read=function(t){return s(this,void 0,void 0,function(){return u(this,function(e){return[2,this.readSync(t)]})})},t.prototype.readSync=function(t){return this.throwIfNoData(t),this.data.get(t)},t.prototype.disposeData=function(t){this.data.has(t)&&this.data.delete(t)},t.prototype.time=function(t){return s(this,void 0,void 0,function(){var e;return u(this,function(n){return e=V(),t(),[2,{kernelMs:V()-e}]})})},t.prototype.memory=function(){return{unreliable:!0}},t.prototype.throwIfNoData=function(t){if(!this.data.has(t))throw new Error("CPU backend: No data found for this tensor. Did you change your backend in the middle of the program? New backends can't use Tensors created with previous backends")},t.prototype.slice=function(t,e,n){for(var r=ie(n,t.dtype),o=0;o<r.size;++o){var i=r.indexToLoc(o),a=i.map(function(t,n){return t+e[n]});r.set.apply(r,[t.get.apply(t,a)].concat(i))}return r.toTensor()},t.prototype.stridedSlice=function(t,e,n,r,o,i){var a=Hn(t.shape,e,n,r,o,i),s=a[0],u=a[1];if(u.some(function(t){return 0===t}))return Kt([],u);for(var l=ie(u,t.dtype),c=0;c<l.size;c++){for(var p=l.indexToLoc(c),f=new Array(p.length),h=0;h<f.length;h++)f[h]=p[h]*r[h]+s[h];l.set.apply(l,[t.get.apply(t,f)].concat(p))}return l.toTensor()},t.prototype.reverse=function(t,e){for(var n=ie(t.shape,t.dtype),r=t.buffer(),o=function(o){var i=n.indexToLoc(o),a=i.slice();e.forEach(function(e){return a[e]=t.shape[e]-1-a[e]}),n.set.apply(n,[r.get.apply(r,a)].concat(i))},i=0;i<n.size;i++)o(i);return n.toTensor()},t.prototype.concat=function(t,e){var n=Ot(t.shape,e.shape,1),r=ie(n,t.dtype);if(1===t.shape[0]&&1===e.shape[0]){var o=t.dataSync(),i=e.dataSync(),a=r.values;return a.set(o,0),a.set(i,t.size),r.toTensor()}for(var s=0;s<n[0];++s){for(var u=0;u<t.shape[1];++u)r.set(t.get(s,u),s,u);for(u=0;u<e.shape[1];++u)r.set(e.get(s,u),s,u+t.shape[1])}return r.toTensor()},t.prototype.neg=function(t){return this.multiply(Gt(-1),t)},t.prototype.add=function(t,e){return this.broadcastedBinaryOp(t,e,zr(t.dtype,e.dtype),function(t,e){return t+e})},t.prototype.subtract=function(t,e){return this.broadcastedBinaryOp(t,e,zr(t.dtype,e.dtype),function(t,e){return t-e})},t.prototype.pow=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.pow(t,e)})},t.prototype.matMul=function(t,e,n,r){for(var o=n?t.shape[0]:t.shape[1],i=n?t.shape[1]:t.shape[0],a=r?e.shape[0]:e.shape[1],s=t.dataSync(),u=e.dataSync(),l=n?[1,t.strides[0]]:[t.strides[0],1],c=l[0],p=l[1],f=r?[e.strides[0],1]:[1,e.strides[0]],h=f[0],d=f[1],m=i*c,g=a*h,v=new Float32Array(i*a),y=0,b=0;b<m;b+=c)for(var w=0;w<g;w+=h){for(var x=b,_=w,O=0,C=0;C<o;++C)O+=s[x]*u[_],x+=p,_+=d;v[y++]=O}return Xt(v,[i,a])},t.prototype.multiply=function(t,e){return this.broadcastedBinaryOp(t,e,zr(t.dtype,e.dtype),function(t,e){return t*e})},t.prototype.realDivide=function(t,e){return this.broadcastedBinaryOp(t,e,"float32",function(t,e){return t/e})},t.prototype.floorDiv=function(t,e){return this.broadcastedBinaryOp(t,e,"int32",function(t,e){return Math.floor(t/e)})},t.prototype.sum=function(t,e){bt("sum",e,t.rank);for(var n=gt(t.shape,e),r=n[0],o=n[1],i=zr(t.dtype,"int32"),a=ee(r,i),s=v(o),u=a.dataSync(),l=t.dataSync(),c=0;c<u.length;++c){for(var p=c*s,f=0,h=0;h<s;++h)f+=l[p+h];u[c]=f}return a},t.prototype.unsortedSegmentSum=function(t,e,n){for(var r=[],o=t.rank-e.rank,i=0;i<o;++i)e=e.expandDims(i+1);for(i=0;i<n;++i){var a=Gt(i,"int32"),s=Er(a,e).asType("float32").mul(t).sum(0);r.push(s)}return Se(r)},t.prototype.argMin=function(t,e){var n=[e];bt("argMin",n,t.rank);for(var r=gt(t.shape,n),o=r[1],i=ee(r[0],"int32"),a=v(o),s=i.dataSync(),u=t.dataSync(),l=0;l<s.length;++l){for(var c=l*a,p=u[c],f=0,h=0;h<a;++h){var d=u[c+h];d<p&&(p=d,f=h)}s[l]=f}return i},t.prototype.argMax=function(t,e){var n=[e];bt("argMax",n,t.rank);for(var r=gt(t.shape,n),o=r[1],i=ee(r[0],"int32"),a=v(o),s=i.dataSync(),u=t.dataSync(),l=0;l<s.length;++l){for(var c=l*a,p=u[c],f=0,h=0;h<a;++h){var d=u[c+h];d>p&&(p=d,f=h)}s[l]=f}return i},t.prototype.cumsum=function(t,e,n,r){if(e!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+e);for(var o=zr(t.dtype,"int32"),i=ee(t.shape,o),a=i.dataSync(),s=t.dataSync(),u=t.shape[t.rank-1],l=r?function(t,e){return t+u-e-1}:function(t,e){return t+e},c=0;c<s.length;c+=u)for(var p=0;p<u;p++){var f=l(c,p);if(0===p)a[f]=n?0:s[f];else{var h=l(c,p-1);a[f]=n?s[h]+a[h]:s[f]+a[h]}}return i},t.prototype.equal=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t===e?1:0})},t.prototype.notEqual=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t!==e?1:0})},t.prototype.less=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t<e?1:0})},t.prototype.lessEqual=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t<=e?1:0})},t.prototype.greater=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t>e?1:0})},t.prototype.greaterEqual=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t>=e?1:0})},t.prototype.logicalNot=function(t){for(var e=t.dataSync(),n=new Int32Array(e.length),r=0;r<e.length;++r)n[r]=e[r]?0:1;return Q.make(t.shape,{values:n},"bool")},t.prototype.logicalAnd=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t&&e})},t.prototype.logicalOr=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t||e})},t.prototype.where=function(t,e,n,r){for(var o=t.dataSync(),i=e.dataSync(),a=n.dataSync(),s=ee(e.shape,r),u=s.dataSync(),l=0,c=0===t.rank||t.rank>1||1===e.rank?1:e.shape[1],p=0;p<o.length;p++)for(var f=0;f<c;f++)u[l++]=1===o[p]?i[p]:a[p];return s},t.prototype.topKValues=function(t,e){return this.topK(t,e).values},t.prototype.topKIndices=function(t,e){return this.topK(t,e).indices},t.prototype.topK=function(t,e){for(var n=t.dataSync(),r=[],o=0;o<n.length;o++)r.push({value:n[o],index:o});r.sort(function(t,e){return e.value-t.value});var i=S(t.dtype,e),a=new Int32Array(e);for(o=0;o<e;o++)i[o]=r[o].value,a[o]=r[o].index;return{values:Qt(i,t.dtype),indices:Qt(a,"int32")}},t.prototype.min=function(t,e){bt("min",e,t.rank);for(var n=gt(t.shape,e),r=n[1],o=ee(n[0],t.dtype),i=v(r),a=o.dataSync(),s=t.dataSync(),u=0;u<a.length;++u){for(var l=u*i,c=s[l],p=0;p<i;++p){var f=s[l+p];f<c&&(c=f)}a[u]=c}return o},t.prototype.minimum=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.min(t,e)})},t.prototype.mod=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){var n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})},t.prototype.max=function(t,e){bt("max",e,t.rank);for(var n=gt(t.shape,e),r=n[1],o=ee(n[0],t.dtype),i=v(r),a=o.dataSync(),s=t.dataSync(),u=0;u<a.length;++u){for(var l=u*i,c=s[l],p=0;p<i;++p){var f=s[l+p];f>c&&(c=f)}a[u]=c}return o},t.prototype.maximum=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.max(t,e)})},t.prototype.all=function(t,e){bt("all",e,t.rank);for(var n=gt(t.shape,e),r=n[1],o=ee(n[0],t.dtype),i=v(r),a=o.dataSync(),s=t.dataSync(),u=0;u<a.length;++u){for(var l=u*i,c=s[l],p=0;p<i;++p)c=c&&s[l+p];a[u]=c}return o},t.prototype.any=function(t,e){bt("any",e,t.rank);for(var n=gt(t.shape,e),r=n[1],o=ee(n[0],t.dtype),i=v(r),a=o.dataSync(),s=t.dataSync(),u=0;u<a.length;++u){for(var l=u*i,c=s[l],p=0;p<i;++p)c=c||s[l+p];a[u]=c}return o},t.prototype.squaredDifference=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){var n=t-e;return n*n})},t.prototype.ceil=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.ceil(e[r]);return Q.make(t.shape,{values:n})},t.prototype.floor=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.floor(e[r]);return Q.make(t.shape,{values:n})},t.prototype.sign=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=e[r]<0?-1:e[r]>0?1:0;return Q.make(t.shape,{values:n})},t.prototype.round=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=Math.floor(e[r]);n[r]=e[r]-o<.5?Math.floor(e[r]):e[r]-o>.5?Math.ceil(e[r]):o%2==0?o:o+1}return Q.make(t.shape,{values:n})},t.prototype.exp=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.exp(e[r]);return Q.make(t.shape,{values:n})},t.prototype.expm1=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.expm1(e[r]);return Q.make(t.shape,{values:n})},t.prototype.log=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.log(e[r]);return Q.make(t.shape,{values:n})},t.prototype.log1p=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.log1p(e[r]);return Q.make(t.shape,{values:n})},t.prototype.sqrt=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.sqrt(e[r]);return Q.make(t.shape,{values:n})},t.prototype.rsqrt=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=1/Math.sqrt(e[r]);return Q.make(t.shape,{values:n})},t.prototype.square=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=e[r];n[r]=o*o}return Q.make(t.shape,{values:n})},t.prototype.reciprocal=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=1/e[r];return Q.make(t.shape,{values:n})},t.prototype.relu=function(t){for(var e=ee(t.shape,t.dtype),n=e.dataSync(),r=t.dataSync(),o=0;o<r.length;++o)n[o]=Math.max(0,r[o]);return e},t.prototype.elu=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r){var o=n[r];e[r]=o>=0?o:Math.exp(o)-1}return Q.make(t.shape,{values:e})},t.prototype.eluDer=function(t,e){for(var n=new Float32Array(e.size),r=e.dataSync(),o=t.dataSync(),i=0;i<r.length;++i){var a=r[i];n[i]=a>=1?o[i]:o[i]*(a+1)}return Q.make(e.shape,{values:n})},t.prototype.selu=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r){var o=n[r];e[r]=o>=0?1.0507009873554805*o:1.7580993408473768*(Math.exp(o)-1)}return Q.make(t.shape,{values:e})},t.prototype.clip=function(t,e,n){for(var r=new Float32Array(t.size),o=t.dataSync(),i=0;i<o.length;++i)r[i]=Math.min(n,Math.max(e,o[i]));return Q.make(t.shape,{values:r})},t.prototype.abs=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.abs(n[r]);return Q.make(t.shape,{values:e})},t.prototype.int=function(t){for(var e=new Int32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=n[r];return Q.make(t.shape,{values:e},"int32")},t.prototype.sigmoid=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=1/(1+Math.exp(-n[r]));return Q.make(t.shape,{values:e})},t.prototype.softplus=function(t){for(var e=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(t.size),r=t.dataSync(),o=0;o<r.length;++o){var i,a=r[o]>-e,s=r[o]<e,u=Math.exp(r[o]);i=s?u:a?r[o]:Math.log(1+u),n[o]=i}return Q.make(t.shape,{values:n})},t.prototype.sin=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.sin(n[r]);return Q.make(t.shape,{values:e})},t.prototype.cos=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.cos(n[r]);return Q.make(t.shape,{values:e})},t.prototype.tan=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.tan(n[r]);return Q.make(t.shape,{values:e})},t.prototype.asin=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.asin(n[r]);return Q.make(t.shape,{values:e})},t.prototype.acos=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.acos(n[r]);return Q.make(t.shape,{values:e})},t.prototype.atan=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.atan(n[r]);return Q.make(t.shape,{values:e})},t.prototype.atan2=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.atan2(t,e)})},t.prototype.sinh=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.sinh(n[r]);return Q.make(t.shape,{values:e})},t.prototype.cosh=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.cosh(n[r]);return Q.make(t.shape,{values:e})},t.prototype.tanh=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=w(n[r]);return Q.make(t.shape,{values:e})},t.prototype.asinh=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.asinh(n[r]);return Q.make(t.shape,{values:e})},t.prototype.acosh=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.acosh(n[r]);return Q.make(t.shape,{values:e})},t.prototype.atanh=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.atanh(n[r]);return Q.make(t.shape,{values:e})},t.prototype.erf=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r){var o=n[r],i=1/(1+.3275911*o);e[r]=1-((((1.061405429*i-1.453152027)*i+1.421413741)*i-.284496736)*i+.254829592)*i*Math.exp(-o*o)}return Q.make(t.shape,{values:e})},t.prototype.step=function(t,e){void 0===e&&(e=0);for(var n=new Float32Array(t.size),r=t.dataSync(),o=0;o<r.length;++o){var i=r[o];n[o]=isNaN(i)?NaN:i>0?1:e}return Q.make(t.shape,{values:n})},t.prototype.conv2d=function(t,e,n){for(var r=n.filterHeight,o=n.filterWidth,i=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=ie(n.outShape,t.dtype),c=0;c<n.batchSize;++c)for(var p=0;p<n.outChannels;++p)for(var f=0;f<n.outHeight;++f)for(var h=f*n.strideHeight-s,d=0;d<n.outWidth;++d){for(var m=d*n.strideWidth-u,g=0,v=0;v<r;v++){var y=h+v*i;if(!(y<0||y>=n.inHeight))for(var b=0;b<o;b++){var w=m+b*a;if(!(w<0||w>=n.inWidth))for(var x=0;x<n.inChannels;++x)g+=t.get(c,y,w,x)*e.get(v,b,x,p)}}l.set(g,c,f,d,p)}return l.toTensor()},t.prototype.conv2dDerInput=function(t,e,n){for(var r=ie(n.inShape,"float32"),o=r.values,i=r.strides,a=i[0],s=i[1],u=i[2],l=t.dataSync(),c=t.strides,p=c[0],f=c[1],h=c[2],d=e.dataSync(),m=e.strides,g=m[0],v=m[1],y=m[2],b=n.batchSize,w=n.filterHeight,x=n.filterWidth,_=n.inChannels,O=n.inHeight,C=n.inWidth,E=n.outChannels,N=n.outHeight,S=n.outWidth,I=n.strideHeight,P=n.strideWidth,k=w-1-n.padInfo.top,T=x-1-n.padInfo.left,A=0;A<b;++A)for(var R=0;R<_;++R)for(var M=0;M<O;++M)for(var D=M-k,j=Math.max(0,Math.ceil(D/I)),L=Math.min(N,(w+D)/I),z=0;z<C;++z){for(var V=z-T,B=Math.max(0,Math.ceil(V/P)),F=Math.min(S,(x+V)/P),U=0,W=j;W<L;++W)for(var q=W*I-D,$=B;$<F;++$)for(var H=p*A+f*W+h*$,G=g*(w-1-q)+v*(x-1-($*P-V))+y*R,K=0;K<E;++K)U+=l[H+K]*d[G+K];o[a*A+s*M+u*z+R]=U}return r.toTensor()},t.prototype.conv2dDerFilter=function(t,e,n){for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=ie(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=0;c<i;++c)for(var p=Math.max(0,Math.ceil((l-c)/r)),f=Math.min(n.outHeight,(n.inHeight+l-c)/r),h=0;h<a;++h)for(var d=Math.max(0,Math.ceil((u-h)/o)),m=Math.min(n.outWidth,(n.inWidth+u-h)/o),g=0;g<n.inChannels;++g)for(var v=0;v<n.outChannels;++v){for(var y=0,b=0;b<n.batchSize;++b)for(var w=p;w<f;++w)for(var x=c+w*r-l,_=d;_<m;++_)y+=t.get(b,x,h+_*o-u,g)*e.get(b,w,_,v);s.set(y,c,h,g,v)}return s.toTensor()},t.prototype.depthwiseConv2D=function(t,e,n){for(var r=n.filterHeight,o=n.filterWidth,i=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=n.outChannels/n.inChannels,c=ie(n.outShape,t.dtype),p=0;p<n.batchSize;++p)for(var f=0;f<n.inChannels;++f)for(var h=0;h<n.outHeight;++h)for(var d=h*n.strideHeight-s,m=0;m<n.outWidth;++m)for(var g=m*n.strideWidth-u,v=0;v<l;++v){for(var y=0,b=0;b<r;++b){var w=d+b*i;if(!(w<0||w>=n.inHeight))for(var x=0;x<o;++x){var _=g+x*a;_<0||_>=n.inWidth||(y+=t.get(p,w,_,f)*e.get(b,x,f,v))}}c.set(y,p,h,m,f*l+v)}return c.toTensor()},t.prototype.depthwiseConv2DDerInput=function(t,e,n){for(var r=ie(n.inShape,"float32"),o=r.values,i=r.strides,a=i[0],s=i[1],u=i[2],l=t.dataSync(),c=t.strides,p=c[0],f=c[1],h=c[2],d=e.dataSync(),m=e.strides,g=m[0],v=m[1],y=m[2],b=n.batchSize,w=n.filterHeight,x=n.filterWidth,_=n.inChannels,O=n.inHeight,C=n.inWidth,E=n.outHeight,N=n.outWidth,S=n.strideHeight,I=n.strideWidth,P=w-1-n.padInfo.top,k=x-1-n.padInfo.left,T=n.outChannels/_,A=0;A<b;++A)for(var R=0;R<_;++R)for(var M=0;M<O;++M)for(var D=M-P,j=Math.max(0,Math.ceil(D/S)),L=Math.min(E,(w+D)/S),z=0;z<C;++z){for(var V=z-k,B=Math.max(0,Math.ceil(V/I)),F=Math.min(N,(x+V)/I),U=0,W=j;W<L;++W)for(var q=W*S-D,$=B;$<F;++$)for(var H=p*A+f*W+h*$,G=g*(w-1-q)+v*(x-1-($*I-V))+y*R,K=0;K<T;++K)U+=l[H+(R*T+K)]*d[G+K];o[a*A+s*M+u*z+R]=U}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(t,e,n){for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=ie(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,p=0;p<i;++p)for(var f=Math.max(0,Math.ceil((l-p)/r)),h=Math.min(n.outHeight,(n.inHeight+l-p)/r),d=0;d<a;++d)for(var m=Math.max(0,Math.ceil((u-d)/o)),g=Math.min(n.outWidth,(n.inWidth+u-d)/o),v=0;v<n.outChannels;++v){for(var y=Math.trunc(v/c),b=v%c,w=0,x=0;x<n.batchSize;++x)for(var _=f;_<h;++_)for(var O=p+_*r-l,C=m;C<g;++C)w+=t.get(x,O,d+C*o-u,y)*e.get(x,_,C,v);s.set(w,p,d,y,b)}return s.toTensor()},t.prototype.tile=function(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var o=ie(n,t.dtype),i=t.buffer();for(r=0;r<o.values.length;++r){for(var a=o.indexToLoc(r),s=new Array(t.rank),u=0;u<s.length;u++)s[u]=a[u]%t.shape[u];var l=i.locToIndex(s);o.values[r]=i.values[l]}return o.toTensor()},t.prototype.pad=function(t,e,n){var r=e.map(function(e,n){return e[0]+t.shape[n]+e[1]}),o=e.map(function(t){return t[0]}),i=t.buffer(),a=ie(r,t.dtype);0!==n&&a.values.fill(n);for(var s=0;s<t.size;s++){var u=i.indexToLoc(s),l=u.map(function(t,e){return t+o[e]});a.set.apply(a,[t.get.apply(t,u)].concat(l))}return a.toTensor()},t.prototype.transpose=function(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[e[r]];var o=t.dataSync(),i=ie(n,t.dtype),a=t.buffer();for(r=0;r<t.size;++r){for(var s=a.indexToLoc(r),u=new Array(s.length),l=0;l<u.length;l++)u[l]=s[e[l]];var c=i.locToIndex(u);i.values[c]=o[r]}return i.toTensor()},t.prototype.gather=function(t,e,n){var r=t.shape.slice(),o=e.dataSync();r[n]=o.length;for(var i=ie(r,t.dtype),a=t.buffer(),s=0;s<i.size;++s){var u=i.indexToLoc(s),l=u.slice();l[n]=o[u[n]];var c=a.locToIndex(l);i.values[s]=a.values[c]}return i.toTensor()},t.prototype.pool=function(t,e,n){for(var r=e.strideHeight,o=e.strideWidth,i=e.filterHeight,a=e.filterWidth,s=ie(e.outShape,"float32"),u=e.padInfo.top,l=e.padInfo.left,c=0;c<e.batchSize;++c)for(var p=0;p<e.inChannels;++p)for(var f=0;f<e.outHeight;++f)for(var h=f*r-u,d=Math.max(0,h),m=Math.min(e.inHeight,i+h),g=0;g<e.outWidth;++g){for(var v=g*o-l,y=Math.max(0,v),b=Math.min(e.inWidth,a+v),w="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=0,_=0,O=d;O<m;++O){for(var C=y;C<b;++C){var E=t.get(c,O,C,p);"max"===n&&E>w?w=E:"avg"===n&&(x+=E,_++)}if(isNaN(w))break}s.set("avg"===n?x/_:w,c,f,g,p)}return s.toTensor()},t.prototype.maxPool=function(t,e){return this.pool(t,e,"max")},t.prototype.maxPoolPositions=function(t,e){for(var n=ie(e.outShape,"int32"),r=e.strideHeight,o=e.strideWidth,i=e.filterHeight,a=e.filterWidth,s=e.padInfo.top,u=e.padInfo.left,l=0;l<e.batchSize;++l)for(var c=0;c<e.inChannels;++c)for(var p=0;p<e.outHeight;++p)for(var f=p*r-s,h=Math.max(0,f),d=Math.min(e.inHeight,i+f),m=0;m<e.outWidth;++m){for(var g=m*o-u,v=Math.max(0,g),y=Math.min(e.inWidth,a+g),b=Number.NEGATIVE_INFINITY,w=-1,x=h;x<d;++x)for(var _=x-f,O=v;O<y;++O){var C=O-g,E=t.get(l,x,O,c);E>b&&(b=E,w=_*a+C)}n.set(w,l,p,m,c)}return n.toTensor()},t.prototype.maxPoolBackprop=function(t,e,n,r){for(var o=this.maxPoolPositions(e,r),i=r.strideHeight,a=r.strideWidth,s=r.filterHeight,u=r.filterWidth,l=u-1-r.padInfo.left,c=s-1-r.padInfo.top,p=ie(e.shape,"float32"),f=0;f<r.batchSize;++f)for(var h=0;h<r.inChannels;++h)for(var d=0;d<r.inHeight;++d)for(var m=0;m<r.inWidth;++m){for(var g=d-c,v=m-l,y=0,b=0;b<s;++b){var w=(g+b)/i;if(!(w<0||w>=r.outHeight||Math.floor(w)!==w))for(var x=0;x<u;++x){var _=(v+x)/a;if(!(_<0||_>=r.outWidth||Math.floor(_)!==_)){var O=s*u-1-o.get(f,w,_,h)===b*u+x?1:0;0!==O&&(y+=t.get(f,w,_,h)*O)}}}p.set(y,f,d,m,h)}return p.toTensor()},t.prototype.avgPoolBackprop=function(t,e,n){for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=a-1-n.padInfo.left,u=i-1-n.padInfo.top,l=ie(e.shape,"float32"),c=1/(i*a),p=0;p<n.batchSize;++p)for(var f=0;f<n.inChannels;++f)for(var h=0;h<n.inHeight;++h)for(var d=0;d<n.inWidth;++d){for(var m=h-u,g=d-s,v=0,y=0;y<i;++y){var b=(m+y)/r;if(!(b<0||b>=n.outHeight||Math.floor(b)!==b))for(var w=0;w<a;++w){var x=(g+w)/o;x<0||x>=n.outWidth||Math.floor(x)!==x||(v+=t.get(p,b,x,f))}}l.set(v*c,p,h,d,f)}return l.toTensor()},t.prototype.cast=function(t,e){return oi(t,e,this)},t.prototype.reshape=function(t,e){return ii(t,e)},t.prototype.avgPool=function(t,e){return this.pool(t,e,"avg").toFloat()},t.prototype.resizeBilinear=function(t,e,n,r){for(var o=t.shape,i=o[0],a=o[1],s=o[2],u=o[3],l=ie([i,e,n,u],t.dtype),c=[r&&e>1?a-1:a,r&&n>1?s-1:s],p=[r&&e>1?e-1:e,r&&n>1?n-1:n],f=0;f<i;f++)for(var h=0;h<e;h++)for(var d=0;d<n;d++)for(var m=0;m<u;m++){var g=c[0]*h/p[0],v=c[1]*d/p[1],y=Math.floor(g),b=Math.min(a-1,Math.ceil(g)),w=Math.floor(v),x=Math.min(s-1,Math.ceil(v)),_=t.get(f,y,w,m),O=t.get(f,b,w,m),C=v-w,E=_+(t.get(f,y,x,m)-_)*C,N=E+(O+(t.get(f,b,x,m)-O)*C-E)*(g-y);l.set(N,f,h,d,m)}return l.toTensor()},t.prototype.resizeBilinearBackprop=function(t,e,n){for(var r=e.shape,o=r[0],i=r[1],a=r[2],s=r[3],u=t.shape,l=u[1],c=u[2],p=ie([o,i,a,s],e.dtype),f=[n&&l>1?i-1:i,n&&c>1?a-1:a],h=[n&&l>1?l-1:l,n&&c>1?c-1:c],d=f[0]/h[0],m=f[1]/h[1],g=0;g<o;g++)for(var v=0;v<l;v++)for(var y=v*d,b=Math.floor(y),w=Math.min(Math.ceil(y),i-1),x=y-b,_=1-x,O=0;O<c;O++)for(var C=O*m,E=Math.floor(C),N=Math.min(Math.ceil(C),a-1),S=C-E,I=1-S,P=0;P<s;P++){var k=t.get(g,v,O,P),T=p.get(g,b,E,P);p.set(T+=k*_*I,g,b,E,P);var A=p.get(g,b,N,P);p.set(A+=k*_*S,g,b,N,P);var R=p.get(g,w,E,P);p.set(R+=k*x*I,g,w,E,P);var M=p.get(g,w,N,P);p.set(M+=k*x*S,g,w,N,P)}return p.toTensor()},t.prototype.resizeNearestNeighbor=function(t,e,n,r){for(var o=t.shape,i=o[0],a=o[1],s=o[2],u=o[3],l=ie([i,e,n,u],t.dtype),c=[r&&e>1?a-1:a,r&&n>1?s-1:s],p=[r&&e>1?e-1:e,r&&n>1?n-1:n],f=0;f<i;f++)for(var h=0;h<e;h++)for(var d=0;d<n;d++)for(var m=0;m<u;m++){var g=c[0]*h/p[0],v=c[1]*d/p[1],y=Math.min(a-1,r?Math.round(g):Math.floor(g)),b=Math.min(s-1,r?Math.round(v):Math.floor(v)),w=t.get(f,y,b,m);l.set(w,f,h,d,m)}return l.toTensor()},t.prototype.resizeNearestNeighborBackprop=function(t,e,n){for(var r=e.shape,o=r[0],i=r[1],a=r[2],s=r[3],u=t.shape,l=u[1],c=u[2],p=ie([o,i,a,s],e.dtype),f=[n&&l>1?i-1:i,n&&c>1?a-1:a],h=[n&&l>1?l-1:l,n&&c>1?c-1:c],d=1/(f[0]/h[0]),m=1/(f[1]/h[1]),g=2*Math.ceil(d)+2,v=2*Math.ceil(m)+2,y=0;y<o;y++)for(var b=0;b<i;b++)for(var w=0;w<a;w++)for(var x=Math.floor(b*d),_=Math.floor(x-g/2),O=Math.floor(w*m),C=Math.floor(O-v/2),E=0;E<s;E++){for(var N=0,S=0;S<g;S++){var I=S+_;if(!(I<0||I>=l))for(var P=0;P<v;P++){var k=P+C;if(!(k<0||k>=c)){var T=f[0]*(I/h[0]),A=f[1]*(k/h[1]),R=Math.min(i-1,n?Math.round(T):Math.floor(T)),M=Math.min(a-1,n?Math.round(A):Math.floor(A));b===R&&w===M&&(N+=t.get(y,I,k,E))}}}p.set(N,y,b,w,E)}return p.toTensor()},t.prototype.batchNormalization=function(t,e,n,r,o,i){for(var a=t.dataSync(),s=e.dataSync(),u=n.dataSync(),l=o?o.dataSync():new Float32Array([1]),c=i?i.dataSync():new Float32Array([0]),p=new Float32Array(a.length),f=0;f<a.length;f++)p[f]=c[f%c.length]+(a[f]-s[f%s.length])*l[f%l.length]/Math.sqrt(u[f%u.length]+r);return Jt(p,t.shape)},t.prototype.localResponseNormalization4D=function(t,e,n,r,o){var i=ie(t.shape,"float32"),a=e,s=i.shape[3]-1;function u(e,n,r,o){for(var i=0,u=Math.max(0,o-a);u<=Math.min(o+a,s);u++){var l=t.get(e,n,r,u);i+=l*l}return i}for(var l=0;l<i.shape[0];l++)for(var c=0;c<=i.shape[1];c++)for(var p=0;p<i.shape[2];p++)for(var f=0;f<i.shape[3];f++){var h=u(l,c,p,f),d=t.get(l,c,p,f)*Math.pow(n+r*h,-o);i.set(d,l,c,p,f)}return i.toTensor()},t.prototype.multinomial=function(t,e,n,r){for(var o=e?t:_o(t),i=o.shape[0],a=o.shape[1],s=ee([i,n],"int32"),u=s.dataSync(),l=o.dataSync(),c=0;c<i;++c){var p=c*a,f=new Float32Array(a-1);f[0]=l[p];for(var h=1;h<f.length;++h)f[h]=f[h-1]+l[p+h];for(var d=Bt(r.toString()),m=c*n,g=0;g<n;++g){var v=d();u[m+g]=f.length;for(var y=0;y<f.length;y++)if(v<f[y]){u[m+g]=y;break}}}return s},t.prototype.oneHot=function(t,e,n,r){var o=new Float32Array(t.size*e);o.fill(r);for(var i=0;i<t.size;++i)t.get(i)>=0&&t.get(i)<e&&(o[i*e+t.get(i)]=n);return Xt(o,[t.size,e],"int32")},t.prototype.broadcastedBinaryOp=function(t,e,n,r){for(var o=Re(t.shape,e.shape),i=ie(o,n),a=t.dataSync(),s=e.dataSync(),u=Te(t.shape,o),l=Te(e.shape,o),c=t.buffer(),p=e.buffer(),f=function(n){var o=i.indexToLoc(n),f=o.slice(-t.rank);u.forEach(function(t){return f[t]=0});var h=c.locToIndex(f),d=o.slice(-e.rank);l.forEach(function(t){return d[t]=0});var m=p.locToIndex(d);i.values[n]=r(a[h],s[m])},h=0;h<i.values.length;++h)f(h);return i.toTensor()},t.prototype.dispose=function(){},t}();dt.registerBackend("cpu",function(){return new Ra},1,K);var Ma="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setImmediate,Da=function(){function t(){}return t.nextFrame=function(){return new Promise(function(t){return Ma(function(){return t()})})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"nextFrame",null),t}(),ja={float32:4,int32:4,uint16:2,uint8:1,bool:1},La="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function za(t){return La?Buffer.byteLength(t):new Blob([t]).size}function Va(t){var e=0;t.forEach(function(t){e+=t.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(t){n.set(new Uint8Array(t),r),r+=t.byteLength}),n.buffer}function Ba(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function Fa(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:za(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:za(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}var Ua=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e){return t.getHandlers(e,"load")},t.getHandlers=function(t,e){var n=[];return("load"===e?this.getInstance().loadRouters:this.getInstance().saveRouters).forEach(function(e){var r=e(t);null!==r&&n.push(r)}),n},t}(),Wa="://",qa=function(){function t(){this.managers={}}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerManager=function(e,n){f(null!=e,"scheme must not be undefined or null."),e.endsWith(Wa)&&(e=e.slice(0,e.indexOf(Wa))),f(e.length>0,"scheme must not be an empty string.");var r=t.getInstance();f(null==r.managers[e],"A model store manager is already registered for scheme '"+e+"'."),r.managers[e]=n},t.getManager=function(t){var e=this.getInstance().managers[t];if(null==e)throw new Error("Cannot find model manager for scheme '"+t+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function $a(t){if(-1===t.indexOf(Wa))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+qa.getSchemes().join(","));return{scheme:t.split(Wa)[0],path:t.split(Wa)[1]}}function Ha(t,e,n){return void 0===n&&(n=!1),s(this,void 0,void 0,function(){var r,o,i,a,s,l,c,p,h;return u(this,function(u){switch(u.label){case 0:return f(t!==e,"Old path and new path are the same: '"+t+"'"),f((r=Ua.getLoadHandlers(t)).length>0,"Copying failed because no load handler is found for source URL "+t+"."),f(r.length<2,"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."),o=r[0],f((i=Ua.getSaveHandlers(e)).length>0,"Copying failed because no save handler is found for destination URL "+e+"."),f(i.length<2,"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."),a=i[0],s=$a(t).scheme,l=$a(t).path,c=s===$a(t).scheme,[4,o.load()];case 1:return p=u.sent(),n&&c?[4,qa.getManager(s).removeModel(l)]:[3,3];case 2:u.sent(),u.label=3;case 3:return[4,a.save(p)];case 4:return h=u.sent(),!n||c?[3,6]:[4,qa.getManager(s).removeModel(l)];case 5:u.sent(),u.label=6;case 6:return[2,h.modelArtifactsInfo]}})})}var Ga=function(){function t(){}return t.listModels=function(){return s(this,void 0,void 0,function(){var t,e,n,r,o,i,a;return u(this,function(s){switch(s.label){case 0:t=qa.getSchemes(),e={},n=0,r=t,s.label=1;case 1:return n<r.length?[4,qa.getManager(o=r[n]).listModels()]:[3,4];case 2:for(a in i=s.sent())e[o+Wa+a]=i[a];s.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},t.removeModel=function(t){return s(this,void 0,void 0,function(){var e;return u(this,function(n){switch(n.label){case 0:return e=$a(t),[4,qa.getManager(e.scheme).removeModel(e.path)];case 1:return[2,n.sent()]}})})},t.copyModel=function(t,e){return s(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return[4,Ha(t,e,!1)];case 1:return[2,n.sent()]}})})},t.moveModel=function(t,e){return s(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return[4,Ha(t,e,!0)];case 1:return[2,n.sent()]}})})},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"listModels",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"removeModel",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"copyModel",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"moveModel",null),t}(),Ka="models_store",Qa="model_info_store";function Xa(){if(!dt.get("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Za(t){var e=t.result;e.createObjectStore(Ka,{keyPath:"modelPath"}),e.createObjectStore(Qa,{keyPath:"modelPath"})}var Ja=function(){function t(t){if(this.indexedDB=Xa(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return t.prototype.save=function(t){return s(this,void 0,void 0,function(){return u(this,function(e){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},t.prototype.load=function(){return s(this,void 0,void 0,function(){return u(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(t,e){var n=this;return new Promise(function(t,r){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Za(o)},o.onsuccess=function(){var i=o.result;if(null==e){var a=i.transaction(Ka,"readonly"),s=a.objectStore(Ka).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));t(s.result.modelArtifacts)},s.onerror=function(t){return i.close(),r(s.error)},a.oncomplete=function(){return i.close()}}else{var u,l=Fa(e),c=i.transaction(Qa,"readwrite"),p=c.objectStore(Qa),f=p.put({modelPath:n.modelPath,modelArtifactsInfo:l});f.onsuccess=function(){var o=(u=i.transaction(Ka,"readwrite")).objectStore(Ka).put({modelPath:n.modelPath,modelArtifacts:e,modelArtifactsInfo:l});o.onsuccess=function(){return t({modelArtifactsInfo:l})},o.onerror=function(t){var e=(p=c.objectStore(Qa)).delete(n.modelPath);e.onsuccess=function(){return i.close(),r(o.error)},e.onerror=function(t){return i.close(),r(o.error)}}},f.onerror=function(t){return i.close(),r(f.error)},c.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},o.onerror=function(t){return r(o.error)}})},t.URL_SCHEME="indexeddb://",t}(),Ya=function(t){return dt.get("IS_BROWSER")&&t.startsWith(Ja.URL_SCHEME)?function(t){return new Ja(t)}(t.slice(Ja.URL_SCHEME.length)):null};Ua.registerSaveRouter(Ya),Ua.registerLoadRouter(Ya);var ts=function(){function t(){this.indexedDB=Xa()}return t.prototype.listModels=function(){return s(this,void 0,void 0,function(){var t=this;return u(this,function(e){return[2,new Promise(function(e,n){var r=t.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return Za(r)},r.onsuccess=function(){var t=r.result,o=t.transaction(Qa,"readonly"),i=o.objectStore(Qa).getAll();i.onsuccess=function(){for(var t={},n=0,r=i.result;n<r.length;n++){var o=r[n];t[o.modelPath]=o.modelArtifactsInfo}e(t)},i.onerror=function(e){return t.close(),n(i.error)},o.oncomplete=function(){return t.close()}},r.onerror=function(t){return n(r.error)}})]})})},t.prototype.removeModel=function(t){return s(this,void 0,void 0,function(){var e=this;return u(this,function(n){return t=function(t){return t.startsWith(Ja.URL_SCHEME)?t.slice(Ja.URL_SCHEME.length):t}(t),[2,new Promise(function(n,r){var o=e.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Za(o)},o.onsuccess=function(){var e,i=o.result,a=i.transaction(Qa,"readwrite"),s=a.objectStore(Qa),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var o=s.delete(t),a=function(){var o=(e=i.transaction(Ka,"readwrite")).objectStore(Ka).delete(t);o.onsuccess=function(){return n(u.result.modelArtifactsInfo)},o.onerror=function(t){return r(u.error)}};o.onsuccess=a,o.onerror=function(t){return a(),i.close(),r(u.error)}},u.onerror=function(t){return i.close(),r(u.error)},a.oncomplete=function(){null==e?i.close():e.oncomplete=function(){return i.close()}}},o.onerror=function(t){return r(o.error)}})]})})},t}();if(dt.get("IS_BROWSER"))try{qa.registerManager(Ja.URL_SCHEME,new ts)}catch(rt){}var es="/",ns="tensorflowjs_models",rs="info",os="model_topology",is="weight_specs",as="weight_data";function ss(t){return{info:[ns,t,rs].join(es),topology:[ns,t,os].join(es),weightSpecs:[ns,t,is].join(es),weightData:[ns,t,as].join(es)}}function us(t){var e=t.split(es);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(es)}var ls=function(){function t(t){if(!dt.get("IS_BROWSER")||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=ss(this.modelPath)}return t.prototype.save=function(t){return s(this,void 0,void 0,function(){var e,n,r,o;return u(this,function(i){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(t.modelTopology),n=JSON.stringify(t.weightSpecs),r=Fa(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(t){return La?Buffer.from(t).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(t)))}(t.weightData)),[2,{modelArtifactsInfo:r}]}catch(t){for(o in this.keys)this.LS.removeItem(this.keys[o]);throw new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return s(this,void 0,void 0,function(){var t,e,n,r,o;return u(this,function(i){if(null==(t=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=r,null==(o=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(t){if(La){var e=Buffer.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}for(var n=atob(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r.set([n.charCodeAt(o)],o);return r.buffer}(o),[2,e]})})},t.URL_SCHEME="localstorage://",t}(),cs=function(t){return dt.get("IS_BROWSER")&&t.startsWith(ls.URL_SCHEME)?function(t){return new ls(t)}(t.slice(ls.URL_SCHEME.length)):null};Ua.registerSaveRouter(cs),Ua.registerLoadRouter(cs);var ps=function(){function t(){f(dt.get("IS_BROWSER"),"Current environment is not a web browser"),f(void 0!==window.localStorage,"Current browser does not appear to support localStorage"),this.LS=window.localStorage}return t.prototype.listModels=function(){return s(this,void 0,void 0,function(){var t,e,n,r,o,i;return u(this,function(a){for(t={},e=ns+es,n=es+rs,r=0;r<this.LS.length;++r)(o=this.LS.key(r)).startsWith(e)&&o.endsWith(n)&&(i=us(o),t[i]=JSON.parse(this.LS.getItem(o)));return[2,t]})})},t.prototype.removeModel=function(t){return s(this,void 0,void 0,function(){var e,n;return u(this,function(r){if(t=function(t){return t.startsWith(ls.URL_SCHEME)?t.slice(ls.URL_SCHEME.length):t}(t),e=ss(t),null==this.LS.getItem(e.info))throw new Error("Cannot find model at path '"+t+"'");return n=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,n]})})},t}();if(dt.get("IS_BROWSER"))try{qa.registerManager(ls.URL_SCHEME,new ps)}catch(rt){}var fs="model",hs=".json",ds=".weights.bin",ms=function(){function t(e){if(!dt.get("IS_BROWSER"))throw new Error("triggerDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),null!=e&&0!==e.length||(e=fs),this.modelTopologyFileName=e+hs,this.weightDataFileName=e+ds}return t.prototype.save=function(t){return s(this,void 0,void 0,function(){var e,n,r,o;return u(this,function(i){if(e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),t.modelTopology instanceof ArrayBuffer)throw new Error("DownloadTrigger.save() does not support saving model topology in binary formats yet.");return n=window.URL.createObjectURL(new Blob([JSON.stringify({modelTopology:t.modelTopology,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}]})],{type:"application/json"})),(r=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,r.href=n,r.click(),null!=t.weightData&&((o=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,o.href=e,o.click()),[2,{modelArtifactsInfo:Fa(t)}]})})},t.URL_SCHEME="downloads://",t}(),gs=function(){function t(t){if(null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return t.prototype.load=function(){return s(this,void 0,void 0,function(){var t,e,n=this;return u(this,function(r){return t=this.files[0],e=this.files.slice(1),[2,new Promise(function(r,o){var i=new FileReader;i.onload=function(i){var a=JSON.parse(i.target.result),s=a.modelTopology;if(null!=s){0===e.length&&r({modelTopology:s});var u=a.weightsManifest;if(null!=u){var l;try{l=n.checkManifestAndWeightFiles(u,e)}catch(t){return void o(t)}var c=[],p=[],f=[];u.forEach(function(t){t.paths.forEach(function(t){p.push(t),f.push(null)}),c.push.apply(c,t.weights)}),u.forEach(function(t){t.paths.forEach(function(t){var e=new FileReader;e.onload=function(e){var n=e.target.result,o=p.indexOf(t);f[o]=n,-1===f.indexOf(null)&&r({modelTopology:s,weightSpecs:c,weightData:Va(f)})},e.onerror=function(e){o("Failed to weights data from file of path '"+t+"'.")},e.readAsArrayBuffer(l[t])})})}else o(new Error("weightManifest field is missing from file "+t.name))}else o(new Error("modelTopology field is missing from file "+t.name))},i.onerror=function(e){o("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},i.readAsText(t)})]})})},t.prototype.checkManifestAndWeightFiles=function(t,e){for(var n=[],r=e.map(function(t){return Ba(t.name)}),o={},i=0,a=t;i<a.length;i++)a[i].paths.forEach(function(t){var i=Ba(t);if(-1!==n.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: '"+i+"'");if(n.push(i),-1===r.indexOf(i))throw new Error("Weight file with basename '"+i+"' is not provided.");o[t]=e[r.indexOf(i)]});if(n.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+e.length+").");return o},t}();function vs(t,e){return s(this,void 0,void 0,function(){var n,r;return u(this,function(o){switch(o.label){case 0:return n=t.map(function(t){return fetch(t,e)}),[4,Promise.all(n)];case 1:return r=o.sent(),[4,Promise.all(r.map(function(t){return t.arrayBuffer()}))];case 2:return[2,o.sent()]}})})}Ua.registerSaveRouter(function(t){return dt.get("IS_BROWSER")&&t.startsWith(ms.URL_SCHEME)?function(t){return void 0===t&&(t="model"),new ms(t)}(t.slice(ms.URL_SCHEME.length)):null});var ys=function(){function t(t,e){if(this.DEFAULT_METHOD="POST",!dt.get("IS_BROWSER"))throw new Error("browserHTTPRequest is not supported outside the web browser.");if(f(null!=t&&t.length>0,"URL path for browserHTTPRequest must not be null, undefined or empty."),this.path=t,null!=e&&null!=e.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e||{}}return t.prototype.save=function(t){return s(this,void 0,void 0,function(){var e,n;return u(this,function(r){switch(r.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,e.body.append("model.json",new Blob([JSON.stringify({modelTopology:t.modelTopology,weightsManifest:[{paths:["./model.weights.bin"],weights:t.weightSpecs}]})],{type:"application/json"}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,fetch(this.path,e)];case 1:if(200===(n=r.sent()).status)return[2,{modelArtifactsInfo:Fa(t),responses:[n]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+n.status+".")}})})},t.prototype.load=function(){return s(this,void 0,void 0,function(){var t,e,n,r,o,i,a,s,l,c,p;return u(this,function(u){switch(u.label){case 0:return[4,fetch(this.path,this.requestInit)];case 1:return[4,u.sent().json()];case 2:if(t=u.sent(),n=t.weightsManifest,null==(e=t.modelTopology)&&null==n)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");if(null==n)return[3,4];for(r=[],a=0,s=i=t.weightsManifest;a<s.length;a++)r.push.apply(r,s[a].weights);return(l=this.path.substring(0,this.path.lastIndexOf("/"))).endsWith("/")||(l+="/"),c=[],i.forEach(function(t){t.paths.forEach(function(t){c.push(l+t)})}),p=Va,[4,vs(c,this.requestInit)];case 3:o=p.apply(void 0,[u.sent()]),u.label=4;case 4:return[2,{modelTopology:e,weightSpecs:r,weightData:o}]}})})},t.URL_SCHEMES=["http://","https://"],t}(),bs=function(t){if(dt.get("IS_BROWSER")){for(var e=0,n=ys.URL_SCHEMES;e<n.length;e++)if(t.startsWith(n[e]))return ws(t);return null}return null};function ws(t,e){return new ys(t,e)}Ua.registerSaveRouter(bs),Ua.registerLoadRouter(bs);var xs=function(){function t(t,e,n){this.modelTopology=t,this.weightSpecs=e,this.weightData=n}return t.prototype.load=function(){return s(this,void 0,void 0,function(){var t;return u(this,function(e){return t={},null!=this.modelTopology&&(t=i({modelTopology:this.modelTopology},t)),null!=this.weightSpecs&&this.weightSpecs.length>0&&(t=i({weightSpecs:this.weightSpecs},t)),null!=this.weightData&&this.weightData.byteLength>0&&(t=i({weightData:this.weightData},t)),[2,t]})})},t}(),_s=function(){function t(t){this.saveHandler=t}return t.prototype.save=function(t){return s(this,void 0,void 0,function(){return u(this,function(e){return[2,this.saveHandler(t)]})})},t}(),Os=Object.freeze({browserFiles:function(t){return new gs(t)},browserHTTPRequest:ws,concatenateArrayBuffers:Va,copyModel:Ga.copyModel,decodeWeights:function(t,e){for(var n={},r=0,o=0,i=e;o<i.length;o++){var a=i[o],s=a.name,u=a.dtype,l=a.shape;if(null!=a.quantization)throw new Error("decodeWeights does not support quantization yet, but encountered weight '"+s+" with quantization.'");var c=v(l),p=void 0;if("float32"===u)p=Kt(new Float32Array(t,r,c),l,"float32");else if("int32"===u)p=Kt(new Int32Array(t,r,c),l,"int32");else{if("bool"!==u)throw new Error("Unsupported dtype in weight '"+s+"': "+u);p=Kt(new Uint8Array(t,r,c),l,"bool")}n[s]=p,r+=c*ja[u]}return n},encodeWeights:function(t){return s(this,void 0,void 0,function(){var e,n,r,o;return u(this,function(i){switch(i.label){case 0:for(r in e=[],n=[],t){if("float32"!==(o=t[r]).dtype&&"int32"!==o.dtype&&"bool"!==o.dtype)throw new Error("Unsupported dtype in weight '"+r+"': "+o.dtype);e.push({name:r,shape:o.shape,dtype:o.dtype}),n.push(o.data())}return[4,Promise.all(n)];case 1:return[2,{data:function(t){if(null===t)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0;t.forEach(function(t){if(t instanceof Float32Array||t instanceof Int32Array)e+=t.buffer.byteLength;else{if(!(t instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+t.constructor.name);e+=t.buffer.byteLength}});var n=new Uint8Array(e),r=0;return t.forEach(function(t){n.set(new Uint8Array(t.buffer),r),r+=t.buffer.byteLength}),n.buffer}(i.sent()),specs:e}]}})})},fromMemory:function(t,e,n){return new xs(t,e,n)},getLoadHandlers:Ua.getLoadHandlers,getModelArtifactsInfoForJSON:Fa,getSaveHandlers:Ua.getSaveHandlers,listModels:Ga.listModels,loadWeights:function(t,e,n,r){return void 0===e&&(e=""),s(this,void 0,void 0,function(){var o,i,a,s,l,c,p,f,h,d;return u(this,function(u){switch(u.label){case 0:if(o=t.map(function(){return!1}),i={},a=null!=n?n.map(function(){return!1}):[],s=[],t.forEach(function(t,e){var r=0;t.weights.forEach(function(t){var u=ja["quantization"in t?t.quantization.dtype:t.dtype]*v(t.shape),l=function(){o[e]=!0,null==i[e]&&(i[e]=[]),i[e].push({manifestEntry:t,groupOffset:r,sizeBytes:u})};null!=n?n.forEach(function(e,n){e===t.name&&(l(),a[n]=!0)}):l(),s.push(t.name),r+=u})}),!a.every(function(t){return t}))throw l=n.filter(function(t,e){return!a[e]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".");return c=o.reduce(function(t,e,n){return e&&t.push(n),t},[]),p=[],c.forEach(function(n){t[n].paths.forEach(function(t){var n=e+(e.endsWith("/")?"":"/")+t;p.push(n)})}),[4,vs(p,r)];case 1:return f=u.sent(),h={},d=0,c.forEach(function(e){for(var n=t[e].paths.length,r=0,o=0;o<n;o++)r+=f[d+o].byteLength;for(var a=new ArrayBuffer(r),s=new Uint8Array(a),u=0,l=0;l<n;l++){var c=new Uint8Array(f[d+l]);s.set(c,u),u+=c.byteLength}i[e].forEach(function(t){var e,n=a.slice(t.groupOffset,t.groupOffset+t.sizeBytes),r=t.manifestEntry.dtype;if("quantization"in t.manifestEntry){var o=t.manifestEntry.quantization;if("uint8"!==o.dtype&&"uint16"!==o.dtype)throw new Error("Weight "+t.manifestEntry.name+" has unknown quantization dtype "+o.dtype+".");var i="uint8"===o.dtype?new Uint8Array(n):new Uint16Array(n);if("float32"===r)e=Float32Array.from(i,function(t){return t*o.scale+o.min});else{if("int32"!==r)throw new Error("Weight "+t.manifestEntry.name+" has a dtype not supported by quantization: "+r);e=Int32Array.from(i,function(t){return Math.round(t*o.scale+o.min)})}}else if("float32"===r)e=new Float32Array(n);else{if("int32"!==r)throw new Error("Weight "+t.manifestEntry.name+" has unknown dtype "+r+".");e=new Int32Array(n)}var s=t.manifestEntry.name;if(null!=h[s])throw new Error("Duplicate weight with name "+s+". Please make sure weights names are unique in the manifest JSON.");h[s]=Kt(e,t.manifestEntry.shape,t.manifestEntry.dtype)}),d+=n}),[2,h]}})})},moveModel:Ga.moveModel,registerLoadRouter:Ua.registerLoadRouter,registerSaveRouter:Ua.registerSaveRouter,removeModel:Ga.removeModel,withSaveHandler:function(t){return new _s(t)}}),Cs=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(t,e){return new t(e)},t}(),Es=function(){function t(){this.classNameMap={}}return t.getMap=function(){return null==t.instance&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}(),Ns=Object.freeze({Serializable:Cs,SerializationMap:Es});function Ss(t,e,n){if(null==n&&(n=dt.get("TEST_EPSILON")),t instanceof Q||e instanceof Q){if(t instanceof Q&&e instanceof Q){if(t.dtype!==e.dtype)throw new Error("Arrays are of different type actual: "+t.dtype+" vs expected: "+e.dtype+".");if(!y(t.shape,e.shape))throw new Error("Arrays are of different shape actual: "+t.shape+" vs expected: "+e.shape+".")}}else{var r=t.constructor.name,o=e.constructor.name;if(r!==o)throw new Error("Arrays are of different type actual: "+r+" vs expected: "+o)}var i,a;if(i=t instanceof Q?t.dataSync():t,a=e instanceof Q?e.dataSync():e,i.length!==a.length)throw new Error("Arrays have different lengths actual: "+i.length+" vs expected: "+a.length+".\nActual:   "+i+".\nExpected: "+a+".");for(var s=0;s<a.length;++s){var u=i[s],l=a[s];if(!Is(u,Number(l),n))throw new Error("Arrays differ: actual["+s+"] = "+u+", expected["+s+"] = "+l+".\nActual:   "+i+".\nExpected: "+a+".")}}function Is(t,e,n){return!(!isNaN(t)||!isNaN(e))||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}Object.freeze({WEBGL_ENVS:{HAS_WEBGL:!0},NODE_ENVS:{IS_NODE:!0},CHROME_ENVS:{IS_CHROME:!0},BROWSER_ENVS:{IS_BROWSER:!0},CPU_ENVS:{HAS_WEBGL:!1},ALL_ENVS:{},expectArraysClose:Ss,expectPromiseToFail:function(t,e){t().then(function(){return e.fail()},function(){return e()})},expectArraysEqual:function(t,e){return Ss(t,e,0)},expectNumbersClose:function(t,e,n){if(null==n&&(n=dt.get("TEST_EPSILON")),!Is(t,e,n))throw new Error("Numbers differ: actual === "+t+", expected === "+e)},expectValuesInRange:function(t,e,n){var r;r=t instanceof Q?t.dataSync():t;for(var o=0;o<r.length;o++)if(r[o]<e||r[o]>n)throw new Error("Value out of range:"+r[o]+" low: "+e+", high: "+n)},expectArrayBuffersEqual:function(t,e){expect(new Float32Array(t)).toEqual(new Float32Array(e))}});var Ps="0.12.4",ks=(Object.freeze({gpgpu_util:xa,webgl_util:ea,MathBackendWebGL:Aa,GPGPUContext:_a}),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.minimize=function(t,e,n){void 0===e&&(e=!1);var r=this.computeGradients(t,n),o=r.value,i=r.grads;return this.applyGradients(i),Object.keys(i).forEach(function(t){return i[t].dispose()}),e?o:(o.dispose(),null)},e.prototype.computeGradients=function(t,e){return pr(t,e)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],e.prototype,"minimize",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],e)}(Cs)),Ts=1e-8,As=1e-4;function Rs(){return dt.get("WEBGL_RENDER_FLOAT32_ENABLED")?Ts:As}var Ms=function(t){function e(e,n,r){void 0===r&&(r=null);var o=t.call(this)||this;return o.learningRate=e,o.rho=n,o.epsilon=r,o.accumulatedGrads={},o.accumulatedUpdates={},o.c=lr(Gt(-e)),o.rhoScalar=lr(Gt(n)),o.oneMinusRho=lr(Gt(1-n)),null===r&&(r=Rs()),o.epsilonScalar=lr(Gt(r)),o}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=function(n){var o=dt.engine.registeredVariables[n];null==r.accumulatedGrads[n]&&ur(function(){e.accumulatedGrads[n]=re(o).variable(!1)}),null==r.accumulatedUpdates[n]&&ur(function(){e.accumulatedUpdates[n]=re(o).variable(!1)});var i=t[n],a=r.accumulatedGrads[n],s=r.accumulatedUpdates[n];ur(function(){var t=e.rhoScalar.mul(a).add(e.oneMinusRho.mul(i.square())),r=s.add(e.epsilonScalar).sqrt().div(a.add(e.epsilonScalar).sqrt()).mul(i),u=e.rhoScalar.mul(s).add(e.oneMinusRho.mul(r.square()));e.accumulatedGrads[n].assign(t),e.accumulatedUpdates[n].assign(u);var l=e.c.mul(r).add(o);o.assign(l)})},r=this;for(var o in t)n(o)},e.prototype.dispose=function(){var t=this;this.c.dispose(),this.epsilonScalar.dispose(),this.rhoScalar.dispose(),this.oneMinusRho.dispose(),null!=this.accumulatedUpdates&&(Object.keys(this.accumulatedUpdates).forEach(function(e){return t.accumulatedUpdates[e].dispose()}),Object.keys(this.accumulatedGrads).forEach(function(e){return t.accumulatedGrads[e].dispose()}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.rho,e.epsilon)},e.className="AdadeltaOptimizer",e}(ks);Es.register(Ms);var Ds=function(t){function e(e,n){void 0===n&&(n=.1);var r=t.call(this)||this;r.learningRate=e,r.initialAccumulatorValue=n,r.accumulatedGrads={},r.c=lr(Gt(-e));var o=Rs();return r.epsilon=lr(Gt(o)),r}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=function(n){var o=dt.engine.registeredVariables[n];null==r.accumulatedGrads[n]&&ur(function(){e.accumulatedGrads[n]=Wt(o.shape,e.initialAccumulatorValue).variable(!1)});var i=t[n],a=r.accumulatedGrads[n];ur(function(){var t=a.add(i.square());e.accumulatedGrads[n].assign(t);var r=e.c.mul(i.div(t.add(e.epsilon).sqrt())).add(o);o.assign(r)})},r=this;for(var o in t)n(o)},e.prototype.dispose=function(){var t=this;this.epsilon.dispose(),this.c.dispose(),null!=this.accumulatedGrads&&Object.keys(this.accumulatedGrads).forEach(function(e){return t.accumulatedGrads[e].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,e){return new t(e.learningRate,e.initialAccumulatorValue)},e.className="AdagradOptimizer",e}(ks);Es.register(Ds);var js=function(t){function e(e,n,r,o){void 0===o&&(o=null);var i=t.call(this)||this;return i.learningRate=e,i.beta1=n,i.beta2=r,i.epsilon=o,i.accumulatedFirstMoment={},i.accumulatedSecondMoment={},i.c=lr(Gt(-e)),i.beta1Scalar=lr(Gt(n)),i.beta2Scalar=lr(Gt(r)),ur(function(){i.accBeta1=Gt(n).variable(),i.accBeta2=Gt(r).variable()}),i.oneMinusBeta1=lr(Gt(1-n)),i.oneMinusBeta2=lr(Gt(1-r)),i.one=lr(Gt(1)),null===o&&(o=Rs()),i.epsScalar=lr(Gt(o)),i}return o(e,t),e.prototype.applyGradients=function(t){var e=this;ur(function(){var n=e.one.sub(e.accBeta1),r=e.one.sub(e.accBeta2);for(var o in t){var i=dt.engine.registeredVariables[o];if(null==e.accumulatedFirstMoment[o]){var a=!1;e.accumulatedFirstMoment[o]=re(i).variable(a)}null==e.accumulatedSecondMoment[o]&&(a=!1,e.accumulatedSecondMoment[o]=re(i).variable(a));var s=t[o],u=e.accumulatedSecondMoment[o],l=e.beta1Scalar.mul(e.accumulatedFirstMoment[o]).add(e.oneMinusBeta1.mul(s)),c=e.beta2Scalar.mul(u).add(e.oneMinusBeta2.mul(s.square())),p=l.div(n),f=c.div(r);e.accumulatedFirstMoment[o].assign(l),e.accumulatedSecondMoment[o].assign(c);var h=e.c.mul(p.div(e.epsScalar.add(f.sqrt()))).add(i);i.assign(h)}e.accBeta1.assign(e.accBeta1.mul(e.beta1Scalar)),e.accBeta2.assign(e.accBeta2.mul(e.beta2Scalar))})},e.prototype.dispose=function(){var t=this;this.c.dispose(),this.epsScalar.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.accBeta1.dispose(),this.accBeta2.dispose(),this.oneMinusBeta1.dispose(),this.oneMinusBeta2.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach(function(e){return t.accumulatedFirstMoment[e].dispose()}),null!=this.accumulatedSecondMoment&&Object.keys(this.accumulatedSecondMoment).forEach(function(e){return t.accumulatedSecondMoment[e].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)},e.className="AdamOptimizer",e}(ks);Es.register(js);var Ls=function(t){function e(e,n,r,o,i){void 0===o&&(o=null),void 0===i&&(i=0);var a=t.call(this)||this;return a.learningRate=e,a.beta1=n,a.beta2=r,a.epsilon=o,a.decay=i,a.accumulatedFirstMoment={},a.accumulatedWeightedInfNorm={},a.c=lr(Gt(-e)),a.beta1Scalar=lr(Gt(n)),a.beta2Scalar=lr(Gt(r)),a.decayScalar=lr(Gt(i)),ur(function(){a.iteration=Gt(0).variable(),a.accBeta1=Gt(n).variable()}),a.oneMinusBeta1=lr(Gt(1-n)),a.one=lr(Gt(1)),null===o&&(o=Rs()),a.epsScalar=lr(Gt(o)),a}return o(e,t),e.prototype.applyGradients=function(t){var e=this;ur(function(){var n=e.one.sub(e.accBeta1),r=e.c.div(e.one.add(e.decayScalar.mul(e.iteration)));for(var o in t){var i=dt.engine.registeredVariables[o];if(null==e.accumulatedFirstMoment[o]){var a=!1;e.accumulatedFirstMoment[o]=re(i).variable(a)}null==e.accumulatedWeightedInfNorm[o]&&(a=!1,e.accumulatedWeightedInfNorm[o]=re(i).variable(a));var s=t[o],u=e.accumulatedWeightedInfNorm[o],l=e.beta1Scalar.mul(e.accumulatedFirstMoment[o]).add(e.oneMinusBeta1.mul(s)),c=e.beta2Scalar.mul(u),p=s.abs(),f=c.maximum(p);e.accumulatedFirstMoment[o].assign(l),e.accumulatedWeightedInfNorm[o].assign(f);var h=r.div(n).mul(l.div(e.epsScalar.add(f))).add(i);i.assign(h)}e.iteration.assign(e.iteration.add(e.one)),e.accBeta1.assign(e.accBeta1.mul(e.beta1Scalar))})},e.prototype.dispose=function(){var t=this;this.c.dispose(),this.epsScalar.dispose(),this.accBeta1.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.oneMinusBeta1.dispose(),this.decayScalar.dispose(),this.iteration.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach(function(e){return t.accumulatedFirstMoment[e].dispose()}),null!=this.accumulatedWeightedInfNorm&&Object.keys(this.accumulatedWeightedInfNorm).forEach(function(e){return t.accumulatedWeightedInfNorm[e].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)},e.className="AdamaxOptimizer",e}(ks);Es.register(Ls);var zs=function(t){function e(e){var n=t.call(this)||this;return n.learningRate=e,n.setLearningRate(e),n}return o(e,t),e.prototype.applyGradients=function(t){var e=this;Object.keys(t).forEach(function(n){var r=t[n],o=dt.engine.registeredVariables[n];ur(function(){var t=e.c.mul(r).add(o);o.assign(t)})})},e.prototype.setLearningRate=function(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=lr(Gt(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,e){return new t(e.learningRate)},e.className="SGDOptimizer",e}(ks);Es.register(zs);var Vs=function(t){function e(e,n,r){void 0===r&&(r=!1);var o=t.call(this,e)||this;return o.learningRate=e,o.momentum=n,o.useNesterov=r,o.m=Gt(o.momentum),o.accumulations={},o}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=function(n){var o=dt.engine.registeredVariables[n];null==r.accumulations[n]&&ur(function(){e.accumulations[n]=re(o).variable(!1)});var i=r.accumulations[n],a=t[n];ur(function(){var t,r=e.m.mul(i).add(a);t=e.useNesterov?e.c.mul(a.add(r.mul(e.m))).add(o):e.c.mul(r).add(o),e.accumulations[n].assign(r),o.assign(t)})},r=this;for(var o in t)n(o)},e.prototype.dispose=function(){if(t.prototype.dispose.call(this),this.m.dispose(),null!=this.accumulations)for(var e in this.accumulations)this.accumulations[e].dispose()},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)},e.className="MomentumOptimizer",e}(zs);Es.register(Vs);var Bs=function(t){function e(e,n,r,o,i){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===o&&(o=null),void 0===i&&(i=!1);var a=t.call(this)||this;return a.learningRate=e,a.decay=n,a.momentum=r,a.epsilon=o,a.accumulatedMeanSquares={},a.accumulatedMeanGrads={},a.accumulatedMoments={},a.c=lr(Gt(e)),a.decayScalar=lr(Gt(n)),a.momentumScalar=lr(Gt(r)),a.oneMinusDecay=lr(Gt(1-n)),a.centered=i,null===o&&(o=Rs()),a.epsilonScalar=lr(Gt(o)),a}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=function(n){var o=dt.engine.registeredVariables[n];null==r.accumulatedMeanSquares[n]&&ur(function(){e.accumulatedMeanSquares[n]=re(o).variable(!1)}),null==r.accumulatedMeanGrads[n]&&r.centered&&ur(function(){e.accumulatedMeanGrads[n]=re(o).variable(!1)}),null==r.accumulatedMoments[n]&&ur(function(){e.accumulatedMoments[n]=re(o).variable(!1)});var i=r.accumulatedMeanSquares[n],a=r.accumulatedMeanGrads[n],s=r.accumulatedMoments[n],u=t[n];ur(function(){var t=e.decayScalar.mul(i).add(e.oneMinusDecay.mul(u.square()));if(e.centered){var r=e.decayScalar.mul(a).add(e.oneMinusDecay.mul(u)),l=e.momentumScalar.mul(s).add(e.c.mul(u).div(t.sub(r.square().add(e.epsilonScalar)).sqrt()));e.accumulatedMeanSquares[n].assign(t),e.accumulatedMeanGrads[n].assign(r),e.accumulatedMoments[n].assign(l);var c=o.sub(l);o.assign(c)}else{var p=e.decayScalar.mul(i).add(e.oneMinusDecay.mul(u.square()));l=e.momentumScalar.mul(s).add(e.c.mul(u).div(p.add(e.epsilonScalar).sqrt())),e.accumulatedMeanSquares[n].assign(p),e.accumulatedMoments[n].assign(l),c=o.sub(l),o.assign(c)}})},r=this;for(var o in t)n(o)},e.prototype.dispose=function(){var t=this;this.c.dispose(),this.epsilonScalar.dispose(),this.decayScalar.dispose(),this.momentumScalar.dispose(),this.oneMinusDecay.dispose(),null!=this.accumulatedMeanSquares&&Object.keys(this.accumulatedMeanSquares).forEach(function(e){return t.accumulatedMeanSquares[e].dispose()}),null!=this.accumulatedMeanGrads&&this.centered&&Object.keys(this.accumulatedMeanGrads).forEach(function(e){return t.accumulatedMeanGrads[e].dispose()}),null!=this.accumulatedMoments&&Object.keys(this.accumulatedMoments).forEach(function(e){return t.accumulatedMoments[e].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)},e.className="RMSPropOptimizer",e}(ks);Es.register(Bs);var Fs=function(){function t(){}return t.sgd=function(t){return new zs(t)},t.momentum=function(t,e,n){return void 0===n&&(n=!1),new Vs(t,e,n)},t.rmsprop=function(t,e,n,r,o){return void 0===e&&(e=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=!1),new Bs(t,e,n,r,o)},t.adam=function(t,e,n,r){return void 0===t&&(t=.001),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new js(t,e,n,r)},t.adadelta=function(t,e,n){return void 0===t&&(t=.001),void 0===e&&(e=.95),void 0===n&&(n=null),new Ms(t,e,n)},t.adamax=function(t,e,n,r,o){return void 0===t&&(t=.002),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===o&&(o=0),new Ls(t,e,n,r,o)},t.adagrad=function(t,e){return void 0===e&&(e=.1),new Ds(t,e)},a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"sgd",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"momentum",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"rmsprop",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"adam",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"adadelta",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"adamax",null),a([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}],t,"adagrad",null),t}(),Us={sgd:Fs.sgd,momentum:Fs.momentum,adadelta:Fs.adadelta,adagrad:Fs.adagrad,rmsprop:Fs.rmsprop,adamax:Fs.adamax,adam:Fs.adam},Ws=Da.nextFrame;G=ei},crnd:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="crnd"},tgWb:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return version});var _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("Re/O"),__assign=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function __awaiter(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function __generator(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var punycode=createCommonjsModule(function(t,e){!function(n){var r=e&&!e.nodeType&&e,o=t&&!t.nodeType&&t,i="object"==typeof commonjsGlobal&&commonjsGlobal;i.global!==i&&i.window!==i&&i.self!==i||(n=i);var a,s,u=2147483647,l=36,c=1,p=26,f=38,h=700,d=72,m=128,g="-",v=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=l-c,_=Math.floor,O=String.fromCharCode;function C(t){throw RangeError(w[t])}function E(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function N(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+E((t=t.replace(b,".")).split("."),e).join(".")}function S(t){for(var e,n,r=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function I(t){return E(t,function(t){var e="";return t>65535&&(e+=O((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+O(t)}).join("")}function P(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function k(t,e,n){var r=0;for(t=n?_(t/h):t>>1,t+=_(t/e);t>x*p>>1;r+=l)t=_(t/x);return _(r+(x+1)*t/(t+f))}function T(t){var e,n,r,o,i,a,s,f,h,v,y,b=[],w=t.length,x=0,O=m,E=d;for((n=t.lastIndexOf(g))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&C("not-basic"),b.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<w;){for(i=x,a=1,s=l;o>=w&&C("invalid-input"),((f=(y=t.charCodeAt(o++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:l)>=l||f>_((u-x)/a))&&C("overflow"),x+=f*a,!(f<(h=s<=E?c:s>=E+p?p:s-E));s+=l)a>_(u/(v=l-h))&&C("overflow"),a*=v;E=k(x-i,e=b.length+1,0==i),_(x/e)>u-O&&C("overflow"),O+=_(x/e),x%=e,b.splice(x++,0,O)}return I(b)}function A(t){var e,n,r,o,i,a,s,f,h,v,y,b,w,x,E,N=[];for(b=(t=S(t)).length,e=m,n=0,i=d,a=0;a<b;++a)(y=t[a])<128&&N.push(O(y));for(r=o=N.length,o&&N.push(g);r<b;){for(s=u,a=0;a<b;++a)(y=t[a])>=e&&y<s&&(s=y);for(s-e>_((u-n)/(w=r+1))&&C("overflow"),n+=(s-e)*w,e=s,a=0;a<b;++a)if((y=t[a])<e&&++n>u&&C("overflow"),y==e){for(f=n,h=l;!(f<(v=h<=i?c:h>=i+p?p:h-i));h+=l)N.push(O(P(v+(E=f-v)%(x=l-v),0))),f=_(E/x);N.push(O(P(f,0))),i=k(n,w,r==o),n=0,++r}++n,++e}return N.join("")}if(a={version:"1.3.2",ucs2:{decode:S,encode:I},decode:T,encode:A,toASCII:function(t){return N(t,function(t){return y.test(t)?"xn--"+A(t):t})},toUnicode:function(t){return N(t,function(t){return v.test(t)?T(t.slice(4).toLowerCase()):t})}},r&&o)if(t.exports==r)o.exports=a;else for(s in a)a.hasOwnProperty(s)&&(r[s]=a[s]);else n.punycode=a}(commonjsGlobal)}),util$1={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}};function hasOwnProperty(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var decode=function(t,e,n,r){e=e||"&",n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var i=/\+/g;t=t.split(e);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=t.length;a>0&&s>a&&(s=a);for(var u=0;u<s;++u){var l,c,p,f,h=t[u].replace(i,"%20"),d=h.indexOf(n);d>=0?(l=h.substr(0,d),c=h.substr(d+1)):(l=h,c=""),p=decodeURIComponent(l),f=decodeURIComponent(c),hasOwnProperty(o,p)?Array.isArray(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o},stringifyPrimitive=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},encode=function(t,e,n,r){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(r){var o=encodeURIComponent(stringifyPrimitive(r))+n;return Array.isArray(t[r])?t[r].map(function(t){return o+encodeURIComponent(stringifyPrimitive(t))}).join(e):o+encodeURIComponent(stringifyPrimitive(t[r]))}).join(e):r?encodeURIComponent(stringifyPrimitive(r))+n+encodeURIComponent(stringifyPrimitive(t)):""},querystring=createCommonjsModule(function(t,e){e.decode=e.parse=decode,e.encode=e.stringify=encode}),querystring_1=querystring.decode,querystring_2=querystring.parse,querystring_3=querystring.encode,querystring_4=querystring.stringify,parse=urlParse,format=urlFormat;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(t,e,n){if(t&&util$1.isObject(t)&&t instanceof Url)return t;var r=new Url;return r.parse(t,e,n),r}function urlFormat(t){return util$1.isString(t)&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)}Url.prototype.parse=function(t,e,n){if(!util$1.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),o=-1!==r&&r<t.indexOf("#")?"?":"#",i=t.split(o);i[0]=i[0].replace(/\\/g,"/");var a=t=i.join(o);if(a=a.trim(),!n&&1===t.split("#").length){var s=simplePathPattern.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?querystring.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=protocolPattern.exec(a);if(u){var l=(u=u[0]).toLowerCase();this.protocol=l,a=a.substr(u.length)}if(n||u||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c="//"===a.substr(0,2);!c||u&&hostlessProtocol[u]||(a=a.substr(2),this.slashes=!0)}if(!hostlessProtocol[u]&&(c||u&&!slashedProtocol[u])){for(var p,f,h=-1,d=0;d<hostEndingChars.length;d++)-1!==(m=a.indexOf(hostEndingChars[d]))&&(-1===h||m<h)&&(h=m);for(-1!==(f=-1===h?a.lastIndexOf("@"):a.lastIndexOf("@",h))&&(p=a.slice(0,f),a=a.slice(f+1),this.auth=decodeURIComponent(p)),h=-1,d=0;d<nonHostChars.length;d++){var m;-1!==(m=a.indexOf(nonHostChars[d]))&&(-1===h||m<h)&&(h=m)}-1===h&&(h=a.length),this.host=a.slice(0,h),a=a.slice(h),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var v=this.hostname.split(/\./),y=(d=0,v.length);d<y;d++){var b=v[d];if(b&&!b.match(hostnamePartPattern)){for(var w="",x=0,_=b.length;x<_;x++)b.charCodeAt(x)>127?w+="x":w+=b[x];if(!w.match(hostnamePartPattern)){var O=v.slice(0,d),C=v.slice(d+1),E=b.match(hostnamePartStart);E&&(O.push(E[1]),C.unshift(E[2])),C.length&&(a="/"+C.join(".")+a),this.hostname=O.join(".");break}}}this.hostname=this.hostname.length>hostnameMaxLen?"":this.hostname.toLowerCase(),g||(this.hostname=punycode.toASCII(this.hostname));var N=this.port?":"+this.port:"";this.host=(this.hostname||"")+N,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!unsafeProtocol[l])for(d=0,y=autoEscape.length;d<y;d++){var S=autoEscape[d];if(-1!==a.indexOf(S)){var I=encodeURIComponent(S);I===S&&(I=escape(S)),a=a.split(S).join(I)}}var P=a.indexOf("#");-1!==P&&(this.hash=a.substr(P),a=a.slice(0,P));var k=a.indexOf("?");return-1!==k?(this.search=a.substr(k),this.query=a.substr(k+1),e&&(this.query=querystring.parse(this.query)),a=a.slice(0,k)):e&&(this.search="",this.query={}),a&&(this.pathname=a),slashedProtocol[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(N=this.pathname||"")+(this.search||"")),this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&util$1.isObject(this.query)&&Object.keys(this.query).length&&(i=querystring.stringify(this.query));var a=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||slashedProtocol[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+r},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if(util$1.isString(t)){var e=new Url;e.parse(t,!1,!0),t=e}for(var n=new Url,r=Object.keys(this),o=0;o<r.length;o++){var i=r[o];n[i]=this[i]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),s=0;s<a.length;s++){var u=a[s];"protocol"!==u&&(n[u]=t[u])}return slashedProtocol[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!slashedProtocol[t.protocol]){for(var l=Object.keys(t),c=0;c<l.length;c++){var p=l[c];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||hostlessProtocol[t.protocol])n.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}return n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,(n.pathname||n.search)&&(n.path=(n.pathname||"")+(n.search||"")),n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var h=n.pathname&&"/"===n.pathname.charAt(0),d=t.host||t.pathname&&"/"===t.pathname.charAt(0),m=d||h||n.host&&t.pathname,g=m,v=n.pathname&&n.pathname.split("/")||[],y=(f=t.pathname&&t.pathname.split("/")||[],n.protocol&&!slashedProtocol[n.protocol]);if(y&&(n.hostname="",n.port=null,n.host&&(""===v[0]?v[0]=n.host:v.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),m=m&&(""===f[0]||""===v[0])),d)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,v=f;else if(f.length)v||(v=[]),v.pop(),v=v.concat(f),n.search=t.search,n.query=t.query;else if(!util$1.isNullOrUndefined(t.search))return y&&(n.hostname=n.host=v.shift(),(O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift())),n.search=t.search,n.query=t.query,util$1.isNull(n.pathname)&&util$1.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!v.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var b=v.slice(-1)[0],w=(n.host||t.host||v.length>1)&&("."===b||".."===b)||""===b,x=0,_=v.length;_>=0;_--)"."===(b=v[_])?v.splice(_,1):".."===b?(v.splice(_,1),x++):x&&(v.splice(_,1),x--);if(!m&&!g)for(;x--;x)v.unshift("..");!m||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),w&&"/"!==v.join("/").substr(-1)&&v.push("");var O,C=""===v[0]||v[0]&&"/"===v[0].charAt(0);return y&&(n.hostname=n.host=C?"":v.length?v.shift():"",(O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift())),(m=m||n.host&&v.length)&&!C&&v.unshift(""),v.length?n.pathname=v.join("/"):(n.pathname=null,n.path=null),util$1.isNull(n.pathname)&&util$1.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},Url.prototype.parseHost=function(){var t=this.host,e=portPattern.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var aspromise=asPromise;function asPromise(t,e){for(var n=new Array(arguments.length-1),r=0,o=2,i=!0;o<arguments.length;)n[r++]=arguments[o++];return new Promise(function(o,a){n[r]=function(t){if(i)if(i=!1,t)a(t);else{for(var e=new Array(arguments.length-1),n=0;n<e.length;)e[n++]=arguments[n];o.apply(null,e)}};try{t.apply(e||null,n)}catch(t){i&&(i=!1,a(t))}})}var base64_1=createCommonjsModule(function(t,e){var n=e;n.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&"="===t.charAt(e);)++n;return Math.ceil(3*t.length)/4-n};for(var r=new Array(64),o=new Array(123),i=0;i<64;)o[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;n.encode=function(t,e,n){for(var o,i=null,a=[],s=0,u=0;e<n;){var l=t[e++];switch(u){case 0:a[s++]=r[l>>2],o=(3&l)<<4,u=1;break;case 1:a[s++]=r[o|l>>4],o=(15&l)<<2,u=2;break;case 2:a[s++]=r[o|l>>6],a[s++]=r[63&l],u=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return u&&(a[s++]=r[o],a[s++]=61,1===u&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))},n.decode=function(t,e,n){for(var r,i=n,a=0,s=0;s<t.length;){var u=t.charCodeAt(s++);if(61===u&&a>1)break;if(void 0===(u=o[u]))throw Error("invalid encoding");switch(a){case 0:r=u,a=1;break;case 1:e[n++]=r<<2|(48&u)>>4,r=u,a=2;break;case 2:e[n++]=(15&r)<<4|(60&u)>>2,r=u,a=3;break;case 3:e[n++]=(3&r)<<6|u,a=0}}if(1===a)throw Error("invalid encoding");return n-i},n.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}}),eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},EventEmitter.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this},EventEmitter.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this};var float_1=factory(factory);function factory(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),r=128===n[3];function o(t,r,o){e[0]=t,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3]}function i(t,r,o){e[0]=t,r[o]=n[3],r[o+1]=n[2],r[o+2]=n[1],r[o+3]=n[0]}function a(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],e[0]}function s(t,r){return n[3]=t[r],n[2]=t[r+1],n[1]=t[r+2],n[0]=t[r+3],e[0]}t.writeFloatLE=r?o:i,t.writeFloatBE=r?i:o,t.readFloatLE=r?a:s,t.readFloatBE=r?s:a}():function(){function e(t,e,n,r){var o=e<0?1:0;if(o&&(e=-e),0===e)t(1/e>0?0:2147483648,n,r);else if(isNaN(e))t(2143289344,n,r);else if(e>3.4028234663852886e38)t((o<<31|2139095040)>>>0,n,r);else if(e<1.1754943508222875e-38)t((o<<31|Math.round(e/1.401298464324817e-45))>>>0,n,r);else{var i=Math.floor(Math.log(e)/Math.LN2);t((o<<31|i+127<<23|8388607&Math.round(e*Math.pow(2,-i)*8388608))>>>0,n,r)}}function n(t,e,n){var r=t(e,n),o=2*(r>>31)+1,i=r>>>23&255,a=8388607&r;return 255===i?a?NaN:o*(1/0):0===i?1.401298464324817e-45*o*a:o*Math.pow(2,i-150)*(a+8388608)}t.writeFloatLE=e.bind(null,writeUintLE),t.writeFloatBE=e.bind(null,writeUintBE),t.readFloatLE=n.bind(null,readUintLE),t.readFloatBE=n.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),r=128===n[7];function o(t,r,o){e[0]=t,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3],r[o+4]=n[4],r[o+5]=n[5],r[o+6]=n[6],r[o+7]=n[7]}function i(t,r,o){e[0]=t,r[o]=n[7],r[o+1]=n[6],r[o+2]=n[5],r[o+3]=n[4],r[o+4]=n[3],r[o+5]=n[2],r[o+6]=n[1],r[o+7]=n[0]}function a(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],n[4]=t[r+4],n[5]=t[r+5],n[6]=t[r+6],n[7]=t[r+7],e[0]}function s(t,r){return n[7]=t[r],n[6]=t[r+1],n[5]=t[r+2],n[4]=t[r+3],n[3]=t[r+4],n[2]=t[r+5],n[1]=t[r+6],n[0]=t[r+7],e[0]}t.writeDoubleLE=r?o:i,t.writeDoubleBE=r?i:o,t.readDoubleLE=r?a:s,t.readDoubleBE=r?s:a}():function(){function e(t,e,n,r,o,i){var a=r<0?1:0;if(a&&(r=-r),0===r)t(0,o,i+e),t(1/r>0?0:2147483648,o,i+n);else if(isNaN(r))t(0,o,i+e),t(2146959360,o,i+n);else if(r>1.7976931348623157e308)t(0,o,i+e),t((a<<31|2146435072)>>>0,o,i+n);else{var s;if(r<2.2250738585072014e-308)t((s=r/5e-324)>>>0,o,i+e),t((a<<31|s/4294967296)>>>0,o,i+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),t(4503599627370496*(s=r*Math.pow(2,-u))>>>0,o,i+e),t((a<<31|u+1023<<20|1048576*s&1048575)>>>0,o,i+n)}}}function n(t,e,n,r,o){var i=t(r,o+e),a=t(r,o+n),s=2*(a>>31)+1,u=a>>>20&2047,l=4294967296*(1048575&a)+i;return 2047===u?l?NaN:s*(1/0):0===u?5e-324*s*l:s*Math.pow(2,u-1075)*(l+4503599627370496)}t.writeDoubleLE=e.bind(null,writeUintLE,0,4),t.writeDoubleBE=e.bind(null,writeUintBE,4,0),t.readDoubleLE=n.bind(null,readUintLE,0,4),t.readDoubleBE=n.bind(null,readUintBE,4,0)}(),t}function writeUintLE(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function writeUintBE(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function readUintLE(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function readUintBE(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod$$1=eval("quire".replace(/^/,"re"))(moduleName);if(mod$$1&&(mod$$1.length||Object.keys(mod$$1).length))return mod$$1}catch(t){}return null}var utf8_1=createCommonjsModule(function(t,e){var n=e;n.length=function(t){for(var e=0,n=0,r=0;r<t.length;++r)(n=t.charCodeAt(r))<128?e+=1:n<2048?e+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e},n.read=function(t,e,n){if(n-e<1)return"";for(var r,o=null,i=[],a=0;e<n;)(r=t[e++])<128?i[a++]=r:r>191&&r<224?i[a++]=(31&r)<<6|63&t[e++]:r>239&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,i[a++]=55296+(r>>10),i[a++]=56320+(1023&r)):i[a++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},n.write=function(t,e,n){for(var r,o,i=n,a=0;a<t.length;++a)(r=t.charCodeAt(a))<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(o=t.charCodeAt(a+1)))?(++a,e[n++]=(r=65536+((1023&r)<<10)+(1023&o))>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128);return n-i}}),pool_1=pool;function pool(t,e,n){var r=n||8192,o=r>>>1,i=null,a=r;return function(n){if(n<1||n>o)return t(n);a+n>r&&(i=t(r),a=0);var s=e.call(i,a,a+=n);return 7&a&&(a=1+(7|a)),s}}var longbits=LongBits;function LongBits(t,e){this.lo=t>>>0,this.hi=e>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(t){if(0===t)return zero;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new LongBits(n,r)},LongBits.from=function(t){if("number"==typeof t)return LongBits.fromNumber(t);if(minimal.isString(t)){if(!minimal.Long)return LongBits.fromNumber(parseInt(t,10));t=minimal.Long.fromString(t)}return t.low||t.high?new LongBits(t.low>>>0,t.high>>>0):zero},LongBits.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(t){return minimal.Long?new minimal.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(t){return t===zeroHash?zero:new LongBits((charCodeAt.call(t,0)|charCodeAt.call(t,1)<<8|charCodeAt.call(t,2)<<16|charCodeAt.call(t,3)<<24)>>>0,(charCodeAt.call(t,4)|charCodeAt.call(t,5)<<8|charCodeAt.call(t,6)<<16|charCodeAt.call(t,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},LongBits.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},LongBits.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10};var minimal=createCommonjsModule(function(t,e){var n=e;function r(t,e,n){for(var r=Object.keys(e),o=0;o<r.length;++o)void 0!==t[r[o]]&&n||(t[r[o]]=e[r[o]]);return t}function o(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}n.asPromise=aspromise,n.base64=base64_1,n.EventEmitter=eventemitter,n.float=float_1,n.inquire=inquire_1,n.utf8=utf8_1,n.pool=pool_1,n.LongBits=longbits,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isNode=Boolean(commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),n.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},n.isString=function(t){return"string"==typeof t||t instanceof String},n.isObject=function(t){return t&&"object"==typeof t},n.isset=n.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},n.Buffer=function(){try{var t=n.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(t){return"number"==typeof t?n.Buffer?n._Buffer_allocUnsafe(t):new n.Array(t):n.Buffer?n._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=commonjsGlobal.dcodeIO&&commonjsGlobal.dcodeIO.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(t){return t?n.LongBits.from(t).toHash():n.LongBits.zeroHash},n.longFromHash=function(t,e){var r=n.LongBits.fromHash(t);return n.Long?n.Long.fromBits(r.lo,r.hi,e):r.toNumber(Boolean(e))},n.merge=r,n.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},n.newError=o,n.ProtocolError=o("ProtocolError"),n.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(1===e[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},n.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var t=n.Buffer;t?(n._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n)},n._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}),writer=Writer,BufferWriter,LongBits$1=minimal.LongBits,base64=minimal.base64,utf8=minimal.utf8;function Op(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function noop(){}function State(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Writer(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}function writeByte(t,e,n){e[n]=255&t}function writeVarint32(t,e,n){for(;t>127;)e[n++]=127&t|128,t>>>=7;e[n]=t}function VarintOp(t,e){this.len=t,this.next=void 0,this.val=e}function writeVarint64(t,e,n){for(;t.hi;)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function writeFixed32(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}Writer.create=minimal.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer},Writer.alloc=function(t){return new minimal.Array(t)},minimal.Array!==Array&&(Writer.alloc=minimal.pool(Writer.alloc,minimal.Array.prototype.subarray)),Writer.prototype._push=function(t,e,n){return this.tail=this.tail.next=new Op(t,e,n),this.len+=e,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new VarintOp((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},Writer.prototype.int32=function(t){return t<0?this._push(writeVarint64,10,LongBits$1.fromNumber(t)):this.uint32(t)},Writer.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},Writer.prototype.uint64=function(t){var e=LongBits$1.from(t);return this._push(writeVarint64,e.length(),e)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(t){var e=LongBits$1.from(t).zzEncode();return this._push(writeVarint64,e.length(),e)},Writer.prototype.bool=function(t){return this._push(writeByte,1,t?1:0)},Writer.prototype.fixed32=function(t){return this._push(writeFixed32,4,t>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(t){var e=LongBits$1.from(t);return this._push(writeFixed32,4,e.lo)._push(writeFixed32,4,e.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(t){return this._push(minimal.float.writeFloatLE,4,t)},Writer.prototype.double=function(t){return this._push(minimal.float.writeDoubleLE,8,t)};var writeBytes=minimal.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};Writer.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(writeByte,1,0);if(minimal.isString(t)){var n=Writer.alloc(e=base64.length(t));base64.decode(t,n,0),t=n}return this.uint32(e)._push(writeBytes,e,t)},Writer.prototype.string=function(t){var e=utf8.length(t);return e?this.uint32(e)._push(utf8.write,e,t):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},Writer.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},Writer._configure=function(t){BufferWriter=t};var writer_buffer=BufferWriter$1;(BufferWriter$1.prototype=Object.create(writer.prototype)).constructor=BufferWriter$1;var Buffer=minimal.Buffer;function BufferWriter$1(){writer.call(this)}BufferWriter$1.alloc=function(t){return(BufferWriter$1.alloc=minimal._Buffer_allocUnsafe)(t)};var writeBytesBuffer=Buffer&&Buffer.prototype instanceof Uint8Array&&"set"===Buffer.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]};function writeStringBuffer(t,e,n){t.length<40?minimal.utf8.write(t,e,n):e.utf8Write(t,n)}BufferWriter$1.prototype.bytes=function(t){minimal.isString(t)&&(t=minimal._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(writeBytesBuffer,e,t),this},BufferWriter$1.prototype.string=function(t){var e=Buffer.byteLength(t);return this.uint32(e),e&&this._push(writeStringBuffer,e,t),this};var reader=Reader,BufferReader,LongBits$2=minimal.LongBits,utf8$1=minimal.utf8;function indexOutOfRange(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Reader(t){this.buf=t,this.pos=0,this.len=t.length}var create_array="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new Reader(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new Reader(t);throw Error("illegal buffer")},e;function readLongVarint(){var t=new LongBits$2(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function readFixed32_end(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$2(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=minimal.Buffer?function(t){return(Reader.create=function(t){return minimal.Buffer.isBuffer(t)?new BufferReader(t):create_array(t)})(t)}:create_array,Reader.prototype._slice=minimal.Array.prototype.subarray||minimal.Array.prototype.slice,Reader.prototype.uint32=(e=4294967295,function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var t=minimal.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var t=minimal.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},Reader.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw indexOutOfRange(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)},Reader.prototype.string=function(){var t=this.bytes();return utf8$1.read(t,0,t.length)},Reader.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw indexOutOfRange(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},Reader._configure=function(t){BufferReader=t;var e=minimal.Long?"toLong":"toNumber";minimal.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader$1;function BufferReader$1(t){reader.call(this,t)}(BufferReader$1.prototype=Object.create(reader.prototype)).constructor=BufferReader$1,minimal.Buffer&&(BufferReader$1.prototype._slice=minimal.Buffer.prototype.slice),BufferReader$1.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len))};var service=Service;function Service(t,e,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");minimal.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n)}(Service.prototype=Object.create(minimal.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function t(e,n,r,o,i){if(!o)throw TypeError("request must be specified");var a=this;if(!i)return minimal.asPromise(t,a,e,n,r,o);if(a.rpcImpl)try{return a.rpcImpl(e,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(t,n){if(t)return a.emit("error",t,e),i(t);if(null!==n){if(!(n instanceof r))try{n=r[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){return a.emit("error",t,e),i(t)}return a.emit("data",n,e),i(null,n)}a.end(!0)})}catch(t){return a.emit("error",t,e),void setTimeout(function(){i(t)},0)}else setTimeout(function(){i(Error("already ended"))},0)},Service.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var rpc_1=createCommonjsModule(function(t,e){e.Service=service}),roots={},indexMinimal=createCommonjsModule(function(t,e){var n=e;function r(){n.Reader._configure(n.BufferReader),n.util._configure()}n.build="minimal",n.Writer=writer,n.BufferWriter=writer_buffer,n.Reader=reader,n.BufferReader=reader_buffer,n.util=minimal,n.rpc=rpc_1,n.roots=roots,n.configure=r,n.Writer._configure(n.BufferWriter),r()}),minimal$1=indexMinimal,minimal_1=minimal$1.roots,minimal_2=minimal$1.Reader,minimal_3=minimal$1.util,$Reader=minimal$1.Reader,$util=minimal$1.util,$root=minimal$1.roots.default||(minimal$1.roots.default={});$root.tensorflow=function(){var t,e,n={};return n.Any=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.typeUrl="",t.prototype.value=$util.newBuffer([]),t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.Any;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.typeUrl=t.string();break;case 2:r.value=t.bytes();break;default:t.skipType(7&o)}}return r},t}(),n.DataType=(t={},(e=Object.create(t))[t[0]="DT_INVALID"]=0,e[t[1]="DT_FLOAT"]=1,e[t[2]="DT_DOUBLE"]=2,e[t[3]="DT_INT32"]=3,e[t[4]="DT_UINT8"]=4,e[t[5]="DT_INT16"]=5,e[t[6]="DT_INT8"]=6,e[t[7]="DT_STRING"]=7,e[t[8]="DT_COMPLEX64"]=8,e[t[9]="DT_INT64"]=9,e[t[10]="DT_BOOL"]=10,e[t[11]="DT_QINT8"]=11,e[t[12]="DT_QUINT8"]=12,e[t[13]="DT_QINT32"]=13,e[t[14]="DT_BFLOAT16"]=14,e[t[101]="DT_FLOAT_REF"]=101,e[t[102]="DT_DOUBLE_REF"]=102,e[t[103]="DT_INT32_REF"]=103,e[t[104]="DT_UINT8_REF"]=104,e[t[105]="DT_INT16_REF"]=105,e[t[106]="DT_INT8_REF"]=106,e[t[107]="DT_STRING_REF"]=107,e[t[108]="DT_COMPLEX64_REF"]=108,e[t[109]="DT_INT64_REF"]=109,e[t[110]="DT_BOOL_REF"]=110,e[t[111]="DT_QINT8_REF"]=111,e[t[112]="DT_QUINT8_REF"]=112,e[t[113]="DT_QINT32_REF"]=113,e[t[114]="DT_BFLOAT16_REF"]=114,e),n.TensorShape=function(){function t(t){if(this.dim=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dim=$util.emptyArray,t.prototype.unknownRank=!1,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.TensorShape;t.pos<n;){var o=t.uint32();switch(o>>>3){case 2:r.dim&&r.dim.length||(r.dim=[]),r.dim.push($root.tensorflow.TensorShape.Dim.decode(t,t.uint32()));break;case 3:r.unknownRank=t.bool();break;default:t.skipType(7&o)}}return r},t.Dim=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.size=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.name="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.TensorShape.Dim;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.size=t.int64();break;case 2:r.name=t.string();break;default:t.skipType(7&o)}}return r},t}(),t}(),n.Tensor=function(){function t(t){if(this.floatVal=[],this.doubleVal=[],this.intVal=[],this.stringVal=[],this.scomplexVal=[],this.int64Val=[],this.boolVal=[],this.uint32Val=[],this.uint64Val=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dtype=0,t.prototype.tensorShape=null,t.prototype.versionNumber=0,t.prototype.tensorContent=$util.newBuffer([]),t.prototype.floatVal=$util.emptyArray,t.prototype.doubleVal=$util.emptyArray,t.prototype.intVal=$util.emptyArray,t.prototype.stringVal=$util.emptyArray,t.prototype.scomplexVal=$util.emptyArray,t.prototype.int64Val=$util.emptyArray,t.prototype.boolVal=$util.emptyArray,t.prototype.uint32Val=$util.emptyArray,t.prototype.uint64Val=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.Tensor;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.dtype=t.int32();break;case 2:r.tensorShape=$root.tensorflow.TensorShape.decode(t,t.uint32());break;case 3:r.versionNumber=t.int32();break;case 4:r.tensorContent=t.bytes();break;case 5:if(r.floatVal&&r.floatVal.length||(r.floatVal=[]),2==(7&o))for(var i=t.uint32()+t.pos;t.pos<i;)r.floatVal.push(t.float());else r.floatVal.push(t.float());break;case 6:if(r.doubleVal&&r.doubleVal.length||(r.doubleVal=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.doubleVal.push(t.double());else r.doubleVal.push(t.double());break;case 7:if(r.intVal&&r.intVal.length||(r.intVal=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.intVal.push(t.int32());else r.intVal.push(t.int32());break;case 8:r.stringVal&&r.stringVal.length||(r.stringVal=[]),r.stringVal.push(t.bytes());break;case 9:if(r.scomplexVal&&r.scomplexVal.length||(r.scomplexVal=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.scomplexVal.push(t.float());else r.scomplexVal.push(t.float());break;case 10:if(r.int64Val&&r.int64Val.length||(r.int64Val=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.int64Val.push(t.int64());else r.int64Val.push(t.int64());break;case 11:if(r.boolVal&&r.boolVal.length||(r.boolVal=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.boolVal.push(t.bool());else r.boolVal.push(t.bool());break;case 16:if(r.uint32Val&&r.uint32Val.length||(r.uint32Val=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.uint32Val.push(t.uint32());else r.uint32Val.push(t.uint32());break;case 17:if(r.uint64Val&&r.uint64Val.length||(r.uint64Val=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.uint64Val.push(t.uint64());else r.uint64Val.push(t.uint64());break;default:t.skipType(7&o)}}return r},t}(),n.AttrValue=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.list=null,t.prototype.s=$util.newBuffer([]),t.prototype.i=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.f=0,t.prototype.b=!1,t.prototype.type=0,t.prototype.shape=null,t.prototype.tensor=null,t.prototype.placeholder="",t.prototype.func=null,Object.defineProperty(t.prototype,"value",{get:$util.oneOfGetter(e=["list","s","i","f","b","type","shape","tensor","placeholder","func"]),set:$util.oneOfSetter(e)}),t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.AttrValue;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.list=$root.tensorflow.AttrValue.ListValue.decode(t,t.uint32());break;case 2:r.s=t.bytes();break;case 3:r.i=t.int64();break;case 4:r.f=t.float();break;case 5:r.b=t.bool();break;case 6:r.type=t.int32();break;case 7:r.shape=$root.tensorflow.TensorShape.decode(t,t.uint32());break;case 8:r.tensor=$root.tensorflow.Tensor.decode(t,t.uint32());break;case 9:r.placeholder=t.string();break;case 10:r.func=$root.tensorflow.NameAttrList.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},t.ListValue=function(){function t(t){if(this.s=[],this.i=[],this.f=[],this.b=[],this.type=[],this.shape=[],this.tensor=[],this.func=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.s=$util.emptyArray,t.prototype.i=$util.emptyArray,t.prototype.f=$util.emptyArray,t.prototype.b=$util.emptyArray,t.prototype.type=$util.emptyArray,t.prototype.shape=$util.emptyArray,t.prototype.tensor=$util.emptyArray,t.prototype.func=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.AttrValue.ListValue;t.pos<n;){var o=t.uint32();switch(o>>>3){case 2:r.s&&r.s.length||(r.s=[]),r.s.push(t.bytes());break;case 3:if(r.i&&r.i.length||(r.i=[]),2==(7&o))for(var i=t.uint32()+t.pos;t.pos<i;)r.i.push(t.int64());else r.i.push(t.int64());break;case 4:if(r.f&&r.f.length||(r.f=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.f.push(t.float());else r.f.push(t.float());break;case 5:if(r.b&&r.b.length||(r.b=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.b.push(t.bool());else r.b.push(t.bool());break;case 6:if(r.type&&r.type.length||(r.type=[]),2==(7&o))for(i=t.uint32()+t.pos;t.pos<i;)r.type.push(t.int32());else r.type.push(t.int32());break;case 7:r.shape&&r.shape.length||(r.shape=[]),r.shape.push($root.tensorflow.TensorShape.decode(t,t.uint32()));break;case 8:r.tensor&&r.tensor.length||(r.tensor=[]),r.tensor.push($root.tensorflow.Tensor.decode(t,t.uint32()));break;case 9:r.func&&r.func.length||(r.func=[]),r.func.push($root.tensorflow.NameAttrList.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t}(),t}(),n.NameAttrList=function(){function t(t){if(this.attr={},t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.attr=$util.emptyObject,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n,r=void 0===e?t.len:t.pos+e,o=new $root.tensorflow.NameAttrList;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:o.name=t.string();break;case 2:t.skip().pos++,o.attr===$util.emptyObject&&(o.attr={}),n=t.string(),t.pos++,o.attr[n]=$root.tensorflow.AttrValue.decode(t,t.uint32());break;default:t.skipType(7&i)}}return o},t}(),n.NodeDef=function(){function t(t){if(this.input=[],this.attr={},t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.op="",t.prototype.input=$util.emptyArray,t.prototype.device="",t.prototype.attr=$util.emptyObject,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n,r=void 0===e?t.len:t.pos+e,o=new $root.tensorflow.NodeDef;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:o.name=t.string();break;case 2:o.op=t.string();break;case 3:o.input&&o.input.length||(o.input=[]),o.input.push(t.string());break;case 4:o.device=t.string();break;case 5:t.skip().pos++,o.attr===$util.emptyObject&&(o.attr={}),n=t.string(),t.pos++,o.attr[n]=$root.tensorflow.AttrValue.decode(t,t.uint32());break;default:t.skipType(7&i)}}return o},t}(),n.VersionDef=function(){function t(t){if(this.badConsumers=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.producer=0,t.prototype.minConsumer=0,t.prototype.badConsumers=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.VersionDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.producer=t.int32();break;case 2:r.minConsumer=t.int32();break;case 3:if(r.badConsumers&&r.badConsumers.length||(r.badConsumers=[]),2==(7&o))for(var i=t.uint32()+t.pos;t.pos<i;)r.badConsumers.push(t.int32());else r.badConsumers.push(t.int32());break;default:t.skipType(7&o)}}return r},t}(),n.GraphDef=function(){function t(t){if(this.node=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.node=$util.emptyArray,t.prototype.versions=null,t.prototype.library=null,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.GraphDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.node&&r.node.length||(r.node=[]),r.node.push($root.tensorflow.NodeDef.decode(t,t.uint32()));break;case 4:r.versions=$root.tensorflow.VersionDef.decode(t,t.uint32());break;case 2:r.library=$root.tensorflow.FunctionDefLibrary.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},t}(),n.CollectionDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.nodeList=null,t.prototype.bytesList=null,t.prototype.int64List=null,t.prototype.floatList=null,t.prototype.anyList=null,Object.defineProperty(t.prototype,"kind",{get:$util.oneOfGetter(e=["nodeList","bytesList","int64List","floatList","anyList"]),set:$util.oneOfSetter(e)}),t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.nodeList=$root.tensorflow.CollectionDef.NodeList.decode(t,t.uint32());break;case 2:r.bytesList=$root.tensorflow.CollectionDef.BytesList.decode(t,t.uint32());break;case 3:r.int64List=$root.tensorflow.CollectionDef.Int64List.decode(t,t.uint32());break;case 4:r.floatList=$root.tensorflow.CollectionDef.FloatList.decode(t,t.uint32());break;case 5:r.anyList=$root.tensorflow.CollectionDef.AnyList.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},t.NodeList=function(){function t(t){if(this.value=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.value=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef.NodeList;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.value&&r.value.length||(r.value=[]),r.value.push(t.string());break;default:t.skipType(7&o)}}return r},t}(),t.BytesList=function(){function t(t){if(this.value=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.value=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef.BytesList;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.value&&r.value.length||(r.value=[]),r.value.push(t.bytes());break;default:t.skipType(7&o)}}return r},t}(),t.Int64List=function(){function t(t){if(this.value=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.value=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef.Int64List;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:if(r.value&&r.value.length||(r.value=[]),2==(7&o))for(var i=t.uint32()+t.pos;t.pos<i;)r.value.push(t.int64());else r.value.push(t.int64());break;default:t.skipType(7&o)}}return r},t}(),t.FloatList=function(){function t(t){if(this.value=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.value=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef.FloatList;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:if(r.value&&r.value.length||(r.value=[]),2==(7&o))for(var i=t.uint32()+t.pos;t.pos<i;)r.value.push(t.float());else r.value.push(t.float());break;default:t.skipType(7&o)}}return r},t}(),t.AnyList=function(){function t(t){if(this.value=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.value=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef.AnyList;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.value&&r.value.length||(r.value=[]),r.value.push($root.tensorflow.Any.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t}(),t}(),n.SaverDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e,n;return t.prototype.filenameTensorName="",t.prototype.saveTensorName="",t.prototype.restoreOpName="",t.prototype.maxToKeep=0,t.prototype.sharded=!1,t.prototype.keepCheckpointEveryNHours=0,t.prototype.version=0,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.SaverDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.filenameTensorName=t.string();break;case 2:r.saveTensorName=t.string();break;case 3:r.restoreOpName=t.string();break;case 4:r.maxToKeep=t.int32();break;case 5:r.sharded=t.bool();break;case 6:r.keepCheckpointEveryNHours=t.float();break;case 7:r.version=t.int32();break;default:t.skipType(7&o)}}return r},t.CheckpointFormatVersion=(e={},(n=Object.create(e))[e[0]="LEGACY"]=0,n[e[1]="V1"]=1,n[e[2]="V2"]=2,n),t}(),n.TensorInfo=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.name="",t.prototype.cooSparse=null,t.prototype.dtype=0,t.prototype.tensorShape=null,Object.defineProperty(t.prototype,"encoding",{get:$util.oneOfGetter(e=["name","cooSparse"]),set:$util.oneOfSetter(e)}),t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.TensorInfo;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 4:r.cooSparse=$root.tensorflow.TensorInfo.CooSparse.decode(t,t.uint32());break;case 2:r.dtype=t.int32();break;case 3:r.tensorShape=$root.tensorflow.TensorShape.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},t.CooSparse=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.valuesTensorName="",t.prototype.indicesTensorName="",t.prototype.denseShapeTensorName="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.TensorInfo.CooSparse;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.valuesTensorName=t.string();break;case 2:r.indicesTensorName=t.string();break;case 3:r.denseShapeTensorName=t.string();break;default:t.skipType(7&o)}}return r},t}(),t}(),n.SignatureDef=function(){function t(t){if(this.inputs={},this.outputs={},t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.inputs=$util.emptyObject,t.prototype.outputs=$util.emptyObject,t.prototype.methodName="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n,r=void 0===e?t.len:t.pos+e,o=new $root.tensorflow.SignatureDef;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:t.skip().pos++,o.inputs===$util.emptyObject&&(o.inputs={}),n=t.string(),t.pos++,o.inputs[n]=$root.tensorflow.TensorInfo.decode(t,t.uint32());break;case 2:t.skip().pos++,o.outputs===$util.emptyObject&&(o.outputs={}),n=t.string(),t.pos++,o.outputs[n]=$root.tensorflow.TensorInfo.decode(t,t.uint32());break;case 3:o.methodName=t.string();break;default:t.skipType(7&i)}}return o},t}(),n.AssetFileDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.tensorInfo=null,t.prototype.filename="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.AssetFileDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.tensorInfo=$root.tensorflow.TensorInfo.decode(t,t.uint32());break;case 2:r.filename=t.string();break;default:t.skipType(7&o)}}return r},t}(),n.OpDef=function(){function t(t){if(this.inputArg=[],this.outputArg=[],this.attr=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.inputArg=$util.emptyArray,t.prototype.outputArg=$util.emptyArray,t.prototype.attr=$util.emptyArray,t.prototype.deprecation=null,t.prototype.summary="",t.prototype.description="",t.prototype.isCommutative=!1,t.prototype.isAggregate=!1,t.prototype.isStateful=!1,t.prototype.allowsUninitializedInput=!1,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.OpDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 2:r.inputArg&&r.inputArg.length||(r.inputArg=[]),r.inputArg.push($root.tensorflow.OpDef.ArgDef.decode(t,t.uint32()));break;case 3:r.outputArg&&r.outputArg.length||(r.outputArg=[]),r.outputArg.push($root.tensorflow.OpDef.ArgDef.decode(t,t.uint32()));break;case 4:r.attr&&r.attr.length||(r.attr=[]),r.attr.push($root.tensorflow.OpDef.AttrDef.decode(t,t.uint32()));break;case 8:r.deprecation=$root.tensorflow.OpDef.OpDeprecation.decode(t,t.uint32());break;case 5:r.summary=t.string();break;case 6:r.description=t.string();break;case 18:r.isCommutative=t.bool();break;case 16:r.isAggregate=t.bool();break;case 17:r.isStateful=t.bool();break;case 19:r.allowsUninitializedInput=t.bool();break;default:t.skipType(7&o)}}return r},t.ArgDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.description="",t.prototype.type=0,t.prototype.typeAttr="",t.prototype.numberAttr="",t.prototype.typeListAttr="",t.prototype.isRef=!1,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.OpDef.ArgDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 2:r.description=t.string();break;case 3:r.type=t.int32();break;case 4:r.typeAttr=t.string();break;case 5:r.numberAttr=t.string();break;case 6:r.typeListAttr=t.string();break;case 16:r.isRef=t.bool();break;default:t.skipType(7&o)}}return r},t}(),t.AttrDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.type="",t.prototype.defaultValue=null,t.prototype.description="",t.prototype.hasMinimum=!1,t.prototype.minimum=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.allowedValues=null,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.OpDef.AttrDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 2:r.type=t.string();break;case 3:r.defaultValue=$root.tensorflow.AttrValue.decode(t,t.uint32());break;case 4:r.description=t.string();break;case 5:r.hasMinimum=t.bool();break;case 6:r.minimum=t.int64();break;case 7:r.allowedValues=$root.tensorflow.AttrValue.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},t}(),t.OpDeprecation=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.version=0,t.prototype.explanation="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.OpDef.OpDeprecation;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.version=t.int32();break;case 2:r.explanation=t.string();break;default:t.skipType(7&o)}}return r},t}(),t}(),n.OpList=function(){function t(t){if(this.op=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.op=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.OpList;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.op&&r.op.length||(r.op=[]),r.op.push($root.tensorflow.OpDef.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t}(),n.MetaGraphDef=function(){function t(t){if(this.collectionDef={},this.signatureDef={},this.assetFileDef=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.metaInfoDef=null,t.prototype.graphDef=null,t.prototype.saverDef=null,t.prototype.collectionDef=$util.emptyObject,t.prototype.signatureDef=$util.emptyObject,t.prototype.assetFileDef=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n,r=void 0===e?t.len:t.pos+e,o=new $root.tensorflow.MetaGraphDef;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:o.metaInfoDef=$root.tensorflow.MetaGraphDef.MetaInfoDef.decode(t,t.uint32());break;case 2:o.graphDef=$root.tensorflow.GraphDef.decode(t,t.uint32());break;case 3:o.saverDef=$root.tensorflow.SaverDef.decode(t,t.uint32());break;case 4:t.skip().pos++,o.collectionDef===$util.emptyObject&&(o.collectionDef={}),n=t.string(),t.pos++,o.collectionDef[n]=$root.tensorflow.CollectionDef.decode(t,t.uint32());break;case 5:t.skip().pos++,o.signatureDef===$util.emptyObject&&(o.signatureDef={}),n=t.string(),t.pos++,o.signatureDef[n]=$root.tensorflow.SignatureDef.decode(t,t.uint32());break;case 6:o.assetFileDef&&o.assetFileDef.length||(o.assetFileDef=[]),o.assetFileDef.push($root.tensorflow.AssetFileDef.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return o},t.MetaInfoDef=function(){function t(t){if(this.tags=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.metaGraphVersion="",t.prototype.strippedOpList=null,t.prototype.anyInfo=null,t.prototype.tags=$util.emptyArray,t.prototype.tensorflowVersion="",t.prototype.tensorflowGitVersion="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.MetaGraphDef.MetaInfoDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.metaGraphVersion=t.string();break;case 2:r.strippedOpList=$root.tensorflow.OpList.decode(t,t.uint32());break;case 3:r.anyInfo=$root.tensorflow.Any.decode(t,t.uint32());break;case 4:r.tags&&r.tags.length||(r.tags=[]),r.tags.push(t.string());break;case 5:r.tensorflowVersion=t.string();break;case 6:r.tensorflowGitVersion=t.string();break;default:t.skipType(7&o)}}return r},t}(),t}(),n.SavedModel=function(){function t(t){if(this.metaGraphs=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.savedModelSchemaVersion=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.metaGraphs=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.SavedModel;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.savedModelSchemaVersion=t.int64();break;case 2:r.metaGraphs&&r.metaGraphs.length||(r.metaGraphs=[]),r.metaGraphs.push($root.tensorflow.MetaGraphDef.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t}(),n.FunctionDefLibrary=function(){function t(t){if(this.function=[],this.gradient=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.function=$util.emptyArray,t.prototype.gradient=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.FunctionDefLibrary;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.function&&r.function.length||(r.function=[]),r.function.push($root.tensorflow.FunctionDef.decode(t,t.uint32()));break;case 2:r.gradient&&r.gradient.length||(r.gradient=[]),r.gradient.push($root.tensorflow.GradientDef.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t}(),n.FunctionDef=function(){function t(t){if(this.attr={},this.nodeDef=[],this.ret={},t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.signature=null,t.prototype.attr=$util.emptyObject,t.prototype.nodeDef=$util.emptyArray,t.prototype.ret=$util.emptyObject,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n,r=void 0===e?t.len:t.pos+e,o=new $root.tensorflow.FunctionDef;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:o.signature=$root.tensorflow.OpDef.decode(t,t.uint32());break;case 5:t.skip().pos++,o.attr===$util.emptyObject&&(o.attr={}),n=t.string(),t.pos++,o.attr[n]=$root.tensorflow.AttrValue.decode(t,t.uint32());break;case 3:o.nodeDef&&o.nodeDef.length||(o.nodeDef=[]),o.nodeDef.push($root.tensorflow.NodeDef.decode(t,t.uint32()));break;case 4:t.skip().pos++,o.ret===$util.emptyObject&&(o.ret={}),n=t.string(),t.pos++,o.ret[n]=t.string();break;default:t.skipType(7&i)}}return o},t}(),n.GradientDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.functionName="",t.prototype.gradientFunc="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.GradientDef;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.functionName=t.string();break;case 2:r.gradientFunc=t.string();break;default:t.skipType(7&o)}}return r},t}(),n}();var compiled_api=$root,compiled_api_1=compiled_api.tensorflow;function getParamValue(t,e,n,r){var o=e.params[t];if(o&&void 0!==o.inputIndex){if("tensor"===o.type)return getTensor(e.inputNames[o.inputIndex],n,r);if("tensors"===o.type)return(0===o.inputIndex?0===o.inputParamLength?e.inputNames:e.inputNames.slice(o.inputIndex,-o.inputParamLength):e.inputNames.splice(o.inputIndex)).map(function(t){return getTensor(t,n,r)});var i=Array.prototype.slice.call(getTensor(e.inputNames.slice(o.inputIndex)[0],n,r).dataSync());return"number"===o.type?i[0]:i}return o&&o.value}function getTensor(t,e,n){var r=parseNodeName(t),o=r[0],i=r[1],a=n.currentContextIds.find(function(t){return!!e[getNodeNameWithContextId(o,t)]});return void 0!==a?e[getNodeNameWithContextId(o,a)][i]:void 0}function getNodeNameAndIndex(t,e){var n=parseNodeName(t),r=n[1];return[getNodeNameWithContextId(n[0],e&&e.currentContextId),r]}function getNodeNameWithContextId(t,e){return e?t+"-"+e:t}function parseNodeName(t){var e=t.lastIndexOf(":");return-1===e?[t,0]:[t.substring(0,e),Number(t.substring(e+1))]}function split$1(t,e){for(var n=[],r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}var arithmetic=[{tfOpName:"Add",dlOpName:"add",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BiasAdd",dlOpName:"add",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",dlOpName:"sub",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",dlOpName:"div",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",dlOpName:"div",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",dlOpName:"floorDiv",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",dlOpName:"mul",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",dlOpName:"maximum",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"}]},{tfOpName:"Minimum",dlOpName:"minimum",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"}]},{tfOpName:"Pow",dlOpName:"pow",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",dlOpName:"squaredDifference",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",dlOpName:"mod",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],arithmetic$1=Object.freeze({default:arithmetic}),basic_math=[{tfOpName:"Abs",dlOpName:"abs",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",dlOpName:"acos",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",dlOpName:"asin",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"atan",dlOpName:"atan",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",dlOpName:"ceil",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",dlOpName:"clipByValue",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"clip_value_min",dlParamName:"clipValueMin",type:"number"},{tfParamName:"clip_value_max",dlParamName:"clipValueMax",type:"number"}]},{tfOpName:"Cos",dlOpName:"cos",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",dlOpName:"cosh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",dlOpName:"elu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",dlOpName:"exp",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",dlOpName:"floor",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",dlOpName:"log",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",dlOpName:"neg",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",dlOpName:"relu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",dlOpName:"clipByValue",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{dlParamName:"clipValueMin",type:"number",defaultValue:0},{dlParamName:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",dlOpName:"selu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",dlOpName:"sigmoid",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",dlOpName:"sin",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",dlOpName:"sinh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",dlOpName:"sqrt",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",dlOpName:"rsqrt",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",dlOpName:"square",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",dlOpName:"tan",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",dlOpName:"tanh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",dlOpName:"sign",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",dlOpName:"round",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",dlOpName:"expm1",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",dlOpName:"log1p",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",dlOpName:"reciprocal",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",dlOpName:"reciprocal",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",dlOpName:"softplus",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",dlOpName:"asinh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",dlOpName:"acosh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",dlOpName:"atanh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",dlOpName:"erf",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],basicMath=Object.freeze({default:basic_math}),control=[{tfOpName:"LoopCond",dlOpName:"loopCond",category:"control",params:[{tfInputIndex:0,dlParamName:"pred",type:"tensor"}]},{tfOpName:"Switch",dlOpName:"switch",category:"control",params:[{tfInputIndex:0,dlParamName:"data",type:"tensor"},{tfInputIndex:1,dlParamName:"pred",type:"tensor"}]},{tfOpName:"Merge",dlOpName:"merge",category:"control",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"}]},{tfOpName:"Enter",dlOpName:"enter",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"frame_name",dlParamName:"frameName",type:"string"},{tfParamName:"is_constant",dlParamName:"isConstant",type:"bool"}]},{tfOpName:"Exit",dlOpName:"exit",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",dlOpName:"nextIteration",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",dlOpName:"tensorArray",category:"control",params:[{tfInputIndex:0,dlParamName:"size",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape",dlParamName:"elementShape",type:"shape"},{tfParamName:"dynamic_size",dlParamName:"dynamicSize",type:"bool"},{tfParamName:"clear_after_read",dlParamName:"clearAfterRead",type:"bool"},{tfParamName:"identical_element_shapes",dlParamName:"identicalElementShapes",type:"bool"},{tfParamName:"tensor_array_name",dlParamName:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",dlOpName:"tensorArrayWrite",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"index",type:"number"},{tfInputIndex:2,dlParamName:"tensor",type:"tensor"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",dlOpName:"tensorArrayRead",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"index",type:"number"},{tfInputIndex:2,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",dlOpName:"tensorArrayGather",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"indices",type:"number[]"},{tfInputIndex:2,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape",dlParamName:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",dlOpName:"tensorArrayScatter",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"indices",type:"number[]"},{tfInputIndex:2,dlParamName:"tensor",type:"number[]"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",dlOpName:"tensorArrayConcat",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape_except0",dlParamName:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",dlOpName:"tensorArraySplit",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"tensor",type:"tensor"},{tfInputIndex:2,dlParamName:"lengths",type:"number[]"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",dlOpName:"tensorArraySize",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",dlOpName:"tensorArrayClose",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"}]}],control$1=Object.freeze({default:control}),convolution=[{tfOpName:"AvgPool",dlOpName:"avgPool",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0},{tfParamName:"ksize",dlParamName:"kernelSize",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",dlOpName:"maxPool",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0},{tfParamName:"ksize",dlParamName:"kernelSize",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",dlOpName:"conv1d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"stride",dlParamName:"stride",type:"number"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NWC"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"dilation",dlParamName:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",dlOpName:"conv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"useCudnnOnGpu",dlParamName:"useCudnnOnGpu",type:"bool"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]},{tfOpName:"Conv2DBackpropInput",dlOpName:"conv2dTranspose",category:"convolution",params:[{tfInputIndex:2,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfInputIndex:0,dlParamName:"outputShape",type:"number[]"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",dlOpName:"depthwiseConv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"input",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",dlOpName:"depthwiseConv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"input",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]}],convolution$1=Object.freeze({default:convolution}),creation=[{tfOpName:"Fill",dlOpName:"fill",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfInputIndex:1,dlParamName:"value",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LinSpace",dlOpName:"linspace",category:"creation",params:[{tfInputIndex:0,dlParamName:"start",type:"number"},{tfInputIndex:1,dlParamName:"stop",type:"number"},{tfInputIndex:2,dlParamName:"num",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",dlOpName:"oneHot",category:"creation",params:[{tfInputIndex:0,dlParamName:"indices",type:"tensor"},{tfInputIndex:1,dlParamName:"depth",type:"number"},{tfInputIndex:2,dlParamName:"onValue",type:"number",defaultValue:1},{tfInputIndex:3,dlParamName:"offValue",type:"number",defaultValue:0},{tfParamName:"axis",dlParamName:"axis",type:"number",notSupported:!0},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",dlOpName:"ones",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",dlOpName:"onesLike",category:"creation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",dlOpName:"randomUniform",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"minval",dlParamName:"minval",type:"number",defaultValue:0},{tfParamName:"maxval",dlParamName:"maxval",type:"number",defaultValue:1},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"seed",dlParamName:"seed",type:"number",defaultValue:0},{tfParamName:"seed2",dlParamName:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfParamName:"T",dlParamName:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",dlOpName:"range",category:"creation",params:[{tfInputIndex:0,dlParamName:"start",type:"number"},{tfInputIndex:1,dlParamName:"stop",type:"number"},{tfInputIndex:2,dlParamName:"step",type:"number",defaultValue:0},{tfParamName:"Tidx",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"truncatedNormal",dlOpName:"truncatedNormal",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"means",dlParamName:"mean",type:"number",defaultValue:0},{tfParamName:"stddev",dlParamName:"stdDev",type:"number",defaultValue:1},{tfParamName:"seed",dlParamName:"seed",type:"number"},{tfParamName:"seed2",dlParamName:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"T",dlParamName:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",dlOpName:"zeros",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",dlOpName:"zerosLike",category:"creation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]}],creation$1=Object.freeze({default:creation}),graph=[{tfOpName:"PlaceholderWithDefault",dlOpName:"placeholder",category:"graph",params:[{tfInputIndex:0,dlParamName:"default",type:"tensor"},{tfParamName:"shape",dlParamName:"shape",type:"shape"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",dlOpName:"placeholder",category:"graph",params:[{tfParamName:"shape",dlParamName:"shape",type:"shape"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"Const",dlOpName:"const",category:"graph"},{tfOpName:"Identity",dlOpName:"identity",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Snapshot",dlOpName:"snapshot",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Rank",dlOpName:"rank",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Size",dlOpName:"size",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Shape",dlOpName:"shape",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Print",dlOpName:"print",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,tfInputParamLength:1,dlParamName:"data",type:"tensors"},{tfParamName:"message",dlParamName:"message",type:"string"},{tfParamName:"first_n",dlParamName:"firstN",type:"number",notSupprted:!0},{tfParamName:"summarize",dlParamName:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",dlOpName:"noop",category:"graph",params:[]},{tfOpName:"StopGradient",dlOpName:"stopGradient",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",dlOpName:"fakeQuantWithMinMaxVars",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"min",dlParamName:"min",type:"number"},{tfParamName:"max",dlParamName:"max",type:"number"}]}],graph$1=Object.freeze({default:graph}),image$1=[{tfOpName:"ResizeBilinear",dlOpName:"resizeBilinear",category:"image",params:[{tfInputIndex:0,dlParamName:"images",type:"tensor"},{tfInputIndex:1,dlParamName:"size",type:"number[]"},{tfParamName:"align_corners",dlParamName:"alignCorners",type:"bool"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",dlOpName:"resizeNearestNeighbor",category:"image",params:[{tfInputIndex:0,dlParamName:"images",type:"tensor"},{tfInputIndex:1,dlParamName:"size",type:"number[]"},{tfParamName:"align_corners",dlParamName:"alignCorners",type:"bool"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],image$2=Object.freeze({default:image$1}),logical=[{tfOpName:"Equal",dlOpName:"equal",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",dlOpName:"notEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",dlOpName:"greater",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",dlOpName:"greaterEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",dlOpName:"less",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",dlOpName:"lessEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",dlOpName:"logicalAnd",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",dlOpName:"logicalNot",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",dlOpName:"logicalOr",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",dlOpName:"where",category:"logical",params:[{tfInputIndex:0,dlParamName:"condition",type:"tensor"},{tfInputIndex:1,dlParamName:"a",type:"tensor"},{tfInputIndex:2,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],logical$1=Object.freeze({default:logical}),matrices=[{tfOpName:"MatMul",dlOpName:"matMul",category:"matrices",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"transpose_a",dlParamName:"transposeA",type:"bool",defaultValue:!1},{tfParamName:"transpose_b",dlParamName:"transposeB",type:"bool",defaultValue:!1},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",dlOpName:"transpose",category:"matrices",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"perm",dlParamName:"perm",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],matrices$1=Object.freeze({default:matrices}),normalization=[{tfOpName:"FusedBatchNorm",dlOpName:"batchNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"scale",type:"tensor"},{tfInputIndex:2,dlParamName:"offset",type:"tensor"},{tfInputIndex:3,dlParamName:"mean",type:"tensor"},{tfInputIndex:4,dlParamName:"variance",type:"tensor"},{tfParamName:"epsilon",dlParamName:"epsilon",type:"number",defaultValue:.001},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",dlOpName:"batchNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"scale",type:"tensor"},{tfInputIndex:2,dlParamName:"offset",type:"tensor"},{tfInputIndex:3,dlParamName:"mean",type:"tensor"},{tfInputIndex:4,dlParamName:"variance",type:"tensor"},{tfParamName:"epsilon",dlParamName:"epsilon",type:"number",defaultValue:.001},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",dlOpName:"localResponseNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"depth_radius",dlParamName:"radius",type:"number",defaultValue:5},{tfParamName:"bias",dlParamName:"bias",type:"number",defaultValue:1},{tfParamName:"alpha",dlParamName:"alpha",type:"number",defaultValue:1},{tfParamName:"beta",dlParamName:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",dlOpName:"softmax",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]}],normalization$1=Object.freeze({default:normalization}),reduction=[{tfOpName:"Max",dlOpName:"max",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Mean",dlOpName:"mean",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Min",dlOpName:"min",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Sum",dlOpName:"sum",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"All",dlOpName:"all",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Any",dlOpName:"any",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",dlOpName:"argMax",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"ArgMin",dlOpName:"argMin",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]}],reduction$1=Object.freeze({default:reduction}),slice_join=[{tfOpName:"ConcatV2",dlOpName:"concat",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:1,dlParamName:"tensors",type:"tensors"},{tfInputIndex:-1,dlParamName:"axis",type:"number"}]},{tfOpName:"Concat",dlOpName:"concat",category:"slice_join",params:[{tfInputIndex:1,tfInputParamLength:1,dlParamName:"tensors",type:"tensors"},{tfInputIndex:0,dlParamName:"axis",type:"number"}]},{tfOpName:"GatherV2",dlOpName:"gather",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"indices",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",dlOpName:"gather",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"indices",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0},{tfParamName:"validate_indices",dlParamName:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",dlOpName:"reverse",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"ReverseV2",dlOpName:"reverse",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"Slice",dlOpName:"slice",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"begin",type:"number[]"},{tfInputIndex:2,dlParamName:"size",type:"number[]"}]},{tfOpName:"StridedSlice",dlOpName:"stridedSlice",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"begin",type:"number[]"},{tfInputIndex:2,dlParamName:"end",type:"number[]"},{tfInputIndex:3,dlParamName:"strides",type:"number[]"},{tfParamName:"begin_mask",dlParamName:"beginMask",type:"number",defaultValue:0},{tfParamName:"end_mask",dlParamName:"endMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",dlOpName:"stack",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",dlOpName:"unstack",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0},{tfParamName:"num",dlParamName:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",dlOpName:"tile",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"reps",type:"number[]"}]},{tfOpName:"Split",dlOpName:"split",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"axis",type:"number",defaultValue:0},{tfInputIndex:1,dlParamName:"x",type:"tensor"},{tfParamName:"num_split",dlParamName:"numOrSizeSplits",type:"number",defaultValue:1}]}],sliceJoin=Object.freeze({default:slice_join}),transformation=[{tfOpName:"Cast",dlOpName:"cast",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"SrcT",dlParamName:"sdtype",type:"dtype",notSupported:!0},{tfParamName:"DstT",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",dlOpName:"expandDims",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,tfParamNameDeprecated:"dim",dlParamName:"axis",type:"number"}]},{tfOpName:"Pad",dlOpName:"pad",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"padding",type:"number[]"},{tfParamName:"constant_value",dlParamName:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",dlOpName:"pad",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"padding",type:"number[]"},{tfInputIndex:2,dlParamName:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",dlOpName:"reshape",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"shape",type:"number[]"}]},{tfOpName:"Squeeze",dlOpName:"squeeze",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"axis",tfParamNameDeprecated:"squeeze_dims",dlParamName:"axis",type:"number[]"}]}],transformation$1=Object.freeze({default:transformation}),CONTROL_FLOW_OPS=["Switch","Merge","Enter","Exit","NextIteration"],OperationMapper=function(){function t(){var t=[].concat.apply([],[arithmetic$1,basicMath,control$1,convolution$1,creation$1,logical$1,image$2,graph$1,matrices$1,normalization$1,reduction$1,sliceJoin,transformation$1].map(function(t){return t.default?t.default:t}));this.opMappers=t.reduce(function(t,e){return t[e.tfOpName]=e,t},{})}return Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),t.prototype.isControlFlow=function(t){return CONTROL_FLOW_OPS.some(function(e){return e===t.op})},t.prototype.transformGraph=function(t){var e=this,n=!1,r=[],o=t.node.reduce(function(t,o){return t[o.name]=e.mapNode(o),e.isControlFlow(o)&&(n=!0),"Placeholder"===o.op&&r.push(t[o.name]),t},{}),i=[],a=[];return Object.keys(o).forEach(function(t){var e=o[t];e.inputNames.forEach(function(t){var n=getNodeNameAndIndex(t)[0];e.inputs.push(o[n]),o[n].children.push(e)}),0===e.inputs.length&&i.push(e)}),Object.keys(o).forEach(function(t){var e=o[t];0===e.children.length&&a.push(e)}),{nodes:o,inputs:i,outputs:a,placeholders:r,withControlFlow:n}},t.prototype.mapNode=function(t){var e=this,n=this.opMappers[t.op];if(void 0===n)throw new Error("Tensorflow Op is not supported: "+t.op);var r={name:t.name,op:n.dlOpName,category:n.category,inputNames:(t.input||[]).map(function(t){return t.startsWith("^")?t.substr(1):t}),inputs:[],children:[],params:{}};return n.params&&(r.params=n.params.reduce(function(n,r){var o=r.tfInputIndex,i=r.tfInputParamLength,a=r.type,s=void 0;if(void 0===o)switch(r.type){case"string":void 0===(s=e.getStringParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getStringParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"number":void 0===(s=e.getNumberParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getNumberParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"number[]":void 0===(s=e.getNumericArrayParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getNumericArrayParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"bool":void 0===(s=e.getBoolParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getBoolParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"shape":void 0===(s=e.getTensorShapeParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getTensorShapeParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"dtype":void 0===(s=e.getDtypeParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getDtypeParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+r.type+" for op: "+t.op)}return n[r.dlParamName]={value:s,inputIndex:o,type:a,inputParamLength:i},n},{})),r},t.prototype.getStringParam=function(t,e,n,r){void 0===r&&(r=!1);var o=t[e];if(void 0!==o){var i=String.fromCharCode.apply(null,o.s);return r?i:i.toLowerCase()}return n},t.prototype.getBoolParam=function(t,e,n){var r=t[e];return r?r.b:n},t.prototype.getNumberParam=function(t,e,n){var r=t[e],o=r?void 0!==r.f?r.f:r.i:n;return"number"==typeof o?o:o.toInt()},t.prototype.getDtypeParam=function(t,e,n){var r=t[e];if(r&&r.type)switch(r.type){case compiled_api_1.DataType.DT_FLOAT:return"float32";case compiled_api_1.DataType.DT_INT32:return"int32";case compiled_api_1.DataType.DT_BOOL:return"bool";default:return n}return n},t.prototype.getTensorShapeParam=function(t,e,n){var r=t[e];return r&&r.shape?r.shape.dim.map(function(t){return t.size}):n},t.prototype.getNumericArrayParam=function(t,e,n){var r=t[e];return r?(r.list.f&&r.list.f.length?r.list.f:r.list.i).map(function(t){return"number"==typeof t?t:t.toInt()}):n},t}(),executeOp=function(t,e,n){switch(t.op){case"add":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.f)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"mod":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Sa)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"mul":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Va)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"div":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.J)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"floorDiv":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.T)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"sub":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Kb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"minimum":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ra)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"maximum":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Oa)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"pow":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.eb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"squaredDifference":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Fb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$1=function(t,e,n){switch(t.op){case"abs":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.c)(getParamValue("x",t,e,n))];case"acos":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.d)(getParamValue("x",t,e,n))];case"acosh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.e)(getParamValue("x",t,e,n))];case"asin":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.k)(getParamValue("x",t,e,n))];case"asinh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.l)(getParamValue("x",t,e,n))];case"atan":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.m)(getParamValue("x",t,e,n))];case"atanh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.n)(getParamValue("x",t,e,n))];case"ceil":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.v)(getParamValue("x",t,e,n))];case"cos":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.F)(getParamValue("x",t,e,n))];case"cosh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.G)(getParamValue("x",t,e,n))];case"elu":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.K)(getParamValue("x",t,e,n))];case"erf":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.M)(getParamValue("x",t,e,n))];case"exp":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.N)(getParamValue("x",t,e,n))];case"expm1":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.P)(getParamValue("x",t,e,n))];case"floor":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.S)(getParamValue("x",t,e,n))];case"log":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ga)(getParamValue("x",t,e,n))];case"log1p":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ha)(getParamValue("x",t,e,n))];case"neg":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Xa)(getParamValue("x",t,e,n))];case"reciprocal":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ib)(getParamValue("x",t,e,n))];case"relu":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.jb)(getParamValue("x",t,e,n))];case"round":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.mb)(getParamValue("x",t,e,n))];case"selu":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ob)(getParamValue("x",t,e,n))];case"sigmoid":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.rb)(getParamValue("x",t,e,n))];case"sin":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.tb)(getParamValue("x",t,e,n))];case"sign":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.sb)(getParamValue("x",t,e,n))];case"sinh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ub)(getParamValue("x",t,e,n))];case"softplus":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Bb)(getParamValue("x",t,e,n))];case"sqrt":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Db)(getParamValue("x",t,e,n))];case"square":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Eb)(getParamValue("x",t,e,n))];case"tanh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Nb)(getParamValue("x",t,e,n))];case"tan":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Mb)(getParamValue("x",t,e,n))];case"clipByValue":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.w)(getParamValue("x",t,e,n),getParamValue("clipValueMin",t,e,n),getParamValue("clipValueMax",t,e,n))];case"rsqrt":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.J)(Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.nb)(1,"float32"),Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Db)(getTensor(t.inputNames[0],e,n)))];default:throw TypeError("Node type "+t.op+" is not implemented")}},TensorArray=function(){function t(e,n,r,o,i,a,s){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=o,this.identicalElementShapes=i,this.dynamicSize=a,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.id=t.nextId++}return Object.defineProperty(t.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),t.prototype.clearAndClose=function(){this.tensors.forEach(function(t){return t.tensor.dispose()}),this.tensors=[],this.closed_=!0},t.prototype.size=function(){return this.tensors.length},t.prototype.read=function(t){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(t<0||t>=this.tensors.length)throw new Error("Tried to read from index "+t+", but array size is: "+this.tensors.length);var e=this.tensors[t];if(e.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+t+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor},t.prototype.readMany=function(t){var e=this;return t.map(function(t){return e.read(t)})},t.prototype.write=function(t,e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error("Tried to write to index "+t+", but array is not resizeable and size is: "+this.maxSize);var n=this.tensors[t]||{};if(e.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+t+",\n          because the value dtype is "+e.dtype+", but TensorArray dtype is "+this.dtype+".");if(0===this.size()&&0===this.elementShape.length&&(this.elementShape=e.shape),_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Wb.assertShapesMatch(this.elementShape,e.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+t+"."),n&&n.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+t+", because it has already been read.");if(n&&n.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+t+", because it has already been written.");n.tensor=e,n.written=!0,this.tensors[t]=n},t.prototype.writeMany=function(t,e){var n=this;if(t.length!==e.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+t.length+" is not the same as tensors size: "+e.length+".");t.map(function(t,r){return n.write(t,e[r])})},t.prototype.gather=function(t,e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+e);if(!t){t=[];for(var n=0;n<this.size();n++)t.push(n)}if(0===t.length)return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ob)([],[0].concat(this.elementShape));var r=this.readMany(t);return _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Wb.assertShapesMatch(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Hb)(r,0)},t.prototype.concat=function(t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+t);if(0===this.size())return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ob)([],[0].concat(this.elementShape));for(var e=[],n=0;n<this.size();n++)e.push(n);var r=this.readMany(e);return _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Wb.assertShapesMatch(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+r[0].shape+")"),Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.x)(r,0)},t.prototype.scatter=function(t,e){if(e.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+e.dtype);if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+t.length+" vs. "+e.shape[0]);var n=Math.max.apply(Math,t);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size ("+n+"  vs. "+this.maxSize+")");this.writeMany(t,Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Vb)(e,0))},t.prototype.split=function(t,e){var n=this;if(e.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+e.dtype);var r=0,o=t.map(function(t){return r+=t});if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        "+r+", and tensor's shape is: "+e.shape);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+t.length+"), and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:e.size/r,a=[];Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qb)(function(){e=e.reshape([1,r,i]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:o[s-1],0],l=[1,t[s],i];a[s]=Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vb)(e,u,l).reshape(n.elementShape)}return a});for(var s=[],u=0;u<t.length;u++)s[u]=u;this.writeMany(s,a)},t.nextId=0,t}();function executeOp$2(t,e,n){return __awaiter(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,p,f,h,d,m,g,v,y,b,w,x,_,O,C,E,N,S,I,P,k,T,A,R,M,D,j,L;return __generator(this,function(z){switch(z.label){case 0:switch(t.op){case"loopCond":return[3,1];case"switch":return[3,2];case"merge":return[3,4];case"enter":return[3,5];case"exit":return[3,6];case"nextIteration":return[3,7];case"tensorArray":return[3,8];case"tensorArrayWrite":return[3,9];case"tensorArrayRead":return[3,10];case"tensorArrayGather":return[3,11];case"tensorArrayScatter":return[3,12];case"tensorArrayConcat":return[3,13];case"tensorArraySplit":return[3,14];case"tensorArraySize":return[3,15];case"tensorArrayClose":return[3,16]}return[3,17];case 1:return[2,[getParamValue("pred",t,e,n)]];case 2:return r=getParamValue("pred",t,e,n),o=getParamValue("data",t,e,n),[4,r.data()];case 3:return[2,z.sent()[0]?[void 0,o]:[o,void 0]];case 4:return[2,(i=t.inputNames.find(function(t){return void 0!==getTensor(t,e,n)}))?[getTensor(i,e,n)]:void 0];case 5:return a=getParamValue("frameName",t,e,n),s=getParamValue("tensor",t,e,n),n.enterFrame(a),[2,[s]];case 6:return u=getParamValue("tensor",t,e,n),n.exitFrame(),[2,[u]];case 7:return l=getParamValue("tensor",t,e,n),n.nextIteration(),[2,[l]];case 8:return c=getParamValue("size",t,e,n),p=getParamValue("dtype",t,e,n),f=getParamValue("elementShape",t,e,n),h=getParamValue("dynamicSize",t,e,n),d=getParamValue("clearAfterRead",t,e,n),m=getParamValue("identicalElementShapes",t,e,n),g=getParamValue("name",t,e,n),v=new TensorArray(g,p,c,f,m,h,d),n.addTensorArray(v),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.nb)(v.id),Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.nb)(1)]];case 9:return y=getParamValue("tensorArrayId",t,e,n),b=getParamValue("index",t,e,n),w=getParamValue("tensor",t,e,n),n.getTensorArray(y).write(b,w),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.nb)(1)]];case 10:return x=getParamValue("tensorArrayId",t,e,n),_=getParamValue("index",t,e,n),[2,[n.getTensorArray(x).read(_)]];case 11:return O=getParamValue("tensorArrayId",t,e,n),C=getParamValue("indices",t,e,n),E=getParamValue("dtype",t,e,n),[2,[n.getTensorArray(O).gather(C,E)]];case 12:return N=getParamValue("tensorArrayId",t,e,n),S=getParamValue("indices",t,e,n),I=getParamValue("tensor",t,e,n),n.getTensorArray(N).scatter(S,I),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.nb)(1)]];case 13:return P=getParamValue("tensorArrayId",t,e,n),k=n.getTensorArray(P),T=getParamValue("dtype",t,e,n),[2,[k.concat(T)]];case 14:return A=getParamValue("tensorArrayId",t,e,n),R=getParamValue("tensor",t,e,n),M=getParamValue("lengths",t,e,n),n.getTensorArray(A).split(M,R),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.nb)(1)]];case 15:return D=getParamValue("tensorArrayId",t,e,n),j=n.getTensorArray(D),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.nb)(j.size(),"int32")]];case 16:return L=getParamValue("tensorArrayId",t,e,n),n.getTensorArray(L).clearAndClose(),[2,[]];case 17:throw TypeError("Node type "+t.op+" is not implemented")}})})}var executeOp$3=function(t,e,n){switch(t.op){case"conv1d":var r=getParamValue("stride",t,e,n),o=getParamValue("pad",t,e,n),i=getParamValue("dataFormat",t,e,n).toUpperCase(),a=getParamValue("dilation",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.C)(getParamValue("x",t,e,n),getParamValue("filter",t,e,n),r,o,i,a)];case"conv2d":r=getParamValue("strides",t,e,n),o=getParamValue("pad",t,e,n),i=getParamValue("dataFormat",t,e,n).toUpperCase();var s=getParamValue("dilations",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.D)(getParamValue("x",t,e,n),getParamValue("filter",t,e,n),[r[1],r[2]],o,i,[s[0],s[1]])];case"conv2dTranspose":var u=getParamValue("outputShape",t,e,n);return r=getParamValue("strides",t,e,n),o=getParamValue("pad",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.E)(getParamValue("x",t,e,n),getParamValue("filter",t,e,n),u,[r[1],r[2]],o)];case"depthwiseConv2d":return r=getParamValue("strides",t,e,n),o=getParamValue("pad",t,e,n),s=getParamValue("dilations",t,e,n),i=getParamValue("dataFormat",t,e,n).toUpperCase(),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.H)(getParamValue("input",t,e,n),getParamValue("filter",t,e,n),[r[1],r[2]],o,i,[s[0],s[1]])];case"avgPool":r=getParamValue("strides",t,e,n),o=getParamValue("pad",t,e,n);var l=getParamValue("kernelSize",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.o)(getParamValue("x",t,e,n),[l[1],l[2]],[r[1],r[2]],o)];case"maxPool":return r=getParamValue("strides",t,e,n),o=getParamValue("pad",t,e,n),l=getParamValue("kernelSize",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Na)(getParamValue("x",t,e,n),[l[1],l[2]],[r[1],r[2]],o)];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$4=function(t,e,n){switch(t.op){case"fill":var r=getParamValue("shape",t,e,n),o=getParamValue("value",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.R)(r,o)];case"linspace":var i=getParamValue("start",t,e,n),a=getParamValue("stop",t,e,n),s=getParamValue("num",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ea)(i,a,s)];case"oneHot":var u=getParamValue("indices",t,e,n),l=getParamValue("depth",t,e,n),c=getParamValue("onValue",t,e,n),p=getParamValue("offValue",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ab)(u,l,c,p)];case"ones":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.bb)(getParamValue("shape",t,e,n),getParamValue("dtype",t,e,n))];case"onesLike":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.cb)(getParamValue("x",t,e,n))];case"randomUniform":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.gb)(getParamValue("shape",t,e,n),getParamValue("minval",t,e,n),getParamValue("maxval",t,e,n),getParamValue("dtype",t,e,n))];case"range":i=getParamValue("start",t,e,n);var f=getParamValue("stop",t,e,n),h=getParamValue("step",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hb)(i,f,h,getParamValue("dtype",t,e,n))];case"truncatedNormal":r=getParamValue("shape",t,e,n);var d=getParamValue("mean",t,e,n),m=getParamValue("stdDev",t,e,n),g=getParamValue("seed",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ub)(r,d,m,getParamValue("dtype",t,e,n),g)];case"zeros":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ac)(getParamValue("shape",t,e,n),getParamValue("dtype",t,e,n))];case"zerosLike":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.bc)(getParamValue("x",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$5=function(t,e,n){switch(t.op){case"const":return e[t.name];case"placeholder":var r=getParamValue("default",t,e,n);return[getTensor(t.name,e,n)||r];case"identity":case"stopGradient":case"fakeQuantWithMinMaxVars":return[getParamValue("x",t,e,n)];case"snapshot":return[getParamValue("x",t,e,n).clone()];case"shape":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Pb)(getParamValue("x",t,e,n).shape,"int32")];case"size":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.nb)(getParamValue("x",t,e,n).size,"int32")];case"rank":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.nb)(getParamValue("x",t,e,n).rank,"int32")];case"noop":return[];case"print":var o=getParamValue("x",t,e,n),i=getParamValue("data",t,e,n),a=getParamValue("message",t,e,n),s=getParamValue("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(a);for(var u=0;u<i.length;u++)console.log(Array.prototype.slice.call(i[0].dataSync()).slice(0,s));return[o];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$6=function(t,e,n){switch(t.op){case"resizeBilinear":var r=getParamValue("images",t,e,n),o=getParamValue("size",t,e,n),i=getParamValue("alignCorners",t,e,n);return[_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.X.resizeBilinear(r,[o[0],o[1]],i)];case"resizeNearestNeighbor":return r=getParamValue("images",t,e,n),o=getParamValue("size",t,e,n),i=getParamValue("alignCorners",t,e,n),[_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.X.resizeNearestNeighbor(r,[o[0],o[1]],i)];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$7=function(t,e,n){switch(t.op){case"equal":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.L)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"notEqual":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Za)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"greater":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.V)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"greaterEqual":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.W)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"less":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ba)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"lessEqual":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ca)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"logicalAnd":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ia)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"logicalNot":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ja)(getParamValue("a",t,e,n))];case"logicalOr":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ka)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"where":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Zb)(getParamValue("condition",t,e,n),getParamValue("a",t,e,n),getParamValue("b",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$8=function(t,e,n){switch(t.op){case"matMul":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.La)(getParamValue("a",t,e,n),getParamValue("b",t,e,n),getParamValue("transposeA",t,e,n),getParamValue("transposeB",t,e,n))];case"transpose":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Tb)(getParamValue("x",t,e,n),getParamValue("perm",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$9=function(t,e,n){switch(t.op){case"batchNormalization":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.p)(getParamValue("x",t,e,n),getParamValue("mean",t,e,n),getParamValue("variance",t,e,n),getParamValue("epsilon",t,e,n),getParamValue("scale",t,e,n),getParamValue("offset",t,e,n))];case"localResponseNormalization":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Fa)(getParamValue("x",t,e,n),getParamValue("radius",t,e,n),getParamValue("bias",t,e,n),getParamValue("alpha",t,e,n),getParamValue("beta",t,e,n))];case"softmax":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ab)(getParamValue("x",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$10=function(t,e,n){switch(t.op){case"max":var r=getParamValue("axis",t,e,n),o=getParamValue("keepDims",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ma)(getParamValue("x",t,e,n),r,o)];case"mean":return r=getParamValue("axis",t,e,n),o=getParamValue("keepDims",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Pa)(getParamValue("x",t,e,n),r,o)];case"min":return r=getParamValue("axis",t,e,n),o=getParamValue("keepDims",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qa)(getParamValue("x",t,e,n),r,o)];case"sum":return r=getParamValue("axis",t,e,n),o=getParamValue("keepDims",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Lb)(getParamValue("x",t,e,n),r,o)];case"all":return r=getParamValue("axis",t,e,n),o=getParamValue("keepDims",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.g)(getParamValue("x",t,e,n),r,o)];case"any":return r=getParamValue("axis",t,e,n),o=getParamValue("keepDims",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.h)(getParamValue("x",t,e,n),r,o)];case"argMax":return r=getParamValue("axis",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.i)(getParamValue("x",t,e,n),r)];case"argMin":return r=getParamValue("axis",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.j)(getParamValue("x",t,e,n),r)];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$11=function(t,e,n){switch(t.op){case"concat":var r=getParamValue("axis",t,e,n),o=getParamValue("tensors",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.x)(o,r)];case"gather":r=getParamValue("axis",t,e,n);var i=getParamValue("x",t,e,n),a=getParamValue("indices",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.U)(i,a,r)];case"reverse":return r=getParamValue("axis",t,e,n),i=getParamValue("x",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lb)(i,r)];case"slice":var s=getParamValue("begin",t,e,n),u=getParamValue("size",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vb)(getParamValue("x",t,e,n),s,u)];case"stridedSlice":s=getParamValue("begin",t,e,n);var l=getParamValue("end",t,e,n),c=getParamValue("strides",t,e,n),p=getParamValue("beginMask",t,e,n),f=getParamValue("endMask",t,e,n),h=getParamValue("x",t,e,n);if(1===s.length&&h.shape.length>1)for(var d=1;d<h.shape.length;d++)s.push(0),l.push(h.shape[d]),c.push(c[0]);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Jb)(h,s,l,c,p,f)];case"stack":return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qb)(function(){var r=getParamValue("axis",t,e,n),o=getParamValue("tensors",t,e,n),i=o[0].shape,a=o[0].squeeze().shape,s=o.map(function(t){var e=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Wb.arraysEqual(t.shape,i);if(!e&&!_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Wb.arraysEqual(t.squeeze().shape,a))throw new Error("the input tensors shape does not match");return e?t:t.reshape(i)});return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Hb)(s,r)]});case"unstack":return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qb)(function(){var r=getParamValue("axis",t,e,n),o=getParamValue("tensor",t,e,n);return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Vb)(o,r)});case"tile":var m=getParamValue("reps",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Rb)(getParamValue("x",t,e,n),m)];case"split":r=getParamValue("axis",t,e,n);var g=getParamValue("numOrSizeSplits",t,e,n);return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Cb)(getParamValue("x",t,e,n),g,r);default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$12=function(t,e,n){switch(t.op){case"cast":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.u)(getParamValue("x",t,e,n),getParamValue("dtype",t,e,n))];case"expandDims":var r=t.params.axis.value;return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.O)(getParamValue("x",t,e,n),r)];case"squeeze":return r=t.params.axis.value,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Gb)(getParamValue("x",t,e,n),r)];case"reshape":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.kb)(getParamValue("x",t,e,n),getParamValue("shape",t,e,n))];case"pad":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.db)(getParamValue("x",t,e,n),split$1(getParamValue("padding",t,e,n),2),getParamValue("constantValue",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}};function executeOp$13(t,e,n){switch(t.category){case"arithmetic":return executeOp(t,e,n);case"basic_math":return executeOp$1(t,e,n);case"control":return executeOp$2(t,e,n);case"convolution":return executeOp$3(t,e,n);case"creation":return executeOp$4(t,e,n);case"image":return executeOp$6(t,e,n);case"graph":return executeOp$5(t,e,n);case"logical":return executeOp$7(t,e,n);case"matrices":return executeOp$8(t,e,n);case"normalization":return executeOp$9(t,e,n);case"reduction":return executeOp$10(t,e,n);case"slice_join":return executeOp$11(t,e,n);case"transformation":return executeOp$12(t,e,n);default:throw TypeError("Node type "+t.op+" is not implemented")}}var ExecutionContext=function(){function t(t,e){this.weightMap=t,this.tensorArrayMap=e,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return t.prototype.newFrame=function(t,e){return{id:t,frameName:e,iterationId:0}},Object.defineProperty(t.prototype,"currentContext",{get:function(){return this.contexts},set:function(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),t.prototype.generateCurrentContextIds=function(){for(var t=[],e=0;e<this.contexts.length-1;e++){var n=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(n))}t.push(""),this._currentContextIds=t},t.prototype.contextIdforContexts=function(t){return t?t.map(function(t){return 0===t.id&&0===t.iterationId?"":t.frameName+"-"+t.iterationId}).join("/"):""},t.prototype.enterFrame=function(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},t.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},t.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},t.prototype.getWeight=function(t){return this.weightMap[t]},t.prototype.addTensorArray=function(t){this.tensorArrayMap[t.id]=t},t.prototype.getTensorArray=function(t){return this.tensorArrayMap[t]},t}(),GraphExecutor=function(){function t(t){this.graph=t,this.compiledOrder=[],this._weightMap={},this.placeholders=t.placeholders,this._outputs=t.outputs,this.compile()}return Object.defineProperty(t.prototype,"weightMap",{get:function(){return this._weightMap},set:function(t){var e=Object.keys(t).map(function(e){return t[e].map(function(t){return t.id})});this.weightIds=[].concat.apply([],e),this._weightMap=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this.placeholders.map(function(t){return{name:t.name,shape:t.params.shape?t.params.shape.value:void 0,dtype:t.params.dtype?t.params.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this._outputs.map(function(t){return{name:t.name,shape:t.params.shape?t.params.shape.value:void 0,dtype:t.params.dtype?t.params.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this.placeholders.map(function(t){return t.name})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this.outputs.map(function(t){return t.name})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isControlFlowModel",{get:function(){return this.graph.withControlFlow},enumerable:!0,configurable:!0}),t.prototype.compile=function(){if(!this.graph.withControlFlow)for(var t=this.graph.inputs.slice(),e={};t.length>0;){var n=t.pop();e[n.name]=!0,this.compiledOrder.push(n),n.children.forEach(function(n){!e[n.name]&&n.inputNames.every(function(t){var n=getNodeNameAndIndex(t)[0];return e[n]})&&t.push(n)})}},t.prototype.execute=function(t,e){var n=this;this.checkInput(t),this.checkInputShapeAndType(t);var r={};return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qb)(function(){var o=new ExecutionContext(n._weightMap,r),i=n.compiledOrder.reduce(function(t,e){return t[e.name]=executeOp$13(e,t,o),t},__assign({},n.weightMap,t));return n.findOutputs(i,o,e)})},t.prototype.executeAsync=function(t,e){return __awaiter(this,void 0,void 0,function(){var n,r,o,i,a,s,u=this;return __generator(this,function(l){switch(l.label){case 0:return this.checkInput(t),this.checkInputShapeAndType(t),n=new ExecutionContext(this._weightMap,{}),[4,this.executeWithControlFlow(t,n)];case 1:return r=l.sent(),o=this.findOutputs(r,n,e),i=Object.keys(o).map(function(t){return o[t].id}),a=Object.keys(t).map(function(e){return t[e].map(function(t){return t.id})}),s=[].concat.apply([],a),Object.keys(r).forEach(function(t){r[t].forEach(function(t){t&&-1===i.indexOf(t.id)&&-1===s.indexOf(t.id)&&-1===u.weightIds.indexOf(t.id)&&t.dispose()})}),[2,o]}})})},t.prototype.executeWithControlFlow=function(t,e){return __awaiter(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l;return __generator(this,function(c){switch(c.label){case 0:n=this.graph.inputs.map(function(t){return{node:t,contexts:e.currentContext}}),r=__assign({},this.weightMap,t),o={},c.label=1;case 1:return n.length>0?(i=n.pop(),e.currentContext=i.contexts,a="","enter"===i.node.op&&getParamValue("isConstant",i.node,r,e)&&(a=getNodeNameAndIndex(i.node.name,e)[0]),s=executeOp$13(i.node,r,e),a||(a=getNodeNameAndIndex(i.node.name,e)[0]),u=r,l=a,[4,s]):[3,3];case 2:return u[l]=c.sent(),i.node.children.forEach(function(t){var i=getNodeNameAndIndex(t.name,e)[0];o[i]||("merge"===t.op?t.inputNames.some(function(t){return!!getTensor(t,r,e)})&&(o[i]=!0,n.push({contexts:e.currentContext,node:t})):t.inputNames.every(function(t){return!!getTensor(t,r,e)})&&(o[i]=!0,n.push({contexts:e.currentContext,node:t})))}),[3,1];case 3:return[2,r]}})})},t.prototype.findOutputs=function(t,e,n){return!n||n instanceof Array||(n=[n]),(n||this.graph.outputs.map(function(t){return t.name})).reduce(function(n,r){return n[r]=getTensor(r,t,e),n},{})},t.prototype.dispose=function(){var t=this;Object.keys(this.weightMap).forEach(function(e){return t.weightMap[e].forEach(function(t){return t.dispose()})})},t.prototype.checkInputShapeAndType=function(t){this.placeholders.forEach(function(e){var n=t[e.name][0];if(e.params.shape&&e.params.shape.value){var r=e.params.shape.value,o=r.length===n.shape.length&&n.shape.every(function(t,e){return-1===r[e]||r[e]===t});_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Wb.assert(o,"The shape of dict['"+e.name+"'] provided in model.execute(dict) must be ["+r+"], but was ["+n.shape+"]")}e.params.dtype&&e.params.dtype.value&&_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Wb.assert(n.dtype===e.params.dtype.value,"The dtype of dict['"+e.name+"'] provided in model.execute(dict) must be "+e.params.dtype.value+", but was "+n.dtype)})},t.prototype.checkInput=function(t){var e=this,n=Object.keys(t),r=[],o=[];if(this.inputNodes.forEach(function(t){-1===n.indexOf(t)&&r.push(t)}),n.forEach(function(t){-1===e.inputNodes.indexOf(t)&&o.push(t)}),r.length>0)throw new Error("The dict provided in model.execute(dict) has the keys ["+n+"], but is missing the required keys: ["+r+"].");if(o.length>0)throw new Error("The dict provided in model.execute(dict) has unused keys: ["+o+"]. Please provide only the following keys: ["+this.inputNodes+"].")},t}(),FrozenModel=function(){function t(t,e,n){this.modelUrl=t,this.weightManifestUrl=e,this.requestOption=n,this.version="n/a",this.pathPrefix=this.getPathPrefix()}return Object.defineProperty(t.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),t.prototype.getPathPrefix=function(){var t=parse(this.weightManifestUrl),e=t.pathname.split("/");return e.splice(-1),t.pathname=e.join("/"),format(t)+"/"},t.prototype.loadRemoteProtoFile=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,r,o;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,fetch(this.modelUrl,this.requestOption)];case 1:return t=i.sent(),n=(e=compiled_api_1.GraphDef).decode,r=Uint8Array.bind,[4,t.arrayBuffer()];case 2:return[2,n.apply(e,[new(r.apply(Uint8Array,[void 0,i.sent()]))])];case 3:throw o=i.sent(),new Error(this.modelUrl+" not found. "+o);case 4:return[2]}})})},t.prototype.loadWeightManifest=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n;return __generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch(this.weightManifestUrl,this.requestOption)];case 1:return t=r.sent(),e=this,[4,t.clone().json()];case 2:return e.weightManifest=r.sent(),[3,4];case 3:throw n=r.sent(),new Error(this.weightManifestUrl+" not found. "+n);case 4:return[2]}})})},t.prototype.load=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,r;return __generator(this,function(o){switch(o.label){case 0:return t=this.loadRemoteProtoFile(),e=this.loadWeightManifest(),[4,Promise.all([t,e])];case 1:return n=o.sent()[0],this.version=n.versions.producer+"."+n.versions.minConsumer,[4,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Y.loadWeights(this.weightManifest,this.pathPrefix,void 0,this.requestOption)];case 2:return r=o.sent(),this.executor=new GraphExecutor(OperationMapper.Instance.transformGraph(n)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),[2,!0]}})})},t.prototype.predict=function(t,e){return this.execute(t,this.outputNodes)},t.prototype.constructTensorMap=function(t){var e=t instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.b?[t]:t;if(e.length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the frozen model has "+this.inputNodes.length+" placeholders, while there are "+e.length+" input tensors.");return this.inputNodes.reduce(function(t,n,r){return t[n]=e[r],t},{})},t.prototype.execute=function(t,e){if(e=e||this.outputNodes,(t instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.b||Array.isArray(t))&&(t=this.constructTensorMap(t)),this.executor.isControlFlowModel)throw new Error("The model contains control flow ops, please use executeAsync method");var n=this.executor.execute(this.convertTensorMapToTensorsMap(t),e),r=Object.keys(n);return Array.isArray(e)&&e.length>1?e.map(function(t){return n[t]}):n[r[0]]},t.prototype.executeAsync=function(t,e){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(o){switch(o.label){case 0:if(!this.executor.isControlFlowModel)throw new Error("The model does not contain control flow ops, please use execute method for better performance.");return e=e||this.outputNodes,(t instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.b||Array.isArray(t))&&(t=this.constructTensorMap(t)),[4,this.executor.executeAsync(this.convertTensorMapToTensorsMap(t),e)];case 1:return n=o.sent(),r=Object.keys(n),[2,Array.isArray(e)&&e.length>1?e.map(function(t){return n[t]}):n[r[0]]]}})})},t.prototype.convertTensorMapToTensorsMap=function(t){return Object.keys(t).reduce(function(e,n){return e[n]=[t[n]],e},{})},t.prototype.dispose=function(){this.executor.dispose()},t}();function loadFrozenModel(t,e,n){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(o){switch(o.label){case 0:return[4,(r=new FrozenModel(t,e,n)).load()];case 1:return o.sent(),[2,r]}})})}var version="0.5.2"},zUnb:function(t,e,n){"use strict";n.r(e);var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function a(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}function l(t){return"function"==typeof t}var c=!1,p={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){c=t},get useDeprecatedSynchronousErrorHandling(){return c}};function f(t){setTimeout(function(){throw t})}var h={closed:!0,next:function(t){},error:function(t){if(p.useDeprecatedSynchronousErrorHandling)throw t;f(t)},complete:function(){}},d=Array.isArray||function(t){return t&&"number"==typeof t.length};function m(t){return null!=t&&"object"==typeof t}var g,v={e:{}};function y(){try{return g.apply(this,arguments)}catch(t){return v.e=t,v}}function b(t){return g=t,y}var w=function(t){function e(n){var r=t.call(this,n?n.length+" errors occurred during unsubscription:\n  "+n.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return r.errors=n,r.name="UnsubscriptionError",Object.setPrototypeOf(r,e.prototype),r}return o(e,t),e}(Error),x=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,s=r?r.length:0;n;)n.remove(this),n=++a<s&&r[a]||null;if(l(o)&&b(o).call(this)===v&&(e=!0,t=t||(v.e instanceof w?_(v.e.errors):[v.e])),d(i))for(a=-1,s=i.length;++a<s;){var u=i[a];if(m(u)&&b(u.unsubscribe).call(u)===v){e=!0,t=t||[];var c=v.e;c instanceof w?t=t.concat(_(c.errors)):t.push(c)}}if(e)throw new w(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function _(t){return t.reduce(function(t,e){return t.concat(e instanceof w?e.errors:e)},[])}var O="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",C=function(t){function e(e,n,r){var o,i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=h;break;case 1:if(!e){i.destination=h;break}if("object"==typeof e){if((o=e)instanceof C||"syncErrorThrowable"in o&&o[O]){var a=e[O]();i.syncErrorThrowable=a.syncErrorThrowable,i.destination=a,a.add(i)}else i.syncErrorThrowable=!0,i.destination=new E(i,e);break}default:i.syncErrorThrowable=!0,i.destination=new E(i,e,n,r)}return i}return o(e,t),e.prototype[O]=function(){return this},e.create=function(t,n,r){var o=new e(t,n,r);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(x),E=function(t){function e(e,n,r,o){var i,a=t.call(this)||this;a._parentSubscriber=e;var s=a;return l(n)?i=n:n&&(i=n.next,r=n.error,o=n.complete,n!==h&&(l((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=i,a._error=r,a._complete=o,a}return o(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;p.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=p.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):f(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;f(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};p.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),p.useDeprecatedSynchronousErrorHandling)throw t;f(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!p.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return p.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(f(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(C),N="function"==typeof Symbol&&Symbol.observable||"@@observable";function S(){}function I(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return P(t)}function P(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:S}var k=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,o=function(t,e,n){if(t){if(t instanceof C)return t;if(t[O])return t[O]()}return t||e||n?new C(t,e,n):new C(h)}(t,e,n);if(r?r.call(o,this.source):o.add(this.source||p.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),p.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){p.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=T(e))(function(e,r){var o;o=n.subscribe(function(e){try{t(e)}catch(t){r(t),o&&o.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[N]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:P(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=T(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function T(t){if(t||(t=p.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function A(t){return t&&"function"==typeof t.schedule}var R=function(t){function e(e,n,r){var o=t.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=r,o.index=0,o}return o(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(C),M=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}},D=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,f),e}},j=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),L=function(t){return function(e){for(var n=t[j]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}},z=function(t){return function(e){var n=t[N]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},V=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function B(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var F=function(t){if(t instanceof k)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[N])return z(t);if(V(t))return M(t);if(B(t))return D(t);if(t&&"function"==typeof t[j])return L(t);var e=m(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function U(t,e,n,r){var o=new R(t,n,r);return F(e)(o)}var W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(C);function q(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new $(t,e))}}var $=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new H(t,this.project,this.thisArg))},t}(),H=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return o(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(C);function G(t,e){return new k(e?function(n){var r=new x,o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r}:M(t))}function K(t,e){if(!e)return t instanceof k?t:new k(F(t));if(null!=t){if(function(t){return t&&"function"==typeof t[N]}(t))return function(t,e){return new k(e?function(n){var r=new x;return r.add(e.schedule(function(){var o=t[N]();r.add(o.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:z(t))}(t,e);if(B(t))return function(t,e){return new k(e?function(n){var r=new x;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:D(t))}(t,e);if(V(t))return G(t,e);if(function(t){return t&&"function"==typeof t[j]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new k(e?function(n){var r,o=new x;return o.add(function(){r&&"function"==typeof r.return&&r.return()}),o.add(e.schedule(function(){r=t[j](),o.add(e.schedule(function(){if(!n.closed){var t,e;try{var o=r.next();t=o.value,e=o.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),o}:L(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function Q(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(Q(function(n,r){return K(t(n,r)).pipe(q(function(t,o){return e(n,t,r,o)}))},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new X(t,n))})}var X=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Z(t,this.project,this.concurrent))},t}(),Z=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var o=t.call(this,e)||this;return o.project=n,o.concurrent=r,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return o(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(U(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(W);function J(t){return t}function Y(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Q(J,t)}var tt=function(t){function e(){var n=t.call(this,"object unsubscribed")||this;return n.name="ObjectUnsubscribedError",Object.setPrototypeOf(n,e.prototype),n}return o(e,t),e}(Error),et=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return o(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(x),nt=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return o(e,t),e}(C),rt=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return o(e,t),e.prototype[O]=function(){return new nt(this)},e.prototype.lift=function(t){var e=new ot(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new tt;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new tt;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new tt;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new tt;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new tt;return this.hasError?(t.error(this.thrownError),x.EMPTY):this.isStopped?(t.complete(),x.EMPTY):(this.observers.push(t),new et(this,t))},e.prototype.asObservable=function(){var t=new k;return t.source=this,t},e.create=function(t,e){return new ot(t,e)},e}(k),ot=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return o(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):x.EMPTY},e}(rt);function it(){return function(t){return t.lift(new at(t))}}var at=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new st(t,n),o=e.subscribe(r);return r.closed||(r.connection=n.connect()),o},t}(),st=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return o(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(C),ut=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return o(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new x).add(this.source.subscribe(new ct(this.getSubject(),this))),t.closed?(this._connection=null,t=x.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return it()(this)},e}(k).prototype,lt={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ut._subscribe},_isComplete:{value:ut._isComplete,writable:!0},getSubject:{value:ut.getSubject},connect:{value:ut.connect},refCount:{value:ut.refCount}},ct=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return o(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(nt);function pt(){return new rt}function ft(t){return{providedIn:t.providedIn||null,factory:t.factory,value:void 0}}var ht=function(){function t(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==e?ft({providedIn:e.providedIn||"root",factory:e.factory}):void 0}return t.prototype.toString=function(){return"InjectionToken "+this._desc},t}(),dt="__parameters__";function mt(t,e,n){var r=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var r=t.apply(void 0,u(e));for(var o in r)this[o]=r[o]}}}(e);function o(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof o)return r.apply(this,e),this;var i=new((t=o).bind.apply(t,u([void 0],e)));return a.annotation=i,a;function a(t,e,n){for(var r=t.hasOwnProperty(dt)?t[dt]:Object.defineProperty(t,dt,{value:[]})[dt];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(i),t}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}var gt=new ht("AnalyzeForEntryComponents");Function;var vt="undefined"!=typeof window&&window,yt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,bt="undefined"!=typeof global&&global||vt||yt,wt=Promise.resolve(0),xt=null;function _t(){if(!xt){var t=bt.Symbol;if(t&&t.iterator)xt=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(xt=r)}}return xt}function Ot(t){"undefined"==typeof Zone?wt.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function Ct(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function Et(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(Et).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Nt(t){return t.__forward_ref__=Nt,t.toString=function(){return Et(this())},t}function St(t){return"function"==typeof t&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===Nt?t():t}var It=mt("Inject",function(t){return{token:t}}),Pt=mt("Optional"),kt=mt("Self"),Tt=mt("SkipSelf"),At="__source",Rt=new Object,Mt=Rt,Dt=new ht("INJECTOR"),jt=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=Rt),e===Rt)throw new Error("NullInjectorError: No provider for "+Et(t)+"!");return e},t}(),Lt=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new Gt(t,e):new Gt(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=Rt,t.NULL=new jt,t.ngInjectableDef=ft({providedIn:"any",factory:function(){return Yt(Dt)}}),t}(),zt=function(t){return t},Vt=[],Bt=zt,Ft=function(){return Array.prototype.slice.call(arguments)},Ut={},Wt=function(t){for(var e in t)if(t[e]===Ut)return e;throw Error("!prop")}({provide:String,useValue:Ut}),qt=Lt.NULL,$t=/\n/gm,Ht="\u0275",Gt=function(){function t(t,e,n){void 0===e&&(e=qt),void 0===n&&(n=null),this.parent=e,this.source=n;var r=this._records=new Map;r.set(Lt,{token:Lt,fn:zt,deps:Vt,value:this,useNew:!1}),r.set(Dt,{token:Dt,fn:zt,deps:Vt,value:this,useNew:!1}),function t(e,n){if(n)if((n=St(n))instanceof Array)for(var r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw Xt("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Xt("Unexpected provider",n);var o=St(n.provide),i=function(t){var e=function(t){var e=Vt,n=t.deps;if(n&&n.length){e=[];for(var r=0;r<n.length;r++){var o=6;if((u=St(n[r]))instanceof Array)for(var i=0,a=u;i<a.length;i++){var s=a[i];s instanceof Pt||s==Pt?o|=1:s instanceof Tt||s==Tt?o&=-3:s instanceof kt||s==kt?o&=-5:u=s instanceof It?s.token:St(s)}e.push({token:u,options:o})}}else if(t.useExisting){var u;e=[{token:u=St(t.useExisting),options:6}]}else if(!(n||Wt in t))throw Xt("'deps' required",t);return e}(t),n=zt,r=Vt,o=!1,i=St(t.provide);if(Wt in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)o=!0,n=St(t.useClass);else{if("function"!=typeof i)throw Xt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);o=!0,n=i}return{deps:e,fn:n,useNew:o,value:r}}(n);if(!0===n.multi){var a=e.get(o);if(a){if(a.fn!==Ft)throw Kt(o)}else e.set(o,a={token:n.provide,deps:[],useNew:!1,fn:Ft,value:Vt});a.deps.push({token:o=n,options:6})}var s=e.get(o);if(s&&s.fn==Ft)throw Kt(o);e.set(o,i)}}(r,t)}return t.prototype.get=function(t,e,n){void 0===n&&(n=0);var r=this._records.get(t);try{return function t(e,n,r,o,i,a){try{return function(e,n,r,o,i,a){var s,l;if(!n||4&a)2&a||(l=o.get(e,i,0));else{if((l=n.value)==Bt)throw Error(Ht+"Circular dependency");if(l===Vt){n.value=Bt;var c=n.useNew,p=n.fn,f=n.deps,h=Vt;if(f.length){h=[];for(var d=0;d<f.length;d++){var m=f[d],g=m.options,v=2&g?r.get(m.token):void 0;h.push(t(m.token,v,r,v||4&g?o:qt,1&g?null:Lt.THROW_IF_NOT_FOUND,0))}}n.value=l=c?new((s=p).bind.apply(s,u([void 0],h))):p.apply(void 0,h)}}return l}(e,n,r,o,i,a)}catch(t){throw t instanceof Error||(t=new Error(t)),(t.ngTempTokenPath=t.ngTempTokenPath||[]).unshift(e),n&&n.value==Bt&&(n.value=Vt),t}}(t,r,this._records,this.parent,e,n)}catch(e){var o=e.ngTempTokenPath;throw t[At]&&o.unshift(t[At]),e.message=Qt("\n"+e.message,o,this.source),e.ngTokenPath=o,e.ngTempTokenPath=null,e}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(Et(n))}),"StaticInjector["+t.join(", ")+"]"},t}();function Kt(t){return Xt("Cannot mix multi providers and regular providers",t)}function Qt(t,e,n){void 0===n&&(n=null),t=t&&"\n"===t.charAt(0)&&t.charAt(1)==Ht?t.substr(2):t;var r=Et(e);if(e instanceof Array)r=e.map(Et).join(" -> ");else if("object"==typeof e){var o=[];for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];o.push(i+":"+("string"==typeof a?JSON.stringify(a):Et(a)))}r="{"+o.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+r+"]: "+t.replace($t,"\n  ")}function Xt(t,e){return new Error(Qt(t,e))}var Zt=void 0;function Jt(t){var e=Zt;return Zt=t,e}function Yt(t,e){if(void 0===e&&(e=0),void 0===Zt)throw new Error("inject() must be called from an injection context");if(null===Zt){var n=t.ngInjectableDef;if(n&&"root"==n.providedIn)return void 0===n.value?n.value=n.factory():n.value;if(8&e)return null;throw new Error("Injector: NOT_FOUND ["+Et(t)+"]")}return Zt.get(t,8&e?null:void 0,e)}function te(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var o=void 0,i=0,a=0;a<r.length;a++){var s=r[a];s instanceof Pt||"Optional"===s.ngMetadataName?i|=8:s instanceof Tt||"SkipSelf"===s.ngMetadataName?i|=4:s instanceof kt||"Self"===s.ngMetadataName?i|=2:o=s instanceof It?s.token:s}e.push(Yt(o,i))}else e.push(Yt(r))}return e}String;var ee=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({}),ne=new function(t){this.full="6.1.0",this.major="6.1.0".split(".")[0],this.minor="6.1.0".split(".")[1],this.patch="6.1.0".split(".").slice(2).join(".")}("6.1.0"),re="ngDebugContext",oe="ngOriginalError",ie="ngErrorLogger";function ae(t){return t[re]}function se(t){return t[oe]}function ue(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,u(e))}var le=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[ie]||ue}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)},t.prototype._findContext=function(t){return t?ae(t)?ae(t):this._findContext(se(t)):null},t.prototype._findOriginalError=function(t){for(var e=se(t);e&&se(e);)e=se(e);return e},t}(),ce=new ht("The presence of this token marks an injector as being the root injector."),pe={},fe={},he=[],de=void 0;function me(){return void 0===de&&(de=new jt),de}var ge=function(){function t(t,e,n){var r=this;this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this.destroyed=!1,be([t],function(t){return r.processInjectorType(t,new Set)}),e&&be(e,function(t){return r.processProvider(t)}),this.records.set(Dt,ye(void 0,this)),this.isRootInjector=this.records.has(ce),this.injectorDefTypes.forEach(function(t){return r.get(t)})}return t.prototype.destroy=function(){this.assertNotDestroyed(),this.destroyed=!0;try{this.onDestroy.forEach(function(t){return t.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}},t.prototype.get=function(t,e,n){void 0===e&&(e=Mt),void 0===n&&(n=0),this.assertNotDestroyed();var r,o=Jt(this);try{if(!(4&n)){var i=this.records.get(t);if(void 0===i){var a=("function"==typeof(r=t)||"object"==typeof r&&r instanceof ht)&&t.ngInjectableDef||void 0;void 0!==a&&this.injectableDefInScope(a)&&(i=ve(t),this.records.set(t,i))}if(void 0!==i)return this.hydrate(t,i)}return 2&n&&me(),this.parent.get(t,e)}finally{Jt(o)}},t.prototype.assertNotDestroyed=function(){if(this.destroyed)throw new Error("Injector has already been destroyed.")},t.prototype.processInjectorType=function(t,e){var n=this,r=(t=St(t)).ngInjectorDef,o=null==r&&t.ngModule||void 0,i=void 0===o?t:o,a=void 0!==o&&t.providers||he;if(void 0!==o&&(r=o.ngInjectorDef),null!=r){if(e.has(i))throw new Error("Circular dependency: type "+Et(i)+" ends up importing itself.");if(this.injectorDefTypes.add(i),this.records.set(i,ye(r.factory)),null!=r.imports){e.add(i);try{be(r.imports,function(t){return n.processInjectorType(t,e)})}finally{e.delete(i)}}null!=r.providers&&be(r.providers,function(t){return n.processProvider(t)}),be(a,function(t){return n.processProvider(t)})}},t.prototype.processProvider=function(t){var e=we(t=St(t))?t:St(t.provide),n=function(t){var e=St(t),n=pe,r=void 0;if(we(t))return ve(t);if(e=St(t.provide),Wt in t)n=t.useValue;else if(t.useExisting)r=function(){return Yt(t.useExisting)};else if(t.useFactory)r=function(){return t.useFactory.apply(t,u(te(t.deps||[])))};else{var o=t.useClass||e;if(!t.deps)return ve(o);r=function(){return new(o.bind.apply(o,u([void 0],te(t.deps))))}}return ye(r,n)}(t);if(we(t)||!0!==t.multi){var r=this.records.get(e);if(r&&void 0!==r.multi)throw new Error("Mixed multi-provider for "+Et(e))}else{var o=this.records.get(e);if(o){if(void 0===o.multi)throw new Error("Mixed multi-provider for "+e+".")}else(o=ye(void 0,pe,!0)).factory=function(){return te(o.multi)},this.records.set(e,o);e=t,o.multi.push(t)}this.records.set(e,n)},t.prototype.hydrate=function(t,e){if(e.value===fe)throw new Error("Circular dep for "+Et(t));var n;return e.value===pe&&(e.value=fe,e.value=e.factory()),"object"==typeof e.value&&e.value&&"object"==typeof(n=e.value)&&null!=n&&n.ngOnDestroy&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value},t.prototype.injectableDefInScope=function(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||"root"===t.providedIn&&this.isRootInjector:this.injectorDefTypes.has(t.providedIn))},t}();function ve(t){var e=t.ngInjectableDef;if(void 0===e){if(t instanceof ht)throw new Error("Token "+Et(t)+" is missing an ngInjectableDef definition.");return ye(function(){return new t})}return ye(e.factory)}function ye(t,e,n){return void 0===e&&(e=pe),void 0===n&&(n=!1),{factory:t,value:e,multi:n?[]:void 0}}function be(t,e){t.forEach(function(t){return Array.isArray(t)?be(t,e):e(t)})}function we(t){return"function"==typeof t}function xe(t){return!!t&&"function"==typeof t.then}var _e=new ht("Application Initializer"),Oe=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var o=this.appInits[r]();xe(o)&&e.push(o)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},t}(),Ce=new ht("AppId");function Ee(){return""+Ne()+Ne()+Ne()}function Ne(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Se=new ht("Platform Initializer"),Ie=new ht("Platform ID"),Pe=new ht("appBootstrapListener"),ke=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t}();function Te(){throw new Error("Runtime compiler is not loaded")}var Ae=function(){function t(){}return t.prototype.compileModuleSync=function(t){throw Te()},t.prototype.compileModuleAsync=function(t){throw Te()},t.prototype.compileModuleAndAllComponentsSync=function(t){throw Te()},t.prototype.compileModuleAndAllComponentsAsync=function(t){throw Te()},t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t.prototype.getModuleId=function(t){},t}(),Re=function(){},Me=function(){},De=function(){};function je(t){var e=Error("No component factory found for "+Et(t)+". Did you add it to @NgModule.entryComponents?");return e[Ve]=t,e}var Le,ze,Ve="ngComponent",Be=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw je(t)},t}(),Fe=function(){function t(){}return t.NULL=new Be,t}(),Ue=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var r=0;r<t.length;r++){var o=t[r];this._factories.set(o.componentType,o)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw je(t);return new We(e,this._ngModule)},t}(),We=function(t){function e(e,n){var r=t.call(this)||this;return r.factory=e,r.ngModule=n,r.selector=e.selector,r.componentType=e.componentType,r.ngContentSelectors=e.ngContentSelectors,r.inputs=e.inputs,r.outputs=e.outputs,r}return o(e,t),e.prototype.create=function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)},e}(De),qe=function(){},$e=function(){},He=function(){var t=bt.wtf;return!(!t||!(Le=t.trace)||(ze=Le.events,0))}();function Ge(t,e){return null}var Ke=He?function(t,e){return void 0===e&&(e=null),ze.createScope(t,e)}:function(t,e){return Ge},Qe=He?function(t,e){return Le.leaveScope(t,e),e}:function(t,e){return e},Xe=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return o(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,r){var o,i=function(t){return null},a=function(){return null};e&&"object"==typeof e?(o=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(i=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(o=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(i=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(a=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var s=t.prototype.subscribe.call(this,o,i,a);return e instanceof x&&e.add(s),s},e}(rt),Ze=function(){function t(t){var e,n=t.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,n,r,o,i,a){try{return en(e),t.invokeTask(r,o,i,a)}finally{nn(e)}},onInvoke:function(t,n,r,o,i,a,s){try{return en(e),t.invoke(r,o,i,a,s)}finally{nn(e)}},onHasTask:function(t,n,r,o){t.hasTask(r,o),n===r&&("microTask"==o.change?(e.hasPendingMicrotasks=o.microTask,tn(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:function(t,n,r,o){return t.handleError(r,o),e.runOutsideAngular(function(){return e.onError.emit(o)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,r){var o=this._inner,i=o.scheduleEventTask("NgZoneEvent: "+r,t,Ye,Je,Je);try{return o.runTask(i,e,n)}finally{o.cancelTask(i)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function Je(){}var Ye={};function tn(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function en(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function nn(t){t._nesting--,tn(t)}var rn,on=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),an=function(){function t(t){var e=this;this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents(),t.run(function(){e.taskTrackingZone=Zone.current.get("TaskTrackingZone")})}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){Ze.assertNotInAngularZone(),Ot(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;if(this.isStable())Ot(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}},t.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,isPeriodic:t.data.isPeriodic,delay:t.data.delay,creationLocation:t.creationLocation,xhr:t.data.target}}):[]},t.prototype.addCallback=function(t,e,n){var r=this,o=-1;e&&e>0&&(o=setTimeout(function(){r._callbacks=r._callbacks.filter(function(t){return t.timeoutId!==o}),t(r._didWork,r.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:n})},t.prototype.whenStable=function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),sn=function(){function t(){this._applications=new Map,un.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),un.findTestabilityInTree(this,t,e)},t.ctorParameters=function(){return[]},t}(),un=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),ln=!0,cn=!1,pn=new ht("AllowMultipleToken");function fn(){return cn=!0,ln}var hn=function(t,e){this.name=t,this.token=e};function dn(t,e,n){void 0===n&&(n=[]);var r="Platform: "+e,o=new ht(r);return function(e){void 0===e&&(e=[]);var i=mn();if(!i||i.injector.get(pn,!1))if(t)t(n.concat(e).concat({provide:o,useValue:!0}));else{var a=n.concat(e).concat({provide:o,useValue:!0});!function(t){if(rn&&!rn.destroyed&&!rn.injector.get(pn,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");rn=t.get(gn);var e=t.get(Se,null);e&&e.forEach(function(t){return t()})}(Lt.create({providers:a,name:r}))}return function(t){var e=mn();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(o)}}function mn(){return rn&&!rn.destroyed?rn:null}var gn=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,r=this,o="noop"===(n=e?e.ngZone:void 0)?new on:("zone.js"===n?void 0:n)||new Ze({enableLongStackTrace:fn()}),i=[{provide:Ze,useValue:o}];return o.run(function(){var e=Lt.create({providers:i,parent:r.injector,name:t.moduleType.name}),n=t.create(e),a=n.injector.get(le,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return bn(r._modules,n)}),o.runOutsideAngular(function(){return o.onError.subscribe({next:function(t){a.handleError(t)}})}),function(t,e,o){try{var i=((a=n.injector.get(Oe)).runInitializers(),a.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return xe(i)?i.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):i}catch(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}var a}(a,o)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var r=this.injector.get(Re),o=vn({},e);return r.createCompiler([o]).compileModuleAsync(t).then(function(t){return n.bootstrapModuleFactory(t,o)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(yn);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+Et(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function vn(t,e){return Array.isArray(e)?e.reduce(vn,t):i({},t,e)}var yn=function(){function t(t,e,n,r,o,i){var a=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=o,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=fn(),this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run(function(){a.tick()})}});var s=new k(function(t){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular(function(){t.next(a._stable),t.complete()})}),u=new k(function(t){var e;a._zone.runOutsideAngular(function(){e=a._zone.onStable.subscribe(function(){Ze.assertNotInAngularZone(),Ot(function(){a._stable||a._zone.hasPendingMacrotasks||a._zone.hasPendingMicrotasks||(a._stable=!0,t.next(!0))})})});var n=a._zone.onUnstable.subscribe(function(){Ze.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,o=t[t.length-1];return A(o)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof o&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof k?t[0]:Y(n)(G(t,r))}(s,u.pipe(function(t){return it()((e=pt,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,lt);return r.source=t,r.subjectFactory=n,r})(t));var e}))}return t.prototype.bootstrap=function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof De?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var o=n instanceof We?null:this._injector.get(qe),i=n.create(Lt.NULL,[],e||n.selector,o);i.onDestroy(function(){r._unloadComponent(i)});var a=i.injector.get(an,null);return a&&i.injector.get(sn).registerApplication(i.location.nativeElement,a),this._loadComponent(i),fn()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i},t.prototype.tick=function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=t._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(t){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(t)})}finally{this._runningTick=!1,Qe(n)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;bn(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Pe,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),bn(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=Ke("ApplicationRef#tick()"),t}();function bn(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var wn=function(){},xn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({}),_n=function(t){this.nativeElement=t},On=function(){},Cn=function(){function t(){this.dirty=!0,this._results=[],this.changes=new Xe,this.length=0}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[_t()]=function(){return this._results[_t()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,n){var r=Array.isArray(n)?t(n):n;return e.concat(r)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),En=function(){},Nn={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Sn=function(){function t(t,e){this._compiler=t,this._config=e||Nn}return t.prototype.load=function(t){return this._compiler instanceof Ae?this.loadFactory(t):this.loadAndCompile(t)},t.prototype.loadAndCompile=function(t){var e=this,r=s(t.split("#"),2),o=r[0],i=r[1];return void 0===i&&(i="default"),n("crnd")(o).then(function(t){return t[i]}).then(function(t){return In(t,o,i)}).then(function(t){return e._compiler.compileModuleAsync(t)})},t.prototype.loadFactory=function(t){var e=s(t.split("#"),2),r=e[0],o=e[1],i="NgFactory";return void 0===o&&(o="default",i=""),n("crnd")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(function(t){return t[o+i]}).then(function(t){return In(t,r,o)})},t}();function In(t,e,n){if(!t)throw new Error("Cannot find '"+n+"' in '"+e+"'");return t}var Pn=function(){},kn=function(){},Tn=function(){},An=function(){function t(t,e,n){this._debugContext=n,this.nativeNode=t,e&&e instanceof Rn?e.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),Rn=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.properties={},o.attributes={},o.classes={},o.styles={},o.childNodes=[],o.nativeElement=e,o}return o(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,r=this,o=this.childNodes.indexOf(t);-1!==o&&((n=this.childNodes).splice.apply(n,u([o+1,0],e)),e.forEach(function(t){t.parent&&t.parent.removeChild(t),t.parent=r}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return function t(e,n,r){e.childNodes.forEach(function(e){e instanceof Rn&&(n(e)&&r.push(e),t(e,n,r))})}(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return function t(e,n,r){e instanceof Rn&&e.childNodes.forEach(function(e){n(e)&&r.push(e),e instanceof Rn&&t(e,n,r)})}(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(An),Mn=new Map;function Dn(t){return Mn.get(t)||null}function jn(t){Mn.set(t.nativeNode,t)}function Ln(t,e){var n=Bn(t),r=Bn(e);return n&&r?function(t,e,n){for(var r=t[_t()](),o=e[_t()]();;){var i=r.next(),a=o.next();if(i.done&&a.done)return!0;if(i.done||a.done)return!1;if(!n(i.value,a.value))return!1}}(t,e,Ln):!(n||!t||"object"!=typeof t&&"function"!=typeof t||r||!e||"object"!=typeof e&&"function"!=typeof e)||Ct(t,e)}var zn=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),Vn=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function Bn(t){return!!Fn(t)&&(Array.isArray(t)||!(t instanceof Map)&&_t()in t)}function Fn(t){return null!==t&&("function"==typeof t||"object"==typeof t)}var Un=function(){function t(){}return t.prototype.supports=function(t){return Bn(t)},t.prototype.create=function(t){return new qn(t)},t}(),Wn=function(t,e){return e},qn=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Wn}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,r=0,o=null;e||n;){var i=!n||e&&e.currentIndex<Kn(n,r,o)?e:n,a=Kn(i,r,o),s=i.currentIndex;if(i===n)r--,n=n._nextRemoved;else if(e=e._next,null==i.previousIndex)r++;else{o||(o=[]);var u=a-r,l=s-r;if(u!=l){for(var c=0;c<u;c++){var p=c<o.length?o[c]:o[c]=0,f=p+c;l<=f&&f<u&&(o[c]=p+1)}o[i.previousIndex]=l-u}}a!==s&&t(i,a,s)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!Bn(t))throw new Error("Error trying to diff '"+Et(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,r,o,i=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)o=this._trackByFn(s,r=t[s]),null!==i&&Ct(i.trackById,o)?(a&&(i=this._verifyReinsertion(i,r,o,s)),Ct(i.item,r)||this._addIdentityChange(i,r)):(i=this._mismatch(i,r,o,s),a=!0),i=i._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r=t[_t()](),o=void 0;!(o=r.next()).done;)e(o.value)}(t,function(t){o=e._trackByFn(n,t),null!==i&&Ct(i.trackById,o)?(a&&(i=e._verifyReinsertion(i,t,o,n)),Ct(i.item,t)||e._addIdentityChange(i,t)):(i=e._mismatch(i,t,o,n),a=!0),i=i._next,n++}),this.length=n;return this._truncate(i),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,r){var o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Ct(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Ct(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,r)):t=this._addAfter(new $n(e,n),o,r),t},t.prototype._verifyReinsertion=function(t,e,n,r){var o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==o?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,o=t._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Gn),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gn),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),$n=function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Hn=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Ct(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),Gn=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Hn,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function Kn(t,e,n){var r=t.previousIndex;if(null===r)return r;var o=0;return n&&r<n.length&&(o=n[r]),r+e+o}var Qn=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||Fn(t)},t.prototype.create=function(){return new Xn},t}(),Xn=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||Fn(t)))throw new Error("Error trying to diff '"+Et(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var o=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,o=n._next;return r&&(r._next=o),o&&(o._prev=r),n._next=null,n._prev=null,n}var i=new Zn(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){Ct(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),Zn=function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Jn=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new Tt,new Pt]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'")},t.ngInjectableDef=ft({providedIn:"root",factory:function(){return new t([new Un])}}),t}(),Yn=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new Tt,new Pt]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t}(),tr=[new Qn],er=new Jn([new Un]),nr=new Yn(tr),rr=dn(null,"core",[{provide:Ie,useValue:"unknown"},{provide:gn,deps:[Lt]},{provide:sn,deps:[]},{provide:ke,deps:[]}]),or=new ht("LocaleId");function ir(){return er}function ar(){return nr}function sr(t){return t||"en-US"}var ur=function(t){},lr=function(){function t(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return t.prototype.getInertBodyElement_XHR=function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(t){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(null);var n=e.response.body;return n.removeChild(n.firstChild),n},t.prototype.getInertBodyElement_DOMParser=function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(t){return null}},t.prototype.getInertBodyElement_InertDocument=function(t){var e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},t.prototype.stripCustomNsAttrs=function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var o=t.firstChild;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling},t}(),cr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,pr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function fr(t){return(t=String(t)).match(cr)||t.match(pr)?t:(fn()&&console.warn("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}function hr(t){var e,n,r={};try{for(var o=a(t.split(",")),i=o.next();!i.done;i=o.next())r[i.value]=!0}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}function dr(){for(var t,e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o={};try{for(var i=a(n),s=i.next();!s.done;s=i.next()){var u=s.value;for(var l in u)u.hasOwnProperty(l)&&(o[l]=!0)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return o}var mr,gr=hr("area,br,col,hr,img,wbr"),vr=hr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),yr=hr("rp,rt"),br=dr(yr,vr),wr=dr(gr,dr(vr,hr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dr(yr,hr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),br),xr=hr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_r=hr("srcset"),Or=dr(xr,_r,hr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),Cr=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild;e;)if(e.nodeType===Node.ELEMENT_NODE?this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var n=this.checkClobberedElement(e,e.nextSibling);if(n){e=n;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")},t.prototype.startElement=function(t){var e=t.nodeName.toLowerCase();if(wr.hasOwnProperty(e)){this.buf.push("<"),this.buf.push(e);for(var n,r=t.attributes,o=0;o<r.length;o++){var i=r.item(o),a=i.name,s=a.toLowerCase();if(Or.hasOwnProperty(s)){var u=i.value;xr[s]&&(u=fr(u)),_r[s]&&(n=u,u=(n=String(n)).split(",").map(function(t){return fr(t.trim())}).join(", ")),this.buf.push(" ",a,'="',Sr(u),'"')}else this.sanitizedSomething=!0}this.buf.push(">")}else this.sanitizedSomething=!0},t.prototype.endElement=function(t){var e=t.nodeName.toLowerCase();wr.hasOwnProperty(e)&&!gr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(Sr(t))},t.prototype.checkClobberedElement=function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e},t}(),Er=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Nr=/([^\#-~ |!])/g;function Sr(t){return t.replace(/&/g,"&amp;").replace(Er,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Nr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ir(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Pr=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),kr=/^url\(([^)]+)\)$/,Tr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({}),Ar=function(){};function Rr(t,e,n){var r=t.state,o=1792&r;return o===e?(t.state=-1793&r|n,t.initIndex=-1,!0):o===n}function Mr(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Dr(t,e){return t.nodes[e]}function jr(t,e){return t.nodes[e]}function Lr(t,e){return t.nodes[e]}function zr(t,e){return t.nodes[e]}function Vr(t,e){return t.nodes[e]}var Br={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function Fr(t,e,n,r){var o="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";return r&&(o+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return Ur(n,e),n}(o,t)}function Ur(t,e){t[re]=e,t[ie]=e.logError.bind(e)}function Wr(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}var qr=function(){},$r=new Map;function Hr(t){var e=$r.get(t);return e||(e=Et(t)+"_"+$r.size,$r.set(t,e)),e}var Gr="$$undefined",Kr="$$empty";function Qr(t){return{id:Gr,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var Xr=0;function Zr(t,e,n,r){return!(!(2&t.state)&&Ct(t.oldValues[e.bindingIndex+n],r))}function Jr(t,e,n,r){return!!Zr(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function Yr(t,e,n,r){var o=t.oldValues[e.bindingIndex+n];if(1&t.state||!Ln(o,r)){var i=e.bindings[n].name;throw Fr(Br.createDebugContext(t,e.nodeIndex),i+": "+o,i+": "+r,0!=(1&t.state))}}function to(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function eo(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function no(t,e,n,r){try{return to(33554432&t.def.nodes[e].flags?jr(t,e).componentView:t),Br.handleEvent(t,e,n,r)}catch(e){t.root.errorHandler.handleError(e)}}function ro(t){return t.parent?jr(t.parent,t.parentNodeDef.nodeIndex):null}function oo(t){return t.parent?t.parentNodeDef.parent:null}function io(t,e){switch(201347067&e.flags){case 1:return jr(t,e.nodeIndex).renderElement;case 2:return Dr(t,e.nodeIndex).renderText}}function ao(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function so(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function uo(t){var e={},n=0,r={};return t&&t.forEach(function(t){var o=s(t,2),i=o[0],a=o[1];"number"==typeof i?(e[i]=a,n|=function(t){return 1<<t%32}(i)):r[i]=a}),{matchedQueries:e,references:r,matchedQueryIds:n}}function lo(t,e){return t.map(function(t){var n,r,o;return Array.isArray(t)?(o=(n=s(t,2))[0],r=n[1]):(o=0,r=t),r&&("function"==typeof r||"object"==typeof r)&&e&&Object.defineProperty(r,At,{value:e,configurable:!0}),{flags:o,token:r,tokenKey:Hr(r)}})}function co(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===ee.Native?jr(t,n.renderParent.nodeIndex).renderElement:void 0:e}var po=new WeakMap;function fo(t){var e=po.get(t);return e||((e=t(function(){return qr})).factory=t,po.set(t,e)),e}function ho(t,e,n,r,o){3===e&&(n=t.renderer.parentNode(io(t,t.def.lastRenderRootNode))),mo(t,e,0,t.def.nodes.length-1,n,r,o)}function mo(t,e,n,r,o,i,a){for(var s=n;s<=r;s++){var u=t.def.nodes[s];11&u.flags&&vo(t,u,e,o,i,a),s+=u.childCount}}function go(t,e,n,r,o,i){for(var a=t;a&&!ao(a);)a=a.parent;for(var s=a.parent,u=oo(a),l=u.nodeIndex+u.childCount,c=u.nodeIndex+1;c<=l;c++){var p=s.def.nodes[c];p.ngContentIndex===e&&vo(s,p,n,r,o,i),c+=p.childCount}if(!s.parent){var f=t.root.projectableNodes[e];if(f)for(c=0;c<f.length;c++)yo(t,f[c],n,r,o,i)}}function vo(t,e,n,r,o,i){if(8&e.flags)go(t,e.ngContent.index,n,r,o,i);else{var a=io(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&yo(t,a,n,r,o,i),32&e.bindingFlags&&yo(jr(t,e.nodeIndex).componentView,a,n,r,o,i)):yo(t,a,n,r,o,i),16777216&e.flags)for(var s=jr(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)ho(s[u],n,r,o,i);1&e.flags&&!e.element.name&&mo(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,o,i)}}function yo(t,e,n,r,o,i){var a=t.renderer;switch(n){case 1:a.appendChild(r,e);break;case 2:a.insertBefore(r,e,o);break;case 3:a.removeChild(r,e);break;case 0:i.push(e)}}var bo=/^:([^:]+):(.+)$/;function wo(t){if(":"===t[0]){var e=t.match(bo);return[e[1],e[2]]}return["",t]}function xo(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function _o(t,e,n,r,o,i,a,u,l,c,p,f){var h;void 0===a&&(a=[]),c||(c=qr);var d=uo(n),m=d.matchedQueries,g=d.references,v=d.matchedQueryIds,y=null,b=null;i&&(y=(h=s(wo(i),2))[0],b=h[1]),u=u||[];for(var w=new Array(u.length),x=0;x<u.length;x++){var _=s(u[x],3),O=_[0],C=_[2],E=s(wo(_[1]),2),N=E[0],S=E[1],I=void 0,P=void 0;switch(15&O){case 4:P=C;break;case 1:case 8:I=C}w[x]={flags:O,ns:N,name:S,nonMinifiedName:S,securityContext:I,suffix:P}}l=l||[];var k=new Array(l.length);for(x=0;x<l.length;x++){var T=s(l[x],2);k[x]={type:0,target:T[0],eventName:T[1],propName:null}}var A=(a=a||[]).map(function(t){var e=s(t,2),n=e[1],r=s(wo(e[0]),2);return[r[0],r[1],n]});return f=function(t){if(t&&t.id===Gr){var e=null!=t.encapsulation&&t.encapsulation!==ee.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+Xr++:Kr}return t&&t.id===Kr&&(t=null),t||null}(f),p&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:m,matchedQueryIds:v,references:g,ngContentIndex:r,childCount:o,bindings:w,bindingFlags:xo(w),outputs:k,element:{ns:y,name:b,attrs:A,template:null,componentProvider:null,componentView:p||null,componentRendererType:f,publicProviders:null,allProviders:null,handleEvent:c||qr},provider:null,text:null,query:null,ngContent:null}}function Oo(t,e,n){var r,o=n.element,i=t.root.selectorOrNode,a=t.renderer;if(t.parent||!i){r=o.name?a.createElement(o.name,o.ns):a.createComment("");var u=co(t,e,n);u&&a.appendChild(u,r)}else r=a.selectRootElement(i);if(o.attrs)for(var l=0;l<o.attrs.length;l++){var c=s(o.attrs[l],3);a.setAttribute(r,c[1],c[2],c[0])}return r}function Co(t,e,n,r){for(var o=0;o<n.outputs.length;o++){var i=n.outputs[o],a=Eo(t,n.nodeIndex,(p=i.eventName,(c=i.target)?c+":"+p:p)),s=i.target,u=t;"component"===i.target&&(s=null,u=e);var l=u.renderer.listen(s||r,i.eventName,a);t.disposables[n.outputIndex+o]=l}var c,p}function Eo(t,e,n){return function(r){return no(t,e,n,r)}}function No(t,e,n,r){if(!Jr(t,e,n,r))return!1;var o=e.bindings[n],i=jr(t,e.nodeIndex),a=i.renderElement,s=o.name;switch(15&o.flags){case 1:!function(t,e,n,r,o,i){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,i):i;s=null!=s?s.toString():null;var u=t.renderer;null!=i?u.setAttribute(n,o,s,r):u.removeAttribute(n,o,r)}(t,o,a,o.ns,s,r);break;case 2:!function(t,e,n,r){var o=t.renderer;r?o.addClass(e,n):o.removeClass(e,n)}(t,a,s,r);break;case 4:!function(t,e,n,r,o){var i=t.root.sanitizer.sanitize(Tr.STYLE,o);if(null!=i){i=i.toString();var a=e.suffix;null!=a&&(i+=a)}else i=null;var s=t.renderer;null!=i?s.setStyle(n,r,i):s.removeStyle(n,r)}(t,o,a,s,r);break;case 8:!function(t,e,n,r,o){var i=e.securityContext,a=i?t.root.sanitizer.sanitize(i,o):o;t.renderer.setProperty(n,r,a)}(33554432&e.flags&&32&o.flags?i.componentView:t,o,a,s,r)}return!0}var So=new Object,Io=Hr(Lt),Po=Hr(Dt),ko=Hr(qe);function To(t,e,n,r){return n=St(n),{index:-1,deps:lo(r,Et(e)),flags:t,token:e,value:n}}function Ao(t,e,n){void 0===n&&(n=Lt.THROW_IF_NOT_FOUND);var r,o,i=Jt(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var a=e.tokenKey;switch(a){case Io:case Po:case ko:return t}var s=t._def.providersByKey[a];if(s){var u=t._providers[s.index];return void 0===u&&(u=t._providers[s.index]=Ro(t,s)),u===So?void 0:u}if(e.token.ngInjectableDef&&(r=t,null!=(o=e.token.ngInjectableDef).providedIn&&(function(t,e){return t._def.modules.indexOf(o.providedIn)>-1}(r)||"root"===o.providedIn&&r._def.isRoot))){var l=t._providers.length;return t._def.providersByKey[e.tokenKey]={flags:5120,value:e.token.ngInjectableDef.factory,deps:[],index:l,token:e.token},t._providers[l]=So,t._providers[l]=Ro(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{Jt(i)}}function Ro(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var r=n.length;switch(r){case 0:return new e;case 1:return new e(Ao(t,n[0]));case 2:return new e(Ao(t,n[0]),Ao(t,n[1]));case 3:return new e(Ao(t,n[0]),Ao(t,n[1]),Ao(t,n[2]));default:for(var o=new Array(r),i=0;i<r;i++)o[i]=Ao(t,n[i]);return new(e.bind.apply(e,u([void 0],o)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var r=n.length;switch(r){case 0:return e();case 1:return e(Ao(t,n[0]));case 2:return e(Ao(t,n[0]),Ao(t,n[1]));case 3:return e(Ao(t,n[0]),Ao(t,n[1]),Ao(t,n[2]));default:for(var o=Array(r),i=0;i<r;i++)o[i]=Ao(t,n[i]);return e.apply(void 0,u(o))}}(t,e.value,e.deps);break;case 2048:n=Ao(t,e.deps[0]);break;case 256:n=e.value}return n===So||null==n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?So:n}function Mo(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,zo(n,e),Br.dirtyParentQueries(r),jo(r),r}function Do(t,e,n){var r=e?io(e,e.def.lastRenderRootNode):t.renderElement;ho(n,2,n.renderer.parentNode(r),n.renderer.nextSibling(r),void 0)}function jo(t){ho(t,3,null,null,void 0)}function Lo(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function zo(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var Vo=new Object;function Bo(t,e,n,r,o,i){return new Fo(t,e,n,r,o,i)}var Fo=function(t){function e(e,n,r,o,i,a){var s=t.call(this)||this;return s.selector=e,s.componentType=n,s._inputs=o,s._outputs=i,s.ngContentSelectors=a,s.viewDefFactory=r,s}return o(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){if(!r)throw new Error("ngModule should be provided");var o=fo(this.viewDefFactory),i=o.nodes[0].element.componentProvider.nodeIndex,a=Br.createRootView(t,e||[],n,o,r,Vo),s=Lr(a,i).instance;return n&&a.renderer.setAttribute(jr(a,0).renderElement,"ng-version",ne.full),new Uo(a,new Ho(a),s)},e}(De),Uo=function(t){function e(e,n,r){var o=t.call(this)||this;return o._view=e,o._viewRef=n,o._component=r,o._elDef=o._view.def.nodes[0],o.hostView=n,o.changeDetectorRef=n,o.instance=r,o}return o(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new _n(jr(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new Xo(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(Me);function Wo(t,e,n){return new qo(t,e,n)}var qo=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new _n(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new Xo(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=oo(t),t=t.parent;return t?new Xo(t,e):new Xo(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=Mo(this._data,t);Br.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new Ho(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r},t.prototype.createComponent=function(t,e,n,r,o){var i=n||this.parentInjector;o||t instanceof We||(o=i.get(qe));var a=t.create(i,r,void 0,o);return this.insert(a.hostView,e),a},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,o,i,a=t;return o=a._view,i=(n=this._data).viewContainer._embeddedViews,null!==(r=e)&&void 0!==r||(r=i.length),o.viewContainerParent=this._view,Lo(i,r,o),function(t,e){var n=ro(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,e.parentNodeDef)}}(n,o),Br.dirtyParentQueries(o),Do(n,r>0?i[r-1]:null,o),a.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,o,i,a,s=this._embeddedViews.indexOf(t._view);return o=e,a=(i=(n=this._data).viewContainer._embeddedViews)[r=s],zo(i,r),null==o&&(o=i.length),Lo(i,o,a),Br.dirtyParentQueries(a),jo(a),Do(n,o>0?i[o-1]:null,a),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=Mo(this._data,t);e&&Br.destroyView(e)},t.prototype.detach=function(t){var e=Mo(this._data,t);return e?new Ho(e):null},t}();function $o(t){return new Ho(t)}var Ho=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return ho(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){to(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{Br.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){Br.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Br.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,jo(this._view),Br.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}();function Go(t,e){return new Ko(t,e)}var Ko=function(t){function e(e,n){var r=t.call(this)||this;return r._parentView=e,r._def=n,r}return o(e,t),e.prototype.createEmbeddedView=function(t){return new Ho(Br.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new _n(jr(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(Pn);function Qo(t,e){return new Xo(t,e)}var Xo=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=Lt.THROW_IF_NOT_FOUND),Br.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:Hr(t)},e)},t}();function Zo(t){return new Jo(t.renderer)}var Jo=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=s(wo(e),2),r=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,r),r},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t),o=0;o<e.length;o++)this.delegate.insertBefore(n,e[o],r)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var r=s(wo(e),2),o=r[0],i=r[1];null!=n?this.delegate.setAttribute(t,i,n,o):this.delegate.removeAttribute(t,i,o)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}();function Yo(t,e,n,r){return new ti(t,e,n,r)}var ti=function(){function t(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),r=0;r<e.providers.length;r++){var o=e.providers[r];4096&o.flags||void 0===n[r]&&(n[r]=Ro(t,o))}}(this)}return t.prototype.get=function(t,e,n){void 0===e&&(e=Lt.THROW_IF_NOT_FOUND),void 0===n&&(n=0);var r=0;return 4&n?r|=1:2&n&&(r|=4),Ao(this,{token:t,tokenKey:Hr(t),flags:r},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(Fe)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+Et(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(t,e){for(var n=t._def,r=new Set,o=0;o<n.providers.length;o++)if(131072&n.providers[o].flags){var i=t._providers[o];if(i&&i!==So){var a=i.ngOnDestroy;"function"!=typeof a||r.has(i)||(a.apply(i),r.add(i))}}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),ei=Hr(function(){}),ni=Hr(function(){}),ri=Hr(_n),oi=Hr(kn),ii=Hr(Pn),ai=Hr(Tn),si=Hr(Lt),ui=Hr(Dt);function li(t,e,n,r,o,i,a,u){var l=[];if(a)for(var c in a){var p=s(a[c],2);l[p[0]]={flags:8,name:c,nonMinifiedName:p[1],ns:null,securityContext:null,suffix:null}}var f=[];if(u)for(var h in u)f.push({type:1,propName:h,target:null,eventName:u[h]});return function(t,e,n,r,o,i,a,s,u){var l=uo(n),c=l.matchedQueries,p=l.references,f=l.matchedQueryIds;u||(u=[]),s||(s=[]),i=St(i);var h=lo(a,Et(o));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:f,references:p,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:xo(s),outputs:u,element:null,provider:{token:o,value:i,deps:h},text:null,query:null,ngContent:null}}(t,e|=16384,n,r,o,o,i,l,f)}function ci(t,e){return di(t,e)}function pi(t,e){for(var n=t;n.parent&&!ao(n);)n=n.parent;return mi(n.parent,oo(n),!0,e.provider.value,e.provider.deps)}function fi(t,e){var n=mi(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var r=0;r<e.outputs.length;r++){var o=e.outputs[r],i=n[o.propName].subscribe(hi(t,e.parent.nodeIndex,o.eventName));t.disposables[e.outputIndex+r]=i.unsubscribe.bind(i)}return n}function hi(t,e,n){return function(r){return no(t,e,n,r)}}function di(t,e){var n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return mi(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,o){var i=o.length;switch(i){case 0:return r();case 1:return r(vi(t,e,n,o[0]));case 2:return r(vi(t,e,n,o[0]),vi(t,e,n,o[1]));case 3:return r(vi(t,e,n,o[0]),vi(t,e,n,o[1]),vi(t,e,n,o[2]));default:for(var a=Array(i),s=0;s<i;s++)a[s]=vi(t,e,n,o[s]);return r.apply(void 0,u(a))}}(t,e.parent,n,r.value,r.deps);case 2048:return vi(t,e.parent,n,r.deps[0]);case 256:return r.value}}function mi(t,e,n,r,o){var i=o.length;switch(i){case 0:return new r;case 1:return new r(vi(t,e,n,o[0]));case 2:return new r(vi(t,e,n,o[0]),vi(t,e,n,o[1]));case 3:return new r(vi(t,e,n,o[0]),vi(t,e,n,o[1]),vi(t,e,n,o[2]));default:for(var a=new Array(i),s=0;s<i;s++)a[s]=vi(t,e,n,o[s]);return new(r.bind.apply(r,u([void 0],a)))}}var gi={};function vi(t,e,n,r,o){if(void 0===o&&(o=Lt.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var i=t;2&r.flags&&(o=null);var a=r.tokenKey;a===ai&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);for(var s=t;s;){if(e)switch(a){case ei:return Zo(yi(s,e,n));case ni:return yi(s,e,n).renderer;case ri:return new _n(jr(s,e.nodeIndex).renderElement);case oi:return jr(s,e.nodeIndex).viewContainer;case ii:if(e.element.template)return jr(s,e.nodeIndex).template;break;case ai:return $o(yi(s,e,n));case si:case ui:return Qo(s,e);default:var u=(n?e.element.allProviders:e.element.publicProviders)[a];if(u){var l=Lr(s,u.nodeIndex);return l||(l={instance:di(s,u)},s.nodes[u.nodeIndex]=l),l.instance}}n=ao(s),e=oo(s),s=s.parent,4&r.flags&&(s=null)}var c=i.root.injector.get(r.token,gi);return c!==gi||o===gi?c:i.root.ngModule.injector.get(r.token,o)}function yi(t,e,n){var r;if(n)r=jr(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!ao(r);)r=r.parent;return r}function bi(t,e,n,r,o,i){if(32768&n.flags){var a=jr(t,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(e.instance[n.bindings[r].name]=o,524288&n.flags){i=i||{};var s=zn.unwrap(t.oldValues[n.bindingIndex+r]);i[n.bindings[r].nonMinifiedName]=new Vn(s,o,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=o,i}function wi(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0,o=0;o<n.length;o++){var i=n[o],a=i.parent;for(!a&&i.flags&e&&_i(t,o,i.flags&e,r++),0==(i.childFlags&e)&&(o+=i.childCount);a&&1&a.flags&&o===a.nodeIndex+a.childCount;)a.directChildFlags&e&&(r=xi(t,a,e,r)),a=a.parent}}function xi(t,e,n,r){for(var o=e.nodeIndex+1;o<=e.nodeIndex+e.childCount;o++){var i=t.def.nodes[o];i.flags&n&&_i(t,o,i.flags&n,r++),o+=i.childCount}return r}function _i(t,e,n,r){var o=Lr(t,e);if(o){var i=o.instance;i&&(Br.setCurrentNode(t,e),1048576&n&&Mr(t,512,r)&&i.ngAfterContentInit(),2097152&n&&i.ngAfterContentChecked(),4194304&n&&Mr(t,768,r)&&i.ngAfterViewInit(),8388608&n&&i.ngAfterViewChecked(),131072&n&&i.ngOnDestroy())}}function Oi(t){for(var e=t.def.nodeMatchedQueries;t.parent&&so(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.nodeIndex+n.childCount,o=0;o<=r;o++)67108864&(i=t.def.nodes[o]).flags&&536870912&i.flags&&(i.query.filterId&e)===i.query.filterId&&Vr(t,o).setDirty(),!(1&i.flags&&o+i.childCount<n.nodeIndex)&&67108864&i.childFlags&&536870912&i.childFlags||(o+=i.childCount)}if(134217728&t.def.nodeFlags)for(o=0;o<t.def.nodes.length;o++){var i;134217728&(i=t.def.nodes[o]).flags&&536870912&i.flags&&Vr(t,o).setDirty(),o+=i.childCount}}function Ci(t,e){var n=Vr(t,e.nodeIndex);if(n.dirty){var r,o=void 0;if(67108864&e.flags){var i=e.parent.parent;o=Ei(t,i.nodeIndex,i.nodeIndex+i.childCount,e.query,[]),r=Lr(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(o=Ei(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(o);for(var a=e.query.bindings,s=!1,u=0;u<a.length;u++){var l=a[u],c=void 0;switch(l.bindingType){case 0:c=n.first;break;case 1:c=n,s=!0}r[l.propName]=c}s&&n.notifyOnChanges()}}function Ei(t,e,n,r,o){for(var i=e;i<=n;i++){var a=t.def.nodes[i],s=a.matchedQueries[r.id];if(null!=s&&o.push(Ni(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=jr(t,i);if((a.childMatchedQueries&r.filterId)===r.filterId&&(Ei(t,i+1,i+a.childCount,r,o),i+=a.childCount),16777216&a.flags)for(var l=u.viewContainer._embeddedViews,c=0;c<l.length;c++){var p=l[c],f=ro(p);f&&f===u&&Ei(p,0,p.def.nodes.length-1,r,o)}var h=u.template._projectedViews;if(h)for(c=0;c<h.length;c++){var d=h[c];Ei(d,0,d.def.nodes.length-1,r,o)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(i+=a.childCount)}return o}function Ni(t,e,n){if(null!=n)switch(n){case 1:return jr(t,e.nodeIndex).renderElement;case 0:return new _n(jr(t,e.nodeIndex).renderElement);case 2:return jr(t,e.nodeIndex).template;case 3:return jr(t,e.nodeIndex).viewContainer;case 4:return Lr(t,e.nodeIndex).instance}}function Si(t,e,n){var r=co(t,e,n);r&&go(t,n.ngContent.index,1,r,null,void 0)}function Ii(t,e,n){for(var r=new Array(n.length-1),o=1;o<n.length;o++)r[o-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[o]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Pi(t,e,n){var r,o=t.renderer;r=o.createText(n.text.prefix);var i=co(t,e,n);return i&&o.appendChild(i,r),{renderText:r}}function ki(t,e){return(null!=t?t.toString():"")+e.suffix}function Ti(t,e,n,r){for(var o=0,i=0,a=0,s=0,u=0,l=null,c=null,p=!1,f=!1,h=null,d=0;d<e.length;d++){var m=e[d];if(m.nodeIndex=d,m.parent=l,m.bindingIndex=o,m.outputIndex=i,m.renderParent=c,a|=m.flags,u|=m.matchedQueryIds,m.element){var g=m.element;g.publicProviders=l?l.element.publicProviders:Object.create(null),g.allProviders=g.publicProviders,p=!1,f=!1,m.element.template&&(u|=m.element.template.nodeMatchedQueries)}if(Ri(l,m,e.length),o+=m.bindings.length,i+=m.outputs.length,!c&&3&m.flags&&(h=m),20224&m.flags){p||(p=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);var v=0!=(32768&m.flags);0==(8192&m.flags)||v?l.element.publicProviders[Hr(m.provider.token)]=m:(f||(f=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[Hr(m.provider.token)]=m),v&&(l.element.componentProvider=m)}if(l?(l.childFlags|=m.flags,l.directChildFlags|=m.flags,l.childMatchedQueries|=m.matchedQueryIds,m.element&&m.element.template&&(l.childMatchedQueries|=m.element.template.nodeMatchedQueries)):s|=m.flags,m.childCount>0)l=m,Ai(m)||(c=m);else for(;l&&d===l.nodeIndex+l.childCount;){var y=l.parent;y&&(y.childFlags|=l.childFlags,y.childMatchedQueries|=l.childMatchedQueries),c=(l=y)&&Ai(l)?l.renderParent:l}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||qr,updateRenderer:r||qr,handleEvent:function(t,n,r,o){return e[n].element.handleEvent(t,r,o)},bindingCount:o,outputCount:i,lastRenderRootNode:h}}function Ai(t){return 0!=(1&t.flags)&&null===t.element.name}function Ri(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.nodeIndex+"!")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+e.nodeIndex+"!");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.nodeIndex+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.nodeIndex+"!")}if(e.childCount){var o=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=o&&e.nodeIndex+e.childCount>o)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.nodeIndex+"!")}}function Mi(t,e,n,r){var o=Li(t.root,t.renderer,t,e,n);return zi(o,t.component,r),Vi(o),o}function Di(t,e,n){var r=Li(t,t.renderer,null,null,e);return zi(r,n,n),Vi(r),r}function ji(t,e,n,r){var o,i=e.element.componentRendererType;return o=i?t.root.rendererFactory.createRenderer(r,i):t.root.renderer,Li(t.root,o,t,e.element.componentProvider,n)}function Li(t,e,n,r,o){var i=new Array(o.nodes.length),a=o.outputCount?new Array(o.outputCount):null;return{def:o,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:i,state:13,root:t,renderer:e,oldValues:new Array(o.bindingCount),disposables:a,initIndex:-1}}function zi(t,e,n){t.component=e,t.context=n}function Vi(t){var e;ao(t)&&(e=jr(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,r=t.nodes,o=0;o<n.nodes.length;o++){var i=n.nodes[o];Br.setCurrentNode(t,o);var a=void 0;switch(201347067&i.flags){case 1:var s=Oo(t,e,i),u=void 0;if(33554432&i.flags){var l=fo(i.element.componentView);u=Br.createComponentView(t,i,l,s)}Co(t,u,i,s),a={renderElement:s,componentView:u,viewContainer:null,template:i.element.template?Go(t,i):void 0},16777216&i.flags&&(a.viewContainer=Wo(t,i,a));break;case 2:a=Pi(t,e,i);break;case 512:case 1024:case 2048:case 256:(a=r[o])||4096&i.flags||(a={instance:ci(t,i)});break;case 16:a={instance:pi(t,i)};break;case 16384:(a=r[o])||(a={instance:fi(t,i)}),32768&i.flags&&zi(jr(t,i.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new Cn;break;case 8:Si(t,e,i),a=void 0}r[o]=a}Ki(t,Gi.CreateViewNodes),Ji(t,201326592,268435456,0)}function Bi(t){Wi(t),Br.updateDirectives(t,1),Qi(t,Gi.CheckNoChanges),Br.updateRenderer(t,1),Ki(t,Gi.CheckNoChanges),t.state&=-97}function Fi(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Rr(t,0,256),Wi(t),Br.updateDirectives(t,0),Qi(t,Gi.CheckAndUpdate),Ji(t,67108864,536870912,0);var e=Rr(t,256,512);wi(t,2097152|(e?1048576:0)),Br.updateRenderer(t,0),Ki(t,Gi.CheckAndUpdate),Ji(t,134217728,536870912,0),wi(t,8388608|((e=Rr(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Rr(t,768,1024)}function Ui(t,e,n,r,o,i,a,s,l,c,p,f,h){return 0===n?function(t,e,n,r,o,i,a,s,u,l,c,p){switch(201347067&e.flags){case 1:return function(t,e,n,r,o,i,a,s,u,l,c,p){var f=e.bindings.length,h=!1;return f>0&&No(t,e,0,n)&&(h=!0),f>1&&No(t,e,1,r)&&(h=!0),f>2&&No(t,e,2,o)&&(h=!0),f>3&&No(t,e,3,i)&&(h=!0),f>4&&No(t,e,4,a)&&(h=!0),f>5&&No(t,e,5,s)&&(h=!0),f>6&&No(t,e,6,u)&&(h=!0),f>7&&No(t,e,7,l)&&(h=!0),f>8&&No(t,e,8,c)&&(h=!0),f>9&&No(t,e,9,p)&&(h=!0),h}(t,e,n,r,o,i,a,s,u,l,c,p);case 2:return function(t,e,n,r,o,i,a,s,u,l,c,p){var f=!1,h=e.bindings,d=h.length;if(d>0&&Jr(t,e,0,n)&&(f=!0),d>1&&Jr(t,e,1,r)&&(f=!0),d>2&&Jr(t,e,2,o)&&(f=!0),d>3&&Jr(t,e,3,i)&&(f=!0),d>4&&Jr(t,e,4,a)&&(f=!0),d>5&&Jr(t,e,5,s)&&(f=!0),d>6&&Jr(t,e,6,u)&&(f=!0),d>7&&Jr(t,e,7,l)&&(f=!0),d>8&&Jr(t,e,8,c)&&(f=!0),d>9&&Jr(t,e,9,p)&&(f=!0),f){var m=e.text.prefix;d>0&&(m+=ki(n,h[0])),d>1&&(m+=ki(r,h[1])),d>2&&(m+=ki(o,h[2])),d>3&&(m+=ki(i,h[3])),d>4&&(m+=ki(a,h[4])),d>5&&(m+=ki(s,h[5])),d>6&&(m+=ki(u,h[6])),d>7&&(m+=ki(l,h[7])),d>8&&(m+=ki(c,h[8])),d>9&&(m+=ki(p,h[9]));var g=Dr(t,e.nodeIndex).renderText;t.renderer.setValue(g,m)}return f}(t,e,n,r,o,i,a,s,u,l,c,p);case 16384:return function(t,e,n,r,o,i,a,s,u,l,c,p){var f=Lr(t,e.nodeIndex),h=f.instance,d=!1,m=void 0,g=e.bindings.length;return g>0&&Zr(t,e,0,n)&&(d=!0,m=bi(t,f,e,0,n,m)),g>1&&Zr(t,e,1,r)&&(d=!0,m=bi(t,f,e,1,r,m)),g>2&&Zr(t,e,2,o)&&(d=!0,m=bi(t,f,e,2,o,m)),g>3&&Zr(t,e,3,i)&&(d=!0,m=bi(t,f,e,3,i,m)),g>4&&Zr(t,e,4,a)&&(d=!0,m=bi(t,f,e,4,a,m)),g>5&&Zr(t,e,5,s)&&(d=!0,m=bi(t,f,e,5,s,m)),g>6&&Zr(t,e,6,u)&&(d=!0,m=bi(t,f,e,6,u,m)),g>7&&Zr(t,e,7,l)&&(d=!0,m=bi(t,f,e,7,l,m)),g>8&&Zr(t,e,8,c)&&(d=!0,m=bi(t,f,e,8,c,m)),g>9&&Zr(t,e,9,p)&&(d=!0,m=bi(t,f,e,9,p,m)),m&&h.ngOnChanges(m),65536&e.flags&&Mr(t,256,e.nodeIndex)&&h.ngOnInit(),262144&e.flags&&h.ngDoCheck(),d}(t,e,n,r,o,i,a,s,u,l,c,p);case 32:case 64:case 128:return function(t,e,n,r,o,i,a,s,u,l,c,p){var f=e.bindings,h=!1,d=f.length;if(d>0&&Jr(t,e,0,n)&&(h=!0),d>1&&Jr(t,e,1,r)&&(h=!0),d>2&&Jr(t,e,2,o)&&(h=!0),d>3&&Jr(t,e,3,i)&&(h=!0),d>4&&Jr(t,e,4,a)&&(h=!0),d>5&&Jr(t,e,5,s)&&(h=!0),d>6&&Jr(t,e,6,u)&&(h=!0),d>7&&Jr(t,e,7,l)&&(h=!0),d>8&&Jr(t,e,8,c)&&(h=!0),d>9&&Jr(t,e,9,p)&&(h=!0),h){var m=zr(t,e.nodeIndex),g=void 0;switch(201347067&e.flags){case 32:g=new Array(f.length),d>0&&(g[0]=n),d>1&&(g[1]=r),d>2&&(g[2]=o),d>3&&(g[3]=i),d>4&&(g[4]=a),d>5&&(g[5]=s),d>6&&(g[6]=u),d>7&&(g[7]=l),d>8&&(g[8]=c),d>9&&(g[9]=p);break;case 64:g={},d>0&&(g[f[0].name]=n),d>1&&(g[f[1].name]=r),d>2&&(g[f[2].name]=o),d>3&&(g[f[3].name]=i),d>4&&(g[f[4].name]=a),d>5&&(g[f[5].name]=s),d>6&&(g[f[6].name]=u),d>7&&(g[f[7].name]=l),d>8&&(g[f[8].name]=c),d>9&&(g[f[9].name]=p);break;case 128:var v=n;switch(d){case 1:g=v.transform(n);break;case 2:g=v.transform(r);break;case 3:g=v.transform(r,o);break;case 4:g=v.transform(r,o,i);break;case 5:g=v.transform(r,o,i,a);break;case 6:g=v.transform(r,o,i,a,s);break;case 7:g=v.transform(r,o,i,a,s,u);break;case 8:g=v.transform(r,o,i,a,s,u,l);break;case 9:g=v.transform(r,o,i,a,s,u,l,c);break;case 10:g=v.transform(r,o,i,a,s,u,l,c,p)}}m.value=g}return h}(t,e,n,r,o,i,a,s,u,l,c,p);default:throw"unreachable"}}(t,e,r,o,i,a,s,l,c,p,f,h):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var r=!1,o=0;o<n.length;o++)No(t,e,o,n[o])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){for(var r=e.bindings,o=!1,i=0;i<n.length;i++)Jr(t,e,i,n[i])&&(o=!0);if(o){var a="";for(i=0;i<n.length;i++)a+=ki(n[i],r[i]);a=e.text.prefix+a;var s=Dr(t,e.nodeIndex).renderText;t.renderer.setValue(s,a)}return o}(t,e,n);case 16384:return function(t,e,n){for(var r=Lr(t,e.nodeIndex),o=r.instance,i=!1,a=void 0,s=0;s<n.length;s++)Zr(t,e,s,n[s])&&(i=!0,a=bi(t,r,e,s,n[s],a));return a&&o.ngOnChanges(a),65536&e.flags&&Mr(t,256,e.nodeIndex)&&o.ngOnInit(),262144&e.flags&&o.ngDoCheck(),i}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var r=e.bindings,o=!1,i=0;i<n.length;i++)Jr(t,e,i,n[i])&&(o=!0);if(o){var a=zr(t,e.nodeIndex),s=void 0;switch(201347067&e.flags){case 32:s=n;break;case 64:for(s={},i=0;i<n.length;i++)s[r[i].name]=n[i];break;case 128:var l=n[0],c=n.slice(1);s=l.transform.apply(l,u(c))}a.value=s}return o}(t,e,n);default:throw"unreachable"}}(t,e,r)}function Wi(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var o=jr(t,n).template._projectedViews;if(o)for(var i=0;i<o.length;i++){var a=o[i];a.state|=32,eo(a,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function qi(t,e,n,r,o,i,a,s,u,l,c,p,f){return 0===n?function(t,e,n,r,o,i,a,s,u,l,c,p){var f=e.bindings.length;f>0&&Yr(t,e,0,n),f>1&&Yr(t,e,1,r),f>2&&Yr(t,e,2,o),f>3&&Yr(t,e,3,i),f>4&&Yr(t,e,4,a),f>5&&Yr(t,e,5,s),f>6&&Yr(t,e,6,u),f>7&&Yr(t,e,7,l),f>8&&Yr(t,e,8,c),f>9&&Yr(t,e,9,p)}(t,e,r,o,i,a,s,u,l,c,p,f):function(t,e,n){for(var r=0;r<n.length;r++)Yr(t,e,r,n[r])}(t,e,r),!1}function $i(t,e){if(Vr(t,e.nodeIndex).dirty)throw Fr(Br.createDebugContext(t,e.nodeIndex),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function Hi(t){if(!(128&t.state)){if(Qi(t,Gi.Destroy),Ki(t,Gi.Destroy),wi(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=ro(t);if(e){var n=e.template._projectedViews;n&&(zo(n,n.indexOf(t)),Br.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(jr(t,n).renderElement):2&r.flags?t.renderer.destroyNode(Dr(t,n).renderText):(67108864&r.flags||134217728&r.flags)&&Vr(t,n).destroy()}}(t),ao(t)&&t.renderer.destroy(),t.state|=128}}var Gi=function(t){return t[t.CreateViewNodes=0]="CreateViewNodes",t[t.CheckNoChanges=1]="CheckNoChanges",t[t.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate=3]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",t[t.Destroy=5]="Destroy",t}({});function Ki(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var o=n.nodes[r];33554432&o.flags?Xi(jr(t,r).componentView,e):0==(33554432&o.childFlags)&&(r+=o.childCount)}}function Qi(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var o=n.nodes[r];if(16777216&o.flags)for(var i=jr(t,r).viewContainer._embeddedViews,a=0;a<i.length;a++)Xi(i[a],e);else 0==(16777216&o.childFlags)&&(r+=o.childCount)}}function Xi(t,e){var n=t.state;switch(e){case Gi.CheckNoChanges:0==(128&n)&&(12==(12&n)?Bi(t):64&n&&Zi(t,Gi.CheckNoChangesProjectedViews));break;case Gi.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Bi(t):64&n&&Zi(t,e));break;case Gi.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Fi(t):64&n&&Zi(t,Gi.CheckAndUpdateProjectedViews));break;case Gi.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Fi(t):64&n&&Zi(t,e));break;case Gi.Destroy:Hi(t);break;case Gi.CreateViewNodes:Vi(t)}}function Zi(t,e){Qi(t,e),Ki(t,e)}function Ji(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var o=t.def.nodes.length,i=0;i<o;i++){var a=t.def.nodes[i];if(a.flags&e&&a.flags&n)switch(Br.setCurrentNode(t,a.nodeIndex),r){case 0:Ci(t,a);break;case 1:$i(t,a)}a.childFlags&e&&a.childFlags&n||(i+=a.childCount)}}var Yi=!1;function ta(t,e,n,r,o,i){return Di(na(t,o,o.injector.get(wn),e,n),r,i)}function ea(t,e,n,r,o,i){var a=o.injector.get(wn),s=na(t,o,new ja(a),e,n),u=fa(r);return Ma(xa.create,Di,null,[s,u,i])}function na(t,e,n,r,o){var i=e.injector.get(Ar),a=e.injector.get(le);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:o,sanitizer:i,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:a}}function ra(t,e,n,r){var o=fa(n);return Ma(xa.create,Mi,null,[t,e,o,r])}function oa(t,e,n,r){return n=ua.get(e.element.componentProvider.provider.token)||fa(n),Ma(xa.create,ji,null,[t,e,n,r])}function ia(t,e,n,r){return Yo(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===aa.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var r=aa.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(function(t){sa.forEach(function(r,o){o.ngInjectableDef.providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var r=t.providers[e];n&&(r.flags|=4096);var o=aa.get(r.token);o&&(r.flags=-3841&r.flags|o.flags,r.deps=lo(o.deps),r.value=o.value)}if(sa.size>0){var i=new Set(t.modules);sa.forEach(function(e,r){if(i.has(r.ngInjectableDef.providedIn)){var o={token:r,flags:e.flags|(n?4096:0),deps:lo(e.deps),value:e.value,index:t.providers.length};t.providers.push(o),t.providersByKey[Hr(r)]=o}})}}(t=t.factory(function(){return qr})),t):t}(r))}var aa=new Map,sa=new Map,ua=new Map;function la(t){aa.set(t.token,t),"function"==typeof t.token&&t.token.ngInjectableDef&&"function"==typeof t.token.ngInjectableDef.providedIn&&sa.set(t.token,t)}function ca(t,e){var n=fo(fo(e.viewDefFactory).nodes[0].element.componentView);ua.set(t,n)}function pa(){aa.clear(),sa.clear(),ua.clear()}function fa(t){if(0===aa.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var o=t.nodes[r];1&o.flags&&(n=o),n&&3840&o.flags&&aa.has(o.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return qr});for(var n=0;n<e.length;n++)r(t,e[n]);return t;function r(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){var o=r.provider,i=aa.get(o.token);i&&(r.flags=-3841&r.flags|i.flags,o.deps=lo(i.deps),o.value=i.value)}}}}function ha(t,e,n,r,o,i,a,s,u,l,c,p,f){var h=t.def.nodes[e];return Ui(t,h,n,r,o,i,a,s,u,l,c,p,f),224&h.flags?zr(t,e).value:void 0}function da(t,e,n,r,o,i,a,s,u,l,c,p,f){var h=t.def.nodes[e];return qi(t,h,n,r,o,i,a,s,u,l,c,p,f),224&h.flags?zr(t,e).value:void 0}function ma(t){return Ma(xa.detectChanges,Fi,null,[t])}function ga(t){return Ma(xa.checkNoChanges,Bi,null,[t])}function va(t){return Ma(xa.destroy,Hi,null,[t])}var ya,ba,wa,xa=function(t){return t[t.create=0]="create",t[t.detectChanges=1]="detectChanges",t[t.checkNoChanges=2]="checkNoChanges",t[t.destroy=3]="destroy",t[t.handleEvent=4]="handleEvent",t}({});function _a(t,e){ba=t,wa=e}function Oa(t,e,n,r){return _a(t,e),Ma(xa.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function Ca(t,e){if(128&t.state)throw Wr(xa[ya]);return _a(t,ka(t,0)),t.def.updateDirectives(function(t,n,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var a=t.def.nodes[n];return 0===e?Na(t,a,r,o):Sa(t,a,r,o),16384&a.flags&&_a(t,ka(t,n)),224&a.flags?zr(t,a.nodeIndex).value:void 0},t)}function Ea(t,e){if(128&t.state)throw Wr(xa[ya]);return _a(t,Ta(t,0)),t.def.updateRenderer(function(t,n,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var a=t.def.nodes[n];return 0===e?Na(t,a,r,o):Sa(t,a,r,o),3&a.flags&&_a(t,Ta(t,n)),224&a.flags?zr(t,a.nodeIndex).value:void 0},t)}function Na(t,e,n,r){if(Ui.apply(void 0,u([t,e,n],r))){var o=1===n?r[0]:r;if(16384&e.flags){for(var i={},a=0;a<e.bindings.length;a++){var s=e.bindings[a],l=o[a];8&s.flags&&(i[(h=s.nonMinifiedName,"ng-reflect-"+(h=h.replace(/[$@]/g,"_").replace(Ia,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()})))]=Pa(l))}var c=e.parent,p=jr(t,c.nodeIndex).renderElement;if(c.element.name)for(var f in i)null!=(l=i[f])?t.renderer.setAttribute(p,f,l):t.renderer.removeAttribute(p,f);else t.renderer.setValue(p,"bindings="+JSON.stringify(i,null,2))}}var h}function Sa(t,e,n,r){qi.apply(void 0,u([t,e,n],r))}var Ia=/([A-Z])/g;function Pa(t){try{return null!=t?t.toString().slice(0,30):t}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function ka(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function Ta(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var Aa=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,r=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=oo(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return jr(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return Qo(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){Ra(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&Ra(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=function(t){for(;t&&!ao(t);)t=t.parent;return t.parent?jr(t.parent,oo(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?io(this.view,this.nodeDef):io(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var i=function(t,e){for(var n=-1,r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(e,n),a=-1;e.factory(function(){var e;return++a===i?(e=t.error).bind.apply(e,u([t],r)):qr}),a<i&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,u(r)))},t}();function Ra(t,e,n){for(var r in e.references)n[r]=Ni(t,e,e.references[r])}function Ma(t,e,n,r){var o=ya,i=ba,a=wa;try{ya=t;var s=e.apply(n,r);return ba=i,wa=a,ya=o,s}catch(t){if(ae(t)||!ba)throw t;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Ur(t,e),t}(t,Da())}}function Da(){return ba?new Aa(ba,wa):null}var ja=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new La(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),La=function(){function t(t){this.delegate=t,this.data=this.delegate.data}return t.prototype.destroyNode=function(t){!function(t){Mn.delete(t.nativeNode)}(Dn(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),r=Da();if(r){var o=new Rn(n,null,r);o.name=t,jn(o)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=Da();return n&&jn(new An(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=Da();return n&&jn(new An(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=Dn(t),r=Dn(e);n&&r&&n instanceof Rn&&n.addChild(r),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var r=Dn(t),o=Dn(e),i=Dn(n);r&&o&&r instanceof Rn&&r.insertBefore(i,o),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=Dn(t),r=Dn(e);n&&r&&n instanceof Rn&&n.removeChild(r),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t){var e=this.delegate.selectRootElement(t),n=Da();return n&&jn(new Rn(e,null,n)),e},t.prototype.setAttribute=function(t,e,n,r){var o=Dn(t);o&&o instanceof Rn&&(o.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){var r=Dn(t);r&&r instanceof Rn&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=Dn(t);n&&n instanceof Rn&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=Dn(t);n&&n instanceof Rn&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){var o=Dn(t);o&&o instanceof Rn&&(o.styles[e]=n),this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){var r=Dn(t);r&&r instanceof Rn&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var r=Dn(t);r&&r instanceof Rn&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if("string"!=typeof t){var r=Dn(t);r&&r.listeners.push(new function(t,e){this.name=t,this.callback=e}(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}(),za=function(t){function e(e,n,r){var o=t.call(this)||this;return o.moduleType=e,o._bootstrapComponents=n,o._ngModuleDefFactory=r,o}return o(e,t),e.prototype.create=function(t){!function(){if(!Yi){Yi=!0;var t=fn()?{setCurrentNode:_a,createRootView:ea,createEmbeddedView:ra,createComponentView:oa,createNgModuleRef:ia,overrideProvider:la,overrideComponentView:ca,clearOverrides:pa,checkAndUpdateView:ma,checkNoChangesView:ga,destroyView:va,createDebugContext:function(t,e){return new Aa(t,e)},handleEvent:Oa,updateDirectives:Ca,updateRenderer:Ea}:{setCurrentNode:function(){},createRootView:ta,createEmbeddedView:Mi,createComponentView:ji,createNgModuleRef:Yo,overrideProvider:qr,overrideComponentView:qr,clearOverrides:qr,checkAndUpdateView:Fi,checkNoChangesView:Bi,destroyView:Hi,createDebugContext:function(t,e){return new Aa(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?ha:da,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?ha:da,t)}};Br.setCurrentNode=t.setCurrentNode,Br.createRootView=t.createRootView,Br.createEmbeddedView=t.createEmbeddedView,Br.createComponentView=t.createComponentView,Br.createNgModuleRef=t.createNgModuleRef,Br.overrideProvider=t.overrideProvider,Br.overrideComponentView=t.overrideComponentView,Br.clearOverrides=t.clearOverrides,Br.checkAndUpdateView=t.checkAndUpdateView,Br.checkNoChangesView=t.checkNoChangesView,Br.destroyView=t.destroyView,Br.resolveDep=vi,Br.createDebugContext=t.createDebugContext,Br.handleEvent=t.handleEvent,Br.updateDirectives=t.updateDirectives,Br.updateRenderer=t.updateRenderer,Br.dirtyParentQueries=Oi}}();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),r={};for(var o in t.providersByKey)r[o]=t.providersByKey[o];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(fo(this._ngModuleDefFactory));return Br.createNgModuleRef(this.moduleType,t||Lt.NULL,this._bootstrapComponents,e)},e}($e);function Va(t,e,n){t!=e&&Fa(n)}function Ba(t,e){null==t&&Fa(e)}function Fa(t){throw new Error("ASSERTION ERROR: "+t)}var Ua=16,Wa=0,qa=1,$a=2,Ha=3,Ga=4,Ka=5,Qa=6,Xa=7,Za=8,Ja=9,Ya=10,ts=11,es=14;function ns(t,e,n){t.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentInit),t.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,t.afterContentChecked))}function rs(t,e,n){t.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewInit),t.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,t.afterViewChecked))}function os(t,e,n){null!=t.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,t.onDestroy)}function is(t,e,n){16&t[Ga]&&(as(t[Xa],e.initHooks,e.checkHooks,n),t[Ga]&=-17)}function as(t,e,n,r){var o=r?e:n;o&&ss(t,o)}function ss(t,e){for(var n=0;n<e.length;n+=2)e[n+1].call(t[e[n]])}"undefined"==typeof ngDevMode&&("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global);var us=0,ls=4,cs="ngProjectAs";function ps(t){return!!t.listen}var fs={createRenderer:function(t,e){return document}};function hs(t,e){Ba(t,"should be called with a node"),Va(t.tNode.type,e,"should be a "+function(t){return 1==t?"Projection":0==t?"Container":2==t?"View":3==t?"Element":"<unknown>"}(e))}function ds(t){return Array.isArray(t)?t[0]:t}function ms(t){if(2===t.tNode.type){var e=t.data;return e[$a]?e[$a][Ka]:null}return t.tNode.next?t.view[t.tNode.next.index]:null}function gs(t){return t.tNode.child?ds((2===t.tNode.type?t.data:t.view)[t.tNode.child.index]):null}function vs(t){if(-1===t.tNode.index&&2===t.tNode.type){var e=t.data[es];return-1===e?null:t.view[e].dynamicLContainerNode}var n=t.tNode.parent;return ds(n?t.view[n.index]:t.view[Ka])}var ys=[];function bs(t){for(var e=t[Ka];2===e.tNode.type;)ngDevMode&&Ba(t[qa],"lViewData.parent"),e=(t=t[qa])[Ka];return ngDevMode&&hs(e,3),ngDevMode&&Ba(e.data,"node.data"),e}function ws(t,e,n,r,o){0===t?ps(e)?e.insertBefore(n,r,o):n.insertBefore(r,o,!0):1===t?ps(e)?e.removeChild(n,r):n.removeChild(r):2===t&&(ngDevMode&&ngDevMode.rendererDestroyNode++,e.destroyNode(r))}function xs(t){if(-1===t[Wa].childIndex)return null;var e=t[t[Wa].childIndex];return e.data?e.data:e.dynamicLContainerNode.data}function _s(t,e){var n;return(n=t[Ka])&&2===n.tNode.type?vs(n).data:t[qa]===e?null:t[qa]}function Os(t){if(t[Wa]){var e=t;!function(t){var e=t[Wa].cleanup;if(null!=e){for(var n=0;n<e.length-1;n+=2)"string"==typeof e[n]?(ds(t[e[n+1]]).native.removeEventListener(e[n],t[Za][e[n+2]],e[n+3]),n+=2):"number"==typeof e[n]?(0,t[Za][e[n]])():e[n].call(t[Za][e[n+1]]);t[Za]=null}}(e),function(t){var e,n=t[Wa];null!=n&&null!=(e=n.destroyHooks)&&ss(t[Xa],e)}(e),(r=(n=e)[Wa]&&n[Wa].pipeDestroyHooks)&&ss(n,r),-1===e[Wa].id&&ps(e[ts])&&(ngDevMode&&ngDevMode.rendererDestroy++,e[ts].destroy())}var n,r}var Cs,Es,Ns,Ss,Is,Ps,ks,Ts,As,Rs="__ngHostLNode__",Ms=Promise.resolve(null),Ds=[0,0],js=new Array(Ua).fill(null),Ls=!1,zs=!0;function Vs(t,e){var n=Ts;return As=t&&t[Xa],Is=t&&t[Wa],ks=t&&1==(1&t[Ga]),zs=t&&Is.firstTemplatePass,Cs=t&&t[ts],null!=e&&(Ns=e,Ss=!0),Ts=t,Ps=t&&t[Ha],n}function Bs(t,e){e||(Ls||as(As,Is.viewHooks,Is.viewCheckHooks,ks),Ts[Ga]&=-6),Ts[Ga]|=16,Ts[Qa]=-1,Vs(t,null)}function Fs(){Ls||is(Ts,Is,ks),function(t){for(var e=xs(Ts);null!==e;e=e[$a])if(e.length<Ua&&null===e[us])for(var n=e,r=0;r<n[ls].length;r++){var o=n[ls][r],i=o.data;ngDevMode&&Ba(i[Wa],"TView must be allocated"),$s(o,i[Wa],i[Ja],2)}}(),Ls||as(As,Is.contentHooks,Is.contentCheckHooks,ks),Is.firstTemplatePass=zs=!1,Us(Is.hostBindings),function(t){if(null!=t.contentQueries)for(var e=0;e<t.contentQueries.length;e+=2){var n=t.contentQueries[e];t.directives[n].contentQueriesRefresh(n,t.contentQueries[e+1])}}(Is),function(t){if(null!=t)for(var e=0;e<t.length;e+=2)Ys(t[e],t[e+1])}(Is.components)}function Us(t){if(null!=t)for(var e=Is.directives,n=0;n<t.length;n+=2){var r=t[n],o=e[r];o.hostBindings&&o.hostBindings(r,t[n+1])}}function Ws(t,e,n,r,o){return[e,Ts,null,null,25|r,null,-1,null,null,n,Ts&&Ts[Ya],t,o||null,null,-1,null]}function qs(t,e,n,r,o,i){var a=Ss?Ns:Ns&&vs(Ns),s=a&&a.view===Ts?a.tNode:null,u=(Ss?Ps:Ns&&Ns.queries)||a&&a.queries&&a.queries.child(),l=null!=i,c=function(t,e,n,r,o,i){return{native:r,view:Ts,nodeInjector:n?n.nodeInjector:null,data:o,queries:i,tNode:null,dynamicLContainerNode:null}}(0,0,a,n,l?i:null,u);if(-1===t||2===e)c.tNode=(i?i[Wa].node:null)||Js(e,t,null,null,s,null);else{var p=t+Ua;ngDevMode&&au(p);var f=Is.data;if(Ts[p]=c,p>=f.length){var h=f[p]=Js(e,p,r,o,s,null);if(!Ss&&Ns){var d=Ns.tNode;d.next=h,d.dynamicContainerNode&&(d.dynamicContainerNode.next=h)}}c.tNode=f[p],Ss&&(Ps=null,(null==Ns.tNode.child&&Ns.view===Ts||2===Ns.tNode.type)&&(Ns.tNode.child=c.tNode))}if(2==(2&e)&&l){var m=i;ngDevMode&&null!=m[Ka]&&Fa("lViewData[HOST_NODE] should not have been initialized"),m[Ka]=c,zs&&(m[Wa].node=c.tNode)}return Ns=c,Ss=!0,c}function $s(t,e,n,r){var o,i=Ss,a=Ns;if(null==t.data[qa]&&t.data[Ja]&&!e.template)eu(t.data[Ja]);else try{Ss=!0,Ns=null,o=Vs(t.data,t),Qs(),e.template(r,n),2&r?Fs():t.data[Wa].firstTemplatePass=zs=!1}finally{Bs(o,1==(1&r)),Ss=i,Ns=a}return t}function Hs(t,e,n,r){var o=Vs(e,t);try{Es.begin&&Es.begin(),r?(Qs(),r(Gs(e),n),Fs()):(Ls||(is(Ts,Is,ks),as(As,Is.contentHooks,Is.contentCheckHooks,ks)),Us(Ds),Ys(0,Ua))}finally{Es.end&&Es.end(),Bs(o)}}function Gs(t){return 1&t[Ga]?3:2}var Ks=null;function Qs(){Ks=null}function Xs(t,e,n,r,o){return ngDevMode&&ngDevMode.tView++,{id:t,template:e,viewQuery:o,node:null,data:js.slice(),childIndex:-1,bindingStartIndex:-1,directives:null,firstTemplatePass:!0,initHooks:null,checkHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,pipeDestroyHooks:null,cleanup:null,hostBindings:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof n?n():n,pipeRegistry:"function"==typeof r?r():r,currentMatches:null}}function Zs(t,e){ngDevMode&&iu(-1),Es=t;var n,r=t.createRenderer(null,null),o="string"==typeof e?ps(r)?r.selectRootElement(e):r.querySelector(e):e;if(ngDevMode&&!o)throw new Error("Renderer: "+("string"==typeof e?"Host node with selector not found:":"Host node is required:")+" ["+("function"==typeof(n=e)?n.name||n:"string"==typeof n?n:null==n?"":""+n)+"]");return o}function Js(t,e,n,r,o,i){return ngDevMode&&ngDevMode.tNode++,{type:t,index:e,flags:0,tagName:n,attrs:r,localNames:null,initialInputs:void 0,inputs:void 0,outputs:void 0,tViews:i,next:null,child:null,parent:o,dynamicContainerNode:null,detached:null,stylingTemplate:null,projection:null}}function Ys(t,e){ngDevMode&&iu(e);var n=Ts[e];ngDevMode&&hs(n,3),ngDevMode&&Ba(n.data,"Component's host node should have an LViewData attached.");var r=n.data;tu(r)&&6&r[Ga]&&(ngDevMode&&iu(t,As),ou(r,n,As[t]))}function tu(t){return 8==(8&t[Ga])}function eu(t){for(var e=0;e<t.components.length;e++){var n=t.components[e],r=su(n);ngDevMode&&Ba(r.data,"Component host node should be attached to an LView"),Hs(r,nu(n),n)}}function nu(t){ngDevMode&&Ba(t,"component");for(var e=su(t).view;e[qa];)e=e[qa];return e}function ru(t){var e=su(t);ngDevMode&&Ba(e.data,"Component host node should be attached to an LViewData instance."),ou(e.data,e,t)}function ou(t,e,n){var r=Vs(t,e),o=t[Wa],i=o.template,a=o.viewQuery;try{Qs(),function(e,n,r){e&&1&t[Ga]&&e(1,r)}(a,0,n),i(Gs(t),n),Fs(),function(t,e){t&&t(2,e)}(a,n)}finally{Bs(r)}}function iu(t,e){null==e&&(e=Ts),function(t,e){t>=(e?e.length:0)&&Fa("index expected to be a valid data index")}(t,e||Ts)}function au(t,e){null==e&&(e=Ts),Va(e.length,t,"index "+t+" expected to be at the end of arr (length "+e.length+")")}function su(t){ngDevMode&&Ba(t,"expecting component got null");var e=t[Rs];return ngDevMode&&Ba(t,"object is not a component"),e}var uu=Ms;function lu(t){return{components:[],scheduler:t,clean:uu}}var cu=function(){function t(t,e){this._view=t,this._appRef=null,this._viewContainerRef=null,this._lViewNode=null,this.context=e}return t.prototype._setComponentContext=function(t,e){this._view=t,this.context=e},Object.defineProperty(t.prototype,"destroyed",{get:function(){return 32==(32&this._view[Ga])},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){var t,e;this._viewContainerRef&&tu(this._view)&&(this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),this._viewContainerRef=null),ps(e=(t=this._view)[ts])&&e.destroyNode&&function(e,n,r,o,i,a){for(var s=t[Ka],u=-1;s;){var l=null,c=s.tNode.type;if(3===c)ws(2,o,null,s.native,a),s.dynamicLContainerNode&&ws(2,o,null,s.dynamicLContainerNode.native,a);else if(0===c){ws(2,o,null,s.native,a);var p=s,f=p.dynamicLContainerNode?p.dynamicLContainerNode.data:p.data;(l=f[ls].length?gs(f[ls][0]):null)&&(a=p.dynamicLContainerNode?p.dynamicLContainerNode.native:p.native)}else if(1===c){var h=bs(s.view),d=h.tNode.projection[s.tNode.projection];ys[++u]=s,l=d?h.data[qa][d.index]:null}else l=gs(s);if(null===l)for(null===(l=ms(s))&&8192&s.tNode.flags&&(l=ms(ys[u--]));s&&!l;){if(null===(s=vs(s))||s===n)return null;s.tNode.next||0!==c||(a=s.native),l=ms(s)}s=l}}(0,t[Ka],0,e),function(t){if(-1===t[Wa].childIndex)return Os(t);for(var e=xs(t);e;){var n=null;if(e.length>=Ua?e[Wa].childIndex>-1&&(n=xs(e)):e[ls].length&&(n=e[ls][0].data),null==n){for(;e&&!e[$a]&&e!==t;)Os(e),e=_s(e,t);Os(e||t),n=e&&e[$a]}e=n}}(t),t[Ga]|=32},t.prototype.onDestroy=function(t){var e,n;n=t,function(t){return t[Za]||(t[Za]=[])}(e=this._view).push(n),e[Wa].firstTemplatePass&&function(t){return t[Wa].cleanup||(t[Wa].cleanup=[])}(e).push(e[Za].length-1,null)},t.prototype.markForCheck=function(){!function(t){for(var e=t;null!=e[qa];)e[Ga]|=4,e=e[qa];var n,r;e[Ga]|=4,ngDevMode&&Ba(e[Ja],"rootContext"),(n=e[Ja]).clean==Ms&&(n.clean=new Promise(function(t){return r=t}),n.scheduler(function(){eu(n),r(null),n.clean=Ms}))}(this._view)},t.prototype.detach=function(){this._view[Ga]&=-9},t.prototype.reattach=function(){this._view[Ga]|=8},t.prototype.detectChanges=function(){ru(this.context)},t.prototype.checkNoChanges=function(){!function(t){Ls=!0;try{ru(t)}finally{Ls=!1}}(this.context)},t.prototype.attachToViewContainerRef=function(t){this._viewContainerRef=t},t.prototype.detachFromAppRef=function(){this._appRef=null},t.prototype.attachToAppRef=function(t){this._appRef=t},t}(),pu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.resolveComponentFactory=function(t){return ngDevMode&&(void 0===e&&(e="Type passed in is not ComponentType, it does not have 'ngComponentDef' property."),t.ngComponentDef||Fa(e)),new mu(t.ngComponentDef);var e},e}(Fe);function fu(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var hu=new ht("ROOT_CONTEXT_TOKEN",{providedIn:"root",factory:function(){return lu(Yt(du))}}),du=new ht("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return requestAnimationFrame.bind(window)}}),mu=function(t){function e(e){var n=t.call(this)||this;return n.componentDef=e,n.componentType=e.type,n.selector=e.selectors[0][0],n.ngContentSelectors=[],n}return o(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){return fu(this.componentDef.inputs)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return fu(this.componentDef.outputs)},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){var o,i,a=void 0===n,s=r?r.injector.get(wn):fs,u=a?(o=this.selector,ps(i=s.createRenderer(null,this.componentDef.rendererType)||Cs)?i.createElement(o,Ks):null===Ks?i.createElement(o):i.createElementNS(Ks,o)):Zs(s,n),l=r&&!a?r.injector.get(hu):lu(requestAnimationFrame.bind(window)),c=Ws(s.createRenderer(u,this.componentDef.rendererType),Xs(-1,null,null,null,null),l,this.componentDef.onPush?4:2);c[Ya]=r&&r.injector||null;var p,f,h=Vs(c,null);try{if(s.begin&&s.begin(),f=function(t,e,n,r){Ss=!1,Ns=null;var o,i=qs(0,3,e,null,null,Ws(Cs,(o=n.template).ngPrivateData||(o.ngPrivateData=Xs(-1,o,n.directiveDefs,n.pipeDefs,n.viewQuery)),null,n.onPush?4:2,r));return zs&&(i.tNode.flags=4096,n.diPublic&&n.diPublic(n),Is.directives=[n]),i}(0,u,this.componentDef),l.components.push(p=function(t,e,n){if(ngDevMode&&Va(Ts[Qa],-1,"directives should be created before any bindings"),ngDevMode&&Va(Ss,!0,"previousOrParentNode should be a parent"),Object.defineProperty(e,Rs,{enumerable:!1,value:Ns}),null==As&&(Ts[Xa]=As=[]),ngDevMode&&au(t,As),As[t]=e,zs){var r=Ns.tNode.flags;0==(4095&r)?Ns.tNode.flags=t<<14|4096&r|1:(ngDevMode&&4095==(4095&r)&&Fa("Reached the max number of directives"),Ns.tNode.flags++)}else{var o=n.diPublic;o&&o(n)}return null!=n.attributes&&3==Ns.tNode.type&&function(t,e){for(var n=ps(Cs),r=0;r<e.length;){var o=e[r];if(1===o)break;if(o===cs)r+=2;else if(ngDevMode&&ngDevMode.rendererSetAttribute++,0===o){var i=e[r+1],a=e[r+2],s=e[r+3];n?Cs.setAttribute(t,a,s,i):t.setAttributeNS(i,a,s),r+=4}else s=e[r+1],n?Cs.setAttribute(t,o,s):t.setAttribute(o,s),r+=2}}(Ns.native,n.attributes),e}(0,this.componentDef.factory(),this.componentDef)),function(t,e,n){t&&null!=t.changeDetectorRef&&t.changeDetectorRef._setComponentContext(f.data,p)}(f.nodeInjector),function(t,e){var n=su(t),r=n.view[Wa];(function(t,e,n,r){ngDevMode&&Va(r.firstTemplatePass,!0,"Should only be called on first template pass"),e&&(r.initHooks||(r.initHooks=[])).push(0,e),n&&((r.initHooks||(r.initHooks=[])).push(0,n),(r.checkHooks||(r.checkHooks=[])).push(0,n))})(0,e.onInit,e.doCheck,r),function(t,e){if(e.firstTemplatePass)for(var n=t>>14,r=n+(4095&t),o=n;o<r;o++){var i=e.directives[o];ns(i,e,o),rs(i,e,o),os(i,e,o)}}(n.tNode.flags,r)}(p,this.componentDef),e)for(var d=0,m=f.tNode.projection=[],g=0;g<e.length;g++){for(var v=e[g],y=null,b=null,w=0;w<v.length;w++){var x=qs(++d,3,v[w],null,null);b?b.next=x.tNode:y=x.tNode,b=x.tNode}m.push(y)}$s(f,f.data[Wa],p,1),f.data[Ga]&=-2}finally{Vs(h,null),s.end&&s.end()}var _=new gu(this.componentType,p,c,t,u);return a&&(_.hostView._lViewNode.tNode.child=f.tNode),_},e}(De),gu=function(t){function e(e,n,r,o,i){var a=t.call(this)||this;return a.destroyCbs=[],a.instance=n,a.hostView=a.changeDetectorRef=new cu(r,n),a.hostView._lViewNode=qs(-1,2,null,null,null,r),a.injector=o,a.location=new _n(i),a.componentType=e,a}return o(e,t),e.prototype.destroy=function(){ngDevMode&&Ba(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null},e.prototype.onDestroy=function(t){ngDevMode&&Ba(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.push(t)},e}(Me),vu={provide:Fe,useFactory:function(){return new pu},deps:[]},yu=function(t){function e(e,n){var r=t.call(this)||this;r._bootstrapComponents=[],r.destroyCbs=[];var o=e.ngModuleDef;return ngDevMode&&Ba(o,"NgModule '"+Et(e)+"' is not a subtype of 'NgModuleType'."),r._bootstrapComponents=o.bootstrap,r.injector=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),e=e||me(),new ge(t,n,e)}(e,n,[vu,{provide:qe,useValue:r}]),r.instance=r.injector.get(e),r.componentFactoryResolver=new pu,r}return o(e,t),e.prototype.destroy=function(){ngDevMode&&Ba(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null},e.prototype.onDestroy=function(t){ngDevMode&&Ba(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.push(t)},e}(qe);!function(t){function e(e){var n=t.call(this)||this;return n.moduleType=e,n}o(e,t),e.prototype.create=function(t){return new yu(this.moduleType,t)}}($e);var bu=function(){},wu=function(){function t(){}return t.prototype.ngOnInit=function(){},t}(),xu=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new tt;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(rt),_u=new k(function(t){return t.complete()});function Ou(t){return t?function(t){return new k(function(e){return t.schedule(function(){return e.complete()})})}(t):_u}function Cu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r,o=t[t.length-1];switch(A(o)?t.pop():o=void 0,t.length){case 0:return Ou(o);case 1:return o?G(t,o):(n=t[0],(r=new k(function(t){t.next(n),t.complete()}))._isScalar=!0,r.value=n,r);default:return G(t,o)}}var Eu=function(t){function e(){var n=t.call(this,"no elements in sequence")||this;return n.name="EmptyError",Object.setPrototypeOf(n,e.prototype),n}return o(e,t),e}(Error);function Nu(t,e){return function(n){return n.lift(new Su(t,e))}}var Su=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Iu(t,this.predicate,this.thisArg))},t}(),Iu=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.count=0,o}return o(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(C),Pu=function(t){function e(){var n=t.call(this,"argument out of range")||this;return n.name="ArgumentOutOfRangeError",Object.setPrototypeOf(n,e.prototype),n}return o(e,t),e}(Error),ku=function(){function t(t){if(this.total=t,this.total<0)throw new Pu}return t.prototype.call=function(t,e){return e.subscribe(new Tu(t,this.total))},t}(),Tu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return o(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(C);function Au(t){return void 0===t&&(t=null),function(e){return e.lift(new Ru(t))}}var Ru=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new Mu(t,this.defaultValue))},t}(),Mu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return o(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(C),Du=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new ju(t,this.nextOrObserver,this.error,this.complete))},t}(),ju=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i._tapNext=S,i._tapError=S,i._tapComplete=S,i._tapError=r||S,i._tapComplete=o||S,l(n)?(i._context=i,i._tapNext=n):n&&(i._context=n,i._tapNext=n.next||S,i._tapError=n.error||S,i._tapComplete=n.complete||S),i}return o(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(C),Lu=function(t){return void 0===t&&(t=zu),e={hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}},function(t){return t.lift(new Du(e,void 0,void 0))};var e};function zu(){return new Eu}function Vu(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Nu(function(e,n){return t(e,n,r)}):J,function(t){return t.lift(new ku(1))},n?Au(e):Lu(function(){return new Eu}))}}function Bu(t,e){return function(n){return n.lift(new Fu(t,e,n))}}var Fu=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new Uu(t,this.predicate,this.thisArg,this.source))},t}(),Uu=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.source=o,i.index=0,i.thisArg=r||i,i}return o(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(C);function Wu(t,e){return Q(t,e,1)}function qu(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new $u(t,e,n))}}var $u=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new Hu(t,this.accumulator,this.seed,this.hasSeed))},t}(),Hu=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i.accumulator=n,i._seed=r,i.hasSeed=o,i.index=0,i}return o(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(C);function Gu(t){return function(e){return 0===t?Ou():e.lift(new Ku(t))}}var Ku=function(){function t(t){if(this.total=t,this.total<0)throw new Pu}return t.prototype.call=function(t,e){return e.subscribe(new Qu(t,this.total))},t}(),Qu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return o(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,o=0;o<n;o++){var i=e++%n;t.next(r[i])}t.complete()},e}(C);function Xu(t){return function(e){var n=new Zu(t),r=e.lift(n);return n.caught=r}}var Zu=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new Ju(t,this.selector,this.caught))},t}(),Ju=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.selector=n,o.caught=r,o}return o(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle(),this.add(U(this,n))}},e}(W);function Yu(){return Y(1)}function tl(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Nu(function(e,n){return t(e,n,r)}):J,Gu(1),n?Au(e):Lu(function(){return new Eu}))}}var el=function(){},nl=new ht("Location Initialized"),rl=function(){},ol=new ht("appBaseHref"),il=function(){function t(e){var n=this;this._subject=new Xe,this._platformStrategy=e;var r=this._platformStrategy.getBaseHref();this._baseHref=t.stripTrailingSlash(al(r)),this._platformStrategy.onPopState(function(t){n._subject.emit({url:n.path(!0),pop:!0,state:t.state,type:t.type})})}return t.prototype.path=function(t){return void 0===t&&(t=!1),this.normalize(this._platformStrategy.path(t))},t.prototype.isCurrentPathEqualTo=function(e,n){return void 0===n&&(n=""),this.path()==this.normalize(e+t.normalizeQueryParams(n))},t.prototype.normalize=function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,al(e)))},t.prototype.prepareExternalUrl=function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)},t.prototype.go=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n=null),this._platformStrategy.pushState(n,"",t,e)},t.prototype.replaceState=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n=null),this._platformStrategy.replaceState(n,"",t,e)},t.prototype.forward=function(){this._platformStrategy.forward()},t.prototype.back=function(){this._platformStrategy.back()},t.prototype.subscribe=function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})},t.normalizeQueryParams=function(t){return t&&"?"!==t[0]?"?"+t:t},t.joinWithSlash=function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e},t.stripTrailingSlash=function(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)},t}();function al(t){return t.replace(/\/index.html$/,"")}var sl=function(t){function e(e,n){var r=t.call(this)||this;return r._platformLocation=e,r._baseHref="",null!=n&&(r._baseHref=n),r}return o(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e},e.prototype.prepareExternalUrl=function(t){var e=il.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e},e.prototype.pushState=function(t,e,n,r){var o=this.prepareExternalUrl(n+il.normalizeQueryParams(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,e,o)},e.prototype.replaceState=function(t,e,n,r){var o=this.prepareExternalUrl(n+il.normalizeQueryParams(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,o)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(rl),ul=function(t){function e(e,n){var r=t.call(this)||this;if(r._platformLocation=e,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=n,r}return o(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.prepareExternalUrl=function(t){return il.joinWithSlash(this._baseHref,t)},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.pathname+il.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?""+e+n:e},e.prototype.pushState=function(t,e,n,r){var o=this.prepareExternalUrl(n+il.normalizeQueryParams(r));this._platformLocation.pushState(t,e,o)},e.prototype.replaceState=function(t,e,n,r){var o=this.prepareExternalUrl(n+il.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,o)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(rl),ll=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],cl={},pl=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),fl=new ht("UseV4Plurals"),hl=function(){},dl=function(t){function e(e,n){var r=t.call(this)||this;return r.locale=e,r.deprecatedPluralFn=n,r}return o(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return function(t){var e=t.toLowerCase().replace(/_/g,"-"),n=cl[e];if(n)return n;var r=e.split("-")[0];if(n=cl[r])return n;if("en"===r)return ll;throw new Error('Missing locale data for the locale "'+t+'".')}(t)[18]}(e||this.locale)(t)){case pl.Zero:return"zero";case pl.One:return"one";case pl.Two:return"two";case pl.Few:return"few";case pl.Many:return"many";default:return"other"}},e}(hl),ml=function(){},gl=new ht("DocumentToken"),vl="server",yl=function(){function t(){}return t.ngInjectableDef=ft({providedIn:"root",factory:function(){return new bl(Yt(gl),window)}}),t}(),bl=function(){function t(t,e){this.document=t,this.window=e,this.offset=function(){return[0,0]}}return t.prototype.setOffset=function(t){this.offset=Array.isArray(t)?function(){return t}:t},t.prototype.getScrollPosition=function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]},t.prototype.scrollToPosition=function(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])},t.prototype.scrollToAnchor=function(t){if(this.supportScrollRestoration()){var e=this.document.querySelector("#"+t);if(e)return void this.scrollToElement(e);var n=this.document.querySelector("[name='"+t+"']");if(n)return void this.scrollToElement(n)}},t.prototype.setHistoryScrollRestoration=function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}},t.prototype.scrollToElement=function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(n-o[0],r-o[1])},t.prototype.supportScrollRestoration=function(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}},t}(),wl=null;function xl(){return wl}var _l,Ol={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Cl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},El={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};bt.Node&&(_l=bt.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var Nl,Sl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){var t;t=new e,wl||(wl=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var r;(r=t)[e].apply(r,u(n))},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return Ol},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return _l.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var r=this.getStyle(t,e)||"";return n?r==n:r.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var o=n.item(r);e.set(o.name,o.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,r){t.setAttributeNS(e,n,r)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||""},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute("href")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&El.hasOwnProperty(e)&&(e=El[e]))}return Cl[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=Il||(Il=document.querySelector("base"))?Il.getAttribute("href"):null;return null==n?null:(e=n,Nl||(Nl=document.createElement("a")),Nl.setAttribute("href",e),"/"===Nl.pathname.charAt(0)?Nl.pathname:"/"+Nl.pathname)},e.prototype.resetBaseElement=function(){Il=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return function(t,e){var n,r;e=encodeURIComponent(e);try{for(var o=a(t.split(";")),i=o.next();!i.done;i=o.next()){var u=i.value,l=u.indexOf("="),c=s(-1==l?[u,""]:[u.slice(0,l),u.slice(l+1)],2),p=c[1];if(c[0].trim()===e)return decodeURIComponent(p)}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null}(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],o=0;o<r.length;o++)if(null!=e.getStyle(n,r[o]+"AnimationName")){e._animationPrefix="-"+r[o].toLowerCase()+"-";break}var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(i).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=i[t])})}catch(t){e._animationPrefix=null,e._transitionEnd=null}return e}return o(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}())),Il=null,Pl=gl;function kl(){return!!window.history.pushState}var Tl=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}return o(e,t),e.prototype._init=function(){this.location=xl().getLocation(),this._history=xl().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return xl().getBaseHref(this._doc)},e.prototype.onPopState=function(t){xl().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){xl().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){kl()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){kl()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:It,args:[Pl]}]}]},e}(el),Al=new ht("TRANSITION_ID"),Rl=[{provide:_e,useFactory:function(t,e,n){return function(){n.get(Oe).donePromise.then(function(){var n=xl();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return n.getAttribute(e,"ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[Al,Pl,Lt],multi:!0}],Ml=function(){function t(){}return t.init=function(){var e;e=new t,un=e},t.prototype.addToWindow=function(t){bt.getAngularTestability=function(e,n){void 0===n&&(n=!0);var r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},bt.getAllAngularTestabilities=function(){return t.getAllTestabilities()},bt.getAllAngularRootElements=function(){return t.getAllRootElements()},bt.frameworkStabilizers||(bt.frameworkStabilizers=[]),bt.frameworkStabilizers.push(function(t){var e=bt.getAllAngularTestabilities(),n=e.length,r=!1,o=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(o)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?xl().isShadowRoot(e)?this.findTestabilityInTree(t,xl().getHost(e),!0):this.findTestabilityInTree(t,xl().parentElement(e),!0):null},t}();function Dl(t,e){"undefined"!=typeof COMPILED&&COMPILED||((bt.ng=bt.ng||{})[t]=e)}var jl={ApplicationRef:yn,NgZone:Ze};function Ll(t){return Dn(t)}var zl=new ht("EventManagerPlugins"),Vl=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var o=n[r];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error("No event manager plugin found for event "+t)},t}(),Bl=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var r=xl().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target "+r+" for event "+e);return this.addEventListener(r,e,n)},t}(),Fl=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),Ul=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return o(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return xl().remove(t)})},e}(Fl),Wl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ql=/%COMP%/g,$l="_nghost-%COMP%",Hl="_ngcontent-%COMP%";function Gl(t,e,n){for(var r=0;r<e.length;r++){var o=e[r];Array.isArray(o)?Gl(t,o,n):(o=o.replace(ql,t),n.push(o))}return n}function Kl(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var Ql=function(){function t(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new Xl(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case ee.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new tc(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case ee.Native:case ee.ShadowDom:return new ec(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=Gl(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),Xl=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(Wl[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t){var e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error('The selector "'+t+'" did not match any elements');return e.textContent="",e},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,r){if(r){e=r+":"+e;var o=Wl[r];o?t.setAttributeNS(o,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var r=Wl[n];r?t.removeAttributeNS(r,e):t.removeAttribute(n+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,r){r&xn.DashCase?t.style.setProperty(e,n,r&xn.Important?"important":""):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&xn.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,n){Jl(e,"property"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return Jl(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Kl(n)):this.eventManager.addEventListener(t,e,Kl(n))},t}(),Zl="@".charCodeAt(0);function Jl(t,e){if(t.charCodeAt(0)===Zl)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Yl,tc=function(t){function e(e,n,r){var o=t.call(this,e)||this;o.component=r;var i=Gl(r.id,r.styles,[]);return n.addStyles(i),o.contentAttr=Hl.replace(ql,r.id),o.hostAttr=$l.replace(ql,r.id),o}return o(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,n){var r=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,r,this.contentAttr,""),r},e}(Xl),ec=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;i.sharedStylesHost=n,i.hostEl=r,i.component=o,i.shadowRoot=o.encapsulation===ee.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),i.sharedStylesHost.addHost(i.shadowRoot);for(var a=Gl(o.id,o.styles,[]),s=0;s<a.length;s++){var u=document.createElement("style");u.textContent=a[s],i.shadowRoot.appendChild(u)}return i}return o(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,r){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,r)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(Xl),nc="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},rc=nc("addEventListener"),oc=nc("removeEventListener"),ic={},ac="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[nc("BLACK_LISTED_EVENTS")]&&(Yl={});var sc=function(t){return!!Yl&&Yl.hasOwnProperty(t)},uc=function(t){var e=ic[t.type];if(e){var n=this[e];if(n){var r=[t];if(1===n.length)return(a=n[0]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r);for(var o=n.slice(),i=0;i<o.length&&!0!==t[ac];i++){var a;(a=o[i]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r)}}}},lc=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.ngZone=n,r&&function(t){return t===vl}(r)||o.patchEvent(),o}return o(e,t),e.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[ac]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var r=this,o=n;if(!t[rc]||Ze.isInAngularZone()&&!sc(e))t.addEventListener(e,o,!1);else{var i=ic[e];i||(i=ic[e]=nc("ANGULAR"+e+"FALSE"));var a=t[i],s=a&&a.length>0;a||(a=t[i]=[]);var u=sc(e)?Zone.root:Zone.current;if(0===a.length)a.push({zone:u,handler:o});else{for(var l=!1,c=0;c<a.length;c++)if(a[c].handler===o){l=!0;break}l||a.push({zone:u,handler:o})}s||t[rc](e,uc,!1)}return function(){return r.removeEventListener(t,e,o)}},e.prototype.removeEventListener=function(t,e,n){var r=t[oc];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);var o=ic[e],i=o&&t[o];if(!i)return t.removeEventListener.apply(t,[e,n,!1]);for(var a=!1,s=0;s<i.length;s++)if(i[s].handler===n){a=!0,i.splice(s,1);break}a?0===i.length&&r.apply(t,[e,uc,!1]):t.removeEventListener.apply(t,[e,n,!1])},e}(Bl),cc={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},pc=new ht("HammerGestureConfig"),fc=new ht("HammerLoader"),hc=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t,this.options);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),dc=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i._config=n,i.console=r,i.loader=o,i}return o(e,t),e.prototype.supports=function(t){return!(!cc.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+t+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},e.prototype.addEventListener=function(t,e,n){var r=this,o=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){var i=!1,a=function(){i=!0};return this.loader().then(function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(a=function(){});i||(a=r.addEventListener(t,e,n))}).catch(function(){r.console.warn('The "'+e+'" event cannot be bound because the custom Hammer.JS loader failed.'),a=function(){}}),function(){a()}}return o.runOutsideAngular(function(){var i=r._config.buildHammer(t),a=function(t){o.runGuarded(function(){n(t)})};return i.on(e,a),function(){return i.off(e,a)}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},e}(Bl),mc=["alt","control","meta","shift"],gc={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},vc=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.supports=function(t){return null!=e.parseEventName(t)},e.prototype.addEventListener=function(t,n,r){var o=e.parseEventName(n),i=e.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return xl().onAndCancel(t,o.domEventName,i)})},e.parseEventName=function(t){var n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;var o=e._normalizeKey(n.pop()),i="";if(mc.forEach(function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),i+=t+".")}),i+=o,0!=n.length||0===o.length)return null;var a={};return a.domEventName=r,a.fullKey=i,a},e.getEventFullKey=function(t){var e="",n=xl().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),mc.forEach(function(r){r!=n&&(0,gc[r])(t)&&(e+=r+".")}),e+=n},e.eventCallback=function(t,n,r){return function(o){e.getEventFullKey(o)===t&&r.runGuarded(function(){return n(o)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},e}(Bl),yc=function(){},bc=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return o(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case Tr.NONE:return e;case Tr.HTML:return e instanceof xc?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){var n=null;try{mr=mr||new lr(t);var r=e?String(e):"";n=mr.getInertBodyElement(r);var o=5,i=r;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,r=i,i=n.innerHTML,n=mr.getInertBodyElement(r)}while(r!==i);var a=new Cr,s=a.sanitizeChildren(Ir(n)||n);return fn()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),s}finally{if(n)for(var u=Ir(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}(this._doc,String(e)));case Tr.STYLE:return e instanceof _c?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";var e=t.match(kr);return e&&fr(e[1])===e[1]||t.match(Pr)&&function(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var o=t.charAt(r);"'"===o&&n?e=!e:'"'===o&&e&&(n=!n)}return e&&n}(t)?t:(fn()&&console.warn("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}(e));case Tr.SCRIPT:if(e instanceof Oc)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case Tr.URL:return e instanceof Ec||e instanceof Cc?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),fr(String(e)));case Tr.RESOURCE_URL:if(e instanceof Ec)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof wc)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new xc(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new _c(t)},e.prototype.bypassSecurityTrustScript=function(t){return new Oc(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new Cc(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new Ec(t)},e}(yc),wc=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),xc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(wc),_c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTypeName=function(){return"Style"},e}(wc),Oc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTypeName=function(){return"Script"},e}(wc),Cc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTypeName=function(){return"URL"},e}(wc),Ec=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(wc),Nc=dn(rr,"browser",[{provide:Ie,useValue:"browser"},{provide:Se,useValue:function(){Sl.makeCurrent(),Ml.init()},multi:!0},{provide:el,useClass:Tl,deps:[Pl]},{provide:Pl,useFactory:function(){return document},deps:[]}]);function Sc(){return new le}var Ic=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return t.withServerTransition=function(e){return{ngModule:t,providers:[{provide:Ce,useValue:e.appId},{provide:Al,useExisting:Ce},Rl]}},t}();"undefined"!=typeof window&&window;var Pc=function(t,e){this.id=t,this.url=e},kc=function(t){function e(e,n,r,o){void 0===r&&(r="imperative"),void 0===o&&(o=null);var i=t.call(this,e,n)||this;return i.navigationTrigger=r,i.restoredState=o,i}return o(e,t),e.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},e}(Pc),Tc=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o}return o(e,t),e.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},e}(Pc),Ac=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.reason=r,o}return o(e,t),e.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},e}(Pc),Rc=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.error=r,o}return o(e,t),e.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},e}(Pc),Mc=function(t){function e(e,n,r,o){var i=t.call(this,e,n)||this;return i.urlAfterRedirects=r,i.state=o,i}return o(e,t),e.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(Pc),Dc=function(t){function e(e,n,r,o){var i=t.call(this,e,n)||this;return i.urlAfterRedirects=r,i.state=o,i}return o(e,t),e.prototype.toString=function(){return"GuardsCheckStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(Pc),jc=function(t){function e(e,n,r,o,i){var a=t.call(this,e,n)||this;return a.urlAfterRedirects=r,a.state=o,a.shouldActivate=i,a}return o(e,t),e.prototype.toString=function(){return"GuardsCheckEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+", shouldActivate: "+this.shouldActivate+")"},e}(Pc),Lc=function(t){function e(e,n,r,o){var i=t.call(this,e,n)||this;return i.urlAfterRedirects=r,i.state=o,i}return o(e,t),e.prototype.toString=function(){return"ResolveStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(Pc),zc=function(t){function e(e,n,r,o){var i=t.call(this,e,n)||this;return i.urlAfterRedirects=r,i.state=o,i}return o(e,t),e.prototype.toString=function(){return"ResolveEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(Pc),Vc=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadStart(path: "+this.route.path+")"},t}(),Bc=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadEnd(path: "+this.route.path+")"},t}(),Fc=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ChildActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Uc=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ChildActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Wc=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),qc=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),$c=function(){function t(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}return t.prototype.toString=function(){return"Scroll(anchor: '"+this.anchor+"', position: '"+(this.position?this.position[0]+", "+this.position[1]:null)+"')"},t}(),Hc=function(){},Gc="primary",Kc=function(){function t(t){this.params=t||{}}return t.prototype.has=function(t){return this.params.hasOwnProperty(t)},t.prototype.get=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null},t.prototype.getAll=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]},Object.defineProperty(t.prototype,"keys",{get:function(){return Object.keys(this.params)},enumerable:!0,configurable:!0}),t}();function Qc(t){return new Kc(t)}function Xc(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var o={},i=0;i<r.length;i++){var a=r[i],s=t[i];if(a.startsWith(":"))o[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}var Zc=function(t,e){this.routes=t,this.module=e};function Jc(t,e){void 0===e&&(e="");for(var n=0;n<t.length;n++){var r=t[n];Yc(r,tp(e,r))}}function Yc(t,e){if(!t)throw new Error("\n      Invalid configuration of route '"+e+"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");if(Array.isArray(t))throw new Error("Invalid configuration of route '"+e+"': Array cannot be specified");if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==Gc)throw new Error("Invalid configuration of route '"+e+"': a componentless route without children or loadChildren cannot have a named outlet set");if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '"+e+"': redirectTo and children cannot be used together");if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': redirectTo and loadChildren cannot be used together");if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': children and loadChildren cannot be used together");if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '"+e+"': redirectTo and component cannot be used together");if(t.path&&t.matcher)throw new Error("Invalid configuration of route '"+e+"': path and matcher cannot be used together");if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '"+e+"'. One of the following must be provided: component, redirectTo, children or loadChildren");if(void 0===t.path&&void 0===t.matcher)throw new Error("Invalid configuration of route '"+e+"': routes must have either a path or a matcher specified");if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error("Invalid configuration of route '"+e+"': path cannot start with a slash");if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error("Invalid configuration of route '{path: \""+e+'", redirectTo: "'+t.redirectTo+"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.");if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '"+e+"': pathMatch can only be set to 'prefix' or 'full'");t.children&&Jc(t.children,e)}function tp(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:t+"/"+e.path:"":t}function ep(t){var e=t.children&&t.children.map(ep),n=e?i({},t,{children:e}):i({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Gc&&(n.component=Hc),n}function np(t,e){var n,r=Object.keys(t),o=Object.keys(e);if(r.length!=o.length)return!1;for(var i=0;i<r.length;i++)if(t[n=r[i]]!==e[n])return!1;return!0}function rp(t){return Array.prototype.concat.apply([],t)}function op(t){return t.length>0?t[t.length-1]:null}function ip(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function ap(t){return t.pipe(Y(),Bu(function(t){return!0===t}))}function sp(t){return(e=t)&&"function"==typeof e.subscribe?t:xe(t)?K(Promise.resolve(t)):Cu(t);var e}function up(t,e,n){return n?function(t,e){return np(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!fp(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(function(n){return e[n]===t[n]})}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,o){if(n.segments.length>o.length)return!!fp(a=n.segments.slice(0,o.length),o)&&!r.hasChildren();if(n.segments.length===o.length){if(!fp(n.segments,o))return!1;for(var i in r.children){if(!n.children[i])return!1;if(!t(n.children[i],r.children[i]))return!1}return!0}var a=o.slice(0,n.segments.length),s=o.slice(n.segments.length);return!!fp(n.segments,a)&&!!n.children[Gc]&&e(n.children[Gc],r,s)}(e,n,n.segments)}(t.root,e.root)}var lp=function(){function t(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}return Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=Qc(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return gp.serialize(this)},t}(),cp=function(){function t(t,e){var n=this;this.segments=t,this.children=e,this.parent=null,ip(e,function(t,e){return t.parent=n})}return t.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(t.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return vp(this)},t}(),pp=function(){function t(t,e){this.path=t,this.parameters=e}return Object.defineProperty(t.prototype,"parameterMap",{get:function(){return this._parameterMap||(this._parameterMap=Qc(this.parameters)),this._parameterMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return Op(this)},t}();function fp(t,e){return t.length===e.length&&t.every(function(t,n){return t.path===e[n].path})}function hp(t,e){var n=[];return ip(t.children,function(t,r){r===Gc&&(n=n.concat(e(t,r)))}),ip(t.children,function(t,r){r!==Gc&&(n=n.concat(e(t,r)))}),n}var dp=function(){},mp=function(){function t(){}return t.prototype.parse=function(t){var e=new Ip(t);return new lp(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())},t.prototype.serialize=function(t){var e,n;return"/"+function t(e,n){if(!e.hasChildren())return vp(e);if(n){var r=e.children[Gc]?t(e.children[Gc],!1):"",o=[];return ip(e.children,function(e,n){n!==Gc&&o.push(n+":"+t(e,!1))}),o.length>0?r+"("+o.join("//")+")":r}var i=hp(e,function(n,r){return r===Gc?[t(e.children[Gc],!1)]:[r+":"+t(n,!1)]});return vp(e)+"/("+i.join("//")+")"}(t.root,!0)+(e=t.queryParams,(n=Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return bp(t)+"="+bp(e)}).join("&"):bp(t)+"="+bp(n)})).length?"?"+n.join("&"):"")+("string"==typeof t.fragment?"#"+encodeURI(t.fragment):"")},t}(),gp=new mp;function vp(t){return t.segments.map(function(t){return Op(t)}).join("/")}function yp(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bp(t){return yp(t).replace(/%3B/gi,";")}function wp(t){return yp(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xp(t){return decodeURIComponent(t)}function _p(t){return xp(t.replace(/\+/g,"%20"))}function Op(t){return""+wp(t.path)+(e=t.parameters,Object.keys(e).map(function(t){return";"+wp(t)+"="+wp(e[t])}).join(""));var e}var Cp=/^[^\/()?;=#]+/;function Ep(t){var e=t.match(Cp);return e?e[0]:""}var Np=/^[^=?&#]+/,Sp=/^[^?&#]+/,Ip=function(){function t(t){this.url=t,this.remaining=t}return t.prototype.parseRootSegment=function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new cp([],{}):new cp([],this.parseChildren())},t.prototype.parseQueryParams=function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t},t.prototype.parseFragment=function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null},t.prototype.parseChildren=function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Gc]=new cp(t,e)),n},t.prototype.parseSegment=function(){var t=Ep(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");return this.capture(t),new pp(xp(t),this.parseMatrixParams())},t.prototype.parseMatrixParams=function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=Ep(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=Ep(this.remaining);r&&this.capture(n=r)}t[xp(e)]=xp(n)}},t.prototype.parseQueryParam=function(t){var e,n=(e=this.remaining.match(Np))?e[0]:"";if(n){this.capture(n);var r="";if(this.consumeOptional("=")){var o=function(t){var e=t.match(Sp);return e?e[0]:""}(this.remaining);o&&this.capture(r=o)}var i=_p(n),a=_p(r);if(t.hasOwnProperty(i)){var s=t[i];Array.isArray(s)||(t[i]=s=[s]),s.push(a)}else t[i]=a}},t.prototype.parseParens=function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Ep(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '"+this.url+"'");var o=void 0;n.indexOf(":")>-1?(o=n.substr(0,n.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Gc);var i=this.parseChildren();e[o]=1===Object.keys(i).length?i[Gc]:new cp([],i),this.consumeOptional("//")}return e},t.prototype.peekStartsWith=function(t){return this.remaining.startsWith(t)},t.prototype.consumeOptional=function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)},t.prototype.capture=function(t){if(!this.consumeOptional(t))throw new Error('Expected "'+t+'".')},t}(),Pp=function(t){this.segmentGroup=t||null},kp=function(t){this.urlTree=t};function Tp(t){return new k(function(e){return e.error(new Pp(t))})}function Ap(t){return new k(function(e){return e.error(new kp(t))})}function Rp(t){return new k(function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '"+t+"'"))})}var Mp=function(){function t(t,e,n,r,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(qe)}return t.prototype.apply=function(){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Gc).pipe(q(function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)})).pipe(Xu(function(e){if(e instanceof kp)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof Pp)throw t.noMatchError(e);throw e}))},t.prototype.match=function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,Gc).pipe(q(function(n){return e.createUrlTree(n,t.queryParams,t.fragment)})).pipe(Xu(function(t){if(t instanceof Pp)throw e.noMatchError(t);throw t}))},t.prototype.noMatchError=function(t){return new Error("Cannot match any routes. URL Segment: '"+t.segmentGroup+"'")},t.prototype.createUrlTree=function(t,e,n){var r,o=t.segments.length>0?new cp([],((r={})[Gc]=t,r)):t;return new lp(o,e,n)},t.prototype.expandSegmentGroup=function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(q(function(t){return new cp([],t)})):this.expandSegment(t,n,e,n.segments,r,!0)},t.prototype.expandChildren=function(t,e,n){var r=this;return function(n,o){if(0===Object.keys(n).length)return Cu({});var i=[],a=[],s={};return ip(n,function(n,o){var u,l,c=(u=o,l=n,r.expandSegmentGroup(t,e,l,u)).pipe(q(function(t){return s[o]=t}));o===Gc?i.push(c):a.push(c)}),Cu.apply(null,i.concat(a)).pipe(Yu(),tl(),q(function(){return s}))}(n.children)},t.prototype.expandSegment=function(t,e,n,r,o,i){var a=this;return Cu.apply(void 0,u(n)).pipe(q(function(s){return a.expandSegmentAgainstRoute(t,e,n,s,r,o,i).pipe(Xu(function(t){if(t instanceof Pp)return Cu(null);throw t}))}),Yu(),Vu(function(t){return!!t}),Xu(function(t,n){if(t instanceof Eu||"EmptyError"===t.name){if(a.noLeftoversInUrl(e,r,o))return Cu(new cp([],{}));throw new Pp(e)}throw t}))},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.expandSegmentAgainstRoute=function(t,e,n,r,o,i,a){return zp(r)!==i?Tp(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,o,i):Tp(e)},t.prototype.expandSegmentAgainstRouteUsingRedirect=function(t,e,n,r,o,i){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,o,i)},t.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(t,e,n,r){var o=this,i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Ap(i):this.lineralizeSegments(n,i).pipe(Q(function(n){var i=new cp(n,{});return o.expandSegment(t,i,e,n,r,!1)}))},t.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(t,e,n,r,o,i){var a=this,s=Dp(e,r,o),u=s.consumedSegments,l=s.lastChild,c=s.positionalParamSegments;if(!s.matched)return Tp(e);var p=this.applyRedirectCommands(u,r.redirectTo,c);return r.redirectTo.startsWith("/")?Ap(p):this.lineralizeSegments(r,p).pipe(Q(function(r){return a.expandSegment(t,e,n,r.concat(o.slice(l)),i,!1)}))},t.prototype.matchSegmentAgainstRoute=function(t,e,n,r){var o=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(q(function(t){return n._loadedConfig=t,new cp(r,{})})):Cu(new cp(r,{}));var s=Dp(e,n,r),u=s.consumedSegments,l=s.lastChild;if(!s.matched)return Tp(e);var c=r.slice(l);return this.getChildConfig(t,n).pipe(Q(function(t){var n=t.module,r=t.routes,s=function(t,e,n,r){return n.length>0&&function(t,e,n){return r.some(function(n){return Lp(t,e,n)&&zp(n)!==Gc})}(t,n)?{segmentGroup:jp(new cp(e,function(t,e){var n,r,o={};o[Gc]=e;try{for(var i=a(t),s=i.next();!s.done;s=i.next()){var u=s.value;""===u.path&&zp(u)!==Gc&&(o[zp(u)]=new cp([],{}))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o}(r,new cp(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return r.some(function(n){return Lp(t,e,n)})}(t,n)?{segmentGroup:jp(new cp(t.segments,function(t,e,n,r){var o,s,u={};try{for(var l=a(n),c=l.next();!c.done;c=l.next()){var p=c.value;Lp(t,e,p)&&!r[zp(p)]&&(u[zp(p)]=new cp([],{}))}}catch(t){o={error:t}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}return i({},r,u)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,u,c,r),l=s.segmentGroup,p=s.slicedSegments;return 0===p.length&&l.hasChildren()?o.expandChildren(n,r,l).pipe(q(function(t){return new cp(u,t)})):0===r.length&&0===p.length?Cu(new cp(u,{})):o.expandSegment(n,l,r,p,Gc,!0).pipe(q(function(t){return new cp(u.concat(t.segments),t.children)}))}))},t.prototype.getChildConfig=function(t,e){var n=this;return e.children?Cu(new Zc(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Cu(e._loadedConfig):function(t,e){var n=e.canLoad;return n&&0!==n.length?ap(K(n).pipe(q(function(n){var r=t.get(n);return sp(r.canLoad?r.canLoad(e):r(e))}))):Cu(!0)}(t.injector,e).pipe(Q(function(r){return r?n.configLoader.load(t.injector,e).pipe(q(function(t){return e._loadedConfig=t,t})):function(t){return new k(function(e){return e.error(((n=Error("NavigationCancelingError: Cannot load children because the guard of the route \"path: '"+t.path+"'\" returned false")).ngNavigationCancelingError=!0,n));var n})}(e)})):Cu(new Zc([],t))},t.prototype.lineralizeSegments=function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Cu(n);if(r.numberOfChildren>1||!r.children[Gc])return Rp(t.redirectTo);r=r.children[Gc]}},t.prototype.applyRedirectCommands=function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)},t.prototype.applyRedirectCreatreUrlTree=function(t,e,n,r){var o=this.createSegmentGroup(t,e.root,n,r);return new lp(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)},t.prototype.createQueryParams=function(t,e){var n={};return ip(t,function(t,r){if("string"==typeof t&&t.startsWith(":")){var o=t.substring(1);n[r]=e[o]}else n[r]=t}),n},t.prototype.createSegmentGroup=function(t,e,n,r){var o=this,i=this.createSegments(t,e.segments,n,r),a={};return ip(e.children,function(e,i){a[i]=o.createSegmentGroup(t,e,n,r)}),new cp(i,a)},t.prototype.createSegments=function(t,e,n,r){var o=this;return e.map(function(e){return e.path.startsWith(":")?o.findPosParam(t,e,r):o.findOrReturn(e,n)})},t.prototype.findPosParam=function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '"+t+"'. Cannot find '"+e.path+"'.");return r},t.prototype.findOrReturn=function(t,e){var n,r,o=0;try{for(var i=a(e),s=i.next();!s.done;s=i.next()){var u=s.value;if(u.path===t.path)return e.splice(o),u;o++}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return t},t}();function Dp(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(e.matcher||Xc)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function jp(t){if(1===t.numberOfChildren&&t.children[Gc]){var e=t.children[Gc];return new cp(t.segments.concat(e.segments),e.children)}return t}function Lp(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function zp(t){return t.outlet||Gc}var Vp=function(){function t(t){this._root=t}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),t.prototype.parent=function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null},t.prototype.children=function(t){var e=Bp(t,this._root);return e?e.children.map(function(t){return t.value}):[]},t.prototype.firstChild=function(t){var e=Bp(t,this._root);return e&&e.children.length>0?e.children[0].value:null},t.prototype.siblings=function(t){var e=Fp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(function(t){return t.value}).filter(function(e){return e!==t})},t.prototype.pathFromRoot=function(t){return Fp(t,this._root).map(function(t){return t.value})},t}();function Bp(t,e){var n,r;if(t===e.value)return e;try{for(var o=a(e.children),i=o.next();!i.done;i=o.next()){var s=Bp(t,i.value);if(s)return s}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null}function Fp(t,e){var n,r;if(t===e.value)return[e];try{for(var o=a(e.children),i=o.next();!i.done;i=o.next()){var s=Fp(t,i.value);if(s.length)return s.unshift(e),s}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return[]}var Up=function(){function t(t,e){this.value=t,this.children=e}return t.prototype.toString=function(){return"TreeNode("+this.value+")"},t}();function Wp(t){var e={};return t&&t.children.forEach(function(t){return e[t.value.outlet]=t}),e}var qp=function(t){function e(e,n){var r=t.call(this,e)||this;return r.snapshot=n,Xp(r,e),r}return o(e,t),e.prototype.toString=function(){return this.snapshot.toString()},e}(Vp);function $p(t,e){var n=function(t,e){var n=new Kp([],{},{},"",{},Gc,e,null,t.root,-1,{});return new Qp("",new Up(n,[]))}(t,e),r=new xu([new pp("",{})]),o=new xu({}),i=new xu({}),a=new xu({}),s=new xu(""),u=new Hp(r,o,a,s,i,Gc,e,n.root);return u.snapshot=n.root,new qp(new Up(u,[]),n)}var Hp=function(){function t(t,e,n,r,o,i,a,s){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=o,this.outlet=i,this.component=a,this._futureSnapshot=s}return Object.defineProperty(t.prototype,"routeConfig",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=this.params.pipe(q(function(t){return Qc(t)}))),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(q(function(t){return Qc(t)}))),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},t}();function Gp(t,e){void 0===e&&(e="emptyOnly");var n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var o=n[r],a=n[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(a.component)break;r--}}return function(t){return t.reduce(function(t,e){return{params:i({},t.params,e.params),data:i({},t.data,e.data),resolve:i({},t.resolve,e._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var Kp=function(){function t(t,e,n,r,o,i,a,s,u,l,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=o,this.outlet=i,this.component=a,this.routeConfig=s,this._urlSegment=u,this._lastPathIndex=l,this._resolve=c}return Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=Qc(this.params)),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=Qc(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"Route(url:'"+this.url.map(function(t){return t.toString()}).join("/")+"', path:'"+(this.routeConfig?this.routeConfig.path:"")+"')"},t}(),Qp=function(t){function e(e,n){var r=t.call(this,n)||this;return r.url=e,Xp(r,n),r}return o(e,t),e.prototype.toString=function(){return Zp(this._root)},e}(Vp);function Xp(t,e){e.value._routerState=t,e.children.forEach(function(e){return Xp(t,e)})}function Zp(t){var e=t.children.length>0?" { "+t.children.map(Zp).join(", ")+" } ":"";return""+t.value+e}function Jp(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,np(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),np(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!np(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),np(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Yp(t,e){var n,r;return np(t.params,e.params)&&fp(n=t.url,r=e.url)&&n.every(function(t,e){return np(t.parameters,r[e].parameters)})&&!(!t.parent!=!e.parent)&&(!t.parent||Yp(t.parent,e.parent))}function tf(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ef(t,e,n,r,o){var i={};return r&&ip(r,function(t,e){i[e]=Array.isArray(t)?t.map(function(t){return""+t}):""+t}),new lp(n.root===t?e:function t(e,n,r){var o={};return ip(e.children,function(e,i){o[i]=e===n?r:t(e,n,r)}),new cp(e.segments,o)}(n.root,t,e),i,o)}var nf=function(){function t(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&tf(n[0]))throw new Error("Root segment cannot have matrix parameters");var r=n.find(function(t){return"object"==typeof t&&null!=t&&t.outlets});if(r&&r!==op(n))throw new Error("{outlets:{}} has to be the last command")}return t.prototype.toRoot=function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]},t}(),rf=function(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n};function of(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[Gc]:""+t}function af(t,e,n){if(t||(t=new cp([],{})),0===t.segments.length&&t.hasChildren())return sf(t,e,n);var r=function(t,e,n){for(var r=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};o<t.segments.length;){if(r>=n.length)return i;var a=t.segments[o],s=of(n[r]),u=r<n.length-1?n[r+1]:null;if(o>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!pf(s,u,a))return i;r+=2}else{if(!pf(s,{},a))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(t,e,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var i=new cp(t.segments.slice(0,r.pathIndex),{});return i.children[Gc]=new cp(t.segments.slice(r.pathIndex),t.children),sf(i,0,o)}return r.match&&0===o.length?new cp(t.segments,{}):r.match&&!t.hasChildren()?uf(t,e,n):r.match?sf(t,0,o):uf(t,e,n)}function sf(t,e,n){if(0===n.length)return new cp(t.segments,{});var r=function(t){var e,n;return"object"!=typeof t[0]?((e={})[Gc]=t,e):void 0===t[0].outlets?((n={})[Gc]=t,n):t[0].outlets}(n),o={};return ip(r,function(n,r){null!==n&&(o[r]=af(t.children[r],e,n))}),ip(t.children,function(t,e){void 0===r[e]&&(o[e]=t)}),new cp(t.segments,o)}function uf(t,e,n){for(var r=t.segments.slice(0,e),o=0;o<n.length;){if("object"==typeof n[o]&&void 0!==n[o].outlets){var i=lf(n[o].outlets);return new cp(r,i)}if(0===o&&tf(n[0]))r.push(new pp(t.segments[e].path,n[0])),o++;else{var a=of(n[o]),s=o<n.length-1?n[o+1]:null;a&&s&&tf(s)?(r.push(new pp(a,cf(s))),o+=2):(r.push(new pp(a,{})),o++)}}return new cp(r,{})}function lf(t){var e={};return ip(t,function(t,n){null!==t&&(e[n]=uf(new cp([],{}),0,t))}),e}function cf(t){var e={};return ip(t,function(t,n){return e[n]=""+t}),e}function pf(t,e,n){return t==n.path&&np(e,n.parameters)}var ff=function(t){this.path=t,this.route=this.path[this.path.length-1]},hf=function(t,e){this.component=t,this.route=e},df=function(){function t(t,e,n,r){this.future=t,this.curr=e,this.moduleInjector=n,this.forwardEvent=r,this.canActivateChecks=[],this.canDeactivateChecks=[]}return t.prototype.initialize=function(t){var e=this.future._root;this.setupChildRouteGuards(e,this.curr?this.curr._root:null,t,[e.value])},t.prototype.checkGuards=function(){var t=this;return this.isDeactivating()||this.isActivating()?this.runCanDeactivateChecks().pipe(Q(function(e){return e?t.runCanActivateChecks():Cu(!1)})):Cu(!0)},t.prototype.resolveData=function(t){var e=this;return this.isActivating()?K(this.canActivateChecks).pipe(Wu(function(n){return e.runResolve(n.route,t)}),function(t,e){return arguments.length>=2?function(n){return I(qu(t,e),Gu(1),Au(e))(n)}:function(e){return I(qu(function(e,n,r){return t(e,n,r+1)}),Gu(1))(e)}}(function(t,e){return t})):Cu(null)},t.prototype.isDeactivating=function(){return 0!==this.canDeactivateChecks.length},t.prototype.isActivating=function(){return 0!==this.canActivateChecks.length},t.prototype.setupChildRouteGuards=function(t,e,n,r){var o=this,i=Wp(e);t.children.forEach(function(t){o.setupRouteGuards(t,i[t.value.outlet],n,r.concat([t.value])),delete i[t.value.outlet]}),ip(i,function(t,e){return o.deactivateRouteAndItsChildren(t,n.getContext(e))})},t.prototype.setupRouteGuards=function(t,e,n,r){var o=t.value,i=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(i&&o.routeConfig===i.routeConfig){var s=this.shouldRunGuardsAndResolvers(i,o,o.routeConfig.runGuardsAndResolvers);s?this.canActivateChecks.push(new ff(r)):(o.data=i.data,o._resolvedData=i._resolvedData),this.setupChildRouteGuards(t,e,o.component?a?a.children:null:n,r),s&&this.canDeactivateChecks.push(new hf(a.outlet.component,i))}else i&&this.deactivateRouteAndItsChildren(e,a),this.canActivateChecks.push(new ff(r)),this.setupChildRouteGuards(t,null,o.component?a?a.children:null:n,r)},t.prototype.shouldRunGuardsAndResolvers=function(t,e,n){switch(n){case"always":return!0;case"paramsOrQueryParamsChange":return!Yp(t,e)||!np(t.queryParams,e.queryParams);case"paramsChange":default:return!Yp(t,e)}},t.prototype.deactivateRouteAndItsChildren=function(t,e){var n=this,r=Wp(t),o=t.value;ip(r,function(t,r){n.deactivateRouteAndItsChildren(t,o.component?e?e.children.getContext(r):null:e)}),this.canDeactivateChecks.push(new hf(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))},t.prototype.runCanDeactivateChecks=function(){var t=this;return K(this.canDeactivateChecks).pipe(Q(function(e){return t.runCanDeactivate(e.component,e.route)}),Bu(function(t){return!0===t}))},t.prototype.runCanActivateChecks=function(){var t=this;return K(this.canActivateChecks).pipe(Wu(function(e){return ap(K([t.fireChildActivationStart(e.route.parent),t.fireActivationStart(e.route),t.runCanActivateChild(e.path),t.runCanActivate(e.route)]))}),Bu(function(t){return!0===t}))},t.prototype.fireActivationStart=function(t){return null!==t&&this.forwardEvent&&this.forwardEvent(new Wc(t)),Cu(!0)},t.prototype.fireChildActivationStart=function(t){return null!==t&&this.forwardEvent&&this.forwardEvent(new Fc(t)),Cu(!0)},t.prototype.runCanActivate=function(t){var e=this,n=t.routeConfig?t.routeConfig.canActivate:null;return n&&0!==n.length?ap(K(n).pipe(q(function(n){var r=e.getToken(n,t);return sp(r.canActivate?r.canActivate(t,e.future):r(t,e.future)).pipe(Vu())}))):Cu(!0)},t.prototype.runCanActivateChild=function(t){var e=this,n=t[t.length-1];return ap(K(t.slice(0,t.length-1).reverse().map(function(t){return e.extractCanActivateChild(t)}).filter(function(t){return null!==t})).pipe(q(function(t){return ap(K(t.guards).pipe(q(function(r){var o=e.getToken(r,t.node);return sp(o.canActivateChild?o.canActivateChild(n,e.future):o(n,e.future)).pipe(Vu())})))})))},t.prototype.extractCanActivateChild=function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null},t.prototype.runCanDeactivate=function(t,e){var n=this,r=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return r&&0!==r.length?K(r).pipe(Q(function(r){var o=n.getToken(r,e);return sp(o.canDeactivate?o.canDeactivate(t,e,n.curr,n.future):o(t,e,n.curr,n.future)).pipe(Vu())})).pipe(Bu(function(t){return!0===t})):Cu(!0)},t.prototype.runResolve=function(t,e){return this.resolveNode(t._resolve,t).pipe(q(function(n){return t._resolvedData=n,t.data=i({},t.data,Gp(t,e).resolve),null}))},t.prototype.resolveNode=function(t,e){var n=this,r=Object.keys(t);if(0===r.length)return Cu({});if(1===r.length){var o=r[0];return this.getResolver(t[o],e).pipe(q(function(t){var e;return(e={})[o]=t,e}))}var i={};return K(r).pipe(Q(function(r){return n.getResolver(t[r],e).pipe(q(function(t){return i[r]=t,t}))})).pipe(tl(),q(function(){return i}))},t.prototype.getResolver=function(t,e){var n=this.getToken(t,e);return sp(n.resolve?n.resolve(e,this.future):n(e,this.future))},t.prototype.getToken=function(t,e){var n=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(n?n.module.injector:this.moduleInjector).get(t)},t}(),mf=function(){},gf=function(){function t(t,e,n,r,o,i){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=i}return t.prototype.recognize=function(){try{var t=bf(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Gc),n=new Kp([],Object.freeze({}),Object.freeze(i({},this.urlTree.queryParams)),this.urlTree.fragment,{},Gc,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Up(n,e),o=new Qp(this.url,r);return this.inheritParamsAndData(o._root),Cu(o)}catch(t){return new k(function(e){return e.error(t)})}},t.prototype.inheritParamsAndData=function(t){var e=this,n=t.value,r=Gp(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(function(t){return e.inheritParamsAndData(t)})},t.prototype.processSegmentGroup=function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)},t.prototype.processChildren=function(t,e){var n,r=this,o=hp(e,function(e,n){return r.processSegmentGroup(t,e,n)});return n={},o.forEach(function(t){var e=n[t.value.outlet];if(e){var r=e.url.map(function(t){return t.toString()}).join("/"),o=t.value.url.map(function(t){return t.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+r+"' and '"+o+"'.")}n[t.value.outlet]=t.value}),o.sort(function(t,e){return t.value.outlet===Gc?-1:e.value.outlet===Gc?1:t.value.outlet.localeCompare(e.value.outlet)}),o},t.prototype.processSegment=function(t,e,n,r){var o,i;try{for(var s=a(t),u=s.next();!u.done;u=s.next()){var l=u.value;try{return this.processSegmentAgainstRoute(l,e,n,r)}catch(t){if(!(t instanceof mf))throw t}}}catch(t){o={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}if(this.noLeftoversInUrl(e,n,r))return[];throw new mf},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.processSegmentAgainstRoute=function(t,e,n,r){if(t.redirectTo)throw new mf;if((t.outlet||Gc)!==r)throw new mf;var o,a=[],s=[];if("**"===t.path){var u=n.length>0?op(n).parameters:{};o=new Kp(n,u,Object.freeze(i({},this.urlTree.queryParams)),this.urlTree.fragment,_f(t),r,t.component,t,vf(e),yf(e)+n.length,Of(t))}else{var l=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new mf;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(e.matcher||Xc)(n,t,e);if(!r)throw new mf;var o={};ip(r.posParams,function(t,e){o[e]=t.path});var a=r.consumed.length>0?i({},o,r.consumed[r.consumed.length-1].parameters):o;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:a}}(e,t,n);a=l.consumedSegments,s=n.slice(l.lastChild),o=new Kp(a,l.parameters,Object.freeze(i({},this.urlTree.queryParams)),this.urlTree.fragment,_f(t),r,t.component,t,vf(e),yf(e)+a.length,Of(t))}var c=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),p=bf(e,a,s,c,this.relativeLinkResolution),f=p.segmentGroup,h=p.slicedSegments;if(0===h.length&&f.hasChildren()){var d=this.processChildren(c,f);return[new Up(o,d)]}if(0===c.length&&0===h.length)return[new Up(o,[])];var m=this.processSegment(c,f,h,Gc);return[new Up(o,m)]},t}();function vf(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function yf(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function bf(t,e,n,r,o){if(n.length>0&&function(t,e,n){return r.some(function(n){return wf(t,e,n)&&xf(n)!==Gc})}(t,n)){var s=new cp(e,function(t,e,n,r){var o,i,s={};s[Gc]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;try{for(var u=a(n),l=u.next();!l.done;l=u.next()){var c=l.value;if(""===c.path&&xf(c)!==Gc){var p=new cp([],{});p._sourceSegment=t,p._segmentIndexShift=e.length,s[xf(c)]=p}}}catch(t){o={error:t}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return s}(t,e,r,new cp(n,t.children)));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return r.some(function(n){return wf(t,e,n)})}(t,n)){var u=new cp(t.segments,function(t,e,n,r,o,s){var u,l,c={};try{for(var p=a(r),f=p.next();!f.done;f=p.next()){var h=f.value;if(wf(t,n,h)&&!o[xf(h)]){var d=new cp([],{});d._sourceSegment=t,d._segmentIndexShift="legacy"===s?t.segments.length:e.length,c[xf(h)]=d}}}catch(t){u={error:t}}finally{try{f&&!f.done&&(l=p.return)&&l.call(p)}finally{if(u)throw u.error}}return i({},o,c)}(t,e,n,r,t.children,o));return u._sourceSegment=t,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:n}}var l=new cp(t.segments,t.children);return l._sourceSegment=t,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:n}}function wf(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function xf(t){return t.outlet||Gc}function _f(t){return t.data||{}}function Of(t){return t.resolve||{}}var Cf=function(){},Ef=function(){function t(){}return t.prototype.shouldDetach=function(t){return!1},t.prototype.store=function(t,e){},t.prototype.shouldAttach=function(t){return!1},t.prototype.retrieve=function(t){return null},t.prototype.shouldReuseRoute=function(t,e){return t.routeConfig===e.routeConfig},t}(),Nf=new ht("ROUTES"),Sf=function(){function t(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}return t.prototype.load=function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(q(function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var o=r.create(t);return new Zc(rp(o.injector.get(Nf)).map(ep),o)}))},t.prototype.loadModuleFactory=function(t){var e=this;return"string"==typeof t?K(this.loader.load(t)):sp(t()).pipe(Q(function(t){return t instanceof $e?Cu(t):K(e.compiler.compileModuleAsync(t))}))},t}(),If=function(){},Pf=function(){function t(){}return t.prototype.shouldProcessUrl=function(t){return!0},t.prototype.extract=function(t){return t},t.prototype.merge=function(t,e){return t},t}();function kf(t){throw t}function Tf(t,e,n){return e.parse("/")}function Af(t,e){return Cu(null)}var Rf=function(){function t(t,e,n,r,o,i,a,s){var u=this;this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=s,this.navigations=new xu(null),this.navigationId=0,this.events=new rt,this.errorHandler=kf,this.malformedUriErrorHandler=Tf,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Af,afterPreactivation:Af},this.urlHandlingStrategy=new Pf,this.routeReuseStrategy=new Ef,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(qe),this.resetConfig(s),this.currentUrlTree=new lp(new cp([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.configLoader=new Sf(i,a,function(t){return u.triggerEvent(new Vc(t))},function(t){return u.triggerEvent(new Bc(t))}),this.routerState=$p(this.currentUrlTree,this.rootComponentType),this.processNavigations()}return t.prototype.resetRootComponentType=function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType},t.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},t.prototype.setUpLocationChangeListener=function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(e){var n=t.parseUrl(e.url),r="popstate"===e.type?"popstate":"hashchange",o=e.state&&e.state.navigationId?{navigationId:e.state.navigationId}:null;setTimeout(function(){t.scheduleNavigation(n,r,o,{replaceUrl:!0})},0)}))},Object.defineProperty(t.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),t.prototype.triggerEvent=function(t){this.events.next(t)},t.prototype.resetConfig=function(t){Jc(t),this.config=t.map(ep),this.navigated=!1,this.lastSuccessfulId=-1},t.prototype.ngOnDestroy=function(){this.dispose()},t.prototype.dispose=function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)},t.prototype.createUrlTree=function(t,e){void 0===e&&(e={});var n=e.relativeTo,r=e.queryParams,o=e.fragment,a=e.preserveQueryParams,s=e.queryParamsHandling,l=e.preserveFragment;fn()&&a&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var c=n||this.routerState.root,p=l?this.currentUrlTree.fragment:o,f=null;if(s)switch(s){case"merge":f=i({},this.currentUrlTree.queryParams,r);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=r||null}else f=a?this.currentUrlTree.queryParams:r||null;return null!==f&&(f=this.removeEmptyProps(f)),function(t,e,n,r,o){if(0===n.length)return ef(e.root,e.root,e,r,o);var i=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new nf(!0,0,t);var e=0,n=!1,r=t.reduce(function(t,r,o){if("object"==typeof r&&null!=r){if(r.outlets){var i={};return ip(r.outlets,function(t,e){i[e]="string"==typeof t?t.split("/"):t}),u(t,[{outlets:i}])}if(r.segmentPath)return u(t,[r.segmentPath])}return"string"!=typeof r?u(t,[r]):0===o?(r.split("/").forEach(function(r,o){0==o&&"."===r||(0==o&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):u(t,[r])},[]);return new nf(n,e,r)}(n);if(i.toRoot())return ef(e.root,new cp([],{}),e,r,o);var a=function(t,n,r){if(t.isAbsolute)return new rf(e.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new rf(r.snapshot._urlSegment,!0,0);var o=tf(t.commands[0])?0:1;return function(e,n,i){for(var a=r.snapshot._urlSegment,s=r.snapshot._lastPathIndex+o,u=t.numberOfDoubleDots;u>s;){if(u-=s,!(a=a.parent))throw new Error("Invalid number of '../'");s=a.segments.length}return new rf(a,!1,s-u)}()}(i,0,t),s=a.processChildren?sf(a.segmentGroup,a.index,i.commands):af(a.segmentGroup,a.index,i.commands);return ef(a.segmentGroup,s,e,r,o)}(c,this.currentUrlTree,t,f,p)},t.prototype.navigateByUrl=function(t,e){void 0===e&&(e={skipLocationChange:!1});var n=t instanceof lp?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)},t.prototype.navigate=function(t,e){return void 0===e&&(e={skipLocationChange:!1}),function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains "+n+" segment at index "+e)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)},t.prototype.serializeUrl=function(t){return this.urlSerializer.serialize(t)},t.prototype.parseUrl=function(t){var e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e},t.prototype.isActive=function(t,e){if(t instanceof lp)return up(this.currentUrlTree,t,e);var n=this.parseUrl(t);return up(this.currentUrlTree,n,e)},t.prototype.removeEmptyProps=function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return null!==r&&void 0!==r&&(e[n]=r),e},{})},t.prototype.processNavigations=function(){var t=this;this.navigations.pipe(Wu(function(e){return e?(t.executeScheduledNavigation(e),e.promise.catch(function(){})):Cu(null)})).subscribe(function(){})},t.prototype.scheduleNavigation=function(t,e,n,r){var o=this.navigations.value;if(o&&"imperative"!==e&&"imperative"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"hashchange"==e&&"popstate"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"popstate"==e&&"hashchange"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);var i=null,a=null,s=new Promise(function(t,e){i=t,a=e}),u=++this.navigationId;return this.navigations.next({id:u,source:e,state:n,rawUrl:t,extras:r,resolve:i,reject:a,promise:s}),s.catch(function(t){return Promise.reject(t)})},t.prototype.executeScheduledNavigation=function(t){var e=this,n=t.id,r=t.rawUrl,o=t.extras,i=t.resolve,a=t.reject,s=t.source,u=t.state,l=this.urlHandlingStrategy.extract(r),c=!this.navigated||l.toString()!==this.currentUrlTree.toString();("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(r)?("eager"!==this.urlUpdateStrategy||o.skipLocationChange||this.setBrowserUrl(r,!!o.replaceUrl,n),this.events.next(new kc(n,this.serializeUrl(l),s,u)),Promise.resolve().then(function(t){return e.runNavigate(l,r,!!o.skipLocationChange,!!o.replaceUrl,n,null)}).then(i,a)):c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)?(this.events.next(new kc(n,this.serializeUrl(l),s,u)),Promise.resolve().then(function(t){return e.runNavigate(l,r,!1,!1,n,$p(l,e.rootComponentType).snapshot)}).then(i,a)):(this.rawUrlTree=r,i(null))},t.prototype.runNavigate=function(t,e,n,r,o,i){var s=this;return o!==this.navigationId?(this.events.next(new Ac(o,this.serializeUrl(t),"Navigation ID "+o+" is not equal to the current navigation id "+this.navigationId)),Promise.resolve(!1)):new Promise(function(u,l){var c,p=(i?Cu({appliedUrl:t,snapshot:i}):new Mp(s.ngModule.injector,s.configLoader,s.urlSerializer,t,s.config).apply().pipe(Q(function(e){return function(t,e,n,r,o,i){return void 0===o&&(o="emptyOnly"),void 0===i&&(i="legacy"),new gf(t,e,n,r,o,i).recognize()}(s.rootComponentType,s.config,e,s.serializeUrl(e),s.paramsInheritanceStrategy,s.relativeLinkResolution).pipe(q(function(n){return s.events.next(new Mc(o,s.serializeUrl(t),s.serializeUrl(e),n)),{appliedUrl:e,snapshot:n}}))}))).pipe(Q(function(i){return"boolean"==typeof i?Cu(i):s.hooks.beforePreactivation(i.snapshot,{navigationId:o,appliedUrlTree:t,rawUrlTree:e,skipLocationChange:n,replaceUrl:r}).pipe(q(function(){return i}))})).pipe(q(function(t){if("boolean"==typeof t)return t;var e=t.appliedUrl,n=t.snapshot;return(c=new df(n,s.routerState.snapshot,s.ngModule.injector,function(t){return s.triggerEvent(t)})).initialize(s.rootContexts),{appliedUrl:e,snapshot:n}})).pipe(Q(function(e){if("boolean"==typeof e||s.navigationId!==o)return Cu(!1);var n=e.appliedUrl,r=e.snapshot;return s.triggerEvent(new Dc(o,s.serializeUrl(t),s.serializeUrl(n),r)),c.checkGuards().pipe(q(function(e){return s.triggerEvent(new jc(o,s.serializeUrl(t),s.serializeUrl(n),r,e)),{appliedUrl:n,snapshot:r,shouldActivate:e}}))})).pipe(Q(function(e){return"boolean"==typeof e||s.navigationId!==o?Cu(!1):e.shouldActivate&&c.isActivating()?(s.triggerEvent(new Lc(o,s.serializeUrl(t),s.serializeUrl(e.appliedUrl),e.snapshot)),c.resolveData(s.paramsInheritanceStrategy).pipe(q(function(){return s.triggerEvent(new zc(o,s.serializeUrl(t),s.serializeUrl(e.appliedUrl),e.snapshot)),e}))):Cu(e)})).pipe(Q(function(i){return"boolean"==typeof i||s.navigationId!==o?Cu(!1):s.hooks.afterPreactivation(i.snapshot,{navigationId:o,appliedUrlTree:t,rawUrlTree:e,skipLocationChange:n,replaceUrl:r}).pipe(q(function(){return i}))})).pipe(q(function(t){if("boolean"==typeof t||s.navigationId!==o)return!1;var e,n,r,i=t.appliedUrl,u=t.shouldActivate;return u?{appliedUrl:i,state:(r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){(l=r.value)._futureSnapshot=n.value;var o=function(e,n,r){return n.children.map(function(n){var o,i;try{for(var s=a(r.children),u=s.next();!u.done;u=s.next()){var l=u.value;if(e.shouldReuseRoute(l.value.snapshot,n.value))return t(e,n,l)}}catch(t){o={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return t(e,n)})}(e,n,r);return new Up(l,o)}var i=e.retrieve(n.value);if(i){var s=i.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(var r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,s),s}var u,l=new Hp(new xu((u=n.value).url),new xu(u.params),new xu(u.queryParams),new xu(u.fragment),new xu(u.data),u.outlet,u.component,u);return o=n.children.map(function(n){return t(e,n)}),new Up(l,o)}(s.routeReuseStrategy,(e=t.snapshot)._root,(n=s.routerState)?n._root:void 0),new qp(r,e)),shouldActivate:u}:{appliedUrl:i,state:null,shouldActivate:u}}));s.activateRoutes(p,s.routerState,s.currentUrlTree,o,t,e,n,r,u,l)})},t.prototype.activateRoutes=function(t,e,n,r,o,i,a,s,u,l){var c,p=this;t.forEach(function(t){if("boolean"!=typeof t&&t.shouldActivate&&r===p.navigationId&&t.state){var n=t.state;p.currentUrlTree=t.appliedUrl,p.rawUrlTree=p.urlHandlingStrategy.merge(p.currentUrlTree,i),p.routerState=n,"deferred"!==p.urlUpdateStrategy||a||p.setBrowserUrl(p.rawUrlTree,s,r),new Mf(p.routeReuseStrategy,n,e,function(t){return p.triggerEvent(t)}).activate(p.rootContexts),c=!0}else c=!1}).then(function(){c?(p.navigated=!0,p.lastSuccessfulId=r,p.events.next(new Tc(r,p.serializeUrl(o),p.serializeUrl(p.currentUrlTree))),u(!0)):(p.resetUrlToCurrentUrlTree(),p.events.next(new Ac(r,p.serializeUrl(o),"")),u(!1))},function(t){if((a=t)&&a.ngNavigationCancelingError)p.navigated=!0,p.resetStateAndUrl(e,n,i),p.events.next(new Ac(r,p.serializeUrl(o),t.message)),u(!1);else{p.resetStateAndUrl(e,n,i),p.events.next(new Rc(r,p.serializeUrl(o),t));try{u(p.errorHandler(t))}catch(t){l(t)}}var a})},t.prototype.setBrowserUrl=function(t,e,n){var r=this.urlSerializer.serialize(t);this.location.isCurrentPathEqualTo(r)||e?this.location.replaceState(r,"",{navigationId:n}):this.location.go(r,"",{navigationId:n})},t.prototype.resetStateAndUrl=function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()},t.prototype.resetUrlToCurrentUrlTree=function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})},t}(),Mf=function(){function t(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}return t.prototype.activate=function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Jp(this.futureState.root),this.activateChildRoutes(e,n,t)},t.prototype.deactivateChildRoutes=function(t,e,n){var r=this,o=Wp(e);t.children.forEach(function(t){var e=t.value.outlet;r.deactivateRoutes(t,o[e],n),delete o[e]}),ip(o,function(t,e){r.deactivateRouteAndItsChildren(t,n)})},t.prototype.deactivateRoutes=function(t,e,n){var r=t.value,o=e?e.value:null;if(r===o)if(r.component){var i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else o&&this.deactivateRouteAndItsChildren(e,n)},t.prototype.deactivateRouteAndItsChildren=function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)},t.prototype.detachAndStoreRouteSubtree=function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),o=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:o})}},t.prototype.deactivateRouteAndOutlet=function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var o=Wp(t),i=t.value.component?r.children:e;ip(o,function(t,e){return n.deactivateRouteAndItsChildren(t,i)}),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}},t.prototype.activateChildRoutes=function(t,e,n){var r=this,o=Wp(e);t.children.forEach(function(t){r.activateRoutes(t,o[t.value.outlet],n),r.forwardEvent(new qc(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Uc(t.value.snapshot))},t.prototype.activateRoutes=function(t,e,n){var r=t.value,o=e?e.value:null;if(Jp(r),r===o)if(r.component){var i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component)if(i=n.getOrCreateContext(r.outlet),this.routeReuseStrategy.shouldAttach(r.snapshot)){var a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),i.children.onOutletReAttached(a.contexts),i.attachRef=a.componentRef,i.route=a.route.value,i.outlet&&i.outlet.attach(a.componentRef,a.route.value),Df(a.route)}else{var s=function(t){for(var e=r.snapshot.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(),u=s?s.module.componentFactoryResolver:null;i.route=r,i.resolver=u,i.outlet&&i.outlet.activateWith(r,u),this.activateChildRoutes(t,null,i.children)}else this.activateChildRoutes(t,null,n)},t}();function Df(t){Jp(t.value),t.children.forEach(Df)}var jf=function(){return function(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Lf,this.attachRef=null}}(),Lf=function(){function t(){this.contexts=new Map}return t.prototype.onChildOutletCreated=function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)},t.prototype.onChildOutletDestroyed=function(t){var e=this.getContext(t);e&&(e.outlet=null)},t.prototype.onOutletDeactivated=function(){var t=this.contexts;return this.contexts=new Map,t},t.prototype.onOutletReAttached=function(t){this.contexts=t},t.prototype.getOrCreateContext=function(t){var e=this.getContext(t);return e||(e=new jf,this.contexts.set(t,e)),e},t.prototype.getContext=function(t){return this.contexts.get(t)||null},t}(),zf=function(){function t(t,e,n,r,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Xe,this.deactivateEvents=new Xe,this.name=r||Gc,t.onChildOutletCreated(this.name,this)}return t.prototype.ngOnDestroy=function(){this.parentContexts.onChildOutletDestroyed(this.name)},t.prototype.ngOnInit=function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}},Object.defineProperty(t.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRouteData",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),t.prototype.detach=function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t},t.prototype.attach=function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)},t.prototype.deactivate=function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}},t.prototype.activateWith=function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,o=new Vf(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,o),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)},t}(),Vf=function(){function t(t,e,n){this.route=t,this.childContexts=e,this.parent=n}return t.prototype.get=function(t,e){return t===Hp?this.route:t===Lf?this.childContexts:this.parent.get(t,e)},t}(),Bf=function(){},Ff=function(){function t(){}return t.prototype.preload=function(t,e){return e().pipe(Xu(function(){return Cu(null)}))},t}(),Uf=function(){function t(){}return t.prototype.preload=function(t,e){return Cu(null)},t}(),Wf=function(){function t(t,e,n,r,o){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=new Sf(e,n,function(e){return t.triggerEvent(new Vc(e))},function(e){return t.triggerEvent(new Bc(e))})}return t.prototype.setUpPreloading=function(){var t=this;this.subscription=this.router.events.pipe(Nu(function(t){return t instanceof Tc}),Wu(function(){return t.preload()})).subscribe(function(){})},t.prototype.preload=function(){var t=this.injector.get(qe);return this.processRoutes(t,this.router.config)},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.processRoutes=function(t,e){var n,r,o=[];try{for(var i=a(e),s=i.next();!s.done;s=i.next()){var u=s.value;if(u.loadChildren&&!u.canLoad&&u._loadedConfig){var l=u._loadedConfig;o.push(this.processRoutes(l.module,l.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return K(o).pipe(Y(),q(function(t){}))},t.prototype.preloadConfig=function(t,e){var n=this;return this.preloadingStrategy.preload(e,function(){return n.loader.load(t.injector,e).pipe(Q(function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)}))})},t}(),qf=function(){function t(t,e,n){void 0===n&&(n={}),this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={}}return t.prototype.init=function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()},t.prototype.createScrollEvents=function(){var t=this;return this.router.events.subscribe(function(e){e instanceof kc?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Tc&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))})},t.prototype.consumeScrollEvents=function(){var t=this;return this.router.events.subscribe(function(e){e instanceof $c&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))})},t.prototype.scheduleScrollEvent=function(t,e){this.router.triggerEvent(new $c(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))},t.prototype.ngOnDestroy=function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()},t}(),$f=new ht("ROUTER_CONFIGURATION"),Hf=new ht("ROUTER_FORROOT_GUARD"),Gf=[il,{provide:dp,useClass:mp},{provide:Rf,useFactory:th,deps:[yn,dp,Lf,il,Lt,On,Ae,Nf,$f,[If,new Pt],[Cf,new Pt]]},Lf,{provide:Hp,useFactory:eh,deps:[Rf]},{provide:On,useClass:Sn},Wf,Uf,Ff,{provide:$f,useValue:{enableTracing:!1}}];function Kf(){return new hn("Router",Rf)}var Qf=function(){function t(t,e){}return t.forRoot=function(e,n){return{ngModule:t,providers:[Gf,Yf(e),{provide:Hf,useFactory:Jf,deps:[[Rf,new Pt,new Tt]]},{provide:$f,useValue:n||{}},{provide:rl,useFactory:Zf,deps:[el,[new It(ol),new Pt],$f]},{provide:qf,useFactory:Xf,deps:[Rf,yl,$f]},{provide:Bf,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Uf},{provide:hn,multi:!0,useFactory:Kf},[nh,{provide:_e,multi:!0,useFactory:rh,deps:[nh]},{provide:ih,useFactory:oh,deps:[nh]},{provide:Pe,multi:!0,useExisting:ih}]]}},t.forChild=function(e){return{ngModule:t,providers:[Yf(e)]}},t}();function Xf(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new qf(t,e,n)}function Zf(t,e,n){return void 0===n&&(n={}),n.useHash?new sl(t,e):new ul(t,e)}function Jf(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Yf(t){return[{provide:gt,multi:!0,useValue:t},{provide:Nf,multi:!0,useValue:t}]}function th(t,e,n,r,o,i,a,s,u,l,c){void 0===u&&(u={});var p=new Rf(null,e,n,r,o,i,a,rp(s));if(l&&(p.urlHandlingStrategy=l),c&&(p.routeReuseStrategy=c),u.errorHandler&&(p.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(p.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){var f=xl();p.events.subscribe(function(t){f.logGroup("Router Event: "+t.constructor.name),f.log(t.toString()),f.log(t),f.logGroupEnd()})}return u.onSameUrlNavigation&&(p.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(p.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(p.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(p.relativeLinkResolution=u.relativeLinkResolution),p}function eh(t){return t.routerState.root}var nh=function(){function t(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new rt}return t.prototype.appInitializer=function(){var t=this;return this.injector.get(nl,Promise.resolve(null)).then(function(){var e=null,n=new Promise(function(t){return e=t}),r=t.injector.get(Rf),o=t.injector.get($f);if(t.isLegacyDisabled(o)||t.isLegacyEnabled(o))e(!0);else if("disabled"===o.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if("enabled"!==o.initialNavigation)throw new Error("Invalid initialNavigation options: '"+o.initialNavigation+"'");r.hooks.afterPreactivation=function(){return t.initNavigation?Cu(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()}return n})},t.prototype.bootstrapListener=function(t){var e=this.injector.get($f),n=this.injector.get(Wf),r=this.injector.get(qf),o=this.injector.get(Rf),i=this.injector.get(yn);t===i.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),o.resetRootComponentType(i.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())},t.prototype.isLegacyEnabled=function(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation},t.prototype.isLegacyDisabled=function(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation},t}();function rh(t){return t.appInitializer.bind(t)}function oh(t){return t.bootstrapListener.bind(t)}var ih=new ht("Router Initializer"),ah=Qr({encapsulation:2,styles:[],data:{}});function sh(t){return Ti(0,[(t()(),_o(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),li(1,212992,null,0,zf,[Lf,kn,Fe,[8,null],Tn],null,null)],function(t,e){t(e,1,0)},null)}var uh=Bo("ng-component",Hc,function(t){return Ti(0,[(t()(),_o(0,0,null,null,1,"ng-component",[],null,null,null,sh,ah)),li(1,49152,null,0,Hc,[],null,null)],null,null)},{},{},[]),lh=function(){function t(){}return t.prototype.ngOnInit=function(){},t}(),ch=Qr({encapsulation:0,styles:[['.tim-row[_ngcontent-%COMP%]{margin-bottom:20px;padding-top:50px}.presentation-page[_ngcontent-%COMP%]{overflow-x:hidden}.tim-white-buttons[_ngcontent-%COMP%]{background-color:#777}.title[_ngcontent-%COMP%]{margin-top:30px;min-height:32px}.title.text-center[_ngcontent-%COMP%]{margin-bottom:50px}.tim-typo[_ngcontent-%COMP%]{padding-left:25%;margin-bottom:40px;position:relative;width:100%}.tim-typo[_ngcontent-%COMP%]   .tim-note[_ngcontent-%COMP%]{bottom:5px;color:#c0c1c2;display:block;font-weight:400;font-size:13px;line-height:15px;left:0;margin-left:20px;position:absolute;width:260px}.tim-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}#typography[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], #typography[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], #typography[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], #typography[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], #typography[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], #typography[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:0}.switch[_ngcontent-%COMP%]{margin-right:20px}#navbar-full[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]{border-radius:0!important;margin-bottom:15px;z-index:2}.space[_ngcontent-%COMP%]{height:130px;display:block}.space-110[_ngcontent-%COMP%]{height:110px;display:block}.space-50[_ngcontent-%COMP%]{height:50px;display:block}.space-70[_ngcontent-%COMP%]{height:70px;display:block}.navigation-example[_ngcontent-%COMP%]   .img-src[_ngcontent-%COMP%]{background-attachment:scroll}.tim-container[_ngcontent-%COMP%]   .noUi-horizontal[_ngcontent-%COMP%]{margin:30px 0}.navigation-example[_ngcontent-%COMP%]{background-position:center center;background-size:cover;margin-top:0;min-height:740px}#notifications[_ngcontent-%COMP%]{background-color:#fff;display:block;width:100%;position:relative}#notifications[_ngcontent-%COMP%]   .alert-danger[_ngcontent-%COMP%]{margin-bottom:0}.tim-note[_ngcontent-%COMP%]{text-transform:capitalize}#buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:0 0 15px}.space-100[_ngcontent-%COMP%]{height:100px;display:block;width:100%}.be-social[_ngcontent-%COMP%]{padding-bottom:20px;margin:0 auto 40px}.txt-white[_ngcontent-%COMP%]{color:#fff}.txt-gray[_ngcontent-%COMP%]{color:#ddd!important}.parallax[_ngcontent-%COMP%]{width:100%;height:570px;display:block;background-attachment:fixed;background-repeat:no-repeat;background-size:cover;background-position:center center}.logo-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{overflow:hidden;border-radius:50%;border:1px solid #333;width:50px;float:left}.logo-container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{font-size:16px;line-height:18px;float:left;margin-left:10px;margin-top:7px;color:#fff;width:70px;height:40px;text-align:left}.navbar-default[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#999}.navbar-transparent[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#fff}.logo-container[_ngcontent-%COMP%]   .brand-material[_ngcontent-%COMP%]{font-size:18px;margin-top:15px;height:25px;width:auto}.logo-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.navbar-small[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#333}.fixed-section[_ngcontent-%COMP%]{top:90px;max-height:71vh;overflow:scroll;border-bottom:1px solid rgba(220,220,220,.8)}.fixed-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.fixed-section[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px;padding:2px;display:block;color:#666}.fixed-section[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#0bf}.fixed-section.float[_ngcontent-%COMP%]{position:fixed;top:100px;width:200px;margin-top:0}.parallax[_ngcontent-%COMP%]   .parallax-image[_ngcontent-%COMP%]{width:100%;overflow:hidden;position:absolute}.parallax[_ngcontent-%COMP%]   .parallax-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width:768px){.parallax[_ngcontent-%COMP%]   .parallax-image[_ngcontent-%COMP%]{width:100%;height:640px;overflow:hidden}.parallax[_ngcontent-%COMP%]   .parallax-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:auto}}.separator[_ngcontent-%COMP%]{content:"Separator";color:#fff;display:block;width:100%;padding:20px}.separator-line[_ngcontent-%COMP%]{background-color:#eee;height:1px;width:100%;display:block}.separator.separator-gray[_ngcontent-%COMP%]{background-color:#eee}.social-buttons-demo[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:10px 5px 7px 1px}.img-container[_ngcontent-%COMP%]{width:100%;overflow:hidden}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .lightbox[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.lightbox[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{overflow:hidden}.lightbox[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:0}@media screen and (min-width:991px){.lightbox[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{width:960px}}@media (max-width:991px){.fixed-section.affix[_ngcontent-%COMP%]{position:relative;margin-bottom:100px}}@media (max-width:768px){.btn[_ngcontent-%COMP%], .btn-morphing[_ngcontent-%COMP%]{margin-bottom:10px}.parallax[_ngcontent-%COMP%]   .motto[_ngcontent-%COMP%]{top:170px;margin-top:0;font-size:60px;width:270px}}.logo-container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%], .logo-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%], .presentation[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%], .presentation[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .presentation[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%]:after{transition:all .2s}#images[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:30px}#javascriptComponents[_ngcontent-%COMP%]{padding-bottom:0}#javascriptComponents[_ngcontent-%COMP%]   .btn-raised[_ngcontent-%COMP%]{margin:10px 0}.layers-container[_ngcontent-%COMP%]{display:block;margin-top:50px;position:relative}.layers-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:auto;top:0;left:0;text-align:center}.section-black[_ngcontent-%COMP%]{background-color:#333}.animate[_ngcontent-%COMP%]{transition:1.5s ease-in-out;-moz-transition:1.5s ease-in-out;-webkit-transition:1.5s ease-in-out}.navbar-transparent.navbar-small[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#fff}.navbar-default.navbar-small[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#333}.sharing-area[_ngcontent-%COMP%]{margin-top:80px}.sharing-area[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:15px 4px 0;color:#fff}.sharing-area[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;position:relative;top:2px;margin-right:5px}#navbar[_ngcontent-%COMP%]{margin-bottom:-20px}.sharing-area[_ngcontent-%COMP%]   .btn-twitter[_ngcontent-%COMP%], .sharing-area[_ngcontent-%COMP%]   .btn-twitter[_ngcontent-%COMP%]:active:focus{background-color:#55acee}.sharing-area[_ngcontent-%COMP%]   .btn-facebook[_ngcontent-%COMP%], .sharing-area[_ngcontent-%COMP%]   .btn-facebook[_ngcontent-%COMP%]:active:focus{background-color:#3b5998}.sharing-area[_ngcontent-%COMP%]   .btn-google-plus[_ngcontent-%COMP%], .sharing-area[_ngcontent-%COMP%]   .btn-google-plus[_ngcontent-%COMP%]:active:focus{background-color:#dd4b39}.sharing-area[_ngcontent-%COMP%]   .btn-github[_ngcontent-%COMP%], .sharing-area[_ngcontent-%COMP%]   .btn-github[_ngcontent-%COMP%]:active:focus{background-color:#333}.section-notifications[_ngcontent-%COMP%], .section-thin[_ngcontent-%COMP%]{padding:0}.section-navbars[_ngcontent-%COMP%]{padding-top:0}#navbar[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]{border-radius:0}.section-tabs[_ngcontent-%COMP%]{background:#eee}.section-pagination[_ngcontent-%COMP%]{padding-bottom:0}.section-download[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:50px}.section-examples[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.section-examples[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-top:30px}.components-page[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%], .tutorial-page[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]{height:400px;padding-top:100px;background-size:cover;background-position:center center}.components-page[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .tutorial-page[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff}@media (max-width:830px){.main-raised[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}}.components-page[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0}.components-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]:after{background:rgba(132,13,121,.88);background:linear-gradient(45deg,rgba(132,13,121,.88) 0,rgba(208,44,180,.31) 100%);background:-webkit-linear-gradient(135deg,rgba(132,13,121,.88) 0,rgba(208,44,180,.31) 100%)}.components-page[_ngcontent-%COMP%]   .page-header.header-filter[_ngcontent-%COMP%]:before{display:none}.components-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{position:relative;z-index:10}.components-page[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding-top:0}.components-page[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.components-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{height:100vh!important;min-height:auto!important}.section-components[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:60px;margin-bottom:5px}.section-components[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:35px}.section-components[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{height:560px;position:relative}.section-components[_ngcontent-%COMP%]   .components-macbook[_ngcontent-%COMP%]{width:auto;left:-100px;top:0;height:100%;position:absolute}.section-components[_ngcontent-%COMP%]   .coloured-card-btn-img[_ngcontent-%COMP%], .section-components[_ngcontent-%COMP%]   .coloured-card-img[_ngcontent-%COMP%], .section-components[_ngcontent-%COMP%]   .pin-btn-img[_ngcontent-%COMP%], .section-components[_ngcontent-%COMP%]   .share-btn-img[_ngcontent-%COMP%], .section-components[_ngcontent-%COMP%]   .social-img[_ngcontent-%COMP%], .section-components[_ngcontent-%COMP%]   .table-img[_ngcontent-%COMP%]{position:absolute;box-shadow:0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12),0 5px 5px -3px rgba(0,0,0,.2)}.section-components[_ngcontent-%COMP%]   .coloured-card-img[_ngcontent-%COMP%]{left:90%;top:11%;height:90px;border-radius:2px}.section-components[_ngcontent-%COMP%]   .social-img[_ngcontent-%COMP%]{left:70%;top:67%;height:40px}.section-components[_ngcontent-%COMP%]   .coloured-card-btn-img[_ngcontent-%COMP%]{left:35%;top:2%;height:125px;border-radius:6px}.section-components[_ngcontent-%COMP%]   .table-img[_ngcontent-%COMP%]{left:-13%;top:27%;height:175px;border-radius:2px}.section-components[_ngcontent-%COMP%]   .pin-btn-img[_ngcontent-%COMP%]{left:0;top:68%;height:25px;border-radius:3px}.section-components[_ngcontent-%COMP%]   .share-btn-img[_ngcontent-%COMP%]{left:3%;top:-3%;height:25px}.section-content[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]{margin-top:100px}.section-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:5px}.section-content[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] + .description[_ngcontent-%COMP%]{margin-top:0}.section-content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:35px}.section-content[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{max-width:900px;position:relative}.section-content[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .ipad-img[_ngcontent-%COMP%]{width:100%;transition:-webkit-transform .6s .9s;transition:transform .6s .9s;transition:transform .6s .9s,-webkit-transform .6s .9s;z-index:2}.section-content[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .area-img[_ngcontent-%COMP%], .section-content[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .info-img[_ngcontent-%COMP%]{position:absolute;box-shadow:0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12),0 5px 5px -3px rgba(0,0,0,.2);opacity:0;transform:translate3D(0,100px,0);-webkit-transform:translate3D(0,100px,0)}.section-content[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .area-img[_ngcontent-%COMP%]{top:10%;left:60%;height:300px;width:250px;z-index:2;transition:all 1s ease-out 0s}.section-content[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .info-img[_ngcontent-%COMP%]{top:50%;left:0;height:200px;width:300px;transition:all 1s ease-out 0s}.animated[_ngcontent-%COMP%]{transform:translate3D(0,0,0)!important;-webkit-transform:translate3D(0,0,0)!important;opacity:1!important}@-webkit-keyframes Floatingy{from,to{-webkit-transform:translate(0,0)}65%{-webkit-transform:translate(50px,0)}}@-webkit-keyframes Floatingx{from,to{-webkit-transform:translate(50px,0)}65%{-webkit-transform:translate(0,0)}}.coloured-card-btn-img[_ngcontent-%COMP%], .coloured-card-img[_ngcontent-%COMP%], .pin-btn-img[_ngcontent-%COMP%], .share-btn-img[_ngcontent-%COMP%], .social-img[_ngcontent-%COMP%], .table-img[_ngcontent-%COMP%]{-webkit-animation-iteration-count:infinite;-webkit-animation-timing-function:ease-in-out;-moz-animation-iteration-count:infinite;-moz-animation-timing-function:ease-in-out;-webkit-animation-name:Floatingy;-moz-animation-name:Floatingy;float:left}.table-img[_ngcontent-%COMP%]{-webkit-animation-duration:14s;-moz-animation-duration:14s;-webkit-animation-name:Floatingx;-moz-animation-name:Floatingx}.coloured-card-img[_ngcontent-%COMP%]{-webkit-animation-duration:10s;-moz-animation-duration:10s;-webkit-animation-name:Floatingx;-moz-animation-name:Floatingx}.coloured-card-btn-img[_ngcontent-%COMP%]{-webkit-animation-duration:18s;-moz-animation-duration:18s}.pin-btn-img[_ngcontent-%COMP%]{-webkit-animation-duration:15s;-moz-animation-duration:15s}.share-btn-img[_ngcontent-%COMP%]{-webkit-animation-duration:11s;-moz-animation-duration:11s}.social-img[_ngcontent-%COMP%]{-webkit-animation-duration:16s;-moz-animation-duration:16s;-webkit-animation-name:Floatingx;-moz-animation-name:Floatingx}.animated[_ngcontent-%COMP%]{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.animated.infinite[_ngcontent-%COMP%]{-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.animated.hinge[_ngcontent-%COMP%]{-webkit-animation-duration:2s;animation-duration:2s}.animated.bounceIn[_ngcontent-%COMP%], .animated.bounceOut[_ngcontent-%COMP%], .animated.flipOutX[_ngcontent-%COMP%], .animated.flipOutY[_ngcontent-%COMP%]{-webkit-animation-duration:.75s;animation-duration:.75s}@-webkit-keyframes bounce{20%,53%,80%,from,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}40%,43%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-30px,0);transform:translate3d(0,-30px,0)}70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-15px,0);transform:translate3d(0,-15px,0)}90%{-webkit-transform:translate3d(0,-4px,0);transform:translate3d(0,-4px,0)}}@keyframes bounce{20%,53%,80%,from,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}40%,43%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-30px,0);transform:translate3d(0,-30px,0)}70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-15px,0);transform:translate3d(0,-15px,0)}90%{-webkit-transform:translate3d(0,-4px,0);transform:translate3d(0,-4px,0)}}.bounce[_ngcontent-%COMP%]{-webkit-animation-name:bounce;animation-name:bounce;-webkit-transform-origin:center bottom;transform-origin:center bottom}@-webkit-keyframes flash{50%,from,to{opacity:1}25%,75%{opacity:0}}@keyframes flash{50%,from,to{opacity:1}25%,75%{opacity:0}}.flash[_ngcontent-%COMP%]{-webkit-animation-name:flash;animation-name:flash}']],data:{}});function ph(t){return Ti(0,[(t()(),_o(0,0,null,null,31,"nav",[["class","navbar navbar-transparent navbar-color-on-scroll fixed-top navbar-expand-lg"],["color-on-scroll","100"],["id","sectionsNav"]],null,null,null,null,null)),(t()(),_o(1,0,null,null,30,"div",[["class","container"]],null,null,null,null,null)),(t()(),_o(2,0,null,null,8,"div",[["class","navbar-translate"]],null,null,null,null,null)),(t()(),_o(3,0,null,null,1,"a",[["class","navbar-brand"],["href","/"]],null,null,null,null,null)),(t()(),Ii(-1,null,[" Alberto Casta\xf1o "])),(t()(),_o(5,0,null,null,5,"button",[["aria-expanded","false"],["aria-label","Toggle navigation"],["class","navbar-toggler"],["data-toggle","collapse"],["type","button"]],null,null,null,null,null)),(t()(),_o(6,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(t()(),Ii(-1,null,["Toggle navigation"])),(t()(),_o(8,0,null,null,0,"span",[["class","navbar-toggler-icon"]],null,null,null,null,null)),(t()(),_o(9,0,null,null,0,"span",[["class","navbar-toggler-icon"]],null,null,null,null,null)),(t()(),_o(10,0,null,null,0,"span",[["class","navbar-toggler-icon"]],null,null,null,null,null)),(t()(),_o(11,0,null,null,20,"div",[["class","collapse navbar-collapse"]],null,null,null,null,null)),(t()(),_o(12,0,null,null,19,"ul",[["class","navbar-nav ml-auto"]],null,null,null,null,null)),(t()(),_o(13,0,null,null,9,"li",[["class","dropdown nav-item"]],null,null,null,null,null)),(t()(),_o(14,0,null,null,3,"a",[["class","dropdown-toggle nav-link"],["data-toggle","dropdown"],["href","#"]],null,null,null,null,null)),(t()(),_o(15,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),Ii(-1,null,["apps"])),(t()(),Ii(-1,null,[" Examples "])),(t()(),_o(18,0,null,null,4,"div",[["class","dropdown-menu dropdown-with-icons"]],null,null,null,null,null)),(t()(),_o(19,0,null,null,3,"a",[["class","dropdown-item"],["href","/cervantes"]],null,null,null,null,null)),(t()(),_o(20,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),Ii(-1,null,["short_text"])),(t()(),Ii(-1,null,[" Cervantes "])),(t()(),_o(23,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(t()(),_o(24,0,null,null,1,"a",[["class","nav-link"],["data-original-title","Follow us on Twitter"],["data-placement","bottom"],["href","https://www.linkedin.com/in/alberto-casta%C3%B1o-4aa710b6/"],["rel","tooltip"],["target","_blank"],["title",""]],null,null,null,null,null)),(t()(),_o(25,0,null,null,0,"i",[["class","fa fa-linkedin"]],null,null,null,null,null)),(t()(),_o(26,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(t()(),_o(27,0,null,null,1,"a",[["class","nav-link"],["data-original-title","Like us on Facebook"],["data-placement","bottom"],["href","https://github.com/bertocast"],["rel","tooltip"],["target","_blank"],["title",""]],null,null,null,null,null)),(t()(),_o(28,0,null,null,0,"i",[["class","fa fa-github"]],null,null,null,null,null)),(t()(),_o(29,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(t()(),_o(30,0,null,null,1,"a",[["class","nav-link"],["data-original-title","Follow us on Instagram"],["data-placement","bottom"],["href","https://medium.com/@bertocast"],["rel","tooltip"],["target","_blank"],["title",""]],null,null,null,null,null)),(t()(),_o(31,0,null,null,0,"i",[["class","fa fa-medium"]],null,null,null,null,null)),(t()(),_o(32,0,null,null,8,"div",[["class","page-header header-filter"],["data-parallax","true"],["style","background-image: url('../../assets/img/profile_city.jpg')"]],null,null,null,null,null)),(t()(),_o(33,0,null,null,7,"div",[["class","container"]],null,null,null,null,null)),(t()(),_o(34,0,null,null,6,"div",[["class","row"]],null,null,null,null,null)),(t()(),_o(35,0,null,null,5,"div",[["class","col-md-6"]],null,null,null,null,null)),(t()(),_o(36,0,null,null,1,"h1",[["class","title"]],null,null,null,null,null)),(t()(),Ii(-1,null,["Discover the power of deep learning"])),(t()(),_o(38,0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),Ii(-1,null,["Go through some examples of what deep learning is able to do. From generating new text from scratch to classifying images."])),(t()(),_o(40,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),_o(41,0,null,null,78,"div",[["class","main main-raised"]],null,null,null,null,null)),(t()(),_o(42,0,null,null,77,"div",[["class","container"]],null,null,null,null,null)),(t()(),_o(43,0,null,null,35,"div",[["class","section text-center"]],null,null,null,null,null)),(t()(),_o(44,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(t()(),_o(45,0,null,null,4,"div",[["class","col-md-8 ml-auto mr-auto"]],null,null,null,null,null)),(t()(),_o(46,0,null,null,1,"h2",[["class","title"]],null,null,null,null,null)),(t()(),Ii(-1,null,["Neural Networks"])),(t()(),_o(48,0,null,null,1,"h5",[["class","description"]],null,null,null,null,null)),(t()(),Ii(-1,null,["This is the paragraph where I should write more details about deep learning and neural networks, keep my audience engaged by providing meaningful information. By this time, the user is curious, otherwise he wouldn't scroll to get here."])),(t()(),_o(50,0,null,null,28,"div",[["class","features"]],null,null,null,null,null)),(t()(),_o(51,0,null,null,27,"div",[["class","row"]],null,null,null,null,null)),(t()(),_o(52,0,null,null,8,"div",[["class","col-md-4"]],null,null,null,null,null)),(t()(),_o(53,0,null,null,7,"div",[["class","info"]],null,null,null,null,null)),(t()(),_o(54,0,null,null,2,"div",[["class","icon icon-info"]],null,null,null,null,null)),(t()(),_o(55,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),Ii(-1,null,["chat"])),(t()(),_o(57,0,null,null,1,"h4",[["class","info-title"]],null,null,null,null,null)),(t()(),Ii(-1,null,["Text"])),(t()(),_o(59,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Ii(-1,null,["A well trained AI can write the second part of Don Quijote!"])),(t()(),_o(61,0,null,null,8,"div",[["class","col-md-4"]],null,null,null,null,null)),(t()(),_o(62,0,null,null,7,"div",[["class","info"]],null,null,null,null,null)),(t()(),_o(63,0,null,null,2,"div",[["class","icon icon-success"]],null,null,null,null,null)),(t()(),_o(64,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),Ii(-1,null,["camera"])),(t()(),_o(66,0,null,null,1,"h4",[["class","info-title"]],null,null,null,null,null)),(t()(),Ii(-1,null,["Images"])),(t()(),_o(68,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Ii(-1,null,["Convolution neural networks can outperform humans in image related tasks."])),(t()(),_o(70,0,null,null,8,"div",[["class","col-md-4"]],null,null,null,null,null)),(t()(),_o(71,0,null,null,7,"div",[["class","info"]],null,null,null,null,null)),(t()(),_o(72,0,null,null,2,"div",[["class","icon icon-danger"]],null,null,null,null,null)),(t()(),_o(73,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(t()(),Ii(-1,null,["volume_up"])),(t()(),_o(75,0,null,null,1,"h4",[["class","info-title"]],null,null,null,null,null)),(t()(),Ii(-1,null,["Speech"])),(t()(),_o(77,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Ii(-1,null,["Have you heard about Google Assistant?"])),(t()(),_o(79,0,null,null,13,"div",[["class","section text-center"]],null,null,null,null,null)),(t()(),_o(80,0,null,null,1,"h2",[["class","title"]],null,null,null,null,null)),(t()(),Ii(-1,null,["Who am I?"])),(t()(),_o(82,0,null,null,10,"div",[["class","card card-plain"]],null,null,null,null,null)),(t()(),_o(83,0,null,null,1,"div",[["class","col-md-6 ml-auto mr-auto"]],null,null,null,null,null)),(t()(),_o(84,0,null,null,0,"img",[["alt","Thumbnail Image"],["class","img-raised rounded-circle img-fluid"],["src","../../assets/img/faces/0.jpg"]],null,null,null,null,null)),(t()(),_o(85,0,null,null,4,"h4",[["class","card-title"]],null,null,null,null,null)),(t()(),Ii(-1,null,["Alberto Casta\xf1o "])),(t()(),_o(87,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),_o(88,0,null,null,1,"small",[["class","card-description text-muted"]],null,null,null,null,null)),(t()(),Ii(-1,null,["Model"])),(t()(),_o(90,0,null,null,2,"div",[["class","card-body"]],null,null,null,null,null)),(t()(),_o(91,0,null,null,1,"p",[["class","card-description"]],null,null,null,null,null)),(t()(),Ii(-1,null,["I'm a deep learning enthusiastic..."])),(t()(),_o(93,0,null,null,26,"div",[["class","section section-contacts"]],null,null,null,null,null)),(t()(),_o(94,0,null,null,25,"div",[["class","row"]],null,null,null,null,null)),(t()(),_o(95,0,null,null,24,"div",[["class","col-md-8 ml-auto mr-auto"]],null,null,null,null,null)),(t()(),_o(96,0,null,null,1,"h2",[["class","text-center title"]],null,null,null,null,null)),(t()(),Ii(-1,null,["Contact me"])),(t()(),_o(98,0,null,null,1,"h4",[["class","text-center description"]],null,null,null,null,null)),(t()(),Ii(-1,null,["I will get back to you in a couple of hours."])),(t()(),_o(100,0,null,null,19,"form",[["class","contact-form"]],null,null,null,null,null)),(t()(),_o(101,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(t()(),_o(102,0,null,null,4,"div",[["class","col-md-6"]],null,null,null,null,null)),(t()(),_o(103,0,null,null,3,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),_o(104,0,null,null,1,"label",[["class","bmd-label-floating"]],null,null,null,null,null)),(t()(),Ii(-1,null,["Your Name"])),(t()(),_o(106,0,null,null,0,"input",[["class","form-control"],["type","email"]],null,null,null,null,null)),(t()(),_o(107,0,null,null,4,"div",[["class","col-md-6"]],null,null,null,null,null)),(t()(),_o(108,0,null,null,3,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),_o(109,0,null,null,1,"label",[["class","bmd-label-floating"]],null,null,null,null,null)),(t()(),Ii(-1,null,["Your Email"])),(t()(),_o(111,0,null,null,0,"input",[["class","form-control"],["type","email"]],null,null,null,null,null)),(t()(),_o(112,0,null,null,3,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),_o(113,0,null,null,1,"label",[["class","bmd-label-floating"],["for","exampleMessage"]],null,null,null,null,null)),(t()(),Ii(-1,null,["Your Message"])),(t()(),_o(115,0,null,null,0,"textarea",[["class","form-control"],["id","exampleMessage"],["rows","4"],["type","email"]],null,null,null,null,null)),(t()(),_o(116,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(t()(),_o(117,0,null,null,2,"div",[["class","col-md-4 ml-auto mr-auto text-center"]],null,null,null,null,null)),(t()(),_o(118,0,null,null,1,"button",[["class","btn btn-primary btn-raised"]],null,null,null,null,null)),(t()(),Ii(-1,null,[" Send Message "])),(t()(),_o(120,0,null,null,17,"footer",[["class","footer footer-default"]],null,null,null,null,null)),(t()(),_o(121,0,null,null,16,"div",[["class","container"]],null,null,null,null,null)),(t()(),_o(122,0,null,null,13,"nav",[["class","float-left"]],null,null,null,null,null)),(t()(),_o(123,0,null,null,12,"ul",[],null,null,null,null,null)),(t()(),_o(124,0,null,null,2,"li",[],null,null,null,null,null)),(t()(),_o(125,0,null,null,1,"a",[["href","/"]],null,null,null,null,null)),(t()(),Ii(-1,null,[" Alberto Casta\xf1o "])),(t()(),_o(127,0,null,null,2,"li",[],null,null,null,null,null)),(t()(),_o(128,0,null,null,1,"a",[["href","/"]],null,null,null,null,null)),(t()(),Ii(-1,null,[" About Me "])),(t()(),_o(130,0,null,null,2,"li",[],null,null,null,null,null)),(t()(),_o(131,0,null,null,1,"a",[["href",""]],null,null,null,null,null)),(t()(),Ii(-1,null,[" Blog "])),(t()(),_o(133,0,null,null,2,"li",[],null,null,null,null,null)),(t()(),_o(134,0,null,null,1,"a",[["href",""]],null,null,null,null,null)),(t()(),Ii(-1,null,[" Licenses "])),(t()(),_o(136,0,null,null,1,"div",[["class","copyright float-right"]],null,null,null,null,null)),(t()(),Ii(-1,null,[" \xa9 2018 "]))],null,null)}var fh=Bo("app-home",lh,function(t){return Ti(0,[(t()(),_o(0,0,null,null,1,"app-home",[],null,null,null,ph,ch)),li(1,114688,null,0,lh,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),hh=n("Re/O"),dh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function mh(t,e){function n(){this.constructor=t}dh(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var gh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function vh(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function yh(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var bh=1e-7;function wh(){return bh}var xh=0;function _h(){return xh++}var Oh={};function Ch(t){return void 0===t&&(t=""),t in Oh||(Oh[t]=0),Oh[t]+=1,t+Oh[t].toString()}var Eh={float32:{},int32:{}},Nh="float32";function Sh(t,e){return void 0===e&&(e=Nh),null==Eh[e][t]&&(Eh[e][t]=Object(hh.nb)(t,e),Object(hh.Z)(Eh[e][t])),Eh[e][t]}var Ih=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return mh(e,t),e}(Error),Ph=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return mh(e,t),e}(Error),kh=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return mh(e,t),e}(Error),Th=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return mh(e,t),e}(Error),Ah=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return mh(e,t),e}(Error);function Rh(t,e){if(Array.isArray(t)){for(var n=[],r=0;r<e;r++)n=n.concat(t);return n}return(n=new Array(e)).fill(t),n}function Mh(t,e){if(!t)throw new Ah(e)}function Dh(t,e){for(var n=0,r=0,o=t;r<o.length;r++)o[r]===e&&n++;return n}function jh(t){return 1===t.length?t[0]:t}function Lh(t){return Array.isArray(t)?t:[t]}function zh(t){var e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==e[0]?e:"private"+e}function Vh(t){return t.length<=1?t:-1===t.indexOf("_")?t:t.replace(/[_]+(\w|$)/g,function(t,e){return e.toUpperCase()})}!function(t){mh(function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r},t)}(Error);var Bh={};function Fh(t){return null===t||void 0===t?null:{className:t.getClassName(),config:t.getConfig()}}function Uh(t,e,n,r){if(void 0===e&&(e={}),void 0===n&&(n={}),void 0===r&&(r="object"),"string"==typeof t){var o=void 0;if(t in n)o=n[t];else if(t in Bh)o=Bh[t];else if(null==(o=e[t]))throw new kh("Unknown "+r+": "+t);return o}var i=t;if(null==i.className||null==i.config)throw new kh(r+": Improper config format: "+JSON.stringify(i)+".\n'className' and 'config' must set.");var a,s,u,l=i.className,c=void 0,p=void 0;if(l in n?(c=(a=n.get(l))[0],p=a[1]):l in Bh?(c=(s=Bh.className)[0],p=s[1]):l in e&&(c=(u=e[l])[0],p=u[1]),null==c)throw new kh("Unknown "+r+": "+l);if(null!=p){for(var f={},h=0,d=Object.keys(Bh);h<d.length;h++)f[w=d[h]]=Bh[w];for(var m=0,g=Object.keys(n);m<g.length;m++)f[w=g[m]]=n[w];i.config.customObjects=f;for(var v=gh({},Bh),y=0,b=Object.keys(n);y<b.length;y++){var w=b[y];Bh[w]=n[w]}var x=p(c,i.config);return Bh=gh({},v),x}v=gh({},Bh);for(var _=0,O=Object.keys(n);_<O.length;_++)Bh[w=O[_]]=n[w];return x=new c(i.config),Bh=gh({},v),x}function Wh(t,e){return-1*function(t,e){return t<e?-1:t>e?1:0}(t,e)}function qh(t){if(null==t)return t;for(var e=[],n=0,r=t;n<r.length;n++){var o=r[n];-1===e.indexOf(o)&&e.push(o)}return e}function $h(t){if(null==t)throw new kh("Invalid value in obj: "+JSON.stringify(t));for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function Hh(t,e,n){if(null!=n&&t.indexOf(n)<0)throw new kh(n+" is not a valid "+e+".  Valid values are "+t+" or null/undefined.")}function Gh(t,e,n,r){return void 0===n&&(n=0),void 0===r&&(r=1/0),Mh(n>=0),Mh(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(function(t){return typeof t===e})}function Kh(t,e){return Object(hh.Qb)(function(){return Object(hh.Db)(Object(hh.Lb)(Object(hh.Wa)(t,t),e,!0))})}var Qh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.getConfig=function(){return{}},e}(hh.qb.Serializable),Xh=function(t){function e(e){var n=t.call(this)||this;return n.defaultMaxValue=2,n.defaultAxis=0,n.maxValue=null!=e.maxValue?e.maxValue:n.defaultMaxValue,n.axis=null!=e.axis?e.axis:n.defaultAxis,n}return mh(e,t),e.prototype.apply=function(t){var e=this;return Object(hh.Qb)(function(){var n=Kh(t,e.axis),r=Object(hh.w)(n,0,e.maxValue);return Object(hh.Va)(t,Object(hh.J)(r,Object(hh.f)(Sh(wh()),n)))})},e.prototype.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},e.className="MaxNorm",e}(Qh);hh.qb.SerializationMap.register(Xh);var Zh=function(t){function e(e){var n=t.call(this)||this;return n.defaultAxis=0,n.axis=null!=e.axis?e.axis:n.defaultAxis,n}return mh(e,t),e.prototype.apply=function(t){var e=this;return Object(hh.Qb)(function(){return Object(hh.J)(t,Object(hh.f)(Sh(wh()),Kh(t,e.axis)))})},e.prototype.getConfig=function(){return{axis:this.axis}},e.className="UnitNorm",e}(Qh);hh.qb.SerializationMap.register(Zh);var Jh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.apply=function(t){return Object(hh.jb)(t)},e.className="NonNeg",e}(Qh);hh.qb.SerializationMap.register(Jh);var Yh=function(t){function e(e){var n=t.call(this)||this;return n.defaultMinValue=0,n.defaultMaxValue=1,n.defaultRate=1,n.defaultAxis=0,n.minValue=null!=e.minValue?e.minValue:n.defaultMinValue,n.maxValue=null!=e.maxValue?e.maxValue:n.defaultMaxValue,n.rate=null!=e.rate?e.rate:n.defaultRate,n.axis=null!=e.axis?e.axis:n.defaultAxis,n}return mh(e,t),e.prototype.apply=function(t){var e=this;return Object(hh.Qb)(function(){var n=Kh(t,e.axis),r=Object(hh.f)(Object(hh.Va)(Sh(e.rate),Object(hh.w)(n,e.minValue,e.maxValue)),Object(hh.Va)(Sh(1-e.rate),n));return Object(hh.Va)(t,Object(hh.J)(r,Object(hh.f)(Sh(wh()),n)))})},e.prototype.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},e.className="MinMaxNorm",e}(Qh);hh.qb.SerializationMap.register(Yh);var td={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function ed(t){return Fh(t)}function nd(t,e){return void 0===e&&(e={}),Uh(t,hh.qb.SerializationMap.getMap().classNameMap,e,"constraint")}function rd(t){return null==t?null:"string"==typeof t?nd({className:t in td?td[t]:t,config:{}}):t instanceof Qh?t:nd(t)}Object.freeze({maxNorm:function(t){return new Xh(t)},unitNorm:function(t){return new Zh(t)},nonNeg:function(){return new Jh},minMaxNorm:function(t){return new Yh(t)}});var od=new Map,id=["channelsFirst","channelsLast"];function ad(t){Hh(id,"DataFormat",t)}var sd=["valid","same","causal"];function ud(t){Hh(sd,"PaddingMode",t)}var ld=["max","avg"],cd=[],pd="/";function fd(t,e){cd.push(t);try{var n=e();return cd.pop(),n}catch(t){throw cd.pop(),t}}function hd(t){if(!gd(t))throw new Error("Not a valid tensor name: '"+t+"'");return(0===cd.length?"":cd.join(pd)+pd)+t}function dd(t){if(!gd(t))throw new Error("Not a valid tensor name: '"+t+"'");od.has(t)||od.set(t,0);var e=od.get(t);if(od.set(t,od.get(t)+1),e>0){var n=t+"_"+e;return od.set(n,1),n}return t}var md=new RegExp(/^[A-Za-z][A-Za-z0-9\._\/]*$/);function gd(t){return!!t.match(md)}function vd(t){return t===parseInt(t.toString(),10)}function yd(t,e,n){null==e&&(e=0),null==n&&(n=t.length);for(var r=1,o=e;o<n;++o)r*=t[o];return r}function bd(t){return t=Array.isArray(t)?new Float32Array(t):t,Object(hh.Pb)(t)}function wd(t){return Object(hh.Qa)(bd(t)).dataSync()[0]}function xd(t){return Object(hh.Ma)(bd(t)).dataSync()[0]}function _d(t,e){if(e<t)throw new kh("end ("+e+") < begin ("+t+") is forbidden.");for(var n=[],r=t;r<e;++r)n.push(r);return n}function Od(t,e){return t.asType(e)}function Cd(t,e){void 0===e&&(e=-1);var n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),t.reshape(n)}function Ed(t,e,n){return Object(hh.Qb)(function(){switch(t.rank){case 1:return Object(hh.wb)(t,e,n);case 2:return Object(hh.xb)(t,[e,0],[n,t.shape[1]]);case 3:return Object(hh.yb)(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Object(hh.zb)(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);default:throw new kh("sliceAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}})}function Nd(t,e,n){return Object(hh.Qb)(function(){switch(t.rank){case 1:return Object(hh.wb)(t,e,n);case 2:return Object(hh.xb)(t,[0,e],[t.shape[0],n]);case 3:return Object(hh.yb)(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Object(hh.zb)(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new kh("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function Sd(t,e,n,r){return Object(hh.Qb)(function(){switch(t.rank){case 1:return Object(hh.wb)(t,e,n);case 2:switch(r){case 1:return Ed(t,e,n);case 2:return Nd(t,e,n);default:throw new kh("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return Ed(t,e,n);case 2:return Object(hh.yb)(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return Nd(t,e,n);default:throw new kh("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return Ed(t,e,n);case 2:return Object(hh.zb)(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Object(hh.zb)(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return Nd(t,e,n);default:throw new kh("The axis is not within the rank of the tensor "+r)}default:throw new kh("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function Id(t,e){var n;return void 0===e&&(e=-1),e<0&&(e=0!==(n=t[0].rank)?n:0),e===t[0].rank&&(e=-1),Object(hh.x)(t,e)}function Pd(t,e){switch(t.rank){case 1:return Object(hh.y)([t,e]);case 2:return Object(hh.z)([t,e],0);case 3:return Object(hh.A)([t,e],0);case 4:return Object(hh.B)([t,e],0);default:throw new kh("concatAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}}function kd(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new kh("The length of input n ("+e.length+") does not match the number of dimensions in input x ("+t.rank+")");return Object(hh.Rb)(t,e)}function Td(t,e,n,r,o){return void 0===e&&(e=0),void 0===n&&(n=1),Object(hh.fb)(t,e,n,r,o)}function Ad(t,e){if(2!==e.rank)throw new Th("dot support for y other than rank 2 is not yet implemented: y shape = "+e.shape);if(2===t.rank)return Object(hh.La)(t,e);if(3===t.rank){var n=t.shape[0],r=t.shape[1];return t=t.reshape([n*r,t.shape[2]]),Object(hh.La)(t,e).reshape([n,r,e.shape[1]])}throw new Th("dot support for x of rank "+t.rank+" is not yet implemented: x shape = "+t.shape)}function Rd(t,e,n){return Object(hh.Qb)(function(){return e=Array.isArray(e)?Object(hh.Pb)(e,"int32"):e.toInt(),Object(hh.U)(t,e,n)})}function Md(t){return Object(hh.Wa)(t,t)}function Dd(t,e,n){return Object(hh.Qb)(function(){if(null==n&&(n="channelsLast"),ad(n),1!==e.rank&&e.rank!==t.rank)throw new kh("Unexpected bias dimensions: "+e.rank+"; expected it to be 1 or "+t.rank);var r,o=e.shape;if(5===t.rank)"channelsFirst"===n?r=t.add(e.reshape(1===o.length?[1,o[0],1,1,1]:[1,o[3],o[0],o[1],o[2]])):"channelsLast"===n&&(r=t.add(e.reshape(1===o.length?[1,1,1,1,o[0]]:[1].concat(o))));else if(4===t.rank)"channelsFirst"===n?r=t.add(e.reshape(1===o.length?[1,o[0],1,1]:[1,o[2],o[0],o[1]])):"channelsLast"===n&&(r=t.add(e.reshape(1===o.length?[1,1,1,o[0]]:[1].concat(o))));else if(3===t.rank)"channelsFirst"===n?r=t.add(e.reshape(1===o.length?[1,o[0],1]:[1,o[1],o[0]])):"channelsLast"===n&&(r=t.add(e.reshape(1===o.length?[1,1,o[0]]:[1].concat(o))));else{if(!(t.rank<3))throw new kh("Unsupported input rank by biasAdd: "+t.rank);r=t.add(e)}return r})}function jd(t,e,n,r){return Object(hh.Qb)(function(){if(null!=n&&!hh.Wb.arraysEqual(t.shape,n))throw new Th("Non-default noise shape is not implemented yet: "+JSON.stringify(n));if(null!=r)throw new Th("seed is not implemented for dropout yet.");var o=Object(hh.Ib)(Object(hh.f)(Object(hh.Xa)(e),Object(hh.gb)(t.shape,0,1,"float32")));return o=Object(hh.Va)(Object(hh.J)(Sh(1),Object(hh.Kb)(Sh(1),e)),o),Object(hh.Va)(t,o)})}function Ld(t,e,n){return void 0===n&&(n=!1),n?t():e()}var zd=["fanIn","fanOut","fanAvg"],Vd=["normal","uniform"],Bd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.fromConfigUsesCustomObjects=function(){return!1},e.prototype.getConfig=function(){return{}},e}(hh.qb.Serializable),Fd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.apply=function(t,e){return Object(hh.ac)(t,e)},e.className="Zeros",e}(Bd);hh.qb.SerializationMap.register(Fd);var Ud=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.apply=function(t,e){return Object(hh.bb)(t,e)},e.className="Ones",e}(Bd);hh.qb.SerializationMap.register(Ud);var Wd=function(t){function e(e){var n=t.call(this)||this;if("object"!=typeof e)throw new kh("Expected argument of type ConstantConfig but got "+e);if(void 0===e.value)throw new kh("config must have value set but got "+e);return n.value=e.value,n}return mh(e,t),e.prototype.apply=function(t,e){var n=this;return Object(hh.Qb)(function(){return Object(hh.Va)(Object(hh.nb)(n.value),Object(hh.bb)(t,e))})},e.prototype.getConfig=function(){return{value:this.value}},e.className="Constant",e}(Bd);hh.qb.SerializationMap.register(Wd);var qd=function(t){function e(e){var n=t.call(this)||this;return n.DEFAULT_MINVAL=-.05,n.DEFAULT_MAXVAL=.05,n.minval=e.minval||n.DEFAULT_MINVAL,n.maxval=e.maxval||n.DEFAULT_MAXVAL,n.seed=e.seed,n}return mh(e,t),e.prototype.apply=function(t,e){return Object(hh.gb)(t,this.minval,this.maxval,e)},e.prototype.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},e.className="RandomUniform",e}(Bd);hh.qb.SerializationMap.register(qd);var $d=function(t){function e(e){var n=t.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=e.mean||n.DEFAULT_MEAN,n.stddev=e.stddev||n.DEFAULT_STDDEV,n.seed=e.seed,n}return mh(e,t),e.prototype.apply=function(t,e){if("bool"===e)throw new Th("randomNormal does not support dType bool.");return Td(t,this.mean,this.stddev,e,this.seed)},e.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},e.className="RandomNormal",e}(Bd);hh.qb.SerializationMap.register($d);var Hd=function(t){function e(e){var n=t.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=e.mean||n.DEFAULT_MEAN,n.stddev=e.stddev||n.DEFAULT_STDDEV,n.seed=e.seed,n}return mh(e,t),e.prototype.apply=function(t,e){if("bool"===e)throw new Th("truncatedNormal does not support dType bool.");return Object(hh.Ub)(t,this.mean,this.stddev,e,this.seed)},e.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},e.className="TruncatedNormal",e}(Bd);hh.qb.SerializationMap.register(Hd);var Gd=function(t){function e(e){var n=t.call(this)||this;return n.gain=null!=e.gain?Object(hh.nb)(e.gain):Sh(1),n}return mh(e,t),e.prototype.apply=function(t,e){var n=this;return Object(hh.Qb)(function(){if(2!==t.length||t[0]!==t[1])throw new kh("Identity matrix initializer can only be used for 2D square matrices.");return Object(hh.Va)(n.gain,Object(hh.Q)(t[0]))})},e.prototype.getConfig=function(){return{gain:this.gain.get()}},e.className="Identity",e}(Bd);hh.qb.SerializationMap.register(Gd);var Kd=function(t){function e(e){var n=t.call(this)||this;if(e.scale<0)throw new kh("scale must be a positive float. Got: "+e.scale);return n.scale=null==e.scale?1:e.scale,n.mode=e.mode,Hh(zd,"FanMode",n.mode),n.distribution=e.distribution,Hh(Vd,"Distribution",n.distribution),n.seed=e.seed,n}return mh(e,t),e.prototype.apply=function(t,e){var n=function(t,e){var n,r;if(void 0===e&&(e="channelsLast"),ad(e),2===t.length)n=t[0],r=t[1];else if(-1!==[3,4,5].indexOf(t.length))if("channelsFirst"===e){var o=yd(t,2);n=t[1]*o,r=t[0]*o}else"channelsLast"===e&&(o=yd(t,0,t.length-2),n=t[t.length-2]*o,r=t[t.length-1]*o);else{var i=yd(t);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}(t),r=n[0],o=n[1],i=this.scale;if(i/="fanIn"===this.mode?Math.max(1,r):"fanOut"===this.mode?Math.max(1,o):Math.max(1,(r+o)/2),"normal"===this.distribution){var a=Math.sqrt(i);if("bool"===e)throw new Th(this.getClassName()+" does not support dType bool.");return Object(hh.Ub)(t,0,a,e,this.seed)}var s=Math.sqrt(3*i);return Object(hh.gb)(t,-s,s,e)},e.prototype.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},e.className="VarianceScaling",e}(Bd);hh.qb.SerializationMap.register(Kd);var Qd=function(t){function e(e){return t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})||this}return mh(e,t),e.prototype.getClassName=function(){return Kd.className},e}(Kd),Xd=function(t){function e(e){return t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})||this}return mh(e,t),e.prototype.getClassName=function(){return Kd.className},e}(Kd),Zd=function(t){function e(e){return t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})||this}return mh(e,t),e.prototype.getClassName=function(){return Kd.className},e}(Kd),Jd=function(t){function e(e){return t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})||this}return mh(e,t),e.prototype.getClassName=function(){return Kd.className},e}(Kd),Yd=function(t){function e(e){var n=t.call(this)||this;if(n.DEFAULT_GAIN=1,n.gain=null==e.gain?n.DEFAULT_GAIN:e.gain,n.seed=e.seed,null!=n.seed)throw new Th("Random seed is not implemented for Orthogonal Initializer yet.");return n}return mh(e,t),e.prototype.apply=function(t,e){var n=this;return Object(hh.Qb)(function(){if(2!==t.length)throw new Th("The Orthogonal Initializer does not support non-2D shapes yet.");t[0]*t[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 ("+t[0]*t[1]+") elements: Slowness may result.");var e=Td(t[0]>t[1]?[t[1],t[0]]:t,0,1,"float32"),r=hh.Da.gramSchmidt(e);return t[0]>t[1]&&(r=r.transpose()),Object(hh.Va)(Sh(n.gain),r)})},e.prototype.getConfig=function(){return{gain:this.gain,seed:this.seed}},e.className="Orthogonal",e}(Bd);hh.qb.SerializationMap.register(Yd);var tm={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",identity:"Identity",leCunNormal:"LeCunNormal",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function em(t,e){return void 0===e&&(e={}),Uh(t,hh.qb.SerializationMap.getMap().classNameMap,e,"initializer")}function nm(t){return Fh(t)}function rm(t){if("string"==typeof t){var e=t in tm?tm[t]:t;return"GlorotUniform"===e?new Qd:"GlorotNormal"===e?new Xd:"HeNormal"===e?new Zd:"LeCunNormal"===e?new Jd:em({className:e,config:{}})}return t instanceof Bd?t:em(t)}function om(t){return Array.isArray(t)&&Array.isArray(t[0])}function im(t){return 0===t.length?[]:Array.isArray(t[0])?t:[t]}function am(t){var e;if(Array.isArray(t)){if(1!==t.length)throw new kh("Expected Tensor length to be 1; got "+t.length);e=t[0]}else e=t;return e}function sm(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(1===t.length)return(t=t)[0];throw new kh("Expected exactly 1 Shape; got "+t.length)}return t}function um(t){for(var e=0,n=0,r=t;n<r.length;n++){var o=r[n];e+=0===o.shape.length?1:o.shape.reduce(function(t,e){return t*e})}return e}Object.freeze({zeros:function(){return new Fd},ones:function(){return new Ud},constant:function(t){return new Wd(t)},randomUniform:function(t){return new qd(t)},randomNormal:function(t){return new $d(t)},truncatedNormal:function(t){return new Hd(t)},identity:function(t){return new Gd(t)},varianceScaling:function(t){return new Kd(t)},glorotUniform:function(t){return new Qd(t)},glorotNormal:function(t){return new Xd(t)},heNormal:function(t){return new Zd(t)},leCunNormal:function(t){return new Jd(t)},orthogonal:function(t){return new Yd(t)}});var lm="Variable",cm=function(){function t(t,e,n,r,o){void 0===e&&(e="float32"),void 0===n&&(n=lm),void 0===r&&(r=!0),void 0===o&&(o=null),this.dtype=null==e?"float32":e,this.shape=t.shape,this.id=_h(),this.originalName=hd(n=null==n?lm:n),this.name=dd(this.originalName),this.trainable=r,this.constraint=o,this.val=Object(hh.Xb)(t,this.trainable,this.name,this.dtype)}return t.prototype.read=function(){return this.val},t.prototype.write=function(t){return function(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}(this.val,t),this.val.assign(t),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val)),this},t}();function pm(t){return t.map(function(t){return t.read()})}function fm(t){t.map(function(t){t[0].write(t[1])})}var hm=function(t){this.dtype=t.dtype,this.shape=t.shape,this.ndim=null!=t.shape?t.shape.length:t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}},dm=function(t,e,n,r,o,i,a){this.dtype=t,this.shape=e,this.sourceLayer=n,this.inputs=r,this.callArgs=o,this.outputTensorIndex=a,this.id=_h(),null!=i&&(this.originalName=hd(i),this.name=dd(this.originalName)),this.rank=e.length},mm=0,gm=function(){function t(t,e){this.callArgs=e,this.id=mm++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(var n=0,r=t.inboundLayers;n<r.length;n++){var o=r[n];null!=o&&o.outboundNodes.push(this)}t.outboundLayer.inboundNodes.push(this)}return t.prototype.getConfig=function(){for(var t=[],e=0,n=this.inboundLayers;e<n.length;e++){var r=n[e];t.push(null!=r?r.name:null)}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},t}(),vm=0,ym=function(t){function e(e){var n=t.call(this)||this;n._callHook=null,n._addedWeightNames=[],n._stateful=!1,n.id=vm++,n.activityRegularizer=null,n.inputSpec=null,n.supportsMasking=!1,n._trainableWeights=[],n._nonTrainableWeights=[],n._losses=[],n._updates=[],n._built=!1,n.inboundNodes=[],n.outboundNodes=[];var r=e.name;if(!r){var o=n.getClassName();r=zh(o)+"_"+Ch(o)}if(n.name=r,n.trainable=null==e.trainable||e.trainable,n.updatable=null==e.updatable||e.updatable,null!=e.inputShape||null!=e.batchInputShape){var i=void 0;if(null!=e.batchInputShape)i=e.batchInputShape;else if(null!=e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),i=[a].concat(e.inputShape)}n.batchInputShape=i;var s=e.dtype;null==s&&(s=e.inputDType),null==s&&(s="float32"),n.dtype=s}return n.initialWeights=null!=e.weights?e.weights:null,n}return mh(e,t),e.nodeKey=function(t,e){return t.name+"_ib-"+e.toString()},e.prototype.getNodeAtIndex=function(t,e){if(0===this.inboundNodes.length)throw new Ph("The layer has never been called and thus has no defined "+e+".");if(this.inboundNodes.length<=t)throw new kh("Asked to get "+e+" at node "+t+", but the layer has only "+this.inboundNodes.length+" inbound nodes.");return this.inboundNodes[t]},e.prototype.getInputAt=function(t){return jh(this.getNodeAtIndex(t,"input").inputTensors)},e.prototype.getOutputAt=function(t){return jh(this.getNodeAtIndex(t,"output").outputTensors)},Object.defineProperty(e.prototype,"input",{get:function(){if(this.inboundNodes.length>1)throw new Ih("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new Ih("Layer "+this.name+" is not connected, no input to return.");return jh(this.getNodeAtIndex(0,"input").inputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){if(0===this.inboundNodes.length)throw new Ih("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new Ih("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return jh(this.getNodeAtIndex(0,"output").outputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"losses",{get:function(){return this._losses},enumerable:!0,configurable:!0}),e.prototype.calculateLosses=function(){return this.losses.map(function(t){return t()})},Object.defineProperty(e.prototype,"updates",{get:function(){return this._updates},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"built",{get:function(){return this._built},set:function(t){this._built=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.trainable?this._trainableWeights:[]},set:function(t){this._trainableWeights=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this._nonTrainableWeights:this._trainableWeights.concat(this._nonTrainableWeights)},set:function(t){this._nonTrainableWeights=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateful",{get:function(){return this._stateful},enumerable:!0,configurable:!0}),e.prototype.assertInputCompatibility=function(t){if(t=Lh(t),null!=this.inputSpec&&0!==this.inputSpec.length){var e=Lh(this.inputSpec);if(t.length!==e.length)throw new kh("Layer "+this.name+" expects "+e.length+" inputs, but it received "+t.length+" input tensors. Input received: "+t);for(var n=0;n<t.length;n++){var r=t[n],o=e[n];if(null!=o){var i=r.rank;if(null!=o.ndim&&i!==o.ndim)throw new kh("Input "+n+" is incompatible with layer "+this.name+": expected ndim="+o.ndim+", found ndim="+i);if(null!=o.maxNDim&&i>o.maxNDim)throw new kh("Input "+n+" is incompatible with layer "+this.name+": expected max_ndim="+o.maxNDim+", found ndim="+i);if(null!=o.minNDim&&i<o.minNDim)throw new kh("Input "+n+" is incompatible with layer "+this.name+": expected min_ndim="+o.minNDim+", found ndim="+i+".");if(null!=o.dtype&&r.dtype!==o.dtype)throw new kh("Input "+n+" is incompatible with layer "+this.name+" : expected dtype="+o.dtype+", found dtype="+r.dtype+".");if(o.axes){var a=r.shape;for(var s in o.axes){var u=Number(s),l=o.axes[s];if(null!=l&&-1===[l,null].indexOf(u>=0?a[u]:a[a.length+u]))throw new kh("Input "+n+" is incompatible with layer "+this.name+": expected axis "+u+" of input shape to have value "+l+" but got shape "+a+".")}}if(null!=o.shape)for(var c=0;c<o.shape.length;++c){var p=o.shape[c],f=r.shape[c];if(null!=p&&null!=f&&p!==f)throw new kh("Input "+n+" is incompatible with layer "+this.name+": expected shape="+o.shape+", found shape=${xShape}.")}}}}},e.prototype.call=function(t,e){return t},e.prototype.invokeCallHook=function(t,e){null!=this._callHook&&this._callHook(t,e)},e.prototype.setCallHook=function(t){this._callHook=t},e.prototype.clearCallHook=function(){this._callHook=null},e.prototype.apply=function(t,e){var n=this;e=e||{};for(var r=Lh(t),o=!0,i=0,a=r;i<a.length;i++)if(!(a[i]instanceof dm)){o=!1;break}for(var s=!0,u=0,l=r;u<l.length;u++)if(l[u]instanceof dm){s=!1;break}if(o===s)throw new kh("Arguments to apply() must be all SymbolicTensors or all Tensors");return fd(this.name,function(){if(!n.built){n.assertInputCompatibility(t);for(var o=[],i=0,a=Lh(t);i<a.length;i++)o.push(a[i].shape);n.build(jh(o)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights)}if(n.assertInputCompatibility(t),s){for(var u=[],l=0,c=Lh(d=n.call(t,e));l<c.length;l++){var p=c[l];-1!==r.indexOf(p)&&(p=p.clone()),u.push(p)}if(d=jh(u),null!=n.activityRegularizer)throw new Th("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return d}var f=function(t){for(var e=[],n=0,r=t=Lh(t);n<r.length;n++)e.push(r[n].shape);return jh(e)}(t),h=n.computeOutputShape(f),d=void 0,m="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(t)?f[0]:f),d=null!=h&&h.length>0&&Array.isArray(h[0])?h.map(function(r,o){return new dm(m,r,n,Lh(t),e,n.name,o)}):new dm(m,h,n,Lh(t),e,n.name),n.addInboundNode(t,d,null,null,f,h,e),null!=n.activityRegularizer)throw new Th("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return d})},e.prototype.warnOnIncompatibleInputShape=function(t){if(null!=this.batchInputShape)if(t.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(t)+") does not match that of the batchInputShape ("+JSON.stringify(this.batchInputShape)+") of the layer "+this.name);else{var e=!1;this.batchInputShape.forEach(function(n,r){null!=n&&null!=t[r]&&t[r]!==n&&(e=!0)}),e&&console.warn("The shape of the input tensor ("+JSON.stringify(t)+") does not match the expectation of layer "+this.name+": "+JSON.stringify(this.batchInputShape))}},Object.defineProperty(e.prototype,"outputShape",{get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Ih("The layer "+this.name+" has never been called and thus has no defined output shape.");for(var t=[],e=0,n=this.inboundNodes;e<n.length;e++){var r=JSON.stringify(n[e].outputShapes);-1===t.indexOf(r)&&t.push(r)}if(1===t.length){var o=this.inboundNodes[0].outputShapes;return Array.isArray(o)&&Array.isArray(o[0])&&1===o.length?o[0]:o}throw new Ih("The layer "+this.name+' has multiple inbound nodes with different output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')},enumerable:!0,configurable:!0}),e.prototype.countParams=function(){if(!this.built)throw new Ph("You tried to call countParams() on "+this.name+", but the layer is not built yet. Build it first by calling build(batchInputShape).");return um(this.weights)},e.prototype.build=function(t){this.built=!0},e.prototype.getWeights=function(t){return void 0===t&&(t=!1),pm(t?this.trainableWeights:this.weights)},e.prototype.setWeights=function(t){var e=this;Object(hh.Qb)(function(){var n=e.weights;if(n.length!==t.length)throw new kh('You called setWeights(weights) on layer "'+e.name+'" with a weight list of length '+t.length+", but the layer was expecting "+n.length+" weights. Provided weights: "+t+"...");if(0!==n.length){for(var r=[],o=pm(n),i=0;i<o.length;++i){var a=o[i],s=n[i],u=t[i];if(!hh.Wb.arraysEqual(a.shape,u.shape))throw new kh("Layer weight shape "+a.shape+" not compatible with provided weight shape "+u.shape);r.push([s,u])}fm(r)}})},e.prototype.addWeight=function(t,e,n,r,o,i,a){if(-1!==this._addedWeightNames.indexOf(t))throw new kh("Duplicate weight name "+t+" for layer "+this.name);this._addedWeightNames.push(t),null==n&&(n="float32");var s=new cm(r.apply(e,n),n,t,i,a);return null!=o&&this.addLoss(function(){return o.apply(s.read())}),null==i&&(i=!0),i?this._trainableWeights.push(s):this._nonTrainableWeights.push(s),s},e.prototype.addLoss=function(t){var e;null==t||Array.isArray(t)&&0===t.length||(t=Lh(t),void 0!==this._losses&&null!==this._losses&&(e=this.losses).push.apply(e,t))},e.prototype.computeOutputShape=function(t){return t},e.prototype.computeMask=function(t,e){var n=this;if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError("Layer "+this.name+" does not support masking,but was passed an inputMask.");e.forEach(function(t){if(null!=t)throw new TypeError("Layer "+n.name+" does not support masking,but was passed an inputMask.")})}return null}return e},e.prototype.addInboundNode=function(t,e,n,r,o,i,a){void 0===a&&(a=null);var s=Lh(t);e=Lh(e),n=Lh(n),r=Lh(r),o=im(o),i=im(i);for(var u=[],l=[],c=[],p=0,f=s;p<f.length;p++){var h=f[p];u.push(h.sourceLayer),l.push(h.nodeIndex),c.push(h.tensorIndex)}new gm({outboundLayer:this,inboundLayers:u,nodeIndices:l,tensorIndices:c,inputTensors:s,outputTensors:e,inputMasks:n,outputMasks:r,inputShapes:o,outputShapes:i},a);for(var d=0;d<e.length;d++)e[d].sourceLayer=this,e[d].nodeIndex=this.inboundNodes.length-1,e[d].tensorIndex=d},e.prototype.getConfig=function(){var t={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(t.batchInputShape=this.batchInputShape),null!=this.dtype&&(t.dtype=this.dtype),t},e}(hh.qb.Serializable),bm=function(t){function e(e){var n=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:Ch("input").toString()})||this;if(null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),n.trainable=!1,n.built=!0,n.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new kh("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var r=e.batchInputShape;if(null==r){if(null==e.inputShape)throw new kh("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");r=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new kh("Cannot specify batchSize if batchInputShape isspecified when creating an InputLayer.");var o=e.dtype||"float32";n.batchInputShape=r,n.dtype=o,n.inputSpec=[{shape:r}];var i=new dm(n.dtype,n.batchInputShape,n,[],{},n.name);return i.nodeIndex=0,i.tensorIndex=0,new gm({outboundLayer:n,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[r],outputShapes:[r]}),n}return mh(e,t),e.prototype.apply=function(t,e){throw new kh("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)},e.prototype.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},e.className="InputLayer",e}(ym);function wm(t){if(null==t.batchShape&&null==t.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=t.batchShape&&null!=t.shape)throw new kh("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var e=t.batchShape;null!=t.shape&&null==e&&(e=[null].concat(t.shape));var n=t.dtype;return null==n&&(n="float32"),new bm({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function xm(t){return vh(this,void 0,void 0,function(){var e,n,r,o,i,a,s,u;return yh(this,function(l){switch(l.label){case 0:if(null==t)return[2];for(o in e=[],n=[],r=[],t)"number"!=typeof(i=t[o])&&(e.push((a=i).data()),n.push(o),r.push(a));return[4,Promise.all(e)];case 1:for(s=l.sent(),u=0;u<s.length;++u)t[n[u]]=s[u][0];return Object(hh.I)(r),[2]}})})}hh.qb.SerializationMap.register(bm);var _m=function(){function t(){this.validationData=null}return t.prototype.setParams=function(t){this.params=t},t.prototype.onEpochBegin=function(t,e){return vh(this,void 0,void 0,function(){return yh(this,function(t){return[2]})})},t.prototype.onEpochEnd=function(t,e){return vh(this,void 0,void 0,function(){return yh(this,function(t){return[2]})})},t.prototype.onBatchBegin=function(t,e){return vh(this,void 0,void 0,function(){return yh(this,function(t){return[2]})})},t.prototype.onBatchEnd=function(t,e){return vh(this,void 0,void 0,function(){return yh(this,function(t){return[2]})})},t.prototype.onTrainBegin=function(t){return vh(this,void 0,void 0,function(){return yh(this,function(t){return[2]})})},t.prototype.onTrainEnd=function(t){return vh(this,void 0,void 0,function(){return yh(this,function(t){return[2]})})},t.prototype.setModel=function(t){},t}(),Om=function(){function t(t,e){void 0===e&&(e=10),null==t&&(t=[]),this.callbacks=t,this.queueLength=e}return t.prototype.append=function(t){this.callbacks.push(t)},t.prototype.setParams=function(t){for(var e=0,n=this.callbacks;e<n.length;e++)n[e].setParams(t)},t.prototype.setModel=function(t){for(var e=0,n=this.callbacks;e<n.length;e++)n[e].setModel(t)},t.prototype.onEpochBegin=function(t,e){return vh(this,void 0,void 0,function(){var n,r;return yh(this,function(o){switch(o.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,o.label=1;case 1:return n<r.length?[4,r[n].onEpochBegin(t,e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.onEpochEnd=function(t,e){return vh(this,void 0,void 0,function(){var n,r;return yh(this,function(o){switch(o.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,o.label=1;case 1:return n<r.length?[4,r[n].onEpochEnd(t,e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.onBatchBegin=function(t,e){return vh(this,void 0,void 0,function(){var n,r;return yh(this,function(o){switch(o.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,o.label=1;case 1:return n<r.length?[4,r[n].onBatchBegin(t,e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.onBatchEnd=function(t,e){return vh(this,void 0,void 0,function(){var n,r;return yh(this,function(o){switch(o.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,o.label=1;case 1:return n<r.length?[4,r[n].onBatchEnd(t,e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.onTrainBegin=function(t){return vh(this,void 0,void 0,function(){var e,n;return yh(this,function(r){switch(r.label){case 0:null==t&&(t={}),e=0,n=this.callbacks,r.label=1;case 1:return e<n.length?[4,n[e].onTrainBegin(t)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},t.prototype.onTrainEnd=function(t){return vh(this,void 0,void 0,function(){var e,n;return yh(this,function(r){switch(r.label){case 0:null==t&&(t={}),e=0,n=this.callbacks,r.label=1;case 1:return e<n.length?[4,n[e].onTrainEnd(t)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},t}(),Cm=function(t){function e(){return t.call(this)||this}return mh(e,t),e.prototype.onEpochBegin=function(t,e){return vh(this,void 0,void 0,function(){return yh(this,function(t){return this.seen=0,this.totals={},[2]})})},e.prototype.onBatchEnd=function(t,e){return vh(this,void 0,void 0,function(){var t,n,r,o,i=this;return yh(this,function(a){for(o in null==e&&(e={}),this.seen+=t=null==e.size?0:e.size,n=function(n){var o=e[n];if("number"==typeof o)r.totals.hasOwnProperty(n)||(r.totals[n]=0),r.totals[n]=r.totals[n]+o*t;else{var a=void 0;n in r.totals?a=r.totals[n]:r.totals[n]=Sh(0),r.totals[n]=Object(hh.Qb)(function(){return Object(hh.f)(i.totals[n],Object(hh.Va)(o,Sh(t)))}),null!=a&&a.dispose()}},r=this,e)n(o);return[2]})})},e.prototype.onEpochEnd=function(t,e){return vh(this,void 0,void 0,function(){var t,n,r,o,i=this;return yh(this,function(a){if(null!=e)for(t=function(t){if(null==n.totals[t])return"continue";"number"==typeof n.totals[t]?e[t]=n.totals[t]/n.seen:Object(hh.Qb)(function(){e[t]=Object(hh.Va)(Object(hh.J)(Sh(1),Sh(i.seen)),i.totals[t]),i.totals[t].dispose(),Object(hh.Z)(e[t])})},n=this,r=0,o=this.params.metrics;r<o.length;r++)t(o[r]);return[2]})})},e}(_m),Em=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.onTrainBegin=function(t){return vh(this,void 0,void 0,function(){return yh(this,function(t){return this.epoch=[],this.history={},[2]})})},e.prototype.onEpochEnd=function(t,e){return vh(this,void 0,void 0,function(){var n;return yh(this,function(r){for(n in null==e&&(e={}),this.epoch.push(t),e)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(e[n]);return[2]})})},e.prototype.syncData=function(){return vh(this,void 0,void 0,function(){var t,e,n,r,o,i,a,s;return yh(this,function(u){switch(u.label){case 0:for(r in t=[],e=[],n=[],this.history)for(o=this.history[r],i=0;i<o.length;++i)"number"!=typeof o[i]&&(t.push(o[i].data()),e.push(r),n.push(i));return[4,Promise.all(t)];case 1:for(a=u.sent(),s=0;s<a.length;++s)this.history[e[s]][n[s]].dispose(),this.history[e[s]][n[s]]=a[s][0];return[2]}})})},e}(_m),Nm=function(t){function e(e){var n=t.call(this)||this;return n.trainBegin=e.onTrainBegin,n.trainEnd=e.onTrainEnd,n.epochBegin=e.onEpochBegin,n.epochEnd=e.onEpochEnd,n.batchBegin=e.onBatchBegin,n.batchEnd=e.onBatchEnd,n}return mh(e,t),e.prototype.onEpochBegin=function(t,e){return vh(this,void 0,void 0,function(){return yh(this,function(n){switch(n.label){case 0:return null==this.epochBegin?[3,3]:[4,xm(e)];case 1:return n.sent(),[4,this.epochBegin(t,e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.onEpochEnd=function(t,e){return vh(this,void 0,void 0,function(){return yh(this,function(n){switch(n.label){case 0:return null==this.epochEnd?[3,3]:[4,xm(e)];case 1:return n.sent(),[4,this.epochEnd(t,e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.onBatchBegin=function(t,e){return vh(this,void 0,void 0,function(){return yh(this,function(n){switch(n.label){case 0:return null==this.batchBegin?[3,3]:[4,xm(e)];case 1:return n.sent(),[4,this.batchBegin(t,e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.onBatchEnd=function(t,e){return vh(this,void 0,void 0,function(){return yh(this,function(n){switch(n.label){case 0:return null==this.batchEnd?[3,3]:[4,xm(e)];case 1:return n.sent(),[4,this.batchEnd(t,e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.onTrainBegin=function(t){return vh(this,void 0,void 0,function(){return yh(this,function(e){switch(e.label){case 0:return null==this.trainBegin?[3,3]:[4,xm(t)];case 1:return e.sent(),[4,this.trainBegin(t)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},e.prototype.onTrainEnd=function(t){return vh(this,void 0,void 0,function(){return yh(this,function(e){switch(e.label){case 0:return null==this.trainEnd?[3,3]:[4,xm(t)];case 1:return e.sent(),[4,this.trainEnd(t)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},e}(_m);function Sm(t,e){return Object(hh.Qb)(function(){var n=Object(hh.Lb)(Md(t),e,!0),r=Object(hh.Va)(Object(hh.nb)(wh()),Object(hh.cb)(t)),o=Object(hh.Db)(Object(hh.Oa)(n,r));return Object(hh.J)(t,o)})}function Im(t,e){return Object(hh.Qb)(function(){return Object(hh.Pa)(Md(Object(hh.Kb)(e,t)),-1)})}function Pm(t,e){return Object(hh.Qb)(function(){return Object(hh.Pa)(Object(hh.c)(Object(hh.Kb)(e,t)),-1)})}function km(t,e){return Object(hh.Qb)(function(){var n=Object(hh.Kb)(t,e),r=Object(hh.w)(Object(hh.c)(t),wh(),Number.MAX_VALUE),o=Object(hh.c)(Object(hh.J)(n,r));return Object(hh.Va)(Sh(100),Object(hh.Pa)(o,-1))})}function Tm(t,e){return Object(hh.Qb)(function(){var n=Sh(1),r=Object(hh.w)(e,wh(),Number.MAX_VALUE),o=Object(hh.Ga)(Object(hh.f)(n,r)),i=Object(hh.w)(t,wh(),Number.MAX_VALUE),a=Object(hh.Ga)(Object(hh.f)(n,i));return Object(hh.Pa)(Md(Object(hh.Kb)(o,a)),-1)})}function Am(t,e){return Object(hh.Qb)(function(){var n=Sh(0),r=Sh(1),o=Object(hh.Oa)(n,Object(hh.Kb)(r,Object(hh.Va)(t,e)));return Object(hh.Pa)(Md(o),-1)})}function Rm(t,e){return Object(hh.Qb)(function(){var n=Sh(0),r=Sh(1),o=Object(hh.Oa)(n,Object(hh.Kb)(r,Object(hh.Va)(t,e)));return Object(hh.Pa)(o,-1)})}function Mm(t,e){return Object(hh.Qb)(function(){var n=Sh(0),r=Sh(1),o=Object(hh.Lb)(Object(hh.Va)(t,e),-1),i=Object(hh.Ma)(Object(hh.Va)(Object(hh.Kb)(r,t),e),-1);return Object(hh.Oa)(n,Object(hh.f)(r,Object(hh.Kb)(i,o)))})}function Dm(t,e){return Object(hh.Qb)(function(){var n=Sh(Math.log(2)),r=Object(hh.Kb)(e,t),o=Object(hh.Kb)(Object(hh.f)(r,Object(hh.Bb)(Object(hh.Va)(Sh(-2),r))),n);return Object(hh.Pa)(o,-1)})}function jm(t,e,n){return void 0===n&&(n=!1),Object(hh.Qb)(function(){if(n)e=Object(hh.Ab)(e);else{var r=Object(hh.Lb)(e,e.shape.length-1,!0);e=Object(hh.J)(e,r)}return e=Object(hh.w)(e,wh(),1-wh()),Object(hh.Xa)(Object(hh.Lb)(Object(hh.Va)(t.toFloat(),Object(hh.Ga)(e)),e.shape.length-1))})}function Lm(t,e,n){return void 0===n&&(n=!1),Object(hh.Qb)(function(){var r=Object(hh.S)(function(t){var e=[yd(t.shape)];return t.reshape(e)}(t)).toInt(),o=e.shape;return jm(Object(hh.ab)(r,o[o.length-1]).reshape(o),e,n)})}function zm(t,e){return Object(hh.Qb)(function(){var n;return n=Object(hh.w)(e,wh(),1-wh()),n=Object(hh.Ga)(Object(hh.J)(n,Object(hh.Kb)(Object(hh.cb)(n),n))),Object(hh.Pa)(function(t,e){return Object(hh.Qb)(function(){var n=Object(hh.Oa)(e,Object(hh.bc)(e)),r=Object(hh.Va)(e,t),o=Object(hh.Ga)(Object(hh.f)(Sh(1),Object(hh.N)(Object(hh.Xa)(Object(hh.c)(e)))));return Object(hh.f)(Object(hh.Kb)(n,r),o)})}(t,n),-1)})}function Vm(t,e){return Object(hh.Qb)(function(){var n=Object(hh.w)(t,wh(),1),r=Object(hh.w)(e,wh(),1);return Object(hh.Lb)(Object(hh.Va)(t,Object(hh.Ga)(Object(hh.J)(n,r))),-1)})}function Bm(t,e){return Object(hh.Qb)(function(){var n=Object(hh.Ga)(Object(hh.f)(Sh(wh()),e));return Object(hh.Pa)(Object(hh.Kb)(e,Object(hh.Va)(t,n)),-1)})}function Fm(t,e){return Object(hh.Qb)(function(){var n=Sm(t,-1),r=Sm(e,-1),o=Object(hh.Va)(n,r);return Object(hh.Xa)(Object(hh.Lb)(o,-1))})}function Um(t){var e={meanSquaredError:Im,meanAbsoluteError:Pm,meanAbsolutePercentageError:km,meanSquaredLogarithmicError:Tm,squaredHinge:Am,hinge:Rm,categoricalHinge:Mm,logcosh:Dm,categoricalCrossentropy:jm,sparseCategoricalCrossentropy:Lm,binaryCrossentropy:zm,kullbackLeiblerDivergence:Vm,poisson:Bm,cosineProximity:Fm};if("string"==typeof t){if(t in e)return e[t];throw new kh("Unknown loss "+t)}return t}function Wm(t,e){return Object(hh.Qb)(function(){var n=Object(hh.Va)(Sh(.5),Object(hh.cb)(e)),r=Od(Object(hh.V)(e,n),t.dtype);return Object(hh.Pa)(Object(hh.L)(t,r),-1)})}function qm(t,e){return Object(hh.Qb)(function(){return Od(Object(hh.L)(Object(hh.i)(t,-1),Object(hh.i)(e,-1)),"float32")})}function $m(t,e){return zm(t,e)}function Hm(t,e){throw new Th}var Gm=Im,Km=Im,Qm=Pm,Xm=Pm,Zm=km,Jm=km,Ym=jm,tg=Fm,eg=Lm;function ng(t,e,n){void 0===n&&(n=console.log);for(var r="",o=0;o<t.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=t[o]).slice(0,e[o]),r+=" ".repeat(e[o]-r.length);n(r)}function rg(t,e,n){var r;try{r=JSON.stringify(t.outputShape)}catch(t){r="multiple"}ng([t.name+" ("+t.getClassName()+")",r,t.countParams().toString()],e,n)}function og(t,e,n,r){var o;try{o=JSON.stringify(t.outputShape)}catch(t){o="multiple"}for(var i=[],a=0,s=t.inboundNodes;a<s.length;a++){var u=s[a];if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(var l=0;l<u.inboundLayers.length;++l)i.push(u.inboundLayers[l].name+"["+u.nodeIndices[l]+"]["+u.tensorIndices[l]+"]")}var c=t.name,p=t.getClassName(),f=0===i.length?"":i[0];for(ng([c+" ("+p+")",o,t.countParams().toString(),f],e,r),l=1;l<i.length;++l)ng(["","","",i[l]],e,r)}function ig(t,e){return void 0===e&&(e={}),Uh(t,hh.qb.SerializationMap.getMap().classNameMap,e,"layer")}function ag(t,e,n){return("inboundNodes"===t||"outputLayers"===t||"inputLayers"===t)&&0===e&&"string"==typeof n}function sg(t,e,n,r){if(!n.startsWith("2."))throw new kh("Unsupported Keras version in weights being loaded: "+n);return e}function ug(t,e,n){var r=function(t){switch(t){case"float32":return"float32";default:throw new kh("Invalid dtype: "+t)}}(t);return hh.b.make(e,{values:0===e.length?n:hh.Wb.flatten(n)},r)}var lg,cg,pg=function(t){function e(n){var r=t.call(this,{})||this;if(r.containerNodes=new Set,r.name=n.name,null==r.name){var o=r.getClassName().toLowerCase();r.name=Ch(o)}if(r.supportsMasking=!1,r.trainable=!0,r.updatable=!0,r.inputs=Array.isArray(n.inputs)?n.inputs.slice():[n.inputs],r.outputs=Array.isArray(n.outputs)?n.outputs.slice():[n.outputs],qh(r.inputs).length!==r.inputs.length)throw new kh("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+r.inputs.map(function(t){return t.name}));qh(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+r.outputs.map(function(t){return t.name})),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[];for(var i=0,a=r.outputs;i<a.length;i++){var s=(N=a[i]).sourceLayer,u=N.nodeIndex,l=N.tensorIndex;r.outputLayers.push(s),r.outputLayersNodeIndices.push(u),r.outputLayersTensorIndices.push(l)}for(var c=0,p=r.inputs;c<p.length;c++)s=(N=p[c]).sourceLayer,l=N.tensorIndex,Mh(0===(u=N.nodeIndex),"input layer has >1 nodes"),Mh(0===l,"input layer has >1 tensors"),r.inputLayers.push(s),r.inputLayersNodeIndices.push(u),r.inputLayersTensorIndices.push(l);r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var f=0;f<r.inputLayers.length;f++){if(!((s=r.inputLayers[f])instanceof bm))throw new TypeError("Input layers to a Model must be InputLayer objects. Received inputs: "+n.inputs+". Input "+f+" (0-based) originates from layer type "+s.getClassName()+".");r.inputNames.push(s.name),r.feedInputShapes.push(s.batchInputShape),r.feedInputNames.push(s.name)}for(var h=0,d=r.outputLayers;h<d.length;h++)r.outputNames.push((s=d[h]).name);r.internalInputShapes=r.inputs.map(function(t){return t.shape}),r.internalOutputShapes=r.outputs.map(function(t){return t.shape});for(var m={},g={},v={},y={},b={},w=[],x=function(t,n,o,i,a,s){null!=i&&null!=a&&null!=s||(i=t.sourceLayer,a=t.nodeIndex,s=t.tensorIndex);var u=i.inboundNodes[a];if(-1!==o.indexOf(u))throw new Ph("The tensor "+t.name+' at layer "'+i.name+'" is part of a cycle.');if(-1===n.indexOf(u)){r.containerNodes.add(e.nodeKey(i,a)),i.id in b||(b[i.id]=Object.keys(b).length),-1===o.indexOf(u)&&o.push(u);for(var l=u.inboundLayers.length,c=0;c<l;c++)x(u.inputTensors[c],n,o,u.inboundLayers[c],u.nodeIndices[c],u.tensorIndices[c]);for(n.push(u);o.indexOf(u)>=0;)o.splice(o.indexOf(u),1);w.push(u)}},_=[],O=[],C=0,E=r.outputs;C<E.length;C++){var N=E[C];x(N,_,O)}for(var S=0,I=w.slice().reverse();S<I.length;S++){g[(G=I[S]).id]=G,G.id in m||(m[G.id]=0);var P=m[G.id];for(P=Math.max(P,null==v[G.outboundLayer.id]?0:v[G.outboundLayer.id]),v[G.outboundLayer.id]=P,y[G.outboundLayer.id]=G.outboundLayer,m[G.id]=P,f=0;f<G.inboundLayers.length;f++){var k=G.inboundLayers[f].inboundNodes[u=G.nodeIndices[f]];m[k.id]=Math.max(P+1,null==m[k.id]?0:m[k.id]),g[k.id]=k}}var T={};for(var A in m)(P=m[A])in T||(T[P]=[]),T[P].push(g[A]);var R={};for(var M in v)(P=v[M])in R||(R[P]=[]),R[P].push(y[M]);var D=Object.keys(R).map(function(t){return parseInt(t,10)}).sort(Wh);r.layers=[];for(var j=0,L=D;j<L.length;j++){var z=R[P=L[j]];z.sort(function(t,e){var n=b[t.id],r=b[e.id];return n<r?-1:n>r?1:0});for(var V=0,B=z;V<B.length;V++)r.layers.push(s=B[V])}r.layersByDepth=R,D=Object.keys(T).map(function(t){return parseInt(t,10)}).sort(Wh);for(var F=r.inputs.slice(),U=[],W=0,q=D;W<q.length;W++)for(var $=0,H=T[P=q[W]];$<H.length;$++){var G;if(null!=(s=(G=H[$]).outboundLayer)){for(var K=0,Q=G.inputTensors;K<Q.length;K++)if(-1===F.indexOf(N=Q[K]))throw new Ph("Graph disconnected: cannot obtain value for tensor "+N+' at layer "'+s.name+'". The following previous layers were accessed without issue: '+U);for(var X=0,Z=G.outputTensors;X<Z.length;X++)F.push(N=Z[X]);U.push(s.name)}}r.nodesByDepth=T;for(var J=r.layers.map(function(t){return t.name}),Y=function(t){var e=J.filter(function(e){return e===t}).length;if(1!==e)throw new Ph('The name "'+t+'" is used '+e+" times in the model. All layer names should be unique. Layer names: "+JSON.stringify(J))},tt=0,et=J;tt<et.length;tt++)Y(et[tt]);return r.outboundNodes=[],r.inboundNodes=[],new gm({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map(function(t){return null}),outputMasks:r.outputs.map(function(t){return null}),inputShapes:r.inputs.map(function(t){return t.shape}),outputShapes:r.outputs.map(function(t){return t.shape})}),r.built=!0,r}return mh(e,t),Object.defineProperty(e.prototype,"trainableWeights",{get:function(){if(this._trainableWeights.length>0)throw new kh("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];for(var t=[],e=0,n=this.layers;e<n.length;e++)t=t.concat(n[e].trainableWeights);return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){for(var t=[],e=0,n=this.layers;e<n.length;e++){var r=n[e];t.push.apply(t,r.nonTrainableWeights)}if(!this.trainable){for(var o=[],i=0,a=this.layers;i<a.length;i++)o.push.apply(o,(r=a[i]).trainableWeights);return o.concat(t)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),e.prototype.loadWeights=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1),n?function(t,e){for(var n={},r=0,o=0,i=e;o<i.length;o++)for(var a=0,s=i[o].weights;a<s.length;a++){var u=s[a];if(null!=n[u.originalName])throw new kh("Duplicate weight name: "+u.originalName);n[u.originalName]=u,r++}var l=[];for(var c in t)l.push([n[c],t[c]]),delete n[c];var p=[];for(var f in n)p.push(f);if(p.length>0)throw new kh(p.length+" of "+r+" weights are not set: "+p);fm(l)}(t,this.layers):function(t,e,n){void 0===n&&(n=!1);for(var r=t.keras_version,o=e.map(function(t){return t.name}),i={},a=0,s=e;a<s.length;a++)null!=(y=s[a]).name&&(null==i[y.name]&&(i[y.name]=[]),i[y.name].push(y));for(var u=t.weights,l=[],c=0;c<o.length;++c){var p=o[c],f=u[p];null==f&&(f=[]);for(var h=[],d=0;d<f.length;++d){var m=f[d];h.push(new cm(ug(m.dtype,m.shape,m.value)))}for(var g=0,v=i[p];g<v.length;g++){var y,b=(y=v[g]).weights;if((h=sg(0,h,r)).length!==b.length){if(!n)throw new kh("Layer #"+c+' (named "'+y.name+'") expects '+b.length+" weight(s), but the saved weights have "+h.length+" element(s).");console.warn("Skipping loading of weights of layer "+y.name+" due to mismatch in number of weights: ("+h.length+" vs "+b.length+").")}for(var w=0;w<h.length;++w)!n||hh.Wb.arraysEqual(b[w].shape,h[w].shape)?l.push([b[w],h[w].read()]):console.warn("Skipping loading of weights for layer "+y.name+" due to mismatch in shape ("+b[w].shape+" vs "+h[w].shape+")")}}fm(l)}(t,this.layers,e)},e.prototype.updatedConfig=function(){var t=this.getConfig();return{className:this.getClassName(),config:t,kerasVersion:"tfjs-layers 0.7.1",backend:"TensorFlow.js"}},e.prototype.toJSON=function(t,e){void 0===e&&(e=!0);var n=function t(e,n){if(null===e||void 0===e)return null;if("string"==typeof e)return zh(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var r=[],o=e.length,i=0;i<o;++i){var a=e[i];ag(n,i,a)?r.push(a):r.push(t(a,n))}return r}for(var s={},u=0,l=Object.keys(e);u<l.length;u++){var c=l[u],p=e[c];s[zh(c)]="name"!==c&&"className"!==c||"string"!=typeof p?t(p,c):p}return s}(this.updatedConfig());return e?JSON.stringify(n):n},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){var r;return t=Lh(t),r="mask"in e?Lh(e.mask):Rh(null,t.length),n.runInternalGraph(t,r)[0]})},e.prototype.computeMask=function(t,e){var n=this;return Object(hh.Qb)(function(){var r;return t=Lh(t),r=null==e?Rh(null,t.length):Lh(e),n.runInternalGraph(t,r)[1]})},e.prototype.computeOutputShape=function(t){var e=im(t);if(e.length!==this.inputLayers.length)throw new kh("Invalid inputShape argument "+t+": model has "+this.inputLayers.length+" tensor inputs.");for(var n={},r=0;r<e.length;r++){var o=this.inputLayers[r];n[b=o.name+"_0_0"]=e[r]}var i=Object.keys(this.nodesByDepth).map(function(t){return parseInt(t,10)}).sort(Wh);if(i.length>1)for(var a=0,s=i;a<s.length;a++)for(var u=0,l=this.nodesByDepth[s[a]];u<l.length;u++){var c=l[u];if(o=c.outboundLayer,-1===this.inputLayers.map(function(t){return t.id}).indexOf(o.id)){for(var p=[],f=0;f<c.inboundLayers.length;f++){var h=c.tensorIndices[f],d=n[b=c.inboundLayers[f].name+"_"+c.nodeIndices[f]+"_"+h];p.push(d)}var m=im(o.computeOutputShape(jh(p))),g=o.inboundNodes.indexOf(c);for(f=0;f<m.length;f++)n[b=o.name+"_"+g+"_"+f]=m[f]}}var v=[],y=[];for(r=0;r<this.outputLayers.length;r++){var b=(o=this.outputLayers[r]).name+"_"+(g=this.outputLayersNodeIndices[r])+"_"+(h=this.outputLayersTensorIndices[r]);y.push(b)}for(r=0;r<y.length;r++){var w=y[r];Mh(w in n),v.push(n[w])}return jh(v)},e.prototype.runInternalGraph=function(t,e){null==e&&(e=Rh(null,t.length));for(var n={},r=0;r<this.inputs.length;++r){var o=this.inputs[r],i=t[r],a=e[r];n[o.id]=[i,a]}for(var s=0,u=Object.keys(this.nodesByDepth).map(function(t){return parseInt(t,10)}).sort(Wh);s<u.length;s++)for(var l=0,c=this.nodesByDepth[u[s]];l<c.length;l++){for(var p=c[l],f=p.outboundLayer,h=p.inputTensors,d=p.outputTensors,m=new Array,g=0,v=h;g<v.length;g++)(o=v[g]).id in n&&m.push(n[o.id]);if(m.length===h.length){var y={},b=void 0,w=void 0,x=void 0,_=void 0;if(null!=p.callArgs&&(y=p.callArgs),1===m.length){var O=m[0],C=O[0],E=O[1];null==y.mask&&(y.mask=E),x=Lh(f.call(C,y)),_=Lh(f.computeMask(C,E)),b=[C],w=[E]}else b=m.map(function(t){return t[0]}),w=m.map(function(t){return t[1]}),null==y.mask&&(y.mask=w),x=Lh(f.call(b,y)),_=Lh(f.computeMask(b,w));if(f.activityRegularizer)throw new Th("Model invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(r=0;r<d.length;++r)n[(o=d[r]).id]=[i=x[r],a=_[r]]}}for(var N=[],S=[],I=[],P=0,k=this.outputs;P<k.length;P++){Mh((o=k[P]).id in n,"Could not compute output "+o.name+" : "+o.id);var T=n[o.id],A=T[0];a=T[1],I.push(A.shape),N.push(A),S.push(a)}return[N,S,I]},e.prototype.buildNodeConversionMap=function(t){for(var n,r={},o=0,i=this.layers;o<i.length;o++){var a=i[o];n=a instanceof e?1:0;for(var s=0;s<a.inboundNodes.length;s++){var u=e.nodeKey(a,s);u in this.containerNodes&&(r[u]=n,n+=1)}}return r},e.prototype.getLayer=function(t,e){if(null!=e){if(this.layers.length<=e)throw new kh("Was asked to retrieve layer at index "+e+", but model only has "+this.layers.length+" layer(s).");return this.layers[e]}if(null==t)throw new kh("Provide either a layer name or layer index");for(var n=0,r=this.layers;n<r.length;n++){var o=r[n];if(o.name===t)return o}throw new kh("No such layer: "+t)},e.prototype.calculateLosses=function(){var t=this;return Object(hh.Qb)(function(){for(var n=[],r=0,o=t.layers;r<o.length;r++)for(var i=o[r],a=0;a<i.inboundNodes.length;++a){var s=e.nodeKey(i,a);t.containerNodes.has(s)&&n.push.apply(n,i.calculateLosses())}return n})},e.prototype.getConfig=function(){for(var t={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[],o=0,i=this.layers;o<i.length;o++){for(var a=(b=i[o]).getClassName(),s=b.getConfig(),u=[],l=0;l<b.inboundNodes.length;l++){var c=b.inboundNodes[l],p=e.nodeKey(b,l),f={};if(this.containerNodes.has(p)){if(c.callArgs)try{JSON.stringify(c.callArgs),f=c.callArgs}catch(t){console.warn("Layer "+b.name+" was passed non-serializable keyword arguments: "+c.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),f={}}if(c.inboundLayers.length>0){for(var h=[],d=0;d<c.inboundLayers.length;d++){var m=c.inboundLayers[d],g=c.nodeIndices[d],v=c.tensorIndices[d];null!==(x=n[e.nodeKey(m,g)])&&void 0!==x||(x=0),h.push([m.name,x,v,f])}u.push(h)}}}r.push({name:b.name,className:a,config:s,inboundNodes:u})}t.layers=r;var y=[];for(d=0;d<this.inputLayers.length;d++){var b=this.inputLayers[d];p=e.nodeKey(b,g=this.inputLayersNodeIndices[d]),this.containerNodes.has(p)&&(null!==(x=n[p])&&void 0!==x||(x=0),y.push([b.name,x,v=this.inputLayersTensorIndices[d]]))}t.inputLayers=y;var w=[];for(d=0;d<this.outputLayers.length;d++){var x;p=e.nodeKey(b=this.outputLayers[d],g=this.outputLayersNodeIndices[d]),this.containerNodes.has(p)&&(null!==(x=n[p])&&void 0!==x||(x=0),w.push([b.name,x,v=this.outputLayersTensorIndices[d]]))}return t.outputLayers=w,t},e.fromConfig=function(t,e){var n={},r={};function o(t,e){t.name in r?r[t.name].push(e):r[t.name]=[e]}function i(t,e){for(var r,i=[],a=0,s=e;a<s.length;a++){var u=s[a],l=u[0],c=u[1],p=u[2];if(3===u.length)r={};else{if(4!==u.length)throw new kh("Improperly formatted model config for layer "+JSON.stringify(t)+": "+JSON.stringify(u));r=u[3]}if(!(l in n))return void o(t,e);var f=n[l];if(f.inboundNodes.length<=c)return void o(t,e);i.push(f.inboundNodes[c].outputTensors[p])}i.length>0&&t.apply(jh(i),r)}function a(t){var r=t.name,i=ig(t,null!=e.customObjects?e.customObjects:{});n[r]=i;for(var a=0,s=t.inboundNodes;a<s.length;a++){var u=s[a];if(!(u instanceof Array))throw new kh("Corrupted configuration, expected array for nodeData: "+u);o(i,u)}}for(var s=e.name,u=e.layers,l=0,c=u;l<c.length;l++)a(h=c[l]);for(;!$h(r);)for(var p=0,f=u;p<f.length;p++){var h=f[p];if((N=n[h.name]).name in r){for(var d=0,m=r[N.name];d<m.length;d++)i(N,m[d]);delete r[N.name]}}for(var g=[],v=[],y=0,b=e.inputLayers;y<b.length;y++){var w=(h=b[y])[0],x=h[1],_=h[2];Mh(w in n);var O=(N=n[w]).inboundNodes[x].outputTensors;g.push(O[_])}for(var C=0,E=e.outputLayers;C<E.length;C++){var N;w=(h=E[C])[0],x=h[1],_=h[2],Mh(w in n),O=(N=n[w]).inboundNodes[x].outputTensors,v.push(O[_])}return new t({inputs:g,outputs:v,name:s})},Object.defineProperty(e.prototype,"stateful",{get:function(){if(this._stateful)throw new kh("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(var t=0,e=this.layers;t<e.length;t++)if(e[t].stateful)return!0;return!1},enumerable:!0,configurable:!0}),e}(ym),fg=function(){function t(e){if(this.id2Value={},e instanceof t)for(var n in e.id2Value)this.id2Value[n]=e.id2Value[n];else{if(null==e)return;for(var r=0,o=e;r<o.length;r++){var i=o[r];this.add(i.key,i.value)}}}return t.prototype.add=function(t,e){if(null!=this.id2Value[t.id])throw new kh("Duplicate key: name="+t.name+", id="+t.id);return this.id2Value[t.id]=function(t,e){if(null!=t.shape){if(t.shape.length!==e.shape.length)throw new kh("The rank of feed ("+e.shape.length+") does not match the rank of the key ("+t.shape.length+").");for(var n=0;n<t.shape.length;++n)if(null!=t.shape[n]&&t.shape[n]!==e.shape[n])throw new kh("The "+n+"-th dimension of the feed ("+e.shape[n]+") is incompatible with that of the key ("+t.shape[n]+").")}if(null==t.dtype||t.dtype===e.dtype)return e;try{return Object(hh.u)(e,t.dtype)}catch(n){throw new kh("The dtype of the feed ("+e.dtype+") can not be cast to the dtype of the key '"+t.name+"' ("+t.dtype+").")}}(t,e),this},t.prototype.addFeed=function(t){this.add(t.key,t.value)},t.prototype.hasKey=function(t){return null!=this.id2Value[t.id]},t.prototype.getValue=function(t){if(null==this.id2Value[t.id])throw new kh("Nonexistent key: "+JSON.stringify(t));return this.id2Value[t.id]},t}();function hg(t,e,n){for(var r=Array.isArray(t),o=r?t:[t],i=[],a=new fg(e),s=0,u=o;s<u.length;s++)i.push(dg(u[s],a,n));return r?i:i[0]}function dg(t,e,n){if(e.hasKey(t))return e.getValue(t);if(t.sourceLayer instanceof bm)throw new kh("Missing a feed value for SymbolicTensor from InputLayer '"+bm.name+"'");for(var r=[],o=0,i=t.inputs;o<i.length;o++){var a=dg(i[o],e,n);r.push(a)}var s=t.sourceLayer.apply(r,n);Array.isArray(s)||(s=[s]);for(var u=function(t){var e;if(1===t.sourceLayer.inboundNodes.length)e=t.sourceLayer.output;else{for(var n=null,r=0;r<t.sourceLayer.inboundNodes.length;++r)for(var o=0,i=t.sourceLayer.inboundNodes[r].outputTensors;o<i.length;o++)if(i[o].id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}(t),l=Array.isArray(u)?u:[u],c=0;c<l.length;++c)e.add(l[c],s[c]);return 1===s.length?s[0]:s[t.outputTensorIndex]}function mg(t){return Array.isArray(t)}function gg(t){return!function(t){return t instanceof hh.b}(t)&&!mg(t)}function vg(t,e,n,r,o){if(void 0===r&&(r=!0),void 0===o&&(o=""),null==e||0===e.length){if(null!=t){var i=!1;if(mg(t)&&t.length>0)i=!0;else if(gg(t)){for(var a in t)if(t.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new kh("Error when checking model "+o+" expected no data, but got "+t)}return[]}if(null==t)return e.map(function(t){return null});var s;if(gg(t)){t=t,s=[];for(var u=0,l=e;u<l.length;u++){var c=l[u];if(null==t[c])throw new kh('No data provided for "'+c+'". Need data for each key in: '+e);s.push(t[c])}}else if(mg(t)){if((t=t).length!==e.length)throw new kh("Error when checking model "+o+": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see "+e.length+" Tensor(s), but instead got the following list of Tensor(s): "+t);s=t}else{if(t=t,e.length>1)throw new kh("The model "+o+" expects "+e.length+" Tensor(s), but only received one Tensor. Found: Tensor with shape "+t.shape);s=[t]}for(var p=0;p<e.length;++p)1===(f=s[p]).shape.length&&(s[p]=Cd(f,1));if(null!=n)for(p=0;p<e.length;++p)if(null!=n[p]){var f;if((f=s[p]).shape.length!==n[p].length)throw new kh("Error when checking "+o+": expected "+e[p]+" to have "+n[p].length+" dimension(s). but got array with shape "+f.shape);for(var h=0;h<n[p].length;++h)if(0!==h||r){var d=n[p][h];if(null!=d&&d>=0&&f.shape[h]!==d)throw new kh("Error when checking "+o+": expected "+e[p]+" to have shape ["+n[p]+"], but got array with shape ["+f.shape+"].")}}return s}function yg(t,e){for(var n=[],r=0,o=null;r<t;)(o=r+e)>=t&&(o=t),n.push([r,o]),r=o;return n}function bg(t,e,n){return null==t?[null]:Array.isArray(t)?t.map(function(t){return Ed(t,e,n-e)}):Ed(t,e,n-e)}function wg(t,e){return Object(hh.Qb)(function(){return null==t?null:Array.isArray(t)?t.map(function(t){return wg(t,e)}):Rd(t,"int32"===e.dtype?e:e.toInt())})}function xg(t,e,n,r,o){var i;if(void 0===r&&(r=!0),void 0===o&&(o=""),Array.isArray(t)){if(t.length!==e.length)throw new kh("Error when checking model "+o+": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see "+e.length+" Tensor(s), but instead got "+t.length+" Tensors(s).");i=t}else{if(e.length>1)throw new kh("The model expects "+e.length+" "+o+" Tensors, but only received one Tensor. Found: array with shape "+JSON.stringify(t.shape)+".");i=[t]}if(null!=n)for(var a=0;a<e.length;++a)if(null!=n[a]){var s=i[a];if(s.shape.length!==n[a].length)throw new kh("Error when checking "+o+": expected "+e[a]+" to have "+n[a].length+" dimension(s), but got array with shape "+JSON.stringify(s.shape));for(var u=0;u<n[a].length;++u)if(0!==u||r){var l=n[a][u];if(null!=l&&l!==s.shape[u])throw new kh("Error when checking "+o+": expected "+e[a]+" to have shape "+JSON.stringify(n[a])+" but got array with shape "+JSON.stringify(s.shape)+".")}}}(cg=lg||(lg={}))[cg.SILENT=0]="SILENT",cg[cg.VERBOSE=1]="VERBOSE";var _g=function(t){function e(e){return t.call(this,e)||this}return mh(e,t),e.prototype.summary=function(t,e,n){if(void 0===n&&(n=console.log),!this.built)throw new kh("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function(t,e,n,r){void 0===r&&(r=console.log);var o,i=function(t){var e=!0,n=[],r=[];for(var o in t.nodesByDepth)n.push(t.nodesByDepth[o]);for(var i=0,a=n;i<a.length;i++){var s=a[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){e=!1;break}r.push.apply(r,s)}if(e)for(var u=0,l=t.layers;u<l.length;u++){for(var c=!1,p=0,f=l[u].inboundNodes;p<f.length;p++)if(-1!==r.indexOf(f[p])){if(c){e=!1;break}c=!0}if(!e)break}return e}(t),a=["Layer (type)","Output shape","Param #"];if(i?(e=e||65,n=n||[.45,.85,1]):(e=e||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(function(t){return Math.floor(e*t)})),!i)for(var s in a.push("Receives inputs"),o=[],t.nodesByDepth)o.push.apply(o,t.nodesByDepth[s]);r("_".repeat(e)),ng(a,n,r),r("=".repeat(e));for(var u,l=t.layers,c=0;c<l.length;++c)i?rg(l[c],n,r):og(l[c],n,o,r),r((c===l.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency(),u=um(null!=t.collectedTrainableWeights?t.collectedTrainableWeights:t.trainableWeights);var p=um(t.nonTrainableWeights);r("Total params: "+(u+p)),r("Trainable params: "+u),r("Non-trainable params: "+p),r("_".repeat(e))}(this,t,e,n)},e.prototype.compile=function(t){var e=this;if(null==t.loss&&(t.loss=[]),this.loss=t.loss,"string"==typeof t.optimizer)this.optimizer=function(t){var e={Adagrad:function(){return hh.Sb.adagrad(.01)},Adadelta:function(){return hh.Sb.adadelta(1,.95,wh())},Adam:function(){return hh.Sb.adam(.001,.9,.999,wh())},Adamax:function(){return hh.Sb.adamax(.002,.9,.999,wh(),0)},RMSProp:function(){return hh.Sb.rmsprop(.001,.9,0,wh())},SGD:function(){return hh.Sb.sgd(.01)}};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new kh("Unknown Optimizer "+t)}(t.optimizer);else{if(!(t.optimizer instanceof hh.a))throw new kh("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer=t.optimizer}var n=[];if(Array.isArray(t.loss)||"string"==typeof t.loss||"function"==typeof t.loss)if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new kh("When passing an Array as loss, it should have one entry per model output. The model has "+this.outputs.length+" output(s), but you passed loss="+t.loss+".");n=t.loss.map(function(t){return Um(t)})}else{var r=Um(t.loss);this.outputs.map(function(t){n.push(r)})}else{for(var o in t.loss=t.loss,t.loss)if(-1===this.outputNames.indexOf(o))throw new kh('Unknown entry in loss dictionary: "'+o+'". Only expect the following keys: '+this.outputNames);for(var i in this.outputNames)null==t.loss[i]&&console.warn('Output "'+i+'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to '+i+" during training"),n.push(Um(t.loss[i]))}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var a=0;a<this.outputs.length;++a){var s=this.internalOutputShapes[a];this.feedOutputNames.push(this.outputNames[a]),this.feedOutputShapes.push(s),this.feedLossFns.push(this.lossFunctions[a])}var u=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],fd("loss",function(){for(var t=0;t<e.outputs.length;++t)-1===u.indexOf(t)&&e.outputs.length>1&&(e.metricsTensors.push([e.lossFunctions[t],t]),e.metricsNames.push(e.outputNames[t]+"_loss"))});var l=function(t,e){if(null==t||Array.isArray(t)&&0===t.length)return e.map(function(t){return[]});if(Array.isArray(t))return e.map(function(e){return t});if(null!=t){for(var n=[],r=0,o=e;r<o.length;r++){var i=o[r],a=t.hasOwnProperty(i)?t[i]:[];Array.isArray(a)||(a=[a]),n.push(a)}return n}throw new TypeError("Type of metrics argument not understood. Expected an Array or Object, found: "+t)}(t.metrics,this.outputNames);fd("metric",function(){for(var t=function(t){if(-1!==u.indexOf(t))return"continue";!function(n){for(var r,o,i,a=function(n){if(-1!==["accuracy","acc","crossentropy","ce"].indexOf(n)){var a=e.internalOutputShapes[t];1===a[a.length-1]||e.lossFunctions[t]===zm?-1!==["accuracy","acc"].indexOf(n)?o=Wm:-1!==["crossentropy","ce"].indexOf(n)&&(o=$m):e.lossFunctions[t]===Lm?-1!==["accuracy","acc"].indexOf(n)?o=Hm:-1!==["crossentropy","ce"].indexOf(n)&&(o=eg):-1!==["accuracy","acc"].indexOf(n)?o=qm:-1!==["crossentropy","ce"].indexOf(n)&&(o=Ym);var s=void 0;-1!==["accuracy","acc"].indexOf(n)?s="acc":-1!==["crossentropy","ce"].indexOf(n)&&(s="ce"),i=o,r=""+s}else{var u=function(t){var e={binaryAccuracy:Wm,categoricalAccuracy:qm,categoricalCrossentropy:Ym,sparseCategoricalCrossentropy:eg,mse:Gm,MSE:Km,mae:Qm,MAE:Xm,mape:Zm,MAPE:Jm,cosine:tg};if("string"==typeof t&&t in e)return e[t];if("string"!=typeof t&&null!=t)return t;throw new kh("Unknown metric "+t)}(n);i=u,r=""+n}var l;fd(r,function(){l=i}),function(t,n,r){e.outputNames.length>1&&(n=e.outputNames[t]+"_"+n),e.metricsNames.push(n),e.metricsTensors.push([r,t])}(t,r,l)},s=0,u=l[t];s<u.length;s++)a(u[s])}()},n=0;n<e.outputs.length;++n)t(n)}),this.collectedTrainableWeights=this.trainableWeights},e.prototype.checkTrainableWeightsConsistency=function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},e.prototype.evaluate=function(t,e,n){void 0===n&&(n={});var r=null==n.batchSize?32:n.batchSize,o=this.standardizeUserData(t,e,!0,r),i=o[0].concat(o[1]);return this.makeTestFunction(),jh(this.testLoop(this.testFunction,i,r,n.verbose,n.steps))},e.prototype.checkNumSamples=function(t,e,n,r){var o;if(void 0===r&&(r="steps"),null!=n){if(o=null,null!=e)throw new kh("If "+r+" is set, batchSize must be null or undefined.Got batchSize = "+e)}else{if(null==t)throw new kh("Either the input data should have a defined shape, or "+r+" shoud be specified.");o=Array.isArray(t)?t[0].shape[0]:t.shape[0]}return o},e.prototype.execute=function(t,e){if(Array.isArray(e)&&0===e.length)throw new kh("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(e),r=this.retrieveSymbolicTensors(n?e:[e]),o=new fg;if(t instanceof hh.b&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new kh("The number of inputs provided ("+t.length+") does not match the number of inputs of this model ("+this.inputs.length+").");for(var i=0;i<this.inputs.length;++i)o.add(this.inputs[i],t[i])}else for(var a=0,s=this.inputs;a<s.length;a++){var u=s[a],l=t[u.name];if(null==l)throw new kh("No value is provided for the model's input "+u.name);o.add(u,l)}var c=hg(r,o);return n?c:c[0]},e.prototype.retrieveSymbolicTensors=function(t){for(var e=Rh(null,t.length),n=t.length,r=0,o=this.layers;r<o.length;r++){for(var i=o[r],a=Array.isArray(i.output)?i.output:[i.output],s=a.map(function(t){return t.name}),u=0;u<t.length;++u){var l=s.indexOf(t[u]);if(-1!==l&&(e[u]=a[l],n--),0===n)break}if(0===n)break}if(n>0){var c=[];throw e.forEach(function(e,n){null==e&&c.push(t[n])}),new kh("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(c))}return e},e.prototype.predictLoop=function(t,e,n){var r=this;return void 0===e&&(e=32),void 0===n&&(n=!1),Object(hh.Qb)(function(){var o=r.checkNumSamples(t);if(n)throw new Th("Verbose predictLoop() is not implemented yet.");for(var i=yg(o,e),a=[],s=function(e){var n=Object(hh.Qb)(function(){var n=bg(t,i[e][0],i[e][1]),o=[];if(Array.isArray(n))for(var a=0;a<n.length;++a)o.push({key:r.inputs[a],value:n[a]});else o.push({key:r.inputs[0],value:n});var s=new fg(o);return hg(r.outputs,s)});if(0===e)for(var o=0,s=n;o<s.length;o++)a.push(s[o]);else for(var u=0;u<n.length;++u)a[u]=Pd(a[u],n[u])},u=0;u<i.length;++u)s(u);return jh(a)})},e.prototype.predict=function(t,e){return void 0===e&&(e={}),xg(t,this.inputNames,this.feedInputShapes,!1),this.predictLoop(t,null==e.batchSize?32:e.batchSize)},e.prototype.predictOnBatch=function(t){return xg(t,this.inputNames,this.feedInputShapes,!0),this.predictLoop(t,t.shape[0])},e.prototype.standardizeUserData=function(t,e,n,r){if(void 0===n&&(n=!0),null==this.optimizer)throw new Ph("You must compile a model before training/testing. Use Model.compile(modelCompileConfig).");for(var o=[],i=0;i<this.feedOutputShapes.length;++i){var a=this.feedOutputShapes[i];o.push(this.feedLossFns[i]===Lm?a.slice(0,a.length-1).concat([1]):a)}if(function(t,e,n){var r=qh(t.map(function(t){return t.shape[0]}));r.sort();var o=qh(e.map(function(t){return t.shape[0]}));if(o.sort(),r.length>1)throw new kh("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map(function(t){return t.shape})));if(o.length>1)throw new kh("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map(function(t){return t.shape})));if(r.length>0&&o.length>0&&!hh.Wb.arraysEqual(r,o))throw new kh("Input Tensors should have the same number of samples as target Tensors. Found "+r[0]+" input sample(s) and "+o[0]+" target sample(s).")}(t=vg(t,this.feedInputNames,this.feedInputShapes,!1,"input"),e=vg(e,this.feedOutputNames,o,!1,"target")),function(t,e,n){for(var r=[Im,zm,jm],o=0;o<t.length;++o){var i=t[o],a=e[o],s=n[o];if(null!=a){if(a===jm&&1===i.shape[i.shape.length-1])throw new kh("You are passing a target array of shape "+i.shape+" while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(a))for(var u=i.shape.slice(1),l=s.slice(1),c=0;c<u.length;++c){var p=l[c];if(null!=p&&u[c]!==p)throw new kh("A target Tensor with shape "+i.shape+" was passed for an output of shape "+s+", while using a loss function that expects targets to have the same shape as the output.")}}}}(e,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&t[0].shape[0]%r!=0)throw new kh("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+r+". Found: "+t[0].shape[0]+" sample(s).");return[t,e,null]},e.prototype.fitLoop=function(t,e,n,r,o,i,a,s,u,l,c,p,f,h){return vh(this,void 0,void 0,function(){var d,m,g,v,y,b,w,x=this;return yh(this,function(_){switch(_.label){case 0:if(null==r&&(r=32),null==o&&(o=1),null==l&&(l=!0),null==p&&(p=0),d=!1,null!=s&&null!=u&&(d=!0),null!=h&&(d=!0,null==f))throw new kh("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");if(null!=(m=this.checkNumSamples(e,r,f,"steps_per_epoch"))&&(g=_d(0,m)),this.history=new Em,a=(a=null==a?[new Cm]:[new Cm].concat(a)).concat([this.history]),i>0)throw new Th("Verbose mode is not implemented yet.");return(v=new Om(a)).setModel(this),v.setParams({epochs:o,initialEpoch:p,steps:f,verbose:i,doValidation:d,metrics:c}),[4,v.onTrainBegin()];case 1:_.sent(),this.stopTraining=!1,y=function(o){var i,a,c,p,h;return yh(this,function(y){switch(y.label){case 0:return[4,v.onEpochBegin(o)];case 1:if(y.sent(),i={},null==f)return[3,2];throw new Th("stepsPerEpoch mode is not implemented yet.");case 2:if("batch"===l)throw new Th("batch shuffling is not implemneted yet");l&&hh.Wb.shuffle(g),a=Object(hh.Pb)(g),c=yg(m,r),p=function(o){var l;return yh(this,function(p){switch(p.label){case 0:return[4,v.onBatchBegin(o,l={})];case 1:return p.sent(),Object(hh.Qb)(function(){var p=c[o][0],f=c[o][1],h=Ed(a,p,f-p);l.batch=o,l.size=f-p;for(var m=wg(e,h),g=t(m),v=0;v<n.length;++v){var y=n[v],b=g[v];l[y]=b,Object(hh.Z)(b)}if(o===c.length-1&&d){var w=x.testLoop(s,u,r);for(v=0;v<n.length;++v)y=n[v],b=w[v],Object(hh.Z)(b),i["val_"+y]=b}}),[4,v.onBatchEnd(o,l)];case 2:return p.sent(),function(t){if(null!=t)for(var e in t){var n=t[e];"number"!=typeof n&&n.dispose()}}(l),b.stopTraining?[2,"break"]:[2]}})},h=0,y.label=3;case 3:return h<c.length?[5,p(h)]:[3,6];case 4:if("break"===y.sent())return[3,6];y.label=5;case 5:return++h,[3,3];case 6:a.dispose(),y.label=7;case 7:return[4,v.onEpochEnd(o,i)];case 8:return y.sent(),b.stopTraining?[2,"break"]:[2]}})},b=this,w=p,_.label=2;case 2:return w<o?[5,y(w)]:[3,5];case 3:if("break"===_.sent())return[3,5];_.label=4;case 4:return++w,[3,2];case 5:return[4,v.onTrainEnd()];case 6:return _.sent(),[4,this.history.syncData()];case 7:return _.sent(),[2,this.history]}})})},e.prototype.testLoop=function(t,e,n,r,o){var i=this;return void 0===r&&(r=0),Object(hh.Qb)(function(){var a=i.checkNumSamples(e,n,o,"steps"),s=[];if(1===r)throw new Th("Verbose mode is not implemented yet.");if(null!=o)throw new Th("steps mode in testLoop() is not implemented yet");for(var u=yg(a,n),l=Object(hh.Pb)(_d(0,a)),c=0;c<u.length;++c){var p=u[c][0],f=u[c][1],h=Ed(l,p,f-p),d=wg(e,h),m=t(d);if(0===c)for(var g=0;g<m.length;++g)s.push(Sh(0));for(g=0;g<m.length;++g){var v=m[g];s[g]=Object(hh.f)(s[g],Object(hh.Va)(Sh(f-p),v))}}for(g=0;g<s.length;++g)s[g]=Object(hh.J)(s[g],Sh(a));return s})},e.prototype.getDedupedMetricsNames=function(){for(var t=this.metricsNames,e=[],n=0;n<t.length;++n){var r=t[n],o=r;Dh(t,r)>1&&(o+="_"+Dh(t.slice(0,n),r)),e.push(o)}return e},e.prototype.makeTestFunction=function(){var t=this;this.testFunction=function(e){return Object(hh.Qb)(function(){for(var n,r=[],o=e.slice(0,t.inputs.length),i=e.slice(t.inputs.length,t.inputs.length+t.outputs.length),a=[],s=0;s<t.inputs.length;++s)a.push({key:t.inputs[s],value:o[s]});var u=new fg(a),l=hg(t.outputs,u);for(s=0;s<t.lossFunctions.length;++s){var c=t.lossFunctions[s],p=Object(hh.Pa)(c(i[s],l[s]));n=0===s?p:Object(hh.f)(n,p),r.push(n)}for(s=0;s<t.metricsTensors.length;++s){var f=t.metricsTensors[s][0],h=t.metricsTensors[s][1],d=Object(hh.Pa)(f(i[h],l[h]));r.push(d)}return r})}},e.prototype.fit=function(t,e,n){return void 0===n&&(n={}),vh(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,p,f,h,d,m,g,v,y,b,w,x,_=this;return yh(this,function(O){switch(O.label){case 0:if(o=this.standardizeUserData(t,e,!1,r=null==n.batchSize?32:n.batchSize),i=o[0],a=o[1],s=!1,p=!1,null!=n.validationData&&n.validationData.length>0){if(s=!0,2!==n.validationData.length)throw 3===n.validationData.length?new Th("validationData including sample weights is not supported yet."):new kh("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+n.validationData+" is invalid.");f=this.standardizeUserData(u=n.validationData[0],l=n.validationData[1],!0,r),c=(u=f[0]).concat(l=f[1])}else null!=n.validationSplit&&n.validationSplit>0&&n.validationSplit<1?(s=!0,h=Math.floor(i[0].shape[0]*(1-n.validationSplit)),u=bg(i,h,d=i[0].shape[0]),i=bg(i,0,h),l=bg(a,h,d),a=bg(a,0,h),p=!0,c=u.concat(l)):null!=n.validationSteps&&(s=!0);return m=i.concat(a),this.checkTrainableWeightsConsistency(),g=function(t){var e=t.slice(0,_.inputs.length),n=t.slice(_.inputs.length,_.inputs.length+_.outputs.length),r=[],o=_.collectedTrainableWeights.map(function(t){return t.read()});return[_.optimizer.minimize(function(){for(var t=[],o=0;o<_.inputs.length;++o)t.push({key:_.inputs[o],value:e[o]});var i,a=new fg(t),s=hg(_.outputs,a,{training:!0});for(o=0;o<_.lossFunctions.length;++o){var u=(0,_.lossFunctions[o])(n[o],s[o]);Object(hh.Pa)(u),i=0===o?u:Object(hh.f)(i,u)}for(o=0;o<_.metricsTensors.length;++o){var l=_.metricsTensors[o][0],c=_.metricsTensors[o][1],p=Object(hh.Pa)(l(n[c],s[c]));Object(hh.Z)(p),r.push(p)}return i=Object(hh.Pa)(i),_.calculateLosses().forEach(function(t){i=Object(hh.f)(i,t)}),i},!0,o)].concat(r)},v=this.getDedupedMetricsNames(),s?(this.makeTestFunction(),y=this.testFunction,b=v.slice().concat(v.map(function(t){return"val_"+t}))):(y=null,c=[],b=v.slice()),w=function(t){return null==t?null:t instanceof _m?[t]:Array.isArray(t)&&t[0]instanceof _m?t:Lh(t).map(function(t){return new Nm(t)})}(n.callbacks),[4,this.fitLoop(g,m,v,r,n.epochs,n.verbose,w,y,c,n.shuffle,b,n.initialEpoch,null,null)];case 1:return x=O.sent(),p&&(c.forEach(function(t){return t.dispose()}),i.forEach(function(t){return t.dispose()}),a.forEach(function(t){return t.dispose()})),[2,x]}})})},e.prototype.getNamedWeights=function(t){for(var e={},n=null!=t&&t.trainableOnly,r=n?this.trainableWeights:this.weights,o=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||(e[r[i].originalName]=o[i]);return e},e.prototype.save=function(t,e){return vh(this,void 0,void 0,function(){var n,r,o;return yh(this,function(i){switch(i.label){case 0:if("string"==typeof t){if(0===(n=hh.Y.getSaveHandlers(t)).length)throw new kh("Cannot find any save handlers for URL '"+t+"'");if(n.length>1)throw new kh("Found more than one ("+n.length+") save handlers for URL '"+t+"'");t=n[0]}if(null==t.save)throw new kh("Model.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[4,hh.Y.encodeWeights(this.getNamedWeights(e))];case 1:return r=i.sent(),o=this.toJSON(null,!1),[2,t.save({modelTopology:o,weightData:r.data,weightSpecs:r.specs})]}})})},e.className="Model",e}(pg);hh.qb.SerializationMap.register(_g);var Og=function(t){function e(e){var n=t.call(this,{inputs:[],outputs:[]})||this;if(e=e||{},n.trainable=!0,n._updatable=!0,n.built=!1,n.name=null!=e.name?e.name:Ch("sequential_"),null!=e.layers)for(var r=0,o=e.layers;r<o.length;r++)n.add(o[r]);return n}return mh(e,t),e.prototype.add=function(t){var n,r=t instanceof e||t instanceof _g;if(r){if(1!==(n=t).outputs.length)throw new kh("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new kh("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===t.inboundNodes.length){if(null==t.batchInputShape)throw new kh("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var o=wm({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(o)}if(r)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==t.inboundNodes.length)throw new kh("A layer added to a Sequential model must not already be connected somewhere else. Model received layer "+t.name+" which has "+t.inboundNodes.length+" pre-existing inbound connections.");if(1!==t.inboundNodes[0].outputTensors.length)throw new kh("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=function t(e,n,r){if((null==n||null!=r&&r>0)&&(n=e.sourceLayer,r=e.nodeIndex),0===n.inboundNodes.length)return[e];var o=n.inboundNodes[r];if(0===o.inboundLayers.length)return o.inputTensors;for(var i=[],a=0;a<o.inboundLayers.length;a++)for(var s=0,u=t(o.inputTensors[a],o.inboundLayers[a],o.nodeIndices[a]);s<u.length;s++){var l=u[s];-1===i.indexOf(l)&&i.push(l)}return i}(this.outputs[0])}this.inboundNodes=[],new gm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Rh(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(function(t){return t.shape}),outputShapes:this.outputs[0].shape})}else{var i=t.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1},e.prototype.pop=function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},e.prototype.call=function(t,e){return null==this.model&&this.build(),this.model.call(t,e)},e.prototype.build=function(t){if(sm(t),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new _g({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.model.updatable=this.updatable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},e.prototype.countParams=function(){return this.built||this.build(),t.prototype.countParams.call(this)},e.prototype.summary=function(e,n,r){void 0===r&&(r=console.log),this.built||this.build(),t.prototype.summary.call(this,e,n,r)},e.prototype.setWeights=function(t){null==this.model&&this.build(),this.model.setWeights(t)},Object.defineProperty(e.prototype,"updatable",{get:function(){return this._updatable},set:function(t){this.built&&(this.model.updatable=t),this._updatable=t},enumerable:!0,configurable:!0}),e.prototype.evaluate=function(t,e,n){if(void 0===n&&(n={}),!this.built)throw new Ph("The model needs to be compiled before being used.");return this.model.evaluate(t,e,n)},e.prototype.predict=function(t,e){return void 0===e&&(e={}),null==this.model&&this.build(),this.model.predict(t,e)},e.prototype.predictOnBatch=function(t){return null==this.model&&this.build(),this.model.predictOnBatch(t)},e.prototype.compile=function(t){this.build(),this.model.compile(t),this.optimizer=this.model.optimizer,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},e.prototype.fit=function(t,e,n){return void 0===n&&(n={}),vh(this,void 0,void 0,function(){return yh(this,function(r){if(!this.built)throw new Ph("The model needs to be compiled before being used.");return[2,this.model.fit(t,e,n)]})})},e.fromConfig=function(t,n){var r=new t({});if(!(r instanceof e))throw new kh("Sequential.fromConfig called on non-Sequential input: "+r);if(!(n instanceof Array))throw new kh("Sequential.fromConfig called without an array of configs");if(null==n[0].className||"Merge"===n[0].className)throw new kh("Legacy serialization format not supported yet.");for(var o=0,i=n;o<i.length;o++){var a=ig(i[o]);r.add(a)}return r},e.prototype.getConfig=function(){for(var t=[],e=0,n=this.layers;e<n.length;e++){var r=n[e];t.push({className:r.getClassName(),config:r.getConfig()})}return t},e.className="Sequential",e}(_g);hh.qb.SerializationMap.register(Og);var Cg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.getConfig=function(){return{}},e}(hh.qb.Serializable),Eg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.apply=function(t,e){return void 0===e&&(e=1),function(t,e){if(void 0===e&&(e=1),1!==e)throw new Th("Support for alpha values other than 1 ("+e+") is not implemented yet.");return Object(hh.K)(t)}(t,e)},e.className="elu",e}(Cg);hh.qb.SerializationMap.register(Eg);var Ng=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.apply=function(t){return Object(hh.ob)(t)},e.className="selu",e}(Cg);hh.qb.SerializationMap.register(Ng);var Sg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.apply=function(t){return Object(hh.jb)(t)},e.className="relu",e}(Cg);hh.qb.SerializationMap.register(Sg);var Ig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.apply=function(t){return Object(hh.Qb)(function(){return Object(hh.Ra)(Sh(6),Object(hh.jb)(t))})},e.className="relu6",e}(Cg);hh.qb.SerializationMap.register(Ig);var Pg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.apply=function(t){return t},e.className="linear",e}(Cg);hh.qb.SerializationMap.register(Pg);var kg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.apply=function(t){return Object(hh.rb)(t)},e.className="sigmoid",e}(Cg);hh.qb.SerializationMap.register(kg);var Tg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.apply=function(t){return function(t){return Object(hh.Qb)(function(){var e=Object(hh.f)(Sh(.5),Object(hh.Va)(Sh(.2),t));return Object(hh.w)(e,0,1)})}(t)},e.className="hardSigmoid",e}(Cg);hh.qb.SerializationMap.register(Tg);var Ag=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.apply=function(t){return Object(hh.Bb)(t)},e.className="softplus",e}(Cg);hh.qb.SerializationMap.register(Ag);var Rg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.apply=function(t){return function(t){return Object(hh.Qb)(function(){return Object(hh.J)(t,Object(hh.f)(Sh(1),Object(hh.c)(t)))})}(t)},e.className="softsign",e}(Cg);hh.qb.SerializationMap.register(Rg);var Mg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.apply=function(t){return Object(hh.Nb)(t)},e.className="tanh",e}(Cg);hh.qb.SerializationMap.register(Mg);var Dg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.apply=function(t,e){return void 0===e&&(e=-1),Object(hh.Ab)(t,e)},e.className="softmax",e}(Cg);function jg(t){return t.getClassName()}function Lg(t,e){return void 0===e&&(e={}),Uh(t,hh.qb.SerializationMap.getMap().classNameMap,e,"activation")}function zg(t){return null==t?Lg({className:"linear",config:{}}):"string"==typeof t?Lg({className:t,config:{}}):t instanceof Cg?t:Lg(t)}hh.qb.SerializationMap.register(Dg);var Vg=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.DEFAULT_ALPHA=.3,null==e&&(e={}),n.alpha=null==e.alpha?n.DEFAULT_ALPHA:e.alpha,n}return mh(e,t),e.prototype.call=function(t,e){var n=am(t);return Object(hh.Aa)(n,this.alpha)},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={alpha:this.alpha},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="LeakyReLU",e}(ym);hh.qb.SerializationMap.register(Vg);var Bg=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;if(n.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==n.DEFAULT_ALPHA)throw new Th("Non-default alpha value ("+e.alpha+") is not supported by the ELU layer yet.");return n.alpha=null==e.alpha?n.DEFAULT_ALPHA:e.alpha,n}return mh(e,t),e.prototype.call=function(t,e){var n=am(t);return Object(hh.K)(n)},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={alpha:this.alpha},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="ELU",e}(ym);hh.qb.SerializationMap.register(Bg);var Fg=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.DEFAULT_THETA=1,null==e&&(e={}),n.theta=null==e.theta?n.DEFAULT_THETA:e.theta,n.thetaTensor=Sh(n.theta),n}return mh(e,t),e.prototype.call=function(t,e){var n=am(t);return n.mul(Od(n.greater(this.thetaTensor),"float32"))},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={theta:this.theta},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="ThresholdedReLU",e}(ym);hh.qb.SerializationMap.register(Fg);var Ug=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.DEFAULT_AXIS=1,null==e&&(e={}),n.softmax=(new Dg).apply,n.axis=null==e.axis?n.DEFAULT_AXIS:e.axis,n}return mh(e,t),e.prototype.call=function(t,e){var n=am(t);return this.softmax(n,this.axis)},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={axis:this.axis},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Softmax",e}(ym);hh.qb.SerializationMap.register(Ug);var Wg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e}(hh.qb.Serializable),qg=function(t){function e(e){var n=t.call(this)||this,r=null==e||null==e.l1?.01:e.l1,o=null==e||null==e.l2?.01:e.l2;return n.hasL1=0!==r,n.hasL2=0!==o,n.l1=Sh(r),n.l2=Sh(o),n}return mh(e,t),e.prototype.apply=function(t){var e=this;return Object(hh.Qb)(function(){var n=Object(hh.ac)([1]);return e.hasL1&&(n=Object(hh.f)(n,Object(hh.Lb)(Object(hh.Va)(e.l1,Object(hh.c)(t))))),e.hasL2&&(n=Object(hh.f)(n,Object(hh.Lb)(Object(hh.Va)(e.l2,Md(t))))),n.asScalar()})},e.prototype.getConfig=function(){return{l1:this.l1.dataSync()[0],l2:this.l2.dataSync()[0]}},e.fromConfig=function(t,e){return new t({l1:e.l1,l2:e.l2})},e.className="L1L2",e}(Wg);hh.qb.SerializationMap.register(qg);var $g={l1l2:"L1L2"};function Hg(t){return Fh(t)}function Gg(t,e){return void 0===e&&(e={}),Uh(t,hh.qb.SerializationMap.getMap().classNameMap,e,"regularizer")}function Kg(t){return null==t?null:"string"==typeof t?Gg({className:t in $g?$g[t]:t,config:{}}):t instanceof Wg?t:Gg(t)}function Qg(t,e,n){if("number"==typeof t)return Rh(t,e);if(t.length!==e)throw new kh("The "+n+" argument must be a tuple of "+e+" integers. Received: "+t.length+" elements.");for(var r=0;r<e;++r){var o=t[r];if(!vd(o))throw new kh("The "+n+" argument must be a tuple of "+e+" integers. Received: "+JSON.stringify(t)+" including a non-integer number "+o)}return t}function Xg(t,e,n,r,o){return void 0===o&&(o=1),null==t?t:Math.floor((("same"===n?t:t-(e+(e-1)*(o-1))+1)+r-1)/r)}function Zg(t,e,n,r){if(null==t)return null;if("valid"===r)t=t*e+xd([n-e,0]);else{if("same"!==r)throw new kh("Unsupport padding mode: "+r+".");t*=e}return t}function Jg(t,e){return Object(hh.Qb)(function(){return ad(e),"channelsFirst"===e?Object(hh.Tb)(t,[0,2,3,1]):t})}var Yg=function(t){function e(n,r){var o=t.call(this,r)||this;if(o.bias=null,o.DEFAULT_KERNEL_INITIALIZER="glorotNormal",o.DEFAULT_BIAS_INITIALIZER="zeros",e.verifyConfig(r),o.rank=n,1!==o.rank&&2!==o.rank)throw new Th("Convolution layer for rank other than 1 or 2 ("+o.rank+") is not implemented yet.");if(o.kernelSize=Qg(r.kernelSize,n,"kernelSize"),o.strides=Qg(null==r.strides?1:r.strides,n,"strides"),o.padding=null==r.padding?"valid":r.padding,ud(o.padding),o.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,ad(o.dataFormat),o.activation=zg(r.activation),o.useBias=null==r.useBias||r.useBias,o.biasInitializer=rm(r.biasInitializer||o.DEFAULT_BIAS_INITIALIZER),o.biasConstraint=rd(r.biasConstraint),o.biasRegularizer=Kg(r.biasRegularizer),o.activityRegularizer=Kg(r.activityRegularizer),o.dilationRate=Qg(null==r.dilationRate?1:r.dilationRate,n,"dilationRate"),1===o.rank&&Array.isArray(o.dilationRate)&&1!==o.dilationRate.length)throw new kh("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(o.dilationRate));if(2===o.rank)if("number"==typeof o.dilationRate)o.dilationRate=[o.dilationRate,o.dilationRate];else if(2!==o.dilationRate.length)throw new kh("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(o.dilationRate));return o}return mh(e,t),e.verifyConfig=function(t){if(Mh("kernelSize"in t,"required key 'kernelSize' not in config"),"number"!=typeof t.kernelSize&&!Gh(t.kernelSize,"number",1,2))throw new kh("BaseConv expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(t.kernelSize)+".")},e.prototype.getConfig=function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:jg(this.activation),useBias:this.useBias,biasInitializer:nm(this.biasInitializer),biasRegularizer:Hg(this.biasRegularizer),activityRegularizer:Hg(this.activityRegularizer),biasConstraint:ed(this.biasConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(ym),tv=function(t){function e(n,r){var o=t.call(this,n,r)||this;return o.kernel=null,e.verifyConfig(r),o.filters=r.filters,o.kernelInitializer=rm(r.kernelInitializer||o.DEFAULT_KERNEL_INITIALIZER),o.kernelConstraint=rd(r.kernelConstraint),o.kernelRegularizer=Kg(r.kernelRegularizer),o}return mh(e,t),e.prototype.build=function(t){t=sm(t);var e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new kh("The channel dimension of the input should be defined. Found "+t[e]);var n,r=t[e],o=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(n={},n[e]=r,n)}],this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){var e;t=am(t);var r=null==n.bias?null:n.bias.read();if(1===n.rank)e=function(t,e,n,r,o,i,a){return void 0===r&&(r=1),void 0===o&&(o="valid"),void 0===a&&(a=1),Object(hh.Qb)(function(){if(null==i&&(i="channelsLast"),ad(i),3!==t.shape.length)throw new kh("The input of a conv1dWithBias operation should be 3, but is "+t.shape.length+" instead.");if(3!==e.shape.length)throw new kh("The kernel for a conv1dWithBias operation should be 3, but is "+e.shape.length+" instead");if(null!=n&&1!==n.shape.length)throw new kh("The bias for a conv1dWithBias operation should be 1, but is "+e.shape.length+" instead");if("channelsFirst"===i&&(t=Object(hh.Tb)(t,[0,2,1])),"causal"===o)throw new Th("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=Object(hh.C)(t,e,r,"same"===o?"same":"valid","NWC",a);return null!=n&&(s=Dd(s,n)),s})}(t,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)e=function(t,e,n,r,o,i,a){return void 0===r&&(r=[1,1]),void 0===o&&(o="valid"),Object(hh.Qb)(function(){if(null==i&&(i="channelsLast"),ad(i),3!==t.rank&&4!==t.rank)throw new kh("conv2dWithBias expects input to be of rank 3 or 4, but received "+t.rank+".");if(3!==e.rank&&4!==e.rank)throw new kh("conv2dWithBias expects kernel to be of rank 3 or 4, but received "+t.rank+".");var s=Jg(t,i);if("causal"===o)throw new Th("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return s=Object(hh.D)(s,e,r,"same"===o?"same":"valid","NHWC",a),null!=n&&(s=Dd(s,n)),"channelsFirst"===i&&(s=Object(hh.Tb)(s,[0,3,1,2])),s})}(t,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else if(3===n.rank)throw new Th("3D convolution is not implemented yet.");return null!=n.activation&&(e=n.activation.apply(e)),e})},e.prototype.computeOutputShape=function(t){t=sm(t);for(var e=[],n="channelsLast"===this.dataFormat?t.slice(1,t.length-1):t.slice(2),r=0;r<n.length;++r){var o=Xg(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);e.push(o)}var i=[t[0]];return"channelsLast"===this.dataFormat?(i=i.concat(e)).push(this.filters):(i.push(this.filters),i=i.concat(e)),i},e.prototype.getConfig=function(){var e={filters:this.filters,kernelInitializer:nm(this.kernelInitializer),kernelRegularizer:Hg(this.kernelRegularizer),kernelConstraint:ed(this.kernelConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.verifyConfig=function(t){if(!("filters"in t)||"number"!=typeof t.filters||t.filters<1)throw new kh("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(t.filters))},e}(Yg),ev=function(t){function e(n){var r=t.call(this,2,n)||this;return e.verifyConfig(n),r}return mh(e,t),e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,e},e.verifyConfig=function(t){if("number"!=typeof t.kernelSize&&!Gh(t.kernelSize,"number",1,2))throw new kh("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(t.kernelSize)+".")},e.className="Conv2D",e}(tv);hh.qb.SerializationMap.register(ev);var nv=function(t){function e(e){var n=t.call(this,e)||this;if(n.inputSpec=[new hm({ndim:4})],"same"!==n.padding&&"valid"!==n.padding)throw new kh("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+n.padding);return n}return mh(e,t),e.prototype.build=function(t){if(4!==(t=sm(t)).length)throw new kh("Input should have rank 4; Received input shape: "+JSON.stringify(t));var e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new kh("The channel dimension of the inputs should be defined. Found `None`.");var n,r=t[e],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new hm({ndim:4,axes:(n={},n[e]=r,n)})],this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){var e=am(t);if(4!==e.shape.length)throw new kh("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+e.shape.length);var r,o,i=e.shape;"channelsFirst"===n.dataFormat?(r=2,o=3):(r=1,o=2);var a=i[o],s=n.kernelSize[1],u=n.strides[1],l=[i[0],Zg(i[r],n.strides[0],n.kernelSize[0],n.padding),Zg(a,u,s,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(e=Object(hh.Tb)(e,[0,2,3,1]));var c=Object(hh.E)(e,n.kernel.read(),l,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(c=Object(hh.Tb)(c,[0,3,1,2])),null!=n.bias&&(c=Dd(c,n.bias.read(),n.dataFormat)),null!=n.activation&&(c=n.activation.apply(c)),c})},e.prototype.computeOutputShape=function(t){var e,n,r,o=(t=sm(t)).slice();"channelsFirst"===this.dataFormat?(e=1,n=2,r=3):(e=3,n=1,r=2);var i=this.kernelSize[0],a=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return o[e]=this.filters,o[n]=Zg(o[n],s,i,this.padding),o[r]=Zg(o[r],u,a,this.padding),o},e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.dilationRate,e},e.className="Conv2DTranspose",e}(ev);hh.qb.SerializationMap.register(nv);var rv=function(t){function e(e){return t.call(this,2,e)||this}return mh(e,t),e.className="SeparableConv2D",e}(function(t){function e(e,n){var r=t.call(this,e,n)||this;if(r.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",r.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",r.depthwiseKernel=null,r.pointwiseKernel=null,null==n.filters)throw new kh("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=n.kernelInitializer||null!=n.kernelRegularizer||null!=n.kernelConstraint)throw new kh("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=n.padding&&"same"!==n.padding&&"valid"!==n.padding)throw new kh("SeparableConv"+r.rank+"D supports only padding modes: 'same' and 'valid', but received "+JSON.stringify(n.padding));return r.depthMultiplier=null==n.depthMultiplier?1:n.depthMultiplier,r.depthwiseInitializer=rm(n.depthwiseInitializer||r.DEFAULT_DEPTHWISE_INITIALIZER),r.depthwiseRegularizer=Kg(n.depthwiseRegularizer),r.depthwiseConstraint=rd(n.depthwiseConstraint),r.pointwiseInitializer=rm(n.depthwiseInitializer||r.DEFAULT_POINTWISE_INITIALIZER),r.pointwiseRegularizer=Kg(n.pointwiseRegularizer),r.pointwiseConstraint=rd(n.pointwiseConstraint),r}return mh(e,t),e.prototype.build=function(t){if((t=sm(t)).length<this.rank+2)throw new kh("Inputs to SeparableConv"+this.rank+"D should have rank "+(this.rank+2)+", but received input shape: "+JSON.stringify(t));var e,n="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[n]||t[n]<0)throw new kh("The channel dimension of the inputs should be defined, but found "+JSON.stringify(t[n]));for(var r=t[n],o=this.kernelSize.concat([r,this.depthMultiplier]),i=[],a=0;a<this.rank;++a)i.push(1);i.push(r*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.inputSpec=[new hm({ndim:this.rank+2,axes:(e={},e[n]=r,e)})],this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){var e;if(t=am(t),1===n.rank)throw new Th("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(t=Object(hh.Tb)(t,[0,2,3,1])),e=Object(hh.pb)(t,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(e=Dd(e,n.bias.read(),n.dataFormat)),null!=n.activation&&(e=n.activation.apply(e)),"channelsFirst"===n.dataFormat&&(e=Object(hh.Tb)(e,[0,3,1,2])),e})},e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=nm(this.depthwiseInitializer),e.pointwiseInitializer=nm(this.pointwiseInitializer),e.depthwiseRegularizer=Hg(this.depthwiseRegularizer),e.pointwiseRegularizer=Hg(this.pointwiseRegularizer),e.depthwiseConstraint=ed(this.depthwiseConstraint),e.pointwiseConstraint=ed(this.pointwiseConstraint),e},e.className="SeparableConv",e}(tv));hh.qb.SerializationMap.register(rv);var ov=function(t){function e(n){var r=t.call(this,1,n)||this;return e.verifyConfig(n),r.inputSpec=[{ndim:3}],r}return mh(e,t),e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,delete e.dataFormat,e},e.verifyConfig=function(t){if("number"!=typeof t.kernelSize&&!Gh(t.kernelSize,"number",1,1))throw new kh("Conv1D expects config.kernelSize to be number or number[] with length 1, but received "+JSON.stringify(t.kernelSize)+".")},e.className="Conv1D",e}(tv);hh.qb.SerializationMap.register(ov);var iv=function(t){function e(e){var n=t.call(this,e)||this;return n.cropping="number"==typeof e.cropping?[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:e.cropping,n.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,n.inputSpec=[{ndim:4}],n}return mh(e,t),e.prototype.computeOutputShape=function(t){return"channelsFirst"===this.dataFormat?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){return t=am(t),"channelsLast"===n.dataFormat?Sd(Sd(t,n.cropping[0][0],t.shape[1]-n.cropping[0][0]-n.cropping[0][1],2),n.cropping[1][0],t.shape[2]-n.cropping[1][1]-n.cropping[1][0],3):Sd(Sd(t,n.cropping[0][0],t.shape[2]-n.cropping[0][0]-n.cropping[0][1],3),n.cropping[1][0],t.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)})},e.prototype.getConfig=function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Cropping2D",e}(ym);hh.qb.SerializationMap.register(iv);var av=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_SIZE=[2,2],n.inputSpec=[{ndim:4}],n.size=null==e.size?n.DEFAULT_SIZE:e.size,n.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,n}return mh(e,t),e.prototype.computeOutputShape=function(t){if("channelsFirst"===this.dataFormat){var e=null==t[2]?null:this.size[0]*t[2],n=null==t[3]?null:this.size[1]*t[3];return[t[0],t[1],e,n]}return[t[0],e=null==t[1]?null:this.size[0]*t[1],n=null==t[2]?null:this.size[1]*t[2],t[3]]},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){var e=am(t),r=e.shape;if("channelsFirst"===n.dataFormat){e=Object(hh.Tb)(e,[0,2,3,1]);var o=n.size[0]*r[2],i=n.size[1]*r[3],a=e.resizeNearestNeighbor([o,i]);return Object(hh.Tb)(a,[0,3,1,2])}return e.resizeNearestNeighbor([o=n.size[0]*r[1],i=n.size[1]*r[2]])})},e.prototype.getConfig=function(){var e={size:this.size,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="UpSampling2D",e}(ym);hh.qb.SerializationMap.register(av);var sv=function(t){function e(e){var n=t.call(this,2,e)||this;return n.depthwiseKernel=null,n.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,n.depthwiseInitializer=rm(e.depthwiseInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.depthwiseConstraint=rd(e.depthwiseConstraint),n.depthwiseRegularizer=Kg(e.depthwiseRegularizer),n}return mh(e,t),e.prototype.build=function(t){if((t=sm(t)).length<4)throw new kh("Inputs to DepthwiseConv2D should have rank 4. Received input shape: "+JSON.stringify(t)+".");var e="channelsFirst"===this.dataFormat?1:3;if(null==t[e]||t[e]<0)throw new kh("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not ("+t[e]+").");var n=t[e];this.depthwiseKernel=this.addWeight("depthwise_kernel",[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier],null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){var e=function(t,e,n,r,o,i){return void 0===n&&(n=[1,1]),void 0===r&&(r="valid"),Object(hh.Qb)(function(){null==o&&(o="channelsLast"),ad(o);var i=Jg(t,o);if(4!==t.rank)throw new kh("Input for depthwiseConv2d is required to be 4-D, but is instead "+t.rank+"-D");if(4!==e.rank)throw new kh("depthwiseKernel is required to be 4-D, but is instead "+e.rank+"-D");return i=Object(hh.H)(i,e,n,"same"===r?"same":"valid","NHWC",null),"channelsFirst"===o&&(i=Object(hh.Tb)(i,[0,3,1,2])),i})}(t=am(t),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat);return n.useBias&&(e=Dd(e,n.bias.read(),n.dataFormat)),null!=n.activation&&(e=n.activation.apply(e)),e})},e.prototype.computeOutputShape=function(t){t=sm(t);var e="channelsFirst"===this.dataFormat?t[3]:t[2],n="channelsFirst"===this.dataFormat?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,r=Xg("channelsFirst"===this.dataFormat?t[2]:t[1],this.kernelSize[0],this.padding,this.strides[0]),o=Xg(e,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[t[0],n,r,o]:[t[0],r,o,n]},e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=nm(this.depthwiseInitializer),e.depthwiseRegularizer=Hg(this.depthwiseRegularizer),e.depthwiseConstraint=ed(this.depthwiseRegularizer),e},e.className="DepthwiseConv2D",e}(Yg);hh.qb.SerializationMap.register(sv);var uv=function(t){function e(e){var n=t.call(this,e)||this;if(n.rate=Math.max(Math.min(e.rate,1),0),n.rateScalar=Sh(n.rate),n.noiseShape=e.noiseShape,n.seed=e.seed,null!=n.seed)throw new Th("Non-default seed is not implemented in Dropout layer yet: "+n.seed);return n.supportsMasking=!0,n}return mh(e,t),e.prototype.getNoiseShape=function(t){if(null==this.noiseShape)return this.noiseShape;for(var e=t.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?e[r]:this.noiseShape[r]);return n},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){n.invokeCallHook(t,e);var r=am(t);if(null!=n.noiseShape&&!hh.Wb.arraysEqual(r.shape,n.noiseShape))throw new Th("Non-default noise shape is not implemented in Dropout layer yet: "+JSON.stringify(n.noiseShape));if(0<n.rate&&n.rate<1){var o=null!=e.training&&e.training,i=n.getNoiseShape(r);return Ld(function(){return jd(r,n.rateScalar,i,n.seed)},function(){return r},o)}return t})},e.prototype.getConfig=function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Dropout",e}(ym);hh.qb.SerializationMap.register(uv);var lv=function(t){function e(e){var n=t.call(this,e)||this;if(n.activation=null,n.useBias=!0,n.kernel=null,n.bias=null,n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var r=null;null!=e.batchSize&&(r=e.batchSize),n.batchInputShape=[r,e.inputDim]}return n.units=e.units,n.activation=zg(e.activation),null!=e.useBias&&(n.useBias=e.useBias),n.kernelInitializer=rm(e.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.biasInitializer=rm(e.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelConstraint=rd(e.kernelConstraint),n.biasConstraint=rd(e.biasConstraint),n.kernelRegularizer=Kg(e.kernelRegularizer),n.biasRegularizer=Kg(e.biasRegularizer),n.activityRegularizer=Kg(e.activityRegularizer),n.inputSpec=[{minNDim:2}],n}return mh(e,t),e.prototype.build=function(t){var e,n=(t=sm(t))[t.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(e={},e[-1]=n,e)}],this.built=!0},e.prototype.computeOutputShape=function(t){var e=(t=sm(t)).slice();return e[e.length-1]=this.units,e},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){n.invokeCallHook(t,e);var r=Ad(am(t),n.kernel.read());return null!=n.bias&&(r=Dd(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r)),r})},e.prototype.getConfig=function(){var e={units:this.units,activation:jg(this.activation),useBias:this.useBias,kernelInitializer:nm(this.kernelInitializer),biasInitializer:nm(this.biasInitializer),kernelRegularizer:Hg(this.kernelRegularizer),biasRegularizer:Hg(this.biasRegularizer),activityRegularizer:Hg(this.activityRegularizer),kernelConstraint:ed(this.kernelConstraint),biasConstraint:ed(this.biasConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Dense",e}(ym);hh.qb.SerializationMap.register(lv);var cv=function(t){function e(e){var n=t.call(this,e||{})||this;return n.inputSpec=[{minNDim:3}],n}return mh(e,t),e.prototype.computeOutputShape=function(t){for(var e=0,n=(t=sm(t)).slice(1);e<n.length;e++)if(null==n[e])throw new kh('The shape of the input to "Flatten" is not fully defined (got '+t.slice(1)+'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.');return[t[0],yd(t,1)]},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){return n.invokeCallHook(t,e),function(t){if(t.rank<=1)throw new kh("batchFlatten requires a minimum rank of 2. Got rank: "+t.rank+".");var e=[t.shape[0],yd(t.shape,1)];return t.reshape(e)}(am(t))})},e.className="Flatten",e}(ym);hh.qb.SerializationMap.register(cv);var pv=function(t){function e(e){var n=t.call(this,e)||this;return n.supportsMasking=!0,n.activation=zg(e.activation),n}return mh(e,t),e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){n.invokeCallHook(t,e);var r=am(t);return n.activation.apply(r)})},e.prototype.getConfig=function(){var e={activation:jg(this.activation)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Activation",e}(ym);hh.qb.SerializationMap.register(pv);var fv=function(t){function e(e){var n=t.call(this,e)||this;return n.n=e.n,n.inputSpec=[{ndim:2}],n}return mh(e,t),e.prototype.computeOutputShape=function(t){return[t[0],this.n,t[1]]},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){return function(t,e){return Object(hh.Qb)(function(){if(2!==t.shape.length)throw new kh("repeat() expects a rank-2 tensor, but received a rank-"+t.shape.length+" tensor.");return kd(Cd(t,1),[1,e,1])})}(t=am(t),n.n)})},e.prototype.getConfig=function(){var e={n:this.n},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="RepeatVector",e}(ym);hh.qb.SerializationMap.register(fv);var hv=function(t){function e(e){var n=t.call(this,e)||this;n.targetShape=e.targetShape;for(var r=0;r<n.targetShape.length;++r)n.isUnknown(n.targetShape[r])&&(n.targetShape[r]=null);return n}return mh(e,t),e.prototype.isUnknown=function(t){return t<0||null==t},e.prototype.fixUnknownDimension=function(t,e){for(var n="Total size of new array must be unchanged.",r=e.slice(),o=1,i=null,a=0;a<r.length;++a){var s=r[a];if(this.isUnknown(s)){if(null!==i)throw new kh("Can only specifiy one unknown dimension.");i=a}else o*=s}var u=yd(t);if(null!==i){if(0===o||u%o!=0)throw new kh(n);r[i]=u/o}else if(u!==o)throw new kh(n);return r},e.prototype.computeOutputShape=function(t){for(var e=!1,n=0;n<t.length;++n)if(this.isUnknown(t[n])){e=!0;break}return e?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){n.invokeCallHook(t,e);var r=am(t),o=r.shape,i=o.slice(0,1).concat(n.fixUnknownDimension(o.slice(1),n.targetShape));return r.reshape(i)})},e.prototype.getConfig=function(){var e={targetShape:this.targetShape},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Reshape",e}(ym);hh.qb.SerializationMap.register(hv);var dv=function(t){function e(e){var n=t.call(this,e)||this;if(n.embeddings=null,n.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var r=null;null!=e.batchSize&&(r=e.batchSize),n.batchInputShape=null==e.inputLength?[r,null]:[r].concat(Lh(e.inputLength))}return n.inputDim=e.inputDim,n.outputDim=e.outputDim,n.embeddingsInitializer=rm(e.embeddingsInitializer||n.DEFAULT_EMBEDDINGS_INITIALIZER),n.embeddingsRegularizer=Kg(e.embeddingsRegularizer),n.activityRegularizer=Kg(e.activityRegularizer),n.embeddingsConstraint=rd(e.embeddingsConstraint),n.maskZero=e.maskZero,n.inputLength=e.inputLength,n}return mh(e,t),e.prototype.build=function(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},e.prototype.warnOnIncompatibleInputShape=function(t){},e.prototype.computeMask=function(t,e){throw new Th("computeMask has not been implemented for Embedding yet")},e.prototype.computeOutputShape=function(t){if(t=sm(t),null==this.inputLength)return t.concat([this.outputDim]);var e=Lh(this.inputLength);if(e.length!==t.length-1)throw new kh('"inputLength" is '+this.inputLength+", but received input shape has shape "+t);for(var n=0,r=0;r<e.length;++r){var o=e[r],i=t[r+1];if(null!=o&&null!=i&&o!==i)throw new kh('"inputLength" is '+this.inputLength+", but received input shape has shape "+t);null==o&&(e[n]=i),n++}return[t[0]].concat(e,[this.outputDim])},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){n.invokeCallHook(t,e);var r=am(t);return"int32"!==r.dtype&&(r=Od(r,"int32")),Rd(n.embeddings.read(),r.as1D()).reshape(sm(n.computeOutputShape(r.shape)))})},e.prototype.getConfig=function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:nm(this.embeddingsInitializer),embeddingsRegularizer:Hg(this.embeddingsRegularizer),activityRegularizer:Hg(this.activityRegularizer),embeddingsConstraint:ed(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Embedding",e}(ym);hh.qb.SerializationMap.register(dv);var mv=function(t){function e(e){var n=t.call(this,e||{})||this;return n.supportsMasking=!0,n}return mh(e,t),e.prototype.mergeFunction=function(t){throw new Th},e.prototype.computeElementwiseOpOutputShape=function(t,e){if(null==t||null==e)return null;if(t.length<e.length)return this.computeElementwiseOpOutputShape(e,t);if(0===e.length)return t;for(var n=t.slice(0,t.length-e.length),r=0;r<e.length;++r){var o=t[t.length-e.length+r],i=e[r];if(null==o||null==i||o<0||i<0)n.push(null);else if(1===o)n.push(i);else if(1===i)n.push(o);else{if(o!==i)throw new kh("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(e));n.push(o)}}return n},e.prototype.build=function(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[sm(t)]),(t=t).length<2)throw new kh("A merge layer should be called on an Array of at least 2 inputs. Got "+t.length+" input(s).");for(var e=[],n=0,r=t;n<r.length;n++)null!=(a=r[n])&&null!==a[0]&&e.push(a[0]);if((e=qh(e)).length>1)throw new kh("Can not merge tensors with different batch sizes. Got tensors with shapes: "+JSON.stringify(t)+".");for(var o=null==t[0]?null:t[0].slice(1),i=1;i<t.length;++i){var a=null==t[i]?null:t[i].slice(1);o=this.computeElementwiseOpOutputShape(o,a)}var s=t.map(function(t){return t.length});this.reshapeRequired=-1!==t.indexOf(null)||1!==qh(s).length},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){if(t=t,n.reshapeRequired){var e=[],r=t.map(function(t){return t.rank});if(-1===r.indexOf(null)){for(var o=xd(r),i=0,a=t;i<a.length;i++){for(var s=(f=a[i]).rank,u=0;u<o-s;++u)f=Cd(f,1);e.push(f)}return n.mergeFunction(e)}for(var l=!1,c=0,p=t;c<p.length;c++){var f;if(null==(s=(f=p[c]).rank)){var h=f.shape,d=h[0],m=h.slice(1).concat([d]),g=f.reshape([d].concat(yd(h.slice(1))));g=(g=Object(hh.Tb)(g,[1,0])).reshape(m),e.push(g),l=!0}else if(s>1){var v=_d(1,s).concat([0]);e.push(Object(hh.Tb)(f,v)),l=!0}else e.push(f)}var y=n.mergeFunction(e),b=y.rank;if(l)if(null==b){var w=y.shape;m=[d=w[w.length-1]].concat(w.slice(0,w.length-1)),y=Object(hh.Tb)(y.reshape([-1,d]),[1,0]).reshape(m)}else b>1&&(v=[b-1].concat(_d(0,b-1)),y=Object(hh.Tb)(y,v));return y}return n.mergeFunction(t)})},e.prototype.computeOutputShape=function(t){var e;e=null==(t=t)[0]?null:t[0].slice(1);for(var n=1;n<t.length;++n){var r=null==t[n]?null:t[n].slice(1);e=this.computeElementwiseOpOutputShape(e,r)}for(var o=[],i=0,a=t;i<a.length;i++)null!=(r=a[i])&&null!==r[0]&&o.push(r[0]);return 1===(o=qh(o)).length?o.concat(e):[null].concat(e)},e}(ym),gv=function(t){function e(e){return t.call(this,e)||this}return mh(e,t),e.prototype.mergeFunction=function(t){return Object(hh.Qb)(function(){for(var e=Object(hh.ac)(t[0].shape),n=0,r=t;n<r.length;n++){var o=r[n];e=Object(hh.f)(e,o)}return e})},e.className="Add",e}(mv);hh.qb.SerializationMap.register(gv);var vv=function(t){function e(e){return t.call(this,e)||this}return mh(e,t),e.prototype.mergeFunction=function(t){return Object(hh.Qb)(function(){for(var e=Object(hh.bb)(t[0].shape),n=0,r=t;n<r.length;n++){var o=r[n];e=Object(hh.Va)(e,o)}return e})},e.className="Multiply",e}(mv);hh.qb.SerializationMap.register(vv);var yv=function(t){function e(e){return t.call(this,e)||this}return mh(e,t),e.prototype.mergeFunction=function(t){return Object(hh.Qb)(function(){for(var e=Object(hh.ac)(t[0].shape),n=0,r=t;n<r.length;n++){var o=r[n];e=Object(hh.f)(e,o)}return Object(hh.Va)(Sh(1/t.length),e)})},e.className="Average",e}(mv);hh.qb.SerializationMap.register(yv);var bv=function(t){function e(e){return t.call(this,e)||this}return mh(e,t),e.prototype.mergeFunction=function(t){return Object(hh.Qb)(function(){for(var e=t[0],n=1;n<t.length;++n)e=Object(hh.Oa)(e,t[n]);return e})},e.className="Maximum",e}(mv);hh.qb.SerializationMap.register(bv);var wv=function(t){function e(e){return t.call(this,e)||this}return mh(e,t),e.prototype.mergeFunction=function(t){return Object(hh.Qb)(function(){for(var e=t[0],n=1;n<t.length;++n)e=Object(hh.Ra)(e,t[n]);return e})},e.className="Minimum",e}(mv);hh.qb.SerializationMap.register(wv);var xv=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_AXIS=-1,null==e&&(e={}),n.axis=null==e.axis?n.DEFAULT_AXIS:e.axis,n.supportsMasking=!0,n.reshapeRequired=!1,n}return mh(e,t),e.prototype.build=function(t){if(!Array.isArray(t)||!Array.isArray(t[0])||1===t.length)throw new kh("A `Concatenate` layer should be called on a list of at least 2 inputs");for(var e=!0,n=0,r=t=t;n<r.length;n++)if(null!=(c=r[n])){e=!1;break}if(!e){for(var o=[],i=0;i<t.length;++i){var a=t[i].slice();a.splice(this.axis,1);for(var s=!1,u=0,l=o;u<l.length;u++){var c=l[u];if(hh.Wb.arraysEqual(c,a)){s=!0;break}}s||o.push(a)}if(o.length>1)throw new kh("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}},e.prototype.mergeFunction=function(t){var e=this;return Object(hh.Qb)(function(){return Id(t,e.axis)})},e.prototype.computeOutputShape=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))throw new kh("A `Concatenate` layer should be called on a list of inputs.");for(var e=t,n=e[0].slice(),r=this.axis<0?n.length+this.axis:this.axis,o=0,i=e.slice(1);o<i.length;o++){var a=i[o];if(null==n[r]||null==a[r]){n[r]=null;break}n[r]+=a[r]}return n},e.prototype.getConfig=function(){var e={axis:this.axis},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Concatenate",e}(mv);function _v(t,e,n,r,o,i){var a;if(void 0===i&&(i=.001),2===t.rank)a=Object(hh.q)(t,e,n,i,o,r);else if(3===t.rank)a=Object(hh.r)(t,e,n,i,o,r);else{if(4!==t.rank)throw new Th("batchNormalization is not implememnted for array of rank "+t.rank+" yet");a=Object(hh.s)(t,e,n,i,o,r)}return a}hh.qb.SerializationMap.register(xv);var Ov=function(t){function e(e){var n=t.call(this,e)||this;return n.supportsMasking=!0,n.axis=null==e.axis?-1:e.axis,n.momentum=null==e.momentum?.99:e.momentum,n.epsilon=null==e.epsilon?.001:e.epsilon,n.center=null==e.center||e.center,n.scale=null==e.scale||e.scale,n.betaInitializer=rm(e.betaInitializer||"zeros"),n.gammaInitializer=rm(e.gammaInitializer||"ones"),n.movingMeanInitializer=rm(e.movingMeanInitializer||"zeros"),n.movingVarianceInitializer=rm(e.movingVarianceInitializer||"ones"),n.betaConstraint=rd(e.betaConstraint),n.gammaConstraint=rd(e.gammaConstraint),n.betaRegularizer=Kg(e.betaRegularizer),n.gammaRegularizer=Kg(e.gammaRegularizer),n.stepCount=0,n}return mh(e,t),e.prototype.build=function(t){t=sm(t);var e=this.axis>=0?this.axis:this.axis+t.length,n=t[e];if(null==n)throw new kh("Axis "+e+" of input tensor should have a defined dimension but the layer received an input with shape "+JSON.stringify(t)+".");this.inputSpec=[new hm({ndim:t.length,axes:(r={},r[e]=n,r)})];var r,o=[n];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){var r=null!=e.training&&e.training,o=am(t),i=o.shape,a=i.length,s=_d(0,a),u=n.axis>=0?n.axis:n.axis+a;s.splice(u,1);var l=Rh(1,a);l[u]=i[u];var c=s.slice();c.sort();var p=!hh.Wb.arraysEqual(c,_d(0,a).slice(0,a-1));if(!r)return function(){if(p){var t=n.movingMean.read().reshape(l),e=n.movingVariance.read().reshape(l),r=n.center?n.beta.read().reshape(l):null,i=n.scale?n.gamma.read().reshape(l):null;return _v(o,t,e,r,i,n.epsilon)}return _v(o,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var f=function(t,e,n,r,o){return void 0===o&&(o=.001),hh.Wb.arraysEqual(r.slice().sort(),_d(0,t.rank-1))?function(t,e,n,r,o){return void 0===o&&(o=.001),Object(hh.Qb)(function(){var i=Object(hh.Ta)(t,r),a=i.mean,s=i.variance;return[_v(t,a,s,n,e,o),a,s]})}(t,e,n,r,o):function(t,e,n,r,o){return void 0===o&&(o=.001),Object(hh.Qb)(function(){for(var i=Object(hh.Ta)(t,r),a=i.mean,s=i.variance,u=[],l=0,c=_d(0,t.rank);l<c.length;l++){var p=c[l];-1!==r.indexOf(p)?u.push(1):u.push(t.shape[p])}var f=a.reshape(u),h=s.reshape(u),d=null==e?null:e.reshape(u),m=null==n?null:n.reshape(u);return[_v(t,f,h,m,d,o),a,s]})}(t,e,n,r,o)}(o,n.gamma.read(),n.beta.read(),s,n.epsilon),h=f[0],d=f[1],m=f[2],g=yd(s.map(function(t){return o.shape[t]})),v=m.mul(Sh(g/(g-(1+n.epsilon))));return function(){n.stepCount++;var t=Object(hh.Ua)(n.movingMean.read(),d,n.momentum,n.stepCount);n.movingMean.write(t);var e=Object(hh.Ua)(n.movingVariance.read(),v,n.momentum,n.stepCount);n.movingVariance.write(e)}(),h})},e.prototype.getConfig=function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:nm(this.betaInitializer),gammaInitializer:nm(this.gammaInitializer),movingMeanInitializer:nm(this.movingMeanInitializer),movingVarianceInitializer:nm(this.movingVarianceInitializer),betaRegularizer:Hg(this.betaRegularizer),gammaRegularizer:Hg(this.gammaRegularizer),betaConstraint:ed(this.betaConstraint),gammaConstraint:ed(this.gammaConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="BatchNormalization",e}(ym);hh.qb.SerializationMap.register(Ov);var Cv=function(t){function e(e){var n=this;if(null==e&&(e={}),(n=t.call(this,e)||this).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)n.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)n.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new kh("ZeroPadding2D expects padding to be a length-2 array, but received a length-"+e.padding.length+" array.");var r=void 0,o=void 0;if("number"==typeof e.padding[0])r=[e.padding[0],e.padding[0]],o=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new kh("ZeroPadding2D expects height padding to be a length-2 array, but received a length-"+e.padding[0].length+" array.");if(r=e.padding[0],2!==e.padding[1].length)throw new kh("ZeroPadding2D expects width padding to be a length-2 array, but received a length-"+e.padding[1].length+" array.");o=e.padding[1]}n.padding=[r,o]}return n.inputSpec=[new hm({ndim:4})],n}return mh(e,t),e.prototype.computeOutputShape=function(t){return t=sm(t),"channelsFirst"===this.dataFormat?[t[0],t[1],null!=t[2]&&t[2]>=0?t[2]+this.padding[0][0]+this.padding[0][1]:null,null!=t[3]&&t[3]>=0?t[3]+this.padding[1][0]+this.padding[1][1]:null]:[t[0],null!=t[1]&&t[1]>=0?t[1]+this.padding[0][0]+this.padding[0][1]:null,null!=t[2]&&t[2]>=0?t[2]+this.padding[1][0]+this.padding[1][1]:null,t[3]]},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){return function(t,e,n){return Object(hh.Qb)(function(){if(4!==t.rank)throw new kh("temporalPadding expects input tensor to be 4-D, but received a "+t.rank+"-D tensor.");if(null==e&&(e=[[1,1],[1,1]]),2!==e.length||2!==e[0].length||2!==e[1].length)throw new kh("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new kh("Unknown data format: "+n+". Supported data formats are 'channelsLast' and 'channelsFirst.");var r;return r="channelsFirst"===n?[[0,0],[0,0],e[0],e[1]]:[[0,0],e[0],e[1],[0,0]],Object(hh.db)(t,r)})}(am(t),n.padding,n.dataFormat)})},e.prototype.getConfig=function(){var e={padding:this.padding,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="ZeroPadding2D",e}(ym);function Ev(t,e,n,r,o,i){return Object(hh.Qb)(function(){var a;ad(o),Hh(ld,"PoolMode",i),ud(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==o&&(o="channelsLast"),null==i&&(i="max"),t=Jg(t,o);var s="same"===r?"same":"valid";return a="max"===i?Object(hh.Na)(t,e,n,s):Object(hh.o)(t,e,n,s),"channelsFirst"===o&&(a=Object(hh.Tb)(a,[0,3,1,2])),a})}hh.qb.SerializationMap.register(Cv);var Nv=function(t){function e(e){var n=this;if(null==e.poolSize&&(e.poolSize=2),n=t.call(this,e)||this,"number"==typeof e.poolSize)n.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new kh("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.poolSize));n.poolSize=e.poolSize}if(null==e.strides)n.strides=n.poolSize;else if("number"==typeof e.strides)n.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new kh("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.strides));n.strides=e.strides}return n.padding=null==e.padding?"valid":e.padding,ud(n.padding),n.inputSpec=[new hm({ndim:3})],n}return mh(e,t),e.prototype.computeOutputShape=function(t){var e=Xg((t=sm(t))[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],e,t[2]]},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){n.invokeCallHook(t,e),t=Cd(am(t),2);var r=n.poolingFunction(am(t),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return Object(hh.Gb)(r,[2])})},e.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(ym),Sv=function(t){function e(e){return t.call(this,e)||this}return mh(e,t),e.prototype.poolingFunction=function(t,e,n,r,o){return ad(o),ud(r),Ev(t,e,n,r,o,"max")},e.className="MaxPooling1D",e}(Nv);hh.qb.SerializationMap.register(Sv);var Iv=function(t){function e(e){return t.call(this,e)||this}return mh(e,t),e.prototype.poolingFunction=function(t,e,n,r,o){return ad(o),ud(r),Ev(t,e,n,r,o,"avg")},e.className="AveragePooling1D",e}(Nv);hh.qb.SerializationMap.register(Iv);var Pv=function(t){function e(e){var n=this;if(null==e.poolSize&&(e.poolSize=[2,2]),(n=t.call(this,e)||this).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)n.strides=n.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new kh("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+e.strides.length+".");n.strides=e.strides}else n.strides=[e.strides,e.strides];return n.padding=null==e.padding?"valid":e.padding,n.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,ad(n.dataFormat),ud(n.padding),n.inputSpec=[new hm({ndim:4})],n}return mh(e,t),e.prototype.computeOutputShape=function(t){t=sm(t);var e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2];return e=Xg(e,this.poolSize[0],this.padding,this.strides[0]),n=Xg(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n]:[t[0],e,n,t[3]]},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){return n.invokeCallHook(t,e),n.poolingFunction(am(t),n.poolSize,n.strides,n.padding,n.dataFormat)})},e.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(ym),kv=function(t){function e(e){return t.call(this,e)||this}return mh(e,t),e.prototype.poolingFunction=function(t,e,n,r,o){return ad(o),ud(r),Ev(t,e,n,r,o,"max")},e.className="MaxPooling2D",e}(Pv);hh.qb.SerializationMap.register(kv);var Tv=function(t){function e(e){return t.call(this,e)||this}return mh(e,t),e.prototype.poolingFunction=function(t,e,n,r,o){return ad(o),ud(r),Ev(t,e,n,r,o,"avg")},e.className="AveragePooling2D",e}(Pv);hh.qb.SerializationMap.register(Tv);var Av=function(t){function e(e){var n=t.call(this,e)||this;return n.inputSpec=[new hm({ndim:3})],n}return mh(e,t),e.prototype.computeOutputShape=function(t){return[t[0],t[2]]},e.prototype.call=function(t,e){throw new Th},e}(ym),Rv=function(t){function e(e){return t.call(this,e)||this}return mh(e,t),e.prototype.call=function(t,e){return Object(hh.Qb)(function(){var e=am(t);return Object(hh.Pa)(e,1)})},e.className="GlobalAveragePooling1D",e}(Av);hh.qb.SerializationMap.register(Rv);var Mv=function(t){function e(e){return t.call(this,e)||this}return mh(e,t),e.prototype.call=function(t,e){return Object(hh.Qb)(function(){var e=am(t);return Object(hh.Ma)(e,1)})},e.className="GlobalMaxPooling1D",e}(Av);hh.qb.SerializationMap.register(Mv);var Dv=function(t){function e(e){var n=t.call(this,e)||this;return n.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,ad(n.dataFormat),n.inputSpec=[new hm({ndim:4})],n}return mh(e,t),e.prototype.computeOutputShape=function(t){return t=t,"channelsLast"===this.dataFormat?[t[0],t[3]]:[t[0],t[1]]},e.prototype.call=function(t,e){throw new Th},e.prototype.getConfig=function(){var e={dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(ym),jv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){var e=am(t);return"channelsLast"===n.dataFormat?Object(hh.Pa)(e,[1,2]):Object(hh.Pa)(e,[2,3])})},e.className="GlobalAveragePooling2D",e}(Dv);hh.qb.SerializationMap.register(jv);var Lv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){var e=am(t);return"channelsLast"===n.dataFormat?Object(hh.Ma)(e,[1,2]):Object(hh.Ma)(e,[2,3])})},e.className="GlobalMaxPooling2D",e}(Dv);function zv(t,e,n,r){if(Array.isArray(t)){if(null!=e||null!=n)throw new kh("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function o(t){return null==t||Array.isArray(t)?t:[t]}return{inputs:t,initialState:e=o(e),constants:n=o(n)}}function Vv(t,e,n,r,o,i,a,s){void 0===r&&(r=!1),void 0===a&&(a=!1);var u=e.shape.length;if(u<3)throw new kh("Input should be at least 3D, but is "+u+"D.");var l,c,p=[1,0].concat(_d(2,u));if(e=Object(hh.Tb)(e,p),null!=o)throw new Th("The rnn() function of the deeplearn.js backend does not support masking yet.");if(null!=i)throw new Th("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),r&&(e=Object(hh.lb)(e,0));for(var f=n,h=e.shape[0],d=0;d<h;++d){var m=Ed(e,d,1),g=t(m=m.reshape(m.shape.slice(1)),f);c=g[0],l=0===d?c.reshape([1].concat(c.shape)):Pd(l,c.reshape([1].concat(c.shape))),f=g[1]}return[c,Object(hh.Tb)(l,[1,0].concat(_d(2,l.shape.length))),f]}hh.qb.SerializationMap.register(Lv);var Bv=function(t){function e(e){var n,r=t.call(this,e)||this;if(null==e.cell)throw new kh("cell property is missing for the constructor of RNN.");if(null==(n=Array.isArray(e.cell)?new Kv({cells:e.cell}):e.cell).stateSize)throw new kh("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=n,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new hm({ndim:3})],r.stateSpec=null,r.states=null,r.numConstants=null,r}return mh(e,t),e.prototype.getStates=function(){return null==this.states?_d(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(function(t){return null}):this.states},e.prototype.setStates=function(t){this.states=t},e.prototype.computeOutputShape=function(t){om(t)&&(t=t[0]),t=t;var e=this.cell.stateSize;Array.isArray(e)||(e=[e]);var n,r=e[0];if(n=this.returnSequences?[t[0],t[1],r]:[t[0],r],this.returnState){for(var o=[],i=0,a=e;i<a.length;i++)o.push([t[0],a[i]]);return[n].concat(o)}return n},e.prototype.computeMask=function(t,e){throw new Th("computeMask has not been implemented for RNN yet")},e.prototype.build=function(t){if(null!=this.numConstants)throw new Th("Constants support is not implemented in RNN yet.");om(t)&&(t=t[0]),t=t,this.inputSpec[0]=new hm({shape:[this.stateful?t[0]:null,null,t[t.length-1]]});var e,n=[t[0]].concat(t.slice(2));if(this.cell.build(n),e=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!hh.Wb.arraysEqual(this.stateSpec.map(function(t){return t.shape[t.shape.length-1]}),e))throw new kh("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec="+this.stateSpec+"; However cell.stateSize is "+this.cell.stateSize)}else this.stateSpec=e.map(function(t){return new hm({shape:[null,t]})});if(this.stateful)throw new Th("stateful RNN layer is not implemented yet")},e.prototype.resetStates=function(t){var e=this;Object(hh.Qb)(function(){if(!e.stateful)throw new Ih("Cannot call resetState() on an RNN Layer that is not stateful.");var n=e.inputSpec[0].shape[0];if(null==n)throw new kh("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==e.states)e.states=Array.isArray(e.cell.stateSize)?e.cell.stateSize.map(function(t){return Object(hh.ac)([n,t])}):[Object(hh.ac)([n,e.cell.stateSize])];else if(null==t)Array.isArray(e.cell.stateSize)?e.states=e.cell.stateSize.map(function(t){return Object(hh.ac)([n,t])}):e.states[0]=Object(hh.ac)([n,e.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==e.states.length)throw new kh("Layer "+e.name+" expects "+e.states.length+" state(s), but it received "+t.length+" state value(s). Input received: "+t);for(var r=0;r<e.states.length;++r){var o=t[r],i=Array.isArray(e.cell.stateSize)?e.cell.stateSize[r]:e.cell.stateSize,a=[n,i];if(!hh.Wb.arraysEqual(o.shape,a))throw new kh("State "+r+" is incompatible with layer "+e.name+": expected shape="+a+", received shape="+o.shape);e.states[r]=o}}})},e.prototype.apply=function(e,n){var r=null==n?null:n.initialState,o=null==n?null:n.constants;null==n&&(n={});var i=zv(e,r,o,this.numConstants);e=i.inputs,o=i.constants;var a=[],s=[];if(null!=(r=i.initialState)){n.initialState=r,a=a.concat(r),this.stateSpec=[];for(var u=0,l=r;u<l.length;u++)this.stateSpec.push(new hm({shape:l[u].shape}));s=s.concat(this.stateSpec)}if(null!=o&&(n.constants=o,a=a.concat(o),this.numConstants=o.length),a[0]instanceof dm){var c=[e].concat(a),p=this.inputSpec.concat(s),f=this.inputSpec;this.inputSpec=p;var h=t.prototype.apply.call(this,c,n);return this.inputSpec=f,h}return t.prototype.apply.call(this,e,n)},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){var r=null==e?null:e.mask,o=null==e?null:e.training,i=null==e?null:e.initialState;if(t=am(t),null==i){if(n.stateful)throw new Th("stateful RNN layer is not implemented yet.");i=n.getInitialState(t)}if(null!=r)throw new Th("Masking is not implemented for RNN yet");var a=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==a)throw new kh("RNN Layer has "+a+" state(s) but was passed "+i.length+" initial state(s).");n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:o},u=Vv(function(t,e){var r=n.cell.call([t].concat(e),s);return[r[0],r.slice(1)]},t,i,n.goBackwards,null,null,n.unroll),l=u[0],c=u[1],p=u[2];if(n.stateful)throw new Th("stateful RNN layer is not implemented yet");var f=n.returnSequences?c:l;return n.returnState?[f].concat(p):f})},e.prototype.getInitialState=function(t){var e=this;return Object(hh.Qb)(function(){var n=Object(hh.ac)(t.shape);return n=Cd(n=Object(hh.Lb)(n,[1,2])),Array.isArray(e.cell.stateSize)?e.cell.stateSize.map(function(t){return t>1?kd(n,[1,t]):n}):e.cell.stateSize>1?[kd(n,[1,e.cell.stateSize])]:[n]})},Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.trainable?this.cell.trainableWeights:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(e.numConstants=this.numConstants);var n=this.cell.getConfig();e.cell={className:this.cell.getClassName(),config:n};var r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},e.className="RNN",e}(ym);hh.qb.SerializationMap.register(Bv);var Fv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e}(ym),Uv=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=e.units,n.activation=zg(null==e.activation?n.DEFAULT_ACTIVATION:e.activation),n.useBias=null==e.useBias||e.useBias,n.kernelInitializer=rm(e.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=rm(e.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=rm(e.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=Kg(e.kernelRegularizer),n.recurrentRegularizer=Kg(e.recurrentRegularizer),n.biasRegularizer=Kg(e.biasRegularizer),n.kernelConstraint=rd(e.kernelConstraint),n.recurrentConstraint=rd(e.recurrentConstraint),n.biasConstraint=rd(e.biasConstraint),n.dropout=wd([1,xd([0,null==e.dropout?0:e.dropout])]),n.recurrentDropout=wd([1,xd([0,null==e.recurrentDropout?0:e.recurrentDropout])]),n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return mh(e,t),e.prototype.build=function(t){t=sm(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){if(2!==(t=t).length)throw new kh("SimpleRNNCell expects 2 input Tensors, got "+t.length+".");var r=t[1];t=t[0];var o,i=null!=e.training&&e.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Qv(function(){return Object(hh.cb)(t)},n.dropout,i)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Qv(function(){return Object(hh.cb)(r)},n.recurrentDropout,i));var a=n.dropoutMask,s=n.recurrentDropoutMask;o=Ad(null!=a?Object(hh.Va)(t,a):t,n.kernel.read()),null!=n.bias&&(o=Dd(o,n.bias.read())),null!=s&&(r=Object(hh.Va)(r,s));var u=Object(hh.f)(o,Ad(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]})},e.prototype.getConfig=function(){var e={units:this.units,activation:jg(this.activation),useBias:this.useBias,kernelInitializer:nm(this.kernelInitializer),recurrentInitializer:nm(this.recurrentInitializer),biasInitializer:nm(this.biasInitializer),kernelRegularizer:Hg(this.kernelRegularizer),recurrentRegularizer:Hg(this.recurrentRegularizer),biasRegularizer:Hg(this.biasRegularizer),activityRegularizer:Hg(this.activityRegularizer),kernelConstraint:ed(this.kernelConstraint),recurrentConstraint:ed(this.recurrentConstraint),biasConstraint:ed(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="SimpleRNNCell",e}(Fv);hh.qb.SerializationMap.register(Uv);var Wv=function(t){function e(e){return e.cell=new Uv(e),t.call(this,e)||this}return mh(e,t),e.prototype.call=function(e,n){var r=this;return Object(hh.Qb)(function(){return null!=r.cell.dropoutMask&&(Object(hh.I)(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Object(hh.I)(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t.prototype.call.call(r,e,{mask:null==n?null:n.mask,training:null==n?null:n.training,initialState:null==n?null:n.initialState})})},Object.defineProperty(e.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={units:this.units,activation:jg(this.activation),useBias:this.useBias,kernelInitializer:nm(this.kernelInitializer),recurrentInitializer:nm(this.recurrentInitializer),biasInitializer:nm(this.biasInitializer),kernelRegularizer:Hg(this.kernelRegularizer),recurrentRegularizer:Hg(this.recurrentRegularizer),biasRegularizer:Hg(this.biasRegularizer),activityRegularizer:Hg(this.activityRegularizer),kernelConstraint:ed(this.kernelConstraint),recurrentConstraint:ed(this.recurrentConstraint),biasConstraint:ed(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=t.prototype.getConfig.call(this);return delete n.cell,Object.assign(e,n),e},e.className="SimpleRNN",e}(Bv);hh.qb.SerializationMap.register(Wv);var qv=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=e.units,n.activation=zg(void 0===e.activation?n.DEFAULT_ACTIVATION:e.activation),n.recurrentActivation=zg(void 0===e.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),n.useBias=null==e.useBias||e.useBias,n.kernelInitializer=rm(e.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=rm(e.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=rm(e.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=Kg(e.kernelRegularizer),n.recurrentRegularizer=Kg(e.recurrentRegularizer),n.biasRegularizer=Kg(e.biasRegularizer),n.kernelConstraint=rd(e.kernelConstraint),n.recurrentConstraint=rd(e.recurrentConstraint),n.biasConstraint=rd(e.biasConstraint),n.dropout=wd([1,xd([0,null==e.dropout?0:e.dropout])]),n.recurrentDropout=wd([1,xd([0,null==e.recurrentDropout?0:e.recurrentDropout])]),n.implementation=e.implementation,n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return mh(e,t),e.prototype.build=function(t){var e=(t=sm(t))[t.length-1];this.kernel=this.addWeight("kernel",[e,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){if(2!==(t=t).length)throw new kh("GRUCell expects 2 input Tensors (inputs, h, c), got "+t.length+".");var r=null!=e.training&&e.training,o=t[1];t=t[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Qv(function(){return Object(hh.cb)(t)},n.dropout,r,3)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Qv(function(){return Object(hh.cb)(o)},n.recurrentDropout,r,3));var i,a,s,u=n.dropoutMask,l=n.recurrentDropoutMask;if(1===n.implementation){var c=Nd(n.kernel.read(),0,n.units),p=Nd(n.kernel.read(),n.units,n.units),f=Nd(n.kernel.read(),2*n.units,n.units),h=Nd(n.recurrentKernel.read(),0,n.units),d=Nd(n.recurrentKernel.read(),n.units,n.units),m=Nd(n.recurrentKernel.read(),2*n.units,n.units),g=void 0,v=void 0,y=void 0;0<n.dropout&&n.dropout<1?(g=Object(hh.Va)(t,u[0]),v=Object(hh.Va)(t,u[1]),y=Object(hh.Va)(t,u[2])):(g=t,v=t,y=t);var b=Ad(g,c),w=Ad(v,p),x=Ad(y,f);if(n.useBias){var _=Ed(n.bias.read(),0,n.units),O=Ed(n.bias.read(),n.units,n.units),C=Ed(n.bias.read(),2*n.units,n.units);b=Dd(b,_),w=Dd(w,O),x=Dd(x,C)}var E=void 0,N=void 0,S=void 0;0<n.recurrentDropout&&n.recurrentDropout<1?(E=Object(hh.Va)(o,l[0]),N=Object(hh.Va)(o,l[1]),S=Object(hh.Va)(o,l[2])):(E=o,N=o,S=o),i=n.recurrentActivation.apply(Object(hh.f)(b,Ad(E,h))),a=n.recurrentActivation.apply(Object(hh.f)(w,Ad(N,d))),s=n.activation.apply(Object(hh.f)(x,Ad(Object(hh.Va)(a,S),m)))}else{0<n.dropout&&n.dropout<1&&(t=Object(hh.Va)(t,u[0]));var I=Ad(t,n.kernel.read());n.useBias&&(I=Dd(I,n.bias.read())),0<n.dropout&&n.dropout<1&&(o=Object(hh.Va)(o,l[0]));var P=Ad(o,Nd(n.recurrentKernel.read(),0,2*n.units)),k=(b=Nd(I,0,n.units),w=Nd(I,n.units,n.units),Nd(P,0,n.units)),T=Nd(P,n.units,n.units);i=n.recurrentActivation.apply(Object(hh.f)(b,k)),a=n.recurrentActivation.apply(Object(hh.f)(w,T)),x=Nd(I,2*n.units,n.units);var A=Ad(Object(hh.Va)(a,o),Nd(n.recurrentKernel.read(),2*n.units,n.units));s=n.activation.apply(Object(hh.f)(x,A))}var R=Object(hh.f)(Object(hh.Va)(i,o),Object(hh.Va)(Object(hh.f)(Sh(1),Object(hh.Xa)(i)),s));return[R,R]})},e.prototype.getConfig=function(){var e={units:this.units,activation:jg(this.activation),recurrentActivation:jg(this.recurrentActivation),useBias:this.useBias,kernelInitializer:nm(this.kernelInitializer),recurrentInitializer:nm(this.recurrentInitializer),biasInitializer:nm(this.biasInitializer),kernelRegularizer:Hg(this.kernelRegularizer),recurrentRegularizer:Hg(this.recurrentRegularizer),biasRegularizer:Hg(this.biasRegularizer),activityRegularizer:Hg(this.activityRegularizer),kernelConstraint:ed(this.kernelConstraint),recurrentConstraint:ed(this.recurrentConstraint),biasConstraint:ed(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="GRUCell",e}(Fv);hh.qb.SerializationMap.register(qv);var $v=function(t){function e(e){return 0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new qv(e),t.call(this,e)||this}return mh(e,t),e.prototype.call=function(e,n){var r=this;return Object(hh.Qb)(function(){return null!=r.cell.dropoutMask&&(Object(hh.I)(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Object(hh.I)(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t.prototype.call.call(r,e,{mask:null==n?null:n.mask,training:null==n?null:n.training,initialState:null==n?null:n.initialState})})},Object.defineProperty(e.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={units:this.units,activation:jg(this.activation),recurrentActivation:jg(this.recurrentActivation),useBias:this.useBias,kernelInitializer:nm(this.kernelInitializer),recurrentInitializer:nm(this.recurrentInitializer),biasInitializer:nm(this.biasInitializer),kernelRegularizer:Hg(this.kernelRegularizer),recurrentRegularizer:Hg(this.recurrentRegularizer),biasRegularizer:Hg(this.biasRegularizer),activityRegularizer:Hg(this.activityRegularizer),kernelConstraint:ed(this.kernelConstraint),recurrentConstraint:ed(this.recurrentConstraint),biasConstraint:ed(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=t.prototype.getConfig.call(this);return delete n.cell,Object.assign(e,n),e},e.fromConfig=function(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)},e.className="GRU",e}(Bv);hh.qb.SerializationMap.register($v);var Hv=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=e.units,n.activation=zg(void 0===e.activation?n.DEFAULT_ACTIVATION:e.activation),n.recurrentActivation=zg(void 0===e.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),n.useBias=null==e.useBias||e.useBias,n.kernelInitializer=rm(e.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=rm(e.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=rm(e.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.unitForgetBias=e.unitForgetBias,n.kernelRegularizer=Kg(e.kernelRegularizer),n.recurrentRegularizer=Kg(e.recurrentRegularizer),n.biasRegularizer=Kg(e.biasRegularizer),n.kernelConstraint=rd(e.kernelConstraint),n.recurrentConstraint=rd(e.recurrentConstraint),n.biasConstraint=rd(e.biasConstraint),n.dropout=wd([1,xd([0,null==e.dropout?0:e.dropout])]),n.recurrentDropout=wd([1,xd([0,null==e.recurrentDropout?0:e.recurrentDropout])]),n.implementation=e.implementation,n.stateSize=[n.units,n.units],n.dropoutMask=null,n.recurrentDropoutMask=null,n}return mh(e,t),e.prototype.build=function(t){var e,n,r=(t=sm(t))[t.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var o=this.biasInitializer,i=this.units;e=new((n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mh(e,t),e.prototype.apply=function(t,e){var n=o.apply([i]),r=(new Ud).apply([i]),a=o.apply([2*i]);return Pd(Pd(n,r),a)},e}(Bd)).className="CustomInit",n)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,e,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){var r=null!=e.training&&e.training;if(3!==(t=t).length)throw new kh("LSTMCell expects 3 input Tensors (inputs, h, c), got "+t.length+".");var o=t[1],i=t[2];t=t[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Qv(function(){return Object(hh.cb)(t)},n.dropout,r,4)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Qv(function(){return Object(hh.cb)(o)},n.recurrentDropout,r,4));var a,s,u,l,c=n.dropoutMask,p=n.recurrentDropoutMask;if(1===n.implementation){var f=Nd(n.kernel.read(),0,n.units),h=Nd(n.kernel.read(),n.units,n.units),d=Nd(n.kernel.read(),2*n.units,n.units),m=Nd(n.kernel.read(),3*n.units,n.units),g=Nd(n.recurrentKernel.read(),0,n.units),v=Nd(n.recurrentKernel.read(),n.units,n.units),y=Nd(n.recurrentKernel.read(),2*n.units,n.units),b=Nd(n.recurrentKernel.read(),3*n.units,n.units),w=void 0,x=void 0,_=void 0,O=void 0;0<n.dropout&&n.dropout<1?(w=Object(hh.Va)(t,c[0]),x=Object(hh.Va)(t,c[1]),_=Object(hh.Va)(t,c[2]),O=Object(hh.Va)(t,c[3])):(w=t,x=t,_=t,O=t);var C=Ad(w,f),E=Ad(x,h),N=Ad(_,d),S=Ad(O,m);if(n.useBias){var I=Ed(n.bias.read(),0,n.units),P=Ed(n.bias.read(),n.units,n.units),k=Ed(n.bias.read(),2*n.units,n.units),T=Ed(n.bias.read(),3*n.units,n.units);C=Dd(C,I),E=Dd(E,P),N=Dd(N,k),S=Dd(S,T)}var A=void 0,R=void 0,M=void 0,D=void 0;0<n.recurrentDropout&&n.recurrentDropout<1?(A=Object(hh.Va)(o,p[0]),R=Object(hh.Va)(o,p[1]),M=Object(hh.Va)(o,p[2]),D=Object(hh.Va)(o,p[3])):(A=o,R=o,M=o,D=o),a=n.recurrentActivation.apply(Object(hh.f)(C,Ad(A,g))),s=n.recurrentActivation.apply(Object(hh.f)(E,Ad(R,v))),u=Object(hh.f)(Object(hh.Va)(s,i),Object(hh.Va)(a,n.activation.apply(Object(hh.f)(N,Ad(M,y))))),l=n.recurrentActivation.apply(Object(hh.f)(S,Ad(D,b)))}else{0<n.dropout&&n.dropout<1&&(t=Object(hh.Va)(t,c[0]));var j=Ad(t,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(o=Object(hh.Va)(o,p[0])),j=Object(hh.f)(j,Ad(o,n.recurrentKernel.read())),n.useBias&&(j=Dd(j,n.bias.read()));var L=Nd(j,0,n.units),z=Nd(j,n.units,n.units),V=Nd(j,2*n.units,n.units),B=Nd(j,3*n.units,n.units);a=n.recurrentActivation.apply(L),s=n.recurrentActivation.apply(z),u=Object(hh.f)(Object(hh.Va)(s,i),Object(hh.Va)(a,n.activation.apply(V))),l=n.recurrentActivation.apply(B)}var F=Object(hh.Va)(l,n.activation.apply(u));return[F,F,u]})},e.prototype.getConfig=function(){var e={units:this.units,activation:jg(this.activation),recurrentActivation:jg(this.recurrentActivation),useBias:this.useBias,kernelInitializer:nm(this.kernelInitializer),recurrentInitializer:nm(this.recurrentInitializer),biasInitializer:nm(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Hg(this.kernelRegularizer),recurrentRegularizer:Hg(this.recurrentRegularizer),biasRegularizer:Hg(this.biasRegularizer),activityRegularizer:Hg(this.activityRegularizer),kernelConstraint:ed(this.kernelConstraint),recurrentConstraint:ed(this.recurrentConstraint),biasConstraint:ed(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="LSTMCell",e}(Fv);hh.qb.SerializationMap.register(Hv);var Gv=function(t){function e(e){return 0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Hv(e),t.call(this,e)||this}return mh(e,t),e.prototype.call=function(e,n){var r=this;return Object(hh.Qb)(function(){return null!=r.cell.dropoutMask&&(Object(hh.I)(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Object(hh.I)(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t.prototype.call.call(r,e,{mask:null==n?null:n.mask,training:null==n?null:n.training,initialState:null==n?null:n.initialState})})},Object.defineProperty(e.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unitForgetBias",{get:function(){return this.cell.unitForgetBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={units:this.units,activation:jg(this.activation),recurrentActivation:jg(this.recurrentActivation),useBias:this.useBias,kernelInitializer:nm(this.kernelInitializer),recurrentInitializer:nm(this.recurrentInitializer),biasInitializer:nm(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Hg(this.kernelRegularizer),recurrentRegularizer:Hg(this.recurrentRegularizer),biasRegularizer:Hg(this.biasRegularizer),activityRegularizer:Hg(this.activityRegularizer),kernelConstraint:ed(this.kernelConstraint),recurrentConstraint:ed(this.recurrentConstraint),biasConstraint:ed(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=t.prototype.getConfig.call(this);return delete n.cell,Object.assign(e,n),e},e.fromConfig=function(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)},e.className="LSTM",e}(Bv);hh.qb.SerializationMap.register(Gv);var Kv=function(t){function e(e){var n=t.call(this,e)||this;return n.cells=e.cells,n}return mh(e,t),Object.defineProperty(e.prototype,"stateSize",{get:function(){for(var t=[],e=0,n=this.cells.slice().reverse();e<n.length;e++){var r=n[e];Array.isArray(r.stateSize)?t.push.apply(t,r.stateSize):t.push(r.stateSize)}return t},enumerable:!0,configurable:!0}),e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){for(var r=(t=t).slice(1),o=[],i=0,a=n.cells.slice().reverse();i<a.length;i++){var s=a[i];Array.isArray(s.stateSize)?o.push(r.splice(0,s.stateSize.length)):o.push(r.splice(0,1))}o.reverse();for(var u,l=[],c=0;c<n.cells.length;++c)s=n.cells[c],r=o[c],u=0===c?[t[0]].concat(r):[u[0]].concat(r),u=s.call(u,e),l.push(u.slice(1));r=[];for(var p=0,f=l.slice().reverse();p<f.length;p++)r.push.apply(r,f[p]);return[u[0]].concat(r)})},e.prototype.build=function(t){var e;om(t)&&(t=t[0]),t=t;for(var n=0,r=this.cells;n<r.length;n++){var o=r[n];o.build(t),e=Array.isArray(o.stateSize)?o.stateSize[0]:o.stateSize,t=[t[0],e]}this.built=!0},e.prototype.getConfig=function(){for(var e=[],n=0,r=this.cells;n<r.length;n++){var o=r[n];e.push({className:this.getClassName(),config:o.getConfig()})}var i={cells:e},a=t.prototype.getConfig.call(this);return Object.assign(i,a),i},e.fromConfig=function(t,e,n){void 0===n&&(n={});for(var r=[],o=0,i=e.cells;o<i.length;o++)r.push(ig(i[o],n));return new t({cells:r})},Object.defineProperty(e.prototype,"trainableWeights",{get:function(){if(!this.trainable)return[];for(var t=[],e=0,n=this.cells;e<n.length;e++)t.push.apply(t,n[e].trainableWeights);return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){for(var t=[],e=0,n=this.cells;e<n.length;e++){var r=n[e];t.push.apply(t,r.nonTrainableWeights)}if(!this.trainable){for(var o=[],i=0,a=this.cells;i<a.length;i++)o.push.apply(o,(r=a[i]).trainableWeights);return o.concat(t)}return t},enumerable:!0,configurable:!0}),e.prototype.getWeights=function(){for(var t=[],e=0,n=this.cells;e<n.length;e++)t.push.apply(t,n[e].weights);return pm(t)},e.prototype.setWeights=function(t){for(var e=[],n=0,r=this.cells;n<r.length;n++)for(var o=r[n],i=t.splice(o.weights.length),a=0;a<o.weights.length;++a)e.push([o.weights[a],i[a]]);fm(e)},e.className="StackedRNNCells",e}(Fv);function Qv(t,e,n,r){function o(){return jd(t(),Sh(e))}if(void 0===n&&(n=null),void 0===r&&(r=1),r>1){for(var i=[],a=0;a<r;a++)i.push(Ld(o,t,n));return i.forEach(function(t){return Object(hh.Z)(t)}),i}return Object(hh.Z)(Ld(o,t,n))}hh.qb.SerializationMap.register(Kv);var Xv=function(t){function e(e){var n=t.call(this,e)||this;return n.layer=e.layer,n}return mh(e,t),e.prototype.build=function(t){this.built=!0},Object.defineProperty(e.prototype,"trainable",{get:function(){return null!=this.layer&&this.layer.trainable},set:function(t){null!=this.layer&&(this.layer.trainable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.layer.trainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.layer.nonTrainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updates",{get:function(){return this.layer._updates},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"losses",{get:function(){return this.layer.losses},enumerable:!0,configurable:!0}),e.prototype.getWeights=function(){return this.layer.getWeights()},e.prototype.setWeights=function(t){this.layer.setWeights(t)},e.prototype.getConfig=function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.fromConfig=function(t,e,n){void 0===n&&(n={});var r=ig(e.layer,n);delete e.layer;var o={layer:r};return Object.assign(o,e),new t(o)},e}(ym),Zv=function(t){function e(e){var n=t.call(this,e)||this;return n.supportsMasking=!0,n}return mh(e,t),e.prototype.build=function(e){if((e=sm(e)).length<3)throw new kh("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(e));this.inputSpec=[{shape:e}];var n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),t.prototype.build.call(this,e)},e.prototype.computeOutputShape=function(t){var e=[(t=sm(t))[0]].concat(t.slice(2)),n=this.layer.computeOutputShape(e);return[n[0],t[1]].concat(n.slice(1))},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){return Vv(function(t,r){return[n.layer.call(t,e),[]]},t=am(t),[],!1,null,null,!1)[1]})},e.className="TimeDistributed",e}(Xv);hh.qb.SerializationMap.register(Zv);var Jv=["sum","mul","concat","ave"],Yv=function(t){function e(e){var n=t.call(this,e)||this,r=e.layer.getConfig();if(n.forwardLayer=ig({className:e.layer.getClassName(),config:r}),r.goBackwards=!0!==r.goBackwards,n.backwardLayer=ig({className:e.layer.getClassName(),config:r}),n.forwardLayer.name="forward_"+n.forwardLayer.name,n.backwardLayer.name="backward_"+n.backwardLayer.name,Hh(Jv,"BidirectionalMergeMode",e.mergeMode),n.mergeMode=e.mergeMode,e.weights)throw new Th("weights support is not implemented for Bidirectional layer yet.");return n._stateful=e.layer.stateful,n.returnSequences=e.layer.returnSequences,n.returnState=e.layer.returnState,n.supportsMasking=!0,n._trainable=!0,n.inputSpec=e.layer.inputSpec,n.numConstants=null,n}return mh(e,t),Object.defineProperty(e.prototype,"trainable",{get:function(){return this._trainable},set:function(t){this._trainable=t,null!=this.forwardLayer&&(this.forwardLayer.trainable=t),null!=this.backwardLayer&&(this.backwardLayer.trainable=t)},enumerable:!0,configurable:!0}),e.prototype.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},e.prototype.setWeights=function(t){var e=Math.floor(t.length/2);this.forwardLayer.setWeights(t.slice(0,e)),this.backwardLayer.setWeights(t.slice(e))},e.prototype.computeOutputShape=function(t){var e,n,r,o=this.forwardLayer.computeOutputShape(t);return Array.isArray(o)&&Array.isArray(o[0])||(o=[o]),o=o,this.returnState?(r=o.slice(1),e=o[0]):e=o[0],e=e,"concat"===this.mergeMode?(e[e.length-1]*=2,n=[e]):n=null==this.mergeMode?[e,e.slice()]:[e],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[e].concat(r).concat(r.slice()):jh(n)},e.prototype.apply=function(e,n){var r=null==n?null:n.initialState,o=null==n?null:n.constants;null==n&&(n={});var i=zv(e,r,o,this.numConstants);if(e=i.inputs,r=i.initialState,o=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==o)return t.prototype.apply.call(this,e,n);var a=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new kh("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,a.push.apply(a,r);var l=r.map(function(t){return new hm({shape:t.shape})});this.forwardLayer.stateSpec=l.slice(0,u/2),this.backwardLayer.stateSpec=l.slice(u/2),s.push.apply(s,l)}if(null!=o)throw new Th("Support for constants in Bidirectional layers is not implemented yet.");for(var c=a[0]instanceof dm,p=0,f=a;p<f.length;p++)if(f[p]instanceof dm!==c)throw new kh("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){var h=[e].concat(a),d=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=d;var g=t.prototype.apply.call(this,h,n);return this.inputSpec=m,g}return t.prototype.apply.call(this,e,n)},e.prototype.call=function(t,e){var n=this;return Object(hh.Qb)(function(){if(null!=e.mask)throw new Th("The support for masking is not implemented for Bidirectional layers yet.");var r,o,i,a,s=e.initialState;if(null==s)r=n.forwardLayer.call(t,e),o=n.backwardLayer.call(t,e);else{var u=s.slice(0,s.length/2),l=s.slice(s.length/2);r=n.forwardLayer.call(t,Object.assign(e,{initialState:u})),o=n.forwardLayer.call(t,Object.assign(e,{initialState:l}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(o.slice(1))),r=r[0],o=o[0]),n.returnSequences&&(o=Object(hh.lb)(o,1)),"concat"===n.mergeMode?a=Id([r,o]):"sum"===n.mergeMode?a=Object(hh.f)(r,o):"ave"===n.mergeMode?a=Object(hh.Va)(Sh(.5),Object(hh.f)(r,o)):"mul"===n.mergeMode?a=Object(hh.Va)(r,o):null==n.mergeMode&&(a=[r,o]),n.returnState?null==n.mergeMode?a.concat(i):[a].concat(i):a})},e.prototype.resetStates=function(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},e.prototype.build=function(t){var e=this;fd(this.forwardLayer.name,function(){e.forwardLayer.build(t)}),fd(this.backwardLayer.name,function(){e.backwardLayer.build(t)}),this.built=!0},Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={mergeMode:this.mergeMode},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.fromConfig=function(t,e){var n=ig(e.layer);if(delete e.layer,null!=e.numConstants)throw new Th("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=e;return r.layer=n,new t(r)},e.className="Bidirectional",e}(Xv);function ty(t){return new Iv(t)}function ey(t){return new Tv(t)}function ny(t){return new Mv(t)}function ry(t){return new Lv(t)}function oy(t){return new Sv(t)}function iy(t){return new kv(t)}hh.qb.SerializationMap.register(Yv),Object.freeze({inputLayer:function(t){return new bm(t)},elu:function(t){return new Bg(t)},leakyReLU:function(t){return new Vg(t)},softmax:function(t){return new Ug(t)},thresholdedReLU:function(t){return new Fg(t)},conv1d:function(t){return new ov(t)},conv2d:function(t){return new ev(t)},conv2dTranspose:function(t){return new nv(t)},separableConv2d:function(t){return new rv(t)},cropping2D:function(t){return new iv(t)},upSampling2d:function(t){return new av(t)},depthwiseConv2d:function(t){return new sv(t)},activation:function(t){return new pv(t)},dense:function(t){return new lv(t)},dropout:function(t){return new uv(t)},flatten:function(t){return new cv(t)},repeatVector:function(t){return new fv(t)},reshape:function(t){return new hv(t)},embedding:function(t){return new dv(t)},add:function(t){return new gv(t)},average:function(t){return new yv(t)},concatenate:function(t){return new xv(t)},maximum:function(t){return new bv(t)},minimum:function(t){return new wv(t)},multiply:function(t){return new vv(t)},batchNormalization:function(t){return new Ov(t)},zeroPadding2d:function(t){return new Cv(t)},averagePooling1d:ty,avgPool1d:function(t){return ty(t)},avgPooling1d:function(t){return ty(t)},averagePooling2d:ey,avgPool2d:function(t){return ey(t)},avgPooling2d:function(t){return ey(t)},globalAveragePooling1d:function(t){return new Rv(t)},globalAveragePooling2d:function(t){return new jv(t)},globalMaxPooling1d:ny,globalMaxPooling2d:ry,maxPooling1d:oy,maxPooling2d:iy,gru:function(t){return new $v(t)},gruCell:function(t){return new qv(t)},lstm:function(t){return new Gv(t)},lstmCell:function(t){return new Hv(t)},simpleRNN:function(t){return new Wv(t)},simpleRNNCell:function(t){return new Uv(t)},rnn:function(t){return new Bv(t)},stackedRNNCells:function(t){return new Kv(t)},bidirectional:function(t){return new Yv(t)},timeDistributed:function(t){return new Zv(t)},globalMaxPool1d:ny,globalMaxPool2d:ry,maxPool1d:oy,maxPool2d:iy,Layer:ym,input:function(t){return wm(t)}}),Object.freeze({binaryAccuracy:function(t,e){return Wm(t,e)},binaryCrossentropy:function(t,e){return $m(t,e)},categoricalAccuracy:function(t,e){return qm(t,e)},categoricalCrossentropy:function(t,e){return Ym(t,e)},cosineProximity:function(t,e){return Fm(t,e)},meanAbsoluteError:function(t,e){return Pm(t,e)},meanAbsolutePercentageError:function(t,e){return km(t,e)},MAPE:function(t,e){return km(t,e)},mape:function(t,e){return km(t,e)},meanSquaredError:function(t,e){return Im(t,e)},MSE:function(t,e){return Im(t,e)},mse:function(t,e){return Im(t,e)}}),Object.freeze({l1l2:function(t){return new qg(t)},l1:function(t){return function(t){return new qg({l1:null!=t?t.l1:null,l2:0})}(t)},l2:function(t){return function(t){return new qg({l2:null!=t?t.l2:null,l1:0})}(t)}}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.model=null,e}mh(e,t),e.prototype.setModel=function(t){if(!(t instanceof _g))throw new Error("model must be a Model, not some other Container");this.model=t}}(_m),n("tgWb");var ay={"\xa1":76,y:74,"'":4,U:44,o:65,"\xbf":77,d:55,",":7,")":6,B:25,"\u0301":79,7:17,e:56,E:28,0:10,1:11,"!":2,K:34,h:59,A:24,O:38,":":20,".":9,r:68,"]":51,"\u0303":80,c:54,"[":50,m:63,Q:40,i:60,";":21,4:14,Z:49,R:41,g:58,W:46,"<":22," ":1,L:35,'"':3,q:67,j:61,G:30,9:19,x:73,C:26,"\u0300":78,"-":8,6:16,a:52,"(":5,"\n":0,P:39,V:45,s:69,"\u0308":81,"\u2013":82,n:64,F:29,u:71,z:75,S:42,v:72,I:32,X:47,t:70,p:66,3:13,N:37,b:53,M:36,J:33,D:27,Y:48,8:18,"?":23,5:15,l:62,f:57,T:43,2:12,H:31},sy={0:"\n",1:" ",2:"!",3:'"',4:"'",5:"(",6:")",7:",",8:"-",9:".",10:"0",11:"1",12:"2",13:"3",14:"4",15:"5",16:"6",17:"7",18:"8",19:"9",20:":",21:";",22:"<",23:"?",24:"A",25:"B",26:"C",27:"D",28:"E",29:"F",30:"G",31:"H",32:"I",33:"J",34:"K",35:"L",36:"M",37:"N",38:"O",39:"P",40:"Q",41:"R",42:"S",43:"T",44:"U",45:"V",46:"W",47:"X",48:"Y",49:"Z",50:"[",51:"]",52:"a",53:"b",54:"c",55:"d",56:"e",57:"f",58:"g",59:"h",60:"i",61:"j",62:"l",63:"m",64:"n",65:"o",66:"p",67:"q",68:"r",69:"s",70:"t",71:"u",72:"v",73:"x",74:"y",75:"z",76:"\xa1",77:"\xbf",78:"\u0300",79:"\u0301",80:"\u0303",81:"\u0308",82:"\u2013"},uy=function(){function t(){}return t.prototype.ngOnInit=function(){var t,e=this;this.generateButton=document.getElementById("generate-button"),console.log("Loading model..."),(t="assets/char_rnn/model.json",function(t){return vh(this,void 0,void 0,function(){var e;return yh(this,function(n){if("string"==typeof t){if(0===(e=hh.Y.getLoadHandlers(t)).length)e.push(hh.Y.browserHTTPRequest(t));else if(e.length>1)throw new kh("Found more than one ("+e.length+") load handlers for URL '"+t+"'");t=e[0]}return[2,function(t,e){return vh(this,void 0,void 0,function(){var e,n,r,o,i;return yh(this,function(a){switch(a.label){case 0:if(null==t.load)throw new kh("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,t.load()];case 1:if(e=a.sent(),null!=(n=e.modelTopology).model_config&&(n=n.model_config),r=ig(function t(e,n){if(null===e)return null;if("string"==typeof e)return Vh(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var r=[],o=e.length,i=0;i<o;++i){var a=e[i];ag(n,i,a)?r.push(a):r.push(t(a,n))}return r}for(var s={},u=0,l=Object.keys(e);u<l.length;u++){var c=l[u],p=e[c];if("name"===c&&"string"==typeof p)s[c]=p;else{var f=Vh(c);s[f]=t(p,f)}}return s}(n),void 0),null!=e.weightData){if(null==e.weightSpecs)throw new kh("Model artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");o=!1,i=!0,r.loadWeights(hh.Y.decodeWeights(e.weightData,e.weightSpecs),o,i)}return[2,r]}})})}(t)]})})}(t)).then(function(t){e.cervantesModel=t,console.log("Model load."),e.enableGeneration()})},t.prototype.enableGeneration=function(){this.generateButton.innerText="Generate new text",this.checked=!1},t.prototype.cervantesTalk=function(t){return e=this,void 0,r=function(){var e,n,r,o=this;return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(i){switch(i.label){case 0:this.generatedSentence=t,this.checked=!0,this.generateButton.innerText="Presta atenci\xf3n a lo que dice Cervantes",e=0,i.label=1;case 1:return e<500?[4,(n=hh.Qb(function(){var e=o.convert(t),n=o.cervantesModel.predict(e);return o.sample(n)})).data()]:[3,5];case 2:return r=i.sent(),n.dispose(),this.generatedSentence=t+=sy[r],[4,hh.Ya()];case 3:i.sent(),i.label=4;case 4:return e++,[3,1];case 5:return this.enableGeneration(),[2]}})},new((n=void 0)||(n=Promise))(function(t,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function a(t){try{s(r.throw(t))}catch(t){o(t)}}function s(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,a)}s((r=r.apply(e,[])).next())});var e,n,r},t.prototype.sample=function(t){return hh.Qb(function(){t=t.log();var e=hh.nb(.4);return(t=(t=(t=(t=t.div(e)).exp()).div(t.sum())).mul(hh.gb(t.shape))).argMax(1)})},t.prototype.convert=function(t){(t=(t=t.toLowerCase()).split("").filter(function(t){return t in ay}).join("")).length<40?t=t.padStart(40):t.length>40&&(t=t.substring(t.length-40));for(var e=hh.t([1,40,Object.keys(sy).length]),n=0;n<40;n++){var r=t.charAt(n);e.set(1,0,n,ay[r])}return e.toTensor()},t}(),ly=Qr({encapsulation:0,styles:[[""]],data:{}});function cy(t){return Ti(0,[(t()(),_o(0,0,null,null,13,"div",[["class","container"]],null,null,null,null,null)),(t()(),_o(1,0,null,null,12,"form",[],null,null,null,null,null)),(t()(),_o(2,0,null,null,5,"div",[],null,null,null,null,null)),(t()(),_o(3,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Ii(-1,null,["Cervantes Bot"])),(t()(),_o(5,0,null,null,0,"hr",[],null,null,null,null,null)),(t()(),_o(6,0,null,null,1,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),_o(7,0,[["input",1]],null,0,"input",[["class","form-control"],["placeholder","Dale una pista a Cervantes"],["type","text"]],null,null,null,null,null)),(t()(),_o(8,0,null,null,2,"div",[["class","form-inline justify-content-center"]],null,null,null,null,null)),(t()(),_o(9,0,null,null,1,"button",[["class","btn btn-dark"],["id","generate-button"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.cervantesTalk(function(t,e){var n=t.def.nodes[7];if(1&n.flags){var r=jr(t,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return Dr(t,n.nodeIndex).renderText;if(20240&n.flags)return Lr(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index 7")}(t).value)&&r),r},null,null)),(t()(),Ii(-1,null,[" Leyendo el Quijote de arriba a abajo... "])),(t()(),_o(11,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(t()(),_o(12,0,null,null,1,"blockquote",[],null,null,null,null,null)),(t()(),Ii(13,null,[" "," "]))],null,function(t,e){var n=e.component;t(e,9,0,n.checked),t(e,13,0,n.generatedSentence)})}var py=Bo("app-cervantes",uy,function(t){return Ti(0,[(t()(),_o(0,0,null,null,1,"app-cervantes",[],null,null,null,cy,ly)),li(1,114688,null,0,uy,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),fy=function(){function t(){}return t.prototype.ngOnInit=function(){},t}(),hy=Qr({encapsulation:0,styles:[[""]],data:{}});function dy(t){return Ti(0,[(t()(),_o(0,0,null,null,1,"div",[["class","container"]],null,null,null,null,null)),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:null,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:0}}],null,null)}var my=Qr({encapsulation:0,styles:[['.wrapper[_ngcontent-%COMP%]{display:inline-flex;justify-content:flex-end;border:10px solid #ff943d;transition:border-color .2s ease-in}.wrapper[_ngcontent-%COMP%]:hover{border:10px solid #ef6c00;transition:border-color .2s ease-in}canvas[_ngcontent-%COMP%]{cursor:crosshair}.row[_ngcontent-%COMP%]{margin:10vh 5vw}.flip[_ngcontent-%COMP%]{-webkit-transform:scaleX(-1);transform:scaleX(-1)}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%}.page-wrap[_ngcontent-%COMP%]{min-height:100%;margin-bottom:-60px}.page-wrap[_ngcontent-%COMP%]:after{content:"";display:block}.page-wrap[_ngcontent-%COMP%]:after, .site-footer[_ngcontent-%COMP%]{padding-top:10px;height:50px}.site-footer[_ngcontent-%COMP%]{background:#efefef;text-align:center}input[_ngcontent-%COMP%]{text-align:center}']],data:{}});function gy(t){return Ti(0,[(t()(),_o(0,0,null,null,1,"app-layout",[],null,null,null,dy,hy)),li(1,114688,null,0,fy,[],null,null),(t()(),_o(2,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),li(3,212992,null,0,zf,[Lf,kn,Fe,[8,null],Tn],null,null)],function(t,e){t(e,1,0),t(e,3,0)},null)}var vy=Bo("app-root",wu,function(t){return Ti(0,[(t()(),_o(0,0,null,null,1,"app-root",[],null,null,null,gy,my)),li(1,114688,null,0,wu,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),yy=function(){},by=function(){},wy=function(t,e,n){return new za(bu,[wu],function(t){return function(t){for(var e={},n=[],r=!1,o=0;o<t.length;o++){var i=t[o];i.token===ce&&!0===i.value&&(r=!0),1073741824&i.flags&&n.push(i.token),i.index=o,e[Hr(i.token)]=i}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}([To(512,Fe,Ue,[[8,[uh,fh,py,vy]],[3,Fe],qe]),To(5120,or,sr,[[3,or]]),To(4608,hl,dl,[or,[2,fl]]),To(5120,Ce,Ee,[]),To(5120,Jn,ir,[]),To(5120,Yn,ar,[]),To(4608,yc,bc,[gl]),To(6144,Ar,null,[yc]),To(4608,pc,hc,[]),To(5120,zl,function(t,e,n,r,o,i,a,s){return[new lc(t,e,n),new vc(r),new dc(o,i,a,s)]},[gl,Ze,Ie,gl,gl,pc,ke,[2,fc]]),To(4608,Vl,Vl,[zl,Ze]),To(135680,Ul,Ul,[gl]),To(4608,Ql,Ql,[Vl,Ul]),To(6144,wn,null,[Ql]),To(6144,Fl,null,[Ul]),To(4608,an,an,[Ze]),To(5120,Hp,eh,[Rf]),To(4608,Uf,Uf,[]),To(6144,Bf,null,[Uf]),To(135680,Wf,Wf,[Rf,On,Ae,Lt,Bf]),To(4608,Ff,Ff,[]),To(5120,qf,Xf,[Rf,yl,$f]),To(5120,ih,oh,[nh]),To(5120,Pe,function(t){return[t]},[ih]),To(1073742336,ml,ml,[]),To(1024,le,Sc,[]),To(1024,hn,function(){return[Kf()]},[]),To(512,nh,nh,[Lt]),To(1024,_e,function(t,e){return[(n=t,Dl("probe",Ll),Dl("coreTokens",i({},jl,(n||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return Ll}),rh(e)];var n},[[2,hn],nh]),To(512,Oe,Oe,[[2,_e]]),To(131584,yn,yn,[Ze,ke,Lt,le,Fe,Oe]),To(1073742336,ur,ur,[yn]),To(1073742336,Ic,Ic,[[3,Ic]]),To(1024,Hf,Jf,[[3,Rf]]),To(512,dp,mp,[]),To(512,Lf,Lf,[]),To(256,$f,{},[]),To(1024,rl,Zf,[el,[2,ol],$f]),To(512,il,il,[rl]),To(512,Ae,Ae,[]),To(512,On,Sn,[Ae,[2,En]]),To(1024,Nf,function(){return[[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:lh},{path:"cervantes",component:uy}]]},[]),To(1024,Rf,th,[yn,dp,Lf,il,Lt,On,Ae,Nf,$f,[2,If],[2,Cf]]),To(1073742336,Qf,Qf,[[2,Hf],[2,Rf]]),To(1073742336,yy,yy,[]),To(1073742336,by,by,[]),To(1073742336,bu,bu,[]),To(256,ce,!0,[])])})}();(function(){if(cn)throw new Error("Cannot enable prod mode after platform setup.");ln=!1})(),Nc().bootstrapModuleFactory(wy).catch(function(t){return console.log(t)})}},[[3,0]]]);